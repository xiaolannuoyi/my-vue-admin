{"version":3,"sources":["webpack:///./node_modules/ajv/lib/dotjs/format.js","webpack:///./node_modules/ajv/lib/dotjs/not.js","webpack:///./node_modules/ajv/lib/dotjs/const.js","webpack:///./node_modules/jsoneditor/src/js/assets/jsonlint/jsonlint.js","webpack:///./node_modules/brace/index.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///./node_modules/jsoneditor/src/js/ContextMenu.js","webpack:///./node_modules/jmespath/jmespath.js","webpack:///./node_modules/url/url.js","webpack:///./node_modules/drag-tracker/dist/drag-tracker.js","webpack:///./node_modules/co/index.js","webpack:///./node_modules/node-libs-browser/node_modules/punycode/punycode.js","webpack:///./node_modules/vanilla-picker/dist/vanilla-picker.mjs","webpack:///./node_modules/jsoneditor/src/js/showTransformModal.js","webpack:///./node_modules/jsoneditor/src/js/autocomplete.js","webpack:///./node_modules/jsoneditor/src/js/Highlighter.js","webpack:///./node_modules/jsoneditor/src/js/vanilla-picker/index.js","webpack:///./node_modules/jsoneditor/src/js/treemode.js","webpack:///./node_modules/jsoneditor/src/js/JSONEditor.js","webpack:///./node_modules/url/util.js","webpack:///./node_modules/jsoneditor/src/js/i18n.js","webpack:///./node_modules/jsoneditor/src/js/History.js","webpack:///./node_modules/jsoneditor/src/js/appendNodeFactory.js","webpack:///./node_modules/ajv/lib/dotjs/oneOf.js","webpack:///./node_modules/jsoneditor/src/js/ace/index.js","webpack:///./node_modules/brace/ext/searchbox.js","webpack:///./node_modules/ajv/lib/dotjs/contains.js","webpack:///./node_modules/ajv/lib/dotjs/anyOf.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/jsoneditor/src/js/showMoreNodeFactory.js","webpack:///./node_modules/fast-deep-equal/index.js","webpack:///./node_modules/picomodal/src/picoModal.js","webpack:///./node_modules/ajv/lib/dotjs/propertyNames.js","webpack:///./node_modules/ajv/lib/dotjs/ref.js","webpack:///./node_modules/ajv/lib/dotjs/pattern.js","webpack:///./node_modules/jsoneditor/src/js/assets/selectr/selectr.js","webpack:///./node_modules/ajv/lib/dotjs/custom.js","webpack:///./node_modules/ajv/lib/compile/ucs2length.js","webpack:///./node_modules/jsoneditor/src/js/polyfills.js","webpack:///./node_modules/ajv/lib/dotjs/_limitProperties.js","webpack:///./node_modules/ajv/lib/ajv.js","webpack:///./node_modules/ajv/lib/dotjs/items.js","webpack:///./node_modules/jsoneditor/src/js/ace/theme-jsoneditor.js","webpack:///./node_modules/brace/mode/json.js","webpack:///./node_modules/jsoneditor/src/js/textmode.js","webpack:///./node_modules/ajv/lib/compile/error_classes.js","webpack:///./node_modules/json-schema-traverse/index.js","webpack:///./src/views/components-demo/jsoneditor/index.vue?63d7","webpack:///src/views/components-demo/jsoneditor/index.vue","webpack:///./src/views/components-demo/jsoneditor/index.vue?467f","webpack:///./src/views/components-demo/jsoneditor/index.vue?4797","webpack:///./node_modules/ajv/lib/compile/index.js","webpack:///./node_modules/jsoneditor/src/js/SearchBox.js","webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/jsoneditor/src/js/ModeSwitcher.js","webpack:///./node_modules/ajv/lib/dotjs/_limitLength.js","webpack:///./node_modules/ajv/lib/compile/formats.js","webpack:///./node_modules/jsoneditor/src/js/createAbsoluteAnchor.js","webpack:///./node_modules/ajv/lib/dotjs/multipleOf.js","webpack:///./node_modules/ajv/lib/compile/resolve.js","webpack:///./node_modules/ajv/lib/$data.js","webpack:///./node_modules/jsoneditor/src/js/util.js","webpack:///./node_modules/ajv/lib/compile/async.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///./node_modules/ajv/lib/dotjs/required.js","webpack:///./node_modules/jsoneditor/src/js/Node.js","webpack:///./node_modules/ajv/lib/dotjs/dependencies.js","webpack:///./node_modules/ajv/lib/compile/schema_obj.js","webpack:///./node_modules/ajv/lib/dotjs/properties.js","webpack:///./node_modules/ajv/lib/dotjs/_limit.js","webpack:///./node_modules/ajv/lib/compile/rules.js","webpack:///./src/views/components-demo/jsoneditor/index.vue?0f6f","webpack:///./node_modules/ajv/lib/dotjs/uniqueItems.js","webpack:///./node_modules/ajv/lib/dotjs/validate.js","webpack:///./node_modules/ajv/lib/dotjs/_limitItems.js","webpack:///./node_modules/ajv/lib/patternGroups.js","webpack:///./node_modules/jsoneditor/index.js","webpack:///./node_modules/querystring-es3/encode.js","webpack:///./node_modules/json-source-map/index.js","webpack:///./node_modules/ajv/lib/dotjs/enum.js","webpack:///./node_modules/brace/worker/json.js","webpack:///./node_modules/javascript-natural-sort/naturalSort.js","webpack:///./node_modules/ajv/lib/dotjs/allOf.js","webpack:///./node_modules/ajv/lib/cache.js","webpack:///./node_modules/ajv/lib/compile/_rules.js","webpack:///./node_modules/jsoneditor/src/js/TreePath.js","webpack:///./node_modules/fast-json-stable-stringify/index.js","webpack:///./node_modules/ajv/lib/compile/util.js","webpack:///./node_modules/jsoneditor/src/js/showSortModal.js","webpack:///./node_modules/@sphinxxxx/color-conversion/dist/color-conversion.js","webpack:///./node_modules/ajv/lib/keyword.js"],"names":["module","exports","it","$keyword","$ruleType","out","$lvl","level","$dataLvl","dataLevel","$schema","schema","$schemaPath","schemaPath","util","getProperty","$errSchemaPath","errSchemaPath","$breakOnError","opts","allErrors","$data","format","$schemaValue","$isData","getData","dataPathArr","$unknownFormats","unknownFormats","$allowUnknown","Array","isArray","$format","$isObject","$formatType","async","formats","logger","warn","indexOf","Error","RegExp","validate","type","$async","$formatRef","$$outStack","push","createErrors","toQuotedString","messages","escapeQuotes","verbose","__err","pop","compositeRule","$errs","$it","copy","$nextValid","schemaHasRules","RULES","all","$allErrorsOption","$wasComposite","$valid","jsonlint","parser","trace","yy","symbols_","terminals_","2","4","6","8","10","11","14","17","18","21","22","23","24","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","length","this","$","replace","Number","table","3","5","7","9","12","13","15","16","1","19","20","25","defaultActions","parseError","str","hash","parse","input","self","stack","vstack","lstack","recovering","TERROR","EOF","lexer","setInput","yylloc","yyloc","popStack","n","lex","token","symbol","preErrorSymbol","state","action","r","p","len","newState","expected","yyval","errStr","showPosition","join","text","match","line","loc","toString","first_line","last_line","first_column","last_column","call","slice","_input","_more","_less","done","matched","conditionStack","ch","lines","unput","more","less","pastInput","past","substr","upcomingInput","next","pre","c","tempMatch","index","rules","_currentRules","i","options","flex","begin","condition","popState","conditions","topState","pushState","yy_","$avoiding_name_collisions","YY_START","bind","ACE_NAMESPACE","global","window","acequirejs","define","deps","payload","arguments","modules","payloads","original","apply","console","error","_acequire","parentId","callback","lookup","undefined","Object","prototype","params","l","dep","acequire","packagedModule","normalizeModule","moduleName","chunks","split","charAt","base","previous","mod","id","uri","packaged","req","returnValue","exportAce","ns","root","ace","real","exec","test","String","compliantExecNpcg","compliantLastIndexIncrement","x","lastIndex","getNativeFlags","regex","ignoreCase","multiline","extended","sticky","array","item","from","name","r2","source","_xregexp","captureNames","Empty","Function","that","target","TypeError","args","bound","result","concat","defineGetter","defineSetter","lookupGetter","lookupSetter","supportsAccessors","prototypeOfArray","prototypeOfObject","_toString","owns","hasOwnProperty","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","splice","makeArray","a","lengthBefore","array_splice","start","deleteCount","pos","removeCount","Math","max","removed","insert","add","remove","min","tailOldPos","tailNewPos","tailCount","lengthAfterRemove","obj","createEmpty","boxedString","splitString","forEach","fun","object","toObject","thisp","map","filter","value","every","some","reduce","reduceRight","sought","toInteger","lastIndexOf","abs","getPrototypeOf","__proto__","constructor","getOwnPropertyDescriptor","ERR_NON_OBJECT","property","descriptor","enumerable","configurable","getter","setter","get","set","getOwnPropertyNames","keys","create","empty","propertyIsEnumerable","isPrototypeOf","toLocaleString","valueOf","properties","Type","defineProperties","doesDefinePropertyWork","defineProperty","exception","definePropertyWorksOnObject","definePropertyWorksOnDom","document","createElement","definePropertyFallback","ERR_NON_OBJECT_DESCRIPTOR","ERR_NON_OBJECT_TARGET","ERR_ACCESSORS_NOT_SUPPORTED","seal","freeze","freezeObject","preventExtensions","isSealed","isFrozen","isExtensible","hasDontEnumBug","dontEnums","dontEnumsLength","key","ii","dontEnum","Date","now","getTime","ws","trim","trimBeginRegexp","trimEndRegexp","floor","o","XHTML_NS","getDocumentHead","doc","head","getElementsByTagName","documentElement","tag","createElementNS","hasCssClass","el","classes","className","addCssClass","removeCssClass","toggleCssClass","setCssClass","node","include","hasCssString","sheets","createStyleSheet","styleSheets","owningElement","importCssString","cssText","style","appendChild","createTextNode","importCssStylsheet","link","rel","href","getInnerWidth","element","parseInt","computedStyle","clientWidth","getInnerHeight","clientHeight","scrollbarWidth","inner","width","minWidth","height","display","outer","position","left","overflow","body","noScrollbar","offsetWidth","withScrollbar","removeChild","pageYOffset","getPageScrollTop","getPageScrollLeft","pageXOffset","scrollTop","scrollLeft","getComputedStyle","currentStyle","setInnerHtml","innerHtml","cloneNode","innerHTML","parentNode","replaceChild","setInnerText","innerText","textContent","getInnerText","getParentWindow","defaultView","parentWindow","inherits","ctor","superCtor","super_","writable","mixin","implement","proto","oop","Keys","ret","MODIFIER_KEYS","224","KEY_MODS","FUNCTION_KEYS","27","32","33","34","35","36","37","38","39","40","44","45","46","96","97","98","99","100","101","102","103","104","105","112","113","114","115","116","117","118","119","120","121","122","123","144","145","PRINTABLE_KEYS","48","49","50","51","52","53","54","55","56","57","59","61","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","107","109","110","186","187","188","189","190","191","192","219","220","221","222","111","106","toLowerCase","enter","escape","esc","del","mods","pow","keyCodeToString","keyCode","keyString","fromCharCode","OS","LINUX","MAC","WINDOWS","getOS","isMac","isLinux","navigator","os","platform","ua","userAgent","isWin","isIE","appName","parseFloat","isOldIE","isGecko","isMozilla","Controllers","controllers","product","isOldGecko","isOpera","opera","isWebKit","isChrome","isAIR","isIPad","isChromeOS","isIOS","MSStream","useragent","pressedKeys","ts","addListener","elem","addEventListener","attachEvent","wrapper","event","_wrapper","removeListener","removeEventListener","detachEvent","stopEvent","e","stopPropagation","preventDefault","cancelBubble","getButton","ctrlKey","altKey","shiftKey","button","capture","eventHandler","releaseCaptureHandler","onMouseUp","addTouchMoveListener","startx","starty","touches","touchObj","clientX","clientY","wheelX","wheelY","addMouseWheelListener","factor","wheelDeltaX","wheelDeltaY","wheelDelta","deltaMode","DOM_DELTA_PIXEL","deltaX","deltaY","DOM_DELTA_LINE","DOM_DELTA_PAGE","axis","HORIZONTAL_AXIS","detail","addMultiMouseDownListener","elements","timeouts","callbackName","startX","startY","timer","clicks","eventNames","onMousedown","isNewClick","clearTimeout","setTimeout","_clicks","onDblclick","getModifierHash","metaKey","normalizeCommandKeys","hashId","getModifierState","altGr","location","keyLocation","timeStamp","dt","defaultPrevented","resetPressedKeys","getModifierString","addCommandKeyListener","lastKeyDownKeyCode","lastDefaultPrevented","postMessage","postMessageId","nextTick","win","messageName","listener","data","nextFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","last","stringReverse","string","reverse","stringRepeat","count","stringTrimLeft","stringTrimRight","copyObject","copyArray","deepCopy","arrayToMap","arr","createMap","props","arrayRemove","escapeRegExp","escapeHTML","getMatchOffsets","regExp","matches","offset","deferredCall","fcn","deferred","timeout","cancel","schedule","isPending","delayedCall","defaultTimeout","_self","delay","dom","lang","KEYS","MODS","BROKEN_SETDATA","USE_IE_MIME_TYPE","TextInput","host","isTouchPad","setAttribute","opacity","insertBefore","firstChild","PLACEHOLDER","copied","cut","pasted","inComposition","tempStyle","isSelectionEmpty","isFocused","activeElement","onBlur","onFocus","resetSelection","focus","blur","syncSelection","syncValue","isEmpty","inputHandler","selectionStart","selectionEnd","setSelectionRange","resetValue","selection","isAllSelected","onSelect","selectAll","setInputHandler","cb","getInputHandler","afterContextMenu","sendText","onPaste","execCommand","substring","onTextInput","onInput","handleClipboardData","forceIEMime","clipboardData","mime","setData","doCopy","isCut","getCopyText","onCut","onCopy","select","onCommandKey","closeTimeout","onCompositionStart","$readOnly","canUndo","session","$undoManager","onCompositionUpdate","on","onCompositionEnd","markUndoGroup","clearSelection","val","lastValue","undo","getRange","range","setRange","needsOnInput","syncComposition","onContextMenuClose","renderer","$keepTextAreaAtCursor","$moveTextAreaToCursor","getElement","setReadOnly","readOnly","onContextMenu","_emit","domEvent","moveToMouse","bringToFront","rect","container","getBoundingClientRect","top","borderTopWidth","borderLeftWidth","maxTop","bottom","move","textInput","scroller","typingResetTimeout","typing","detectArrowKeys","up","home","option","right","end","down","shift","TextInputIOS","DRAG_OFFSET","SCROLL_COOLDOWN_T","DefaultHandlers","mouseHandler","$clickSelection","editor","setDefaultHandler","onMouseDown","onDoubleClick","onTripleClick","onQuadClick","onMouseWheel","onTouchMove","selectByLines","extendSelectionBy","selectByWords","calcDistance","ax","ay","bx","by","sqrt","calcRangeOrientation","cursor","row","cmp","column","anchor","ev","inSelection","getDocumentPosition","mousedownEvent","selectionRange","getSelectionRange","selectionEmpty","$blockScrolling","moveToPosition","time","$focusTimout","inMultiSelectMode","captureMouse","startSelect","setState","waitForClickSelection","screenToTextCoordinates","y","getShiftKey","selectToPosition","setCapture","setStyle","comparePoint","orientedRange","setSelectionAnchor","scrollCursorIntoView","unitName","cmpStart","cmpEnd","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","unsetStyle","releaseCapture","focusWait","distance","getBracketRange","getWordRange","isMultiLine","contains","getLineRange","getAccelKey","$lastScroll","t","vx","vy","allowed","prevScroll","direction","canScroll","isScrollableBy","speed","isSlower","scrollBy","stop","Tooltip","isOpen","$element","$parentNode","$init","setText","setHtml","html","setPosition","setClassName","show","hide","getHeight","offsetHeight","getWidth","destroy","GutterHandler","tooltipTimeout","mouseEvent","tooltipAnnotation","gutter","$gutterLayer","tooltip","GutterTooltip","showTooltip","annotation","$annotations","hideTooltip","maxRow","getLength","screenRow","pixelToScreenCoordinates","$pos","documentToScreenRow","_signal","$tooltipFollowsMouse","moveTooltip","gutterElement","gutterRegion","getRegion","selectTo","srcElement","isMousePressed","$gutter","windowWidth","innerWidth","windowHeight","innerHeight","MouseEvent","$inSelection","propagationStopped","AUTOSCROLL_DELAY","SCROLL_CURSOR_DELAY","SCROLL_CURSOR_HYSTERESIS","DragdropHandler","blankImage","src","dragSelectionMarker","timerId","dragCursor","dragOperation","isInternal","autoScrollStartTime","cursorMovedTime","cursorPointOnCaretMoved","mouseTarget","counter","prevCursor","vMovement","hMovement","moveCursorToPosition","autoScroll","lineHeight","layerConfig","characterWidth","editorRect","offsets","nearestXOffset","nearestYOffset","scrollCursor","vScroll","hScroll","onDragInterval","addDragMarker","toOrientedRange","addMarker","getSelectionStyle","$cursorLayer","setBlinking","clearInterval","setInterval","onMouseMove","clearDragMarker","removeMarker","fromOrientedRange","getReadOnly","onDragStart","cancelDrag","draggable","dataTransfer","effectAllowed","setDragImage","clearData","getTextRange","onDragEnd","dropEffect","setCursorStyle","onDragEnter","canAccept","getDropEffect","onDragOver","onMouseMoveTimer","onDragLeave","onDrop","moveText","dropData","types","copyAllowed","moveAllowed","copyModifierState","dragWait","interval","getDragDelay","startDrag","dragWaitEnd","dragReadyEnd","cursorStyle","onMouseDrag","dragDrop","$dragEnabled","clickCount","eventTarget","unselectable","url","xhr","XMLHttpRequest","open","onreadystatechange","readyState","responseText","send","loadScript","path","s","onload","_","isAbort","qualifyURL","EventEmitter","_dispatchEvent","eventName","_eventRegistry","_defaultHandlers","listeners","defaultHandler","once","newCallback","handlers","_disabled_","old","disabled","removeDefaultHandler","capturing","off","removeAllListeners","optionsProvider","setOptions","optList","setOption","getOptions","optionNames","$options","getOption","opt","forwardTo","handlesSet","message","reportError","msg","AppConfig","$defaultOptions","defineOptions","initialValue","resetOptions","setDefaultValue","setDefaultValues","optionHash","net","workerPath","modePath","themePath","basePath","suffix","$moduleUrls","init","scriptOptions","scriptUrl","currentScript","_currentScript","currentDocument","ownerDocument","scripts","script","getAttribute","attributes","j","attr","deHyphenate","m","m1","toUpperCase","moduleUrl","component","parts","sep","re","setModuleUrl","subst","$loading","loadModule","onLoad","moduleType","afterLoad","DefaultGutterHandler","config","MouseHandler","focusEditor","windowBlurred","hasFocus","getMouseEventTarget","onMouseEvent","scrollBarV","scrollBarH","Boolean","gutterEl","$dragDelay","character","insideStart","mousemove","$scrollSpeed","mouseMoveHandler","which","releaseMouse","$mouseMoved","onCaptureEnd","onCaptureInterval","$onCaptureMouseMove","cancelContextMenu","scrollSpeed","dragDelay","dragEnabled","focusTimout","tooltipFollowsMouse","FoldHandler","fold","getFoldAt","removeFold","expandFold","foldWidgets","onFoldWidgetClick","getParentFoldRangeData","firstRange","getLine","addFold","keyUtil","KeyBinding","$editor","$handlers","commands","kb","removeKeyboardHandler","$defaultHandler","addKeyboardHandler","setKeyboardHandler","h","handleKeyboard","attach","detach","getKeyboardHandler","getStatusText","$callKeyboardHandlers","toExecute","success","command","passEvent","dir","hiLevel","lastArabic","hasUBAT_B","hasUBAT_S","impTab_LTR","impTab_RTL","LTR","RTL","L","R","EN","AN","ON","B","S","AL","WS","CS","ES","ET","NSM","LRE","RLE","PDF","LRO","RLO","BN","UnicodeTBL00","UnicodeTBL20","_computeLevels","chars","levels","charTypes","impTab","prevState","newClass","newLevel","cond","condPos","ix","_getCharacterType","_getCharClass","_invertLevel","lev","_array","lo","hi","tmp","wType","nType","cType","rtlCandidate","uc","charCodeAt","ON_R","R_H","DOT","doBidiReorder","textCharTypes","isRtl","logicalFromVisual","bidiLevels","hasBidiCharacters","getVisualFromLogicalIdx","logIdx","rowMap","bidiUtil","bidiRE","BidiHandler","bidiMap","currentRow","charWidths","EOL","showInvisibles","isRtlDir","wrapIndent","isLastRow","seenBidi","isBidiRow","docRow","splitIndex","updateRowLine","updateBidiMap","onChange","delta","getDocumentRow","rowCache","$screenRowCache","$getRowCacheIndex","$docRowCache","getSplitIndex","currentIndex","prevIndex","$useWrapMode","splits","$wrapData","indent","size","isFullWidth","getScreenTabSize","endOfLine","markAsDirty","updateCharacterWidths","fontMetrics","$characterSize","bidiCharWidth","$measureCharWidth","getShowInvisibles","setShowInvisibles","setEolChar","eolChar","setTextDir","getPosLeft","col","visualIdx","getSelections","startCol","endCol","selections","selColMin","selColMax","isSelected","isSelectedPrev","visIdx","offsetToCol","posX","logicalIdx","charWidth","comparePoints","p1","p2","Range","startRow","startColumn","endRow","endColumn","isEqual","compare","compareRange","containsRange","intersects","isEnd","isStart","setStart","setEnd","inside","insideEnd","compareStart","compareEnd","compareInside","clipRows","firstRow","lastRow","fromPoints","extend","clone","collapseRows","toScreenRange","screenPosStart","documentToScreenPosition","screenPosEnd","moveBy","Selection","getDocument","lead","selectionLead","createAnchor","selectionAnchor","$isEmpty","$keepDesiredColumnOnChange","$desiredColumn","getCursor","getPosition","getSelectionAnchor","getSelectionLead","shiftSelection","columns","moveCursorTo","isBackwards","$moveSelection","mover","moveTo","selectUp","moveCursorUp","selectDown","moveCursorDown","selectRight","moveCursorRight","selectLeft","moveCursorLeft","selectLineStart","moveCursorLineStart","selectLineEnd","moveCursorLineEnd","selectFileEnd","moveCursorFileEnd","selectFileStart","moveCursorFileStart","selectWordRight","moveCursorWordRight","selectWordLeft","moveCursorWordLeft","selectWord","selectAWord","getAWordRange","excludeLastChar","rowEnd","rowStart","foldLine","getFoldLine","selectLine","moveCursorBy","wouldMoveIntoSoftTab","tabSize","isTabStop","getTabSize","getNavigateWithinSoftTabs","firstColumnPosition","screenToDocumentPosition","beforeCursor","getDisplayLine","leadingSpace","$useEmacsStyleLineStart","lineEnd","getDocumentLastRowColumnPosition","textEnd","search","moveCursorLongWordRight","rightOfCursor","nonTokenRe","tokenRe","moveCursorLongWordLeft","getFoldStringAt","leftOfCursor","$shortWordEndIndex","whitespaceRe","moveCursorShortWordRight","moveCursorShortWordLeft","$selectLongWords","rows","offsetX","screenPos","$bidiHandler","round","docPos","lineWidgets","keepDesiredColumn","moveCursorToScreen","desiredColumn","getRangeOfMovements","func","toJSON","rangeCount","ranges","r1","fromJSON","rangeList","toSingleRange","addRange","MAX_TOKEN_COUNT","Tokenizer","states","regExps","matchMappings","ruleRegExps","matchTotal","mapping","defaultToken","flag","splitterRurles","rule","caseInsensitive","adjustedregex","matchcount","groupCount","tokenArray","onMatch","$arrayTokens","$applyToken","digit","removeCapturingGroups","splitRegex","createSplitterRegexp","$setMaxTokenCount","values","tokens","inChClass","lastCapture","parenOpen","parenClose","square","getLineTokens","startState","currentState","matchAttempts","skipped","consumeLineEnd","merge","unshift","TextHighlightRules","$rules","addRules","prefix","nextState","getRules","embedRules","HighlightRules","escapeRules","append","$embeds","getEmbeds","normalizeRules","processState","processed","toInsert","stateName","includeName","noEscape","keywordMap","createKeywordMapper","splitChar","keywords","list","$keywordList","getKeywords","$keywords","Behaviour","$behaviours","addBehaviours","behaviours","inherit","mode","getBehaviours","TokenIterator","initialRow","initialColumn","$session","$row","$rowTokens","getTokens","getTokenAt","$tokenIndex","stepBackward","stepForward","rowCount","getCurrentToken","getCurrentTokenRow","getCurrentTokenColumn","rowTokens","tokenIndex","getCurrentTokenPosition","getCurrentTokenRange","context","SAFE_INSERT_IN_TOKENS","SAFE_INSERT_BEFORE_TOKENS","contextCache","defaultQuotes","initContext","multiSelect","autoInsertedBrackets","autoInsertedRow","autoInsertedLineEnd","maybeInsertedBrackets","maybeInsertedRow","maybeInsertedLineStart","maybeInsertedLineEnd","getWrapped","selected","opening","closing","rowDiff","CstyleBehaviour","getCursorPosition","getWrapBehavioursEnabled","isSaneInsertion","braces","recordAutoInsert","recordMaybeInsert","rightChar","matching","$findOpeningBracket","isAutoInsertedClosing","popAutoInsertedClosing","isMaybeInsertedClosing","clearMaybeInsertedClosing","openBracePos","findMatchingBracket","next_indent","$getIndent","getTabString","quotes","$mode","$quotes","lineCommentStart","quote","leftChar","rightToken","pair","stringBefore","stringAfter","wordRe","isWordBefore","isWordAfter","iterator","$matchTokenType","iterator2","bracket","addUnicodePackage","pack","codePoint","packages","Ll","Lu","Lt","Lm","Lo","M","Mn","Mc","Me","N","Nd","Nl","No","P","Pd","Ps","Pe","Pi","Pf","Pc","Po","Sm","Sc","Sk","So","Z","Zs","Zl","Zp","C","Cc","Cf","Co","Cs","Cn","unicode","Mode","$defaultBehaviour","getTokenizer","$tokenizer","$highlightRules","$highlightRuleConfig","blockComment","toggleCommentLines","ignoreBlankLines","shouldRemove","minIndent","Infinity","insertAtTabStop","regexpStart","getUseSoftTabs","uncomment","shouldInsertSpace","removeInLine","commentWithSpace","comment","insertInLine","testRemove","before","after","spaces","lineCommentEnd","regexpEnd","iter","minEmptyLength","toggleBlockComment","colDiff","initialRange","startRange","endRange","getNextLineIndent","tab","checkOutdent","autoOutdent","createWorker","createModeDelegates","$modes","delegations","scope","functionName","$delegator","method","transformAction","param","$behaviour","completionKeywords","ruleItr","aLength","$createKeywordList","getCompletions","word","score","meta","$id","applyDelta","docLines","doNotValidate","Anchor","$onChange","$pointsInOrder","point1","point2","equalPointsInOrder","bColIsAfter","$getTransformedPoint","point","moveIfEqual","deltaIsInsert","deltaRowShift","deltaColShift","deltaStart","deltaEnd","$clipPositionToDocument","$insertRight","noClip","Document","textOrLines","$lines","insertMergedLines","setValue","getValue","getAllLines","getNewLineCharacter","$split","$detectNewLine","$autoNewLine","$newLineMode","setNewLineMode","newLineMode","getNewLineMode","isNewLine","getLines","getLinesForRange","insertLines","insertFullLines","removeLines","removeFullLines","insertNewLine","clippedPos","clonePos","$clipPosition","deleteFirstNewLine","deleteLastNewLine","deletedLines","removeNewLine","applyDeltas","deltas","revertDeltas","revertDelta","isInsert","$splitAndapplyLargeDelta","MAX","to","chunk","indexToPosition","newlineLength","positionToIndex","BackgroundTokenizer","tokenizer","running","currentLine","$worker","workerStart","endLine","startLine","processedLines","$tokenizeRow","fireUpdateEvent","setTokenizer","setDocument","first","scheduleStart","$updateOnChange","getState","SearchHighlight","clazz","setRegexp","MAX_RANGES","cache","update","markerLayer","drawSingleLineMarker","FoldLine","foldData","folds","setFoldLine","shiftRow","sameRow","sort","b","containsRow","walk","lastEnd","isNewRow","placeholder","getNextFoldTo","kind","addRemoveChars","log","foldBefore","newFoldLine","foldLineNext","idxToPosition","idx","lastFoldEndColumn","RangeList","pointIndex","excludeEdges","startIndex","endIndex","addList","substractPoint","containsPoint","rangeAtPoint","clipped","removeAll","lineDif","Fold","subFolds","consumePoint","consumeRange","restorePoint","restoreRange","subFold","collapseChildren","addSubFold","afterStart","Folding","side","getFoldsInRange","foldLines","$foldData","foundFolds","getFoldsInRangeList","getAllFolds","lastFold","startFoldLine","getNextFoldLine","getFoldedRowCount","$addFoldLine","added","$clipRangeToDocument","startFold","endFold","removeFolds","$updateWrapData","$updateRowLengthCache","$modified","addFolds","$updating","cloneFolds","foldAll","expandFolds","unfold","expandInner","isRowFolded","startFoldRow","getRowFoldEnd","getRowFoldStart","getFoldDisplayLine","textLine","lastColumn","$cloneFoldData","fd","toggleFold","tryToUnfold","bracketPos","getCommentFoldRange","depth","getFoldWidget","getFoldWidgetRange","$foldStyles","$foldStyle","setFoldStyle","$foldMode","$setFolding","foldMode","$updateFoldWidgets","$tokenizerUpdateFoldWidgets","updateFoldWidgets","tokenizerUpdateFoldWidgets","ignoreCurrent","fw","children","siblings","$toggleFoldWidget","toggleFoldWidget","toggleParent","BracketMatch","chr","charBeforeCursor","$findClosingBracket","$brackets","typeRe","openBracket","valueIndex","closingBracket","valueLength","TextMode","EditSession","$breakpoints","$decorations","$frontMarkers","$backMarkers","$markerId","$undoSelect","$uid","onChangeFold","setMode","bgTokenizer","resetCaches","$resetRowCache","cacheArray","low","mid","$rowLengthCache","removedFolds","$updateInternalDataOnChange","$fromUndo","ignore","$deltasDoc","$deltasFold","$informUndoManager","$deltas","setUndoManager","getUndoManager","reset","getSelection","undoManager","$syncInformUndoManager","group","execute","mergeUndoDeltas","$defaultUndoManager","redo","setUseSoftTabs","$useSoftTabs","$indentWithTabs","setTabSize","$tabSize","setNavigateWithinSoftTabs","navigateWithinSoftTabs","$navigateWithinSoftTabs","$overwrite","setOverwrite","overwrite","getOverwrite","toggleOverwrite","addGutterDecoration","removeGutterDecoration","getBreakpoints","setBreakpoints","clearBreakpoints","setBreakpoint","clearBreakpoint","inFront","marker","addDynamicMarker","markerId","markers","getMarkers","highlight","$searchHighlight","highlightLines","setAnnotations","annotations","getAnnotations","clearAnnotations","inToken","wordRange","setUseWorker","useWorker","getUseWorker","$useWorker","onReloadTokenizer","$modeId","$onChangeMode","$isPlaceholder","$stopWorker","$startWorker","attachToSession","wrapMethod","$wrapMethod","foldingRules","terminate","getMode","$scrollTop","setScrollTop","isNaN","getScrollTop","$scrollLeft","setScrollLeft","getScrollLeft","getScreenWidth","$computeWidth","getLineWidgetMaxWidth","screenWidth","lineWidgetsWidth","w","lineWidgetWidth","force","$wrapLimit","longestScreenLine","foldIndex","foldStart","$getStringScreenWidth","undoChanges","dontSelect","lastUndoRange","$getUndoSelection","foldDelta","redoChanges","setUndoSelect","enable","isUndo","fromRange","toPosition","toRange","collDiff","oldStart","newStart","indentRows","indentString","outdentRows","rowRange","deleteRange","$moveLines","diff","$clipRowToDocument","MAX_VALUE","moveLinesUp","moveLinesDown","duplicateLines","$clipColumnToRow","$wrapLimitRange","setUseWrapMode","useWrapMode","getUseWrapMode","setWrapLimitRange","adjustWrapLimit","desiredLimit","$printMargin","limits","wrapLimit","$constrainWrapLimit","getWrapLimit","setWrapLimit","limit","getWrapLimitRange","foldLineBefore","wrapData","walkTokens","$getDisplayTokens","PLACEHOLDER_START","PLACEHOLDER_BODY","$computeWrapSplits","CHAR","CHAR_EXT","PUNCTUATION","SPACE","TAB","TAB_SPACE","displayLength","lastSplit","lastDocSplit","isCode","$wrapAsCode","indentedSoftWrap","$indentedSoftWrap","maxIndent","getWrapIndent","indentation","addSplit","displayed","minSplit","maxScreenColumn","screenColumn","getRowLength","getRowLineCount","getRowWrapIndent","getScreenLastRowColumn","documentToScreenColumn","getDocumentLastRowColumn","docColumn","getRowSplitData","screenToDocumentRow","screenToDocumentColumn","rowLength","doCache","foldStartRow","wrapRow","screenRowOffset","getScreenLength","screenRows","$getWidgetScreenLength","$setFontMetrics","fm","$enableVarChar","getCharacterWidth","wrap","$wrap","firstLineNumber","useSoftTabs","Search","addWordBoundary","needle","wordBoundary","find","$matchIterator","sr","sc","er","ec","skipCurrent","findAll","$assembleRegExp","$isMultiLine","prevRange","replacement","preserveCase","$disableFakeMultiline","wholeWord","modifier","caseSensitive","$assembleMultilineRegExp","backwards","forEachInLine","HashHandler","commandKeyBinding","addCommands","$singleCommand","MultiHashHandler","bindKey","isDefault","addCommand","removeCommand","_buildKeyHash","keepCommand","ckb","keyId","cmdGroup","keyPart","chain","binding","parseKeys","_addCommandToBinding","other","otherPos","removeCommands","bindKeys","keyList","findKeyCommand","$keyChain","CommandManager","byName","isAvailable","toggleRecording","$inReplay","recording","macro","$addCommandToMacro","oldMacro","replay","trimMacro","mac","showSettingsMenu","showErrorMarker","scrollIntoView","centerSelection","prompt","gotoLine","multiSelectAction","getAllRanges","findNext","findPrevious","aceCommandGroup","navigateFileStart","navigateUp","times","navigateFileEnd","navigateDown","navigateWordLeft","navigateLineStart","navigateLeft","navigateWordRight","navigateLineEnd","navigateRight","selectPageDown","scrollPageDown","gotoPageDown","selectPageUp","scrollPageUp","gotoPageUp","jumpToMatching","$handlePaste","duplicateSelection","sortLines","modifyNumber","copyLinesUp","copyLinesDown","removeToLineStart","removeToLineEnd","removeWordLeft","removeWordRight","blockOutdent","blockIndent","splitLine","transposeLetters","transposeSelections","firstLineEndCol","selectedText","selectedCount","insertLine","curLine","newRanges","exitMultiSelectMode","defaultCommands","Editor","getContainerElement","getTextAreaContainer","textarea","$mouseHandler","keyBinding","$search","$historyTracker","$initOperationListeners","_$emitInputEvent","setSession","startOperation","endOperation","$opResetTimer","curOp","docChanged","selectionChanged","prevOp","commadEvent","previousCommand","scrollSelectionIntoView","animateScrolling","$mergeableCommands","$mergeUndoDeltas","prev","mergeableCommands","shouldMerge","mergeNextCommand","sequenceStartTime","keyboardHandler","$keybindingId","handler","oldSession","$onDocumentChange","$onTokenizerUpdate","$onChangeTabSize","$onChangeWrapLimit","$onChangeWrapMode","$onChangeFold","$onChangeFrontMarker","$onChangeBackMarker","$onChangeBreakpoint","$onChangeAnnotation","$onCursorChange","$onScrollTopChange","$onScrollLeftChange","$onSelectionChange","onDocumentChange","onChangeMode","onTokenizerUpdate","onChangeTabSize","onChangeWrapLimit","onChangeWrapMode","onChangeFrontMarker","onChangeBackMarker","onChangeBreakpoint","onChangeAnnotation","onCursorChange","onScrollTopChange","onScrollLeftChange","onSelectionChange","updateFull","oldEditor","getSession","cursorPos","resize","onResize","setTheme","theme","getTheme","getFontSize","setFontSize","$highlightBrackets","$bracketHighlight","$highlightPending","getMatching","$highlightTags","$highlightTagPending","$tagHighlight","prevToken","sbm","$isFocused","showCursor","visualizeFocus","hideCursor","visualizeBlur","$cursorChange","updateCursor","updateLines","$updateHighlightActiveLine","scrollToY","scrollToX","$highlightActiveLine","$selectionStyle","$maxLines","$minLines","$highlightLineMarker","$selectionMarker","$highlightSelectedWord","$getSelectionHighLightRegexp","startOuter","endOuter","lineCols","updateFrontMarkers","updateBackMarkers","updateBreakpoints","updateText","getSelectedText","inVirtualSelectionMode","getBehavioursEnabled","transform","$mergeNextCommand","d","lineState","shouldOutdent","lineIndent","setScrollSpeed","getScrollSpeed","setDragDelay","setSelectionStyle","setHighlightActiveLine","shouldHighlight","getHighlightActiveLine","setHighlightGutterLine","getHighlightGutterLine","setHighlightSelectedWord","getHighlightSelectedWord","setAnimatedScroll","shouldAnimate","getAnimatedScroll","setDisplayIndentGuides","getDisplayIndentGuides","setShowPrintMargin","showPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","setBehavioursEnabled","enabled","setWrapBehavioursEnabled","setShowFoldWidgets","getShowFoldWidgets","setFadeFoldWidgets","fade","getFadeFoldWidgets","new_range","swap","originalRange","$getSelectedRows","getNumberAt","_numberRx","number","amount","charRange","isFinite","nr","fp","decimals","nnr","toFixed","replaceRange","sel","endPoint","moved","totalDiff","rangeIndex","subRows","showComposition","setCompositionText","hideComposition","getFirstVisibleRow","getLastVisibleRow","isRowVisible","isRowFullyVisible","getFirstFullyVisibleRow","getLastFullyVisibleRow","$getVisibleRowCount","getScrollBottomRow","getScrollTopRow","$moveByPage","scrollToRow","scrollToLine","center","animate","alignCursor","getCursorPositionScreen","expand","matchType","bracketType","found","brackets","lineNumber","navigateTo","replaced","$tryReplace","replaceAll","getLastSearchOptions","newRange","preventScroll","revealRange","setAutoScrollEditorIntoView","shouldScroll","$scrollAnchor","scrollAnchor","onChangeSelection","onBeforeRender","onAfterRender","searchBox","$pixelPos","$resetCursorStyle","$cursorStyle","cursorLayer","setSmoothBlinking","isBlinking","selectionStyle","highlightActiveLine","highlightSelectedWord","behavioursEnabled","wrapBehavioursEnabled","autoScrollEditorIntoView","keybindingId","hScrollBarAlwaysVisible","vScrollBarAlwaysVisible","highlightGutterLine","animatedScroll","printMarginColumn","printMargin","fadeFoldWidgets","showFoldWidgets","showLineNumbers","showGutter","displayIndentGuides","fontSize","fontFamily","maxLines","minLines","scrollPastEnd","fixedWidthGutter","foldStyle","UndoManager","$serializeDelta","$deserializeDelta","cloneDeltaSetsObj","deltaSets_old","fnGetModifiedDelta","deltaSets_new","deltaSet_old","deltaSet_new","delta_old","deltaSets","$doc","hasUndo","dirtyCounter","$undoStack","$redoStack","NaN","undoSelectionRange","redoSelectionRange","$deserializeDeltas","hasRedo","markClean","isClean","$serializeDeltas","Gutter","parentEl","$showFoldWidgets","gutterWidth","$updateAnnotations","$cells","rowInfo","annoText","gutterOffset","breakpoints","decorations","$firstLineNumber","lastLineNumber","gutterRenderer","$renderer","cell","textNode","foldWidget","getText","minHeight","$fixedWidth","padding","$padding","$computePadding","ceil","$showLineNumbers","setShowLineNumbers","getShowLineNumbers","paddingLeft","paddingRight","Marker","getBorderClass","tl","tr","br","bl","setPadding","setMarkers","$getTop","drawFullLineMarker","drawScreenLineMarker","drawTextMarker","drawMultiLineMarker","drawBidiSingleLineMarker","firstRowScreen","stringBuilder","extraStyle","curr","clazzModified","lineRange","range1","radiusClass","extraLength","Text","$updateEolChar","EOF_CHAR","EOL_CHAR_LF","EOL_CHAR_CRLF","EOL_CHAR","TAB_CHAR","SPACE_CHAR","getLineHeight","$fontMetrics","measure","$pollSizeChanges","checkForSizeChanges","$pollSizeChangesTimer","$computeTabString","$tabStrings","tabStr","$indentGuideRe","spaceClass","tabClass","spaceContent","tabContent","scrollLines","lineElements","childNodes","lineElementsIdx","lineElement","$renderLine","$useLineGroups","oldConfig","lastChild","fragment","$renderLinesFragment","createDocumentFragment","$textToken","$renderToken","replaceReg","replaceFunc","tabIdx","idx4","classToUse","space","output","renderIndentGuide","cols","$renderWrappedLine","onlyContents","splitChars","$renderSimpleLine","$getFoldLineTokens","renderTokens","addTokens","$measureNode","isIE8","Cursor","isVisible","blinkInterval","smoothBlinking","cursors","addCursor","$updateCursors","$updateVisibility","$updateOpacity","visibility","blinking","restartTimer","setBlinkInterval","removeCursor","intervalId","timeoutId","blink","getPixelPosition","onScreen","cursorLeft","cursorTop","$selectionMarkers","cursorIndex","pixelPos","drawCursor","$setOverwrite","MAX_SCROLL_H","ScrollBar","parent","classSuffix","setVisible","skipEvent","onScroll","coeff","VScrollBar","scrollHeight","$scrollbarWidth","$minWidth","setHeight","setInnerHeight","setScrollHeight","HScrollBar","setWidth","setInnerWidth","setScrollWidth","ScrollBarV","ScrollBarH","RenderLoop","onRender","pending","changes","change","CHAR_COUNT","FontMetrics","$setMeasureNodeStyles","$main","$testFractionalRect","isRoot","whiteSpace","font","$measureSizes","fontWeight","boldSize","charSizes","allowBoldFonts","setPolling","GutterLayer","MarkerLayer","TextLayer","CursorLayer","editorCss","VirtualRenderer","content","onGutterResize","$markerBack","textLayer","$textLayer","canvas","$markerFront","$horizScroll","$vScroll","scrollBar","$scrollAnimation","scrollMargin","updateCharacterSize","$size","scrollerHeight","scrollerWidth","$dirty","maxHeight","v","$loop","$renderChanges","CHANGE_FULL","CHANGE_CURSOR","CHANGE_MARKER","CHANGE_GUTTER","CHANGE_SCROLL","CHANGE_LINES","CHANGE_TEXT","CHANGE_SIZE","CHANGE_MARKER_BACK","CHANGE_MARKER_FRONT","CHANGE_H_SCROLL","$allowBoldFonts","$updatePrintMargin","onChangeNewLineMode","$changedLines","updateFontSize","$changes","$updateSizeAsync","resizing","scrollWidth","$updateCachedSize","$extraHeight","oldSize","$showGutter","$computeLayerConfig","availableWidth","$showPrintMargin","$printMarginColumn","$animatedScroll","getShowGutter","setShowGutter","$updateGutterLineHighlight","$gutterLineHighlight","$printMarginEl","containerEl","posTop","posLeft","$composition","setScrollMargin","sm","getHScrollBarAlwaysVisible","$hScrollBarAlwaysVisible","setHScrollBarAlwaysVisible","alwaysVisible","getVScrollBarAlwaysVisible","$vScrollBarAlwaysVisible","setVScrollBarAlwaysVisible","$updateScrollBarV","$scrollPastEnd","$updateScrollBarH","$frozen","unfreeze","st","marginTop","marginLeft","$highlightGutterLine","$updateLines","$autosize","desiredHeight","$maxPixelHeight","$gutterWidth","hideScrollbars","screenLines","longestLine","$getLongestLine","horizScroll","hScrollChanged","vScrollBefore","vScrollChanged","firstRowHeight","lineCount","charCount","$viewMargin","topMargin","bottomMargin","alignment","STEPS","$calcSteps","fromValue","toValue","steps","x_min","dx","initialScroll","oldSteps","$timer","scrollTo","canvasPos","textToScreenCoordinates","pageX","pageY","keepTextAreaAtCursor","$themeId","cssClass","$theme","isDark","setMouseCursor","maxPixelHeight","$workerBlob","workerUrl","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","blobBuilder","getBlob","blob","URL","webkitURL","blobURL","createObjectURL","Worker","WorkerClient","topLevelNamespaces","classname","importScripts","$sendDeltaQueue","changeListener","onMessage","nameToUrl","toUrl","normalizePath","$normalizePath","tlns","callbackId","callbacks","onmessage","err","deltaQueue","cmd","emit","ex","attachToDocument","q","UIWorkerClient","messageBuffer","main","emitSync","sender","processNext","setEmitSync","Main","PlaceHolder","others","mainClass","othersClass","$onUpdate","onUpdate","$others","undoStack","$undostack","$undoStackDepth","setup","selectionBefore","showOtherMarkers","othersActive","hideOtherMarkers","updateAnchors","lengthDiff","inMainRange","distanceFromStart","newPos","updateMarkers","updateMarker","undosRequired","isSamePoint","alt","ctrl","accel","selectionMode","isMultiSelect","mouseX","mouseY","onMouseSelection","screenAnchor","screenCursor","$enableJumpToDef","$blockSelectEnabled","addSelectionMarker","oldRange","removeSelectionMarker","tmpSel","rectSel","blockSelect","newCursor","removeSelectionMarkers","rectangularRangeBlock","updateSelectionMarkers","onMouseSelectionEnd","onSelectionInterval","selectMoreLines","selectMore","splitIntoLines","alignCursors","multiSelectCommands","getSelectionMarkers","$blockChangeEvents","$onAddRange","$onRemoveRange","mergeOverlappingRanges","lastRange","$initRangeList","toggleBlockSelection","includeEmptyLines","xBackwards","startOffsetX","endOffsetX","yBackwards","docEnd","MultiSelect","$multiselectOnSessionChange","$onMultiSelect","$onSingleSelect","onSessionChange","$checkMultiselectChange","addAltCursorListeners","altCursor","altDown","selectionMarkerCount","markerList","$onMultiSelectExec","inVirtualMode","forEachSelection","keepOrder","$byLines","reg","cmdResult","anim","buf","nl","additive","skip","screenLead","toRemove","words","stopAtFirst","sameRowRanges","maxCol","minSpace","spaceOffsets","spaceOffset","fr","lr","guessRange","$reAlignText","forceLeft","startW","textW","endW","isLeftAligned","isRightAligned","alignLeft","alignRight","unAlign","enableMultiselect","enableBlockSelect","FoldMode","foldingStartMarker","foldingStopMarker","indentationBlock","startLevel","openingBracketBlock","closingBracketBlock","LineWidgets","widgetManager","updateOnChange","renderWidgets","measureWidgets","_changedWidgets","$onChangeEditor","updateOnFold","hidden","_inDocument","removeLineWidget","$updateRows","noWidgets","$oldWidget","addLineWidget","zIndex","coverGutter","pixelHeight","$fold","onWidgetChanged","w1","getWidgetsAtRow","changedWidgets","fixedWidth","coverLine","fullWidth","binarySearch","comparator","findAnnotations","oldWidget","gutterAnno","arrow","onmousedown","Renderer","edit","_id","getElementById","env","tagName","oldNode","createEditSession","version","createAbsoluteAnchor","translate","ContextMenu","items","me","eventListeners","onClose","close","menu","focusButton","li","createMenuItems","domItems","separator","domItem","title","click","onclick","submenu","divIcon","buttonSubmenu","divText","buttonExpand","submenuTitle","divExpand","_onExpandItem","domSubItems","subItems","ul","_getVisibleButtons","buttons","expandedItem","subItem","visibleMenu","frame","ignoreParent","showBelow","anchorRect","parentRect","frameRect","absoluteAnchor","topGap","anchorHeight","alreadyVisible","removeClassName","childsHeight","addClassName","_onKeyDown","targetIndex","prevButton","nextButton","keynum","handled","setSelection","isObject","strictDeepEqual","second","firstType","keysSeen","key2","isFalse","objValues","trimLeft","TYPE_NUMBER","TYPE_ANY","TYPE_STRING","TYPE_ARRAY","TYPE_OBJECT","TYPE_BOOLEAN","TYPE_EXPREF","TYPE_NULL","TYPE_ARRAY_NUMBER","TYPE_ARRAY_STRING","TOK_EOF","TOK_UNQUOTEDIDENTIFIER","TOK_QUOTEDIDENTIFIER","TOK_RBRACKET","TOK_RPAREN","TOK_COMMA","TOK_COLON","TOK_RBRACE","TOK_NUMBER","TOK_CURRENT","TOK_EXPREF","TOK_PIPE","TOK_OR","TOK_AND","TOK_EQ","TOK_GT","TOK_LT","TOK_GTE","TOK_LTE","TOK_NE","TOK_FLATTEN","TOK_STAR","TOK_FILTER","TOK_DOT","TOK_NOT","TOK_LBRACE","TOK_LBRACKET","TOK_LPAREN","TOK_LITERAL","basicTokens","operatorStartToken","skipChars","isAlpha","isNum","isAlphaNum","Lexer","tokenize","stream","identifier","_current","_consumeUnquotedIdentifier","_consumeNumber","_consumeLBracket","_consumeQuotedIdentifier","_consumeRawStringLiteral","literal","_consumeLiteral","_consumeOperator","maxLength","current","JSON","startingChar","literalString","_looksLikeJSON","startingChars","jsonLiterals","numberLooking","bindingPower","Parser","TreeInterpreter","runtime","Runtime","interpreter","_interpreter","functionTable","_func","_functionAbs","_signature","avg","_functionAvg","_functionCeil","_functionContains","_functionEndsWith","_functionFloor","_functionLength","_functionMap","_functionMax","_functionMerge","variadic","_functionMaxBy","sum","_functionSum","_functionStartsWith","_functionMin","_functionMinBy","_functionType","_functionKeys","_functionValues","_functionSort","_functionSortBy","_functionJoin","_functionReverse","_functionToArray","_functionToString","_functionToNumber","_functionNotNull","compile","ast","expression","_loadTokens","_lookahead","_lookaheadToken","rbp","leftToken","_advance","nud","currentToken","led","Not","_parseProjectionRHS","Star","_parseMultiselectHash","Flatten","_parseIndexExpression","_projectIfSlice","_parseMultiselectList","Expref","_match","_errorToken","tokenName","Dot","_parseDotRHS","Pipe","Or","And","Filter","leftNode","rightNode","_parseComparator","tokenType","_parseSliceExpression","indexExpr","lookahead","exprTokens","expressions","keyToken","keyName","pairs","identifierTypes","visit","field","collected","sliceParams","computed","computeSliceParams","step","filtered","finalResults","merged","child","resolvedArgs","callFunction","refNode","jmespathType","arrayLength","stepValueNegative","capSliceRange","actualValue","functionEntry","_validateArgs","signature","pluralized","currentSpec","actualType","typeMatched","_getTypeName","_typeMatches","actual","argValue","subtype","searchStr","typeName","originalStr","reversedStr","reversedArray","inputArray","mapped","exprefNode","maxElement","localeCompare","minElement","listToSum","joinChar","listJoin","stringify","convertedValue","sortedArray","requiredType","decorated","exprA","exprB","maxRecord","resolvedArray","keyFunction","createKeyFunction","maxNumber","minRecord","minNumber","allowedTypes","keyFunc","punycode","Url","protocol","slashes","auth","port","hostname","query","pathname","urlParse","resolve","urlResolve","resolveObject","urlResolveObject","urlFormat","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","u","isString","relative","queryIndex","splitter","uSplit","slashRegex","rest","simplePath","lowerProto","atSign","hostEnd","hec","decodeURIComponent","parseHost","ipv6Hostname","hostparts","part","newpart","k","validParts","notHost","bit","toASCII","ae","encodeURIComponent","qm","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","hasTrailingSlash","isAbsolute","factory","dragTracker","ep","Element","msMatchesSelector","webkitMatchesSelector","closest","parentElement","selector","callbackStart","callbackDragStart","callbackEnd","callbackDragEnd","callbackClick","propagate","propagateEvents","roundCoords","dragOutside","handleOffset","offsetToCenter","dragState","getMousePos","elm","stayWithin","respectBounds","bounds","nodeName","onDown","mouseOffset","startPos","actuallyDragged","onMove","onEnd","cancelled","isClick","onTouchEnd","tweakTouch","addEvent","isLeftButton","relayTouch","touch","targetTouches","changedTouches","co","gen","ctx","Promise","reject","onFulfilled","res","onRejected","throw","toPromise","isPromise","then","isGeneratorFunction","isGenerator","thunkToPromise","arrayToPromise","objectToPromise","fn","results","promises","promise","defer","displayName","createPromise","__generatorFunction__","nodeType","freeGlobal","maxInt","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","stringFromCharCode","RangeError","mapDomain","labels","encoded","ucs2decode","extra","ucs2encode","basicToDigit","digitToBasic","adapt","numPoints","firstTime","decode","basic","oldi","baseMinusT","inputLength","bias","encode","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","BG_TRANSP","HUES","EVENT_KEY","EVENT_CLICK_OUTSIDE","EVENT_TAB_MOVE","parseHTML","htmlString","div","firstElementChild","querySelector","onKey","_style","Picker","settings","popup","layout","alpha","editorFormat","_openProxy","openHandler","onDone","onOpen","transfer","skipKeys","HTMLElement","_popupInited","color","colour","_setColor","pointerEvents","toFocus","_domEdit","domElement","doHide","closeHandler","silent","flags","failSilently","hsla","_setHSLA","setColor","toggled","_toggleDOM","_setPosition","template","_domH","_domSL","_domA","_domSample","_domOkay","classList","_ifPopup","_updateUI","_bindEvents","createDragConfig","callbackRelative","relayDrag","relX","relY","editInput","fromEditor","onDoneProxy","popupCloseProxy","hsl","cssHue","cssHSL","hslString","cssHSLA","hslaString","uiH","uiSL","uiA","thumbH","thumbSL","thumbA","posY","backgroundColor","opaque","transp","bg","backgroundImage","printRGB","printHSL","printHex","actionIf","actionElse","toVisible","displayStyle","toggle","jmespath","picoModal","Selectr","debounce","MAX_PREVIEW_LINES","showTransformModal","overlayClass","modalClass","afterCreate","modal","modalElem","wizard","ok","filterField","filterRelation","filterValue","sortField","sortOrder","selectFields","preview","fontStyle","paths","getChildPaths","formattedPath","preprocessPath","filterOption","sortOption","allPaths","selectFieldsPart","selectrFilterField","defaultSelected","clearable","allowDeselect","selectrFilterRelation","selectrSortField","selectrSortOrder","selectrSelectFields","multiple","generateQueryFromWizard","field1","examplePath","parsePath","exampleValue","value1","_stringCast","field2","selectedValue","debouncedUpdatePreview","updatePreview","transformed","oninput","afterClose","defaultFilterFunction","contain","completely","trigger","confirmKeys","outline","border","margin","spacer","leftSide","dropDown","createDropDownController","rs","oldIndex","onMouseOver","onMouseOut","onmouseselection","__hint","refresh","vph","distanceToTop","distanceToBottom","filterFn","divRow","onmouseover","onmouseout","setEndOfContenteditable","contentEditableElement","createRange","selectNodeContents","collapse","removeAllRanges","createTextRange","moveToElementText","calculateWidthForText","onArrowDown","onArrowUp","onEnter","onTab","startFrom","elementHint","elementStyle","getPropertyValue","borderColor","onfocus","keyDownHandler","onBlurHandler","repaint","hideDropDown","dropDownController","optionsLength","realInnerText","wasDropDownHidden","Highlighter","locked","setHighlight","_cancelUnhighlight","unhighlight","unhighlightTimer","lock","unlock","VanillaPicker","History","SearchBox","TreePath","Node","ModeSwitcher","autocomplete","showSortModal","setLanguages","setLanguage","DEFAULT_MODAL_ANCHOR","treemode","highlighter","multiselection","nodes","validateSchema","validationSequence","errorNodes","focusTarget","_setOptions","history","_createFrame","_createTable","clear","_debouncedValidate","modeSwitcher","schemaRefs","navigationBar","mainMenuBar","colorPicker","onColorPicker","rgba","hex","timestampTag","onEvent","enableSort","enableTransform","prop","setSchema","DEBOUNCE_INTERVAL","languages","language","json","_setRoot","recurse","deepEqual","onChangeDisabled","forceSearch","startNode","findNodeByPath","endNode","jsonText","sanitizedJsonText","sanitize","updateField","scrollableContent","treePath","tbody","getDom","_onChange","getDomSelection","selectedNode","findNodeByInternalPath","_updateTreePath","getNodePath","onChangeJSON","onChangeText","onClassName","recursivelyUpdateCssClassesOnNodes","onNodeName","childs","recursivelyUpdateNodeName","schemaErrors","valid","improveSchemaError","findNode","dataPath","entry","seq","_validateCustom","customValidationErrors","_renderValidationErrors","catch","setError","parentPairs","findParents","onValidate","customValidateResults","resultPromise","customValidationPathErrors","isValidValidationError","updateDom","getAbsoluteTop","autoScrollStep","autoScrollTimer","stopAutoScroll","domName","assign","setSelectionOffset","getNodeFromTarget","getSelectionOffset","getInternalPath","animateTimeout","animateCallback","finalScrollTop","contentOuter","_onEvent","onchange","onkeydown","onkeyup","oncut","onpaste","onmouseup","onfocusin","onfocusout","expandAll","collapseAll","modalAnchor","_onUndo","_onRedo","canRedo","modes","navBar","onSectionSelected","_onTreePathSectionSelected","onContextMenuItemSelected","_onTreePathMenuItemSelected","targetIsColorPicker","_showAutoComplete","_startDragDistance","_updateDragDistance","showContextMenu","hasMoved","deselect","hasParentNode","drag","_onMultiSelectStart","pathNodes","pathObjs","pathObj","getName","childNode","setPath","expandTo","selectionObj","dragDistanceEvent","initialTarget","initialPageX","initialPageY","dragDistance","diffX","diffY","onEditable","_onMultiSelect","mouseup","_onMultiSelectEnd","_findTopLevelNodes","firstNode","isDescendantOf","clearStartAndEnd","setSelected","_selectionChangedHandler","expandPathToNode","startPath","endPath","startChild","endChild","firstIndex","jsonElementType","getPath","selectContentEditable","colgroupContent","selectedNodes","onDuplicate","onRemove","onCreateMenu","selection1","selection2","serialize","setDomSelection","_getNodeInstancesByRange","getIndex","nextSibling","serializableNodes","Ajv","textmode","JSONEditor","ieVersion","getInternetExplorerVersion","onError","editable","VALID_OPTIONS","_create","setName","oldMode","asText","load","onModeChange","_onError","ajv","ref","removeSchema","addSchema","registerMode","reserved","default","arg","_lang","_locales","_defs","en","auto","appendText","appendTitle","appendSubmenuTitle","appendTitleAuto","ascending","ascendingTitle","actionsMenu","descending","descendingTitle","duplicateKey","duplicateText","duplicateTitle","duplicateField","duplicateFieldError","cannotParseFieldError","cannotParseValueError","expandTitle","insertTitle","insertSub","removeText","removeTitle","removeField","selectNode","showAll","showMore","showMoreStatus","sortTitle","sortTitleShort","sortFieldLabel","sortDirectionLabel","sortFieldTitle","sortAscending","sortAscendingTitle","sortDescending","sortDescendingTitle","transformTitle","transformTitleShort","transformQueryTitle","transformWizardLabel","transformWizardFilter","transformWizardSortBy","transformWizardSelectFields","transformQueryLabel","transformPreviewLabel","typeTitle","openUrl","validationCannotMove","autoType","objectType","arrayType","stringType","modeCodeText","modeCodeTitle","modeFormText","modeFormTitle","modeTextText","modeTextTitle","modeTreeText","modeTreeTitle","modeViewText","modeViewTitle","examples","_defaultLang","userLang","userLanguage","langFound","actions","parentPath","oldValue","newValue","updateValue","changeType","oldType","newType","beforeNode","beforePath","afterNode","afterPath","insertAfter","clonePaths","existingFieldNames","getFieldNames","findUniqueName","oldParentNode","oldParentPath","newParentNode","newParentPath","oldBeforeNode","newIndex","fieldNames","moveBefore","newParentPathRedo","oldParentPathRedo","newBeforeNode","newIndexRedo","oldIndexRedo","hideChilds","oldChilds","updateIndexes","showChilds","newChilds","setInternalValue","oldSelection","newSelection","appendNodeFactory","AppendNode","_updateEditability","trAppend","tdDrag","tdMenu","tdAppend","domText","td","getLevel","titles","TYPE_TITLES","appendSubmenu","_onAppend","addTemplates","onKeyDown","$closingBraces","$currentBaseId","baseId","arr1","$sch","$i","l1","searchboxCss","MAX_COUNT","showReplaceForm","setEditor","searchRange","$syncOptions","$initElements","sb","replaceBox","searchOption","replaceOption","regExpOption","caseSensitiveOption","wholeWordOption","searchInput","replaceInput","searchCounter","_this","activeInput","$searchBarKb","$closeSearchBarKb","isReplace","checked","findPrev","setSearchRange","searchRangeMarker","noMatch","updateCounter","replaceAndFindNext","active","$idx","$dataNxt","$nextData","$nonEmptySchema","errorPath","getPathExpr","jsonPointers","$passData","$code","varOccurences","varReplace","cleanUpCode","$noEmptySchema","webpackPolyfill","deprecate","showMoreNodeFactory","ShowMoreNode","showMoreButton","visibleChilds","getMaxVisibleChilds","showAllButton","moreContents","moreText","_getShowMoreText","tdContents","moreTr","nextTr","_getNextTr","nodeValue","totalChilds","expanded","hasProp","equal","arrA","arrB","dateA","dateB","regexpA","regexpB","isNode","observable","watch","unprevented","isHidden","Elem","buildOverlay","make","stylize","background","onClick","styles","anyAncestor","predicate","autoinc","buildModal","boxSizing","borderRadius","isCloseClick","buildClose","textAlign","buildElemAccessor","builder","escapeKey","tabKey","manageFocus","iface","isEnabled","canFocus","hasAttribute","firstFocusable","lastFocusable","focused","beforeShow","afterShow","focusable","manageBodyOverflow","origOverflow","keycode","afterCreateEvent","beforeShowEvent","afterShowEvent","beforeCloseEvent","afterCloseEvent","defaultValue","built","build","shadowElem","closeElem","forceClose","returnIface","overlay","overlayElem","buildDom","beforeClose","$key","$invalidName","$dataProperties","$ownProperties","ownProperties","$refCode","$refVal","resolveRef","$message","MissingRefError","missingRefs","inline","code","passContext","$parentData","$parentDataProperty","__callValidate","$regexp","usePattern","defaultConfig","searchable","sortSelected","closeOnScroll","nativeDropdown","taggable","tagPlaceholder","Events","_events","each","f","hasClass","addClass","removeClass","isInt","g","includes","truncate","isset","appendItem","custom","render","pagination","pages","pageIndex","customOption","childElementCount","navIndex","tree","dismiss","opened","createItem","renderOption","class","role","requiresPagination","customClass","mobileDevice","tabIndex","label","dropdown","notice","tags","selectedValues","getSelectedProperties","selectedIndexes","selectClear","tagIndex","autocorrect","autocapitalize","spellcheck","tagSeperators","inputClear","inputContainer","optgroup","Option","paginate","placeEl","setPlaceholder","disable","navigate","prevEl","navigating","searching","lastElementChild","optsRect","addTag","docFrag","customSelected","renderSelection","btn","$1","$2","ac","bc","nn","tg","removeTag","atBottom","total","page","clearSearch","rendered","originalType","originalIndex","originalOptionCount","bindEvents","selectedIndex","getSelected","querySelectorAll","events","getChangedOptions","indexes","setMessage","invert","paginateItems","form","maxSelections","removeAttribute","selIndex","valIndex","toJson","checkDuplicate","dupe","getOptionByIndex","getOptionByValue","removeMessage","firstEl","serialise","rt","oh","wh","doInvert","isInverted","$errorKeyword","$compile","$inline","$macro","$ruleValidate","$validateCode","$rule","$definition","$rDef","definition","$validateSchema","useCustomRule","$ruleErrs","$ruleErr","$asyncKeyword","statements","def_callRuleValidate","modifying","keyword","def_customError","polyfill","CharacterData","DocumentType","startsWith","searchString","$op","compileSchema","Cache","SchemaObject","stableStringify","$dataMetaSchema","patternGroups","addMetaSchema","getSchema","addFormat","errorsText","_addSchema","_compile","compileAsync","customKeyword","addKeyword","getKeyword","removeKeyword","errorClasses","ValidationError","Validation","MissingRef","META_SCHEMA_ID","META_IGNORE_OPTIONS","META_SUPPORT_DATA","_opts","setLogger","_schemas","_refs","_fragments","_formats","schemaUriFormat","_schemaUriFormat","_schemaUriFormatFunc","_cache","_loadingSchemas","_compilations","_getId","chooseGetId","loopRequired","errorDataPath","_errorDataPathProperty","_metaOpts","getMetaSchemaOptions","addInitialFormats","addDraft6MetaSchema","addInitialSchemas","schemaKeyRef","schemaObj","_meta","_skipValidation","normalizeId","checkUnique","skipValidation","throwOrLogError","defaultMeta","currentUriFormat","keyRef","_getSchemaObj","_getSchemaFragment","_removeAllSchemas","cacheKey","schemas","shouldAddSchema","cached","addUsedSchema","recursiveMeta","willValidate","localRefs","ids","put","compiling","callValidate","currentOpts","refs","refVal","_validate","schemaId","_get$Id","_get$IdOrId","dataVar","$dataSchema","metaSchema","optsSchemas","metaOpts","noop","$additionalItems","additionalItems","$currErrSchemaPath","JsonHighlightRules","MatchingBraceOutdent","BaseFoldMode","commentRegex","singleLineBlockCommentRe","tripleStarBlockCommentRe","startRegionRe","_getFoldWidgetBase","forceMultiline","getCommentRegionBlock","getSectionRange","startIndent","subRange","CStyleFoldMode","$outdent","worker","DEFAULT_THEME","statusBar","_ace","onTextSelectionChange","aceEditor","errorTableVisible","buttonFormat","buttonCompact","compact","buttonRepair","repair","poweredBy","emptyNode","isReadOnly","editorDom","aceSession","originalSetAnnotations","_onSelect","onselect","_onMouseDown","onblur","_onBlur","validationErrorsContainer","additionalErrorsIndication","curserInfoElements","lnLabel","lnVal","colLabel","colVal","countLabel","countVal","validationErrorIcon","validationErrorCount","validationErrorIndication","parseErrorIndication","_updateCursorInfo","_emitSelectionChange","getInputSelection","cursorInfo","updateDisplay","curserPos","currentSelection","getTextSelection","_refreshAnnotations","errEnnotations","sanitizedText","escapeUnicode","escapeUnicodeChars","doValidate","parseErrors","_renderErrors","stringifyPath","noValidation","validationErrorsCount","validationErrors","marginBottom","paddingBottom","errorPaths","acc","errorLocations","getPositionForPath","errLoc","trEl","setTextSelection","onscroll","showIndication","_toggleErrorTableVisibility","aceSelection","endPos","getIndexForPosition","moveEnd","moveStart","selectionScrollPos","validation","missingRef","missingSchema","fullPath","errorSubclass","Subclass","traverse","_traverse","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","parentSchema","keyIndex","sch","arrayKeywords","propsKeywords","escapeJsonPtr","allKeys","skipKeywords","additionalProperties","propertyNames","not","allOf","anyOf","oneOf","definitions","patternProperties","dependencies","enum","const","required","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","minLength","pattern","maxItems","minItems","uniqueItems","maxProperties","minProperties","_vm","_h","$createElement","_c","staticClass","attrs","staticRenderFns","mounted","Null","validateGenerator","ucs2length","patterns","patternsHash","defaults","defaultsHash","customRules","checkCompiling","compilation","localCompile","cv","sourceCode","endCompiling","_schema","_root","isTop","useDefault","vars","refValCode","patternCode","defaultCode","customRuleCode","processCode","makeValidate","_refVal","refCode","refIndex","resolvedRef","rootRefId","addLocalRef","localSchema","inlineRef","inlineRefs","replaceLocalRef","removeLocalRef","refId","regexStr","valueStr","compIndex","statement","lastText","divInput","tableInput","tbodySearch","refreshSearch","_onDelayedSearch","_onSearch","_onKeyUp","searchNext","searchPrevious","resultIndex","_setActiveResult","activeResult","prevNode","prevElem","searchFieldActive","searchValueActive","_clearDelay","MAX_SEARCH_RESULTS","activeResultIndex","resultCount","qs","eq","regexp","maxKeys","kstr","vstr","xs","onSwitch","availableModes","view","currentMode","currentTitle","box","DATE","DAYS","TIME","HOSTNAME","URI","URIREF","URITEMPLATE","UUID","JSON_POINTER","RELATIVE_JSON_POINTER","date","month","day","full","hour","minute","timeZone","fast","email","ipv4","ipv6","uuid","date_time","DATE_TIME_SEPARATOR","dateTime","NOT_URI_FRAGMENT","Z_ANCHOR","getRootNode","onDestroy","destroyIfOutside","isChildOf","mousedown","mousewheel","multipleOfPrecision","resolveSchema","refPath","_getFullPath","getFullPath","resolveRecursive","getJsonPointer","parsedRef","resolveUrl","resolveIds","PREVENT_SCOPE_CHANGE","toHash","unescapeFragment","$ref","SIMPLE_INLINED","checkNoRef","countKeys","normalize","protocolSeparator","TRAILING_SLASH_HASH","baseIds","fullPaths","escapeFragment","KEYWORDS","keywordsJsonPointers","segments","jsonMap","jsonString","jsString","controlChars","quoteDbl","quoteLeft","quoteRight","quoteDblLeft","quoteDblRight","graveAccent","acuteAccent","isWhiteSpace","lastNonWhitespace","pp","nextNonWhiteSpace","iNext","skipBlockComment","skipComment","parseString","endQuote","parseKey","specialValues","isUrlRegex","isUrl","getAbsoluteLeft","removeAllClassNames","stripFormatting","divElement","iMax","attribute","specified","setEndOfContentEditable","getRangeAt","startContainer","endContainer","startOffset","endOffset","buffer","flush","hasChildNodes","prevChild","prevName","_ieVersion","rv","isFirefox","useCapture","jsonPath","parseProperty","parseIndex","enums","additionalProperty","validationError","insideRect","_margin","wait","immediate","later","callNow","textDiff","oldText","newText","oldEnd","newEnd","normalizedValue","textInputRange","moveToBookmark","getBookmark","compareEndPoints","_positionForIndex","textTillIndex","columnCount","jsmap","pathArr","pointerName","pointer","pointers","getColorCSS","ele","isValidColor","makeFieldTooltip","locale","description","example","existingPropNames","strippedName","validName","loadSchema","loadMetaSchemaOf","_compileAsync","loadMissingSchema","schemaPromise","removePromise","$vSchema","$required","$property","i1","$propertySch","$currentErrorPath","$loopRequired","$propertyPath","$missingProperty","arr2","l2","$propertyKey","$prop","$useData","arr3","i3","l3","naturalSort","YEAR_2000","setField","fieldEditable","internalValue","_debouncedOnChangeValue","_onChangeValue","_debouncedOnChangeField","_onChangeField","DEFAULT_MAX_VISIBLE_CHILDS","getField","maxVisibleChilds","internalPath","childIndex","parents","errorChild","updateError","fieldError","valueError","tdError","tdValue","popover","directions","contentRect","popoverRect","fit","setParent","previousField","_getDomField","childValue","visible","notUpdateDom","previousChilds","_getType","childField","findChildByProperty","sortObjectKeys","recreateDom","previousValue","domAnchor","_detachFromDom","clearDom","_attachToDom","_getDomValue","getInternalValue","fieldInnerText","valueInnerText","cloneChilds","childClone","getAppendDom","getShowMoreDom","resetVisibleChilds","_updateCssClassName","addClasses","currentNode","_hasChilds","newTr","trTemp","lastVisibleNode","searchField","searchValue","_updateDomField","_updateDomValue","offsetTop","focusElement","elementName","editableDiv","containsNode","removedNode","_remove","propCount","_clearValueError","_unescapeHTML","_setValueError","_setFieldError","_clearFieldError","undoDiff","redoDiff","_onAction","domValue","classNames","checkbox","tdCheckbox","getUTCMilliseconds","tdSelect","valueFieldHTML","tdColor","_deleteDomColor","toISOString","_updateDomDefault","domField","forceUnique","isDuplicate","inputElement","domDrag","tdField","_createDomTree","lastNode","draggedNode","offsetY","onDrag","oldCursor","oldPaths","oldParent","oldNextNode","trThis","trPrev","trNext","trFirst","trLast","trRoot","nodePrev","nodeNext","topThis","topPrev","topFirst","heightThis","bottomNext","heightNext","previousSibling","diffLevel","levelNext","isDraggedNode","_nextNode","startAutoScroll","sameParent","_createDomField","isFirst","domTree","fieldText","contentEditable","_escapeHTML","_updateSchema","updateNodeName","_updateDomIndexes","_findSchema","_findEnum","composite","childSchema","foundSchema","allSchemas","nextPath","_createDomValue","_createDomExpandButton","borderCollapse","tdExpand","tdSeparator","expandable","_onExpand","_showColorPicker","info","nextNode","nextDom","nextDom2","_onInsertBefore","_onInsertAfter","_lastNode","_getElementName","homeNode","_firstNode","prevElement","_previousElement","appendDom","nextNode2","_previousNode","nextElement","_nextElement","prevDom","colorAnchor","excludeNode","blurNodes","clones","newNode","_onChangeType","order","nodeA","getNestedChild","nodeB","valueA","valueB","lastTr","oldInternalValue","newInternalValue","includeObjects","pathsMap","_getChildPaths","rootPath","firstDom","lastDom","templates","appendData","insertData","insertSubmenu","lower","num","numFloat","htmlEscaped","escapedText","_escapeJSON","escaped","$schemaDeps","$propertyDeps","$deps","i2","$schemaKeys","$pProperties","$pPropertyKeys","$aProperties","$someProperties","$noAdditional","$additionalIsSchema","$removeAdditional","removeAdditional","$checkAdditional","v5","$requiredHash","$pgProperties","$pgPropertyKeys","$pProperty","$pgProperty","$additionalProperty","$useDefaults","useDefaults","arr4","i4","l4","$hasDefault","arr5","i5","l5","arr6","i6","l6","$pgSchema","$pgMin","$pgMax","$limit","$reason","$moreOrLess","$isMax","$exclusiveKeyword","$schemaExcl","$isDataExcl","$notOp","$schemaValueExcl","$exclusive","$exclType","$exclIsNumber","$opExpr","$opStr","ruleModules","ALL","TYPES","implKeywords","implements","$refKeywords","schemaHasRulesExcept","$es7","yieldAwait","$top","rootId","$closingBraces1","$closingBraces2","$typeSchema","$typeIsArray","extendRefs","coerceTypes","$coerceToTypes","coerceToTypes","$rulesGroup","$shouldUseGroup","$method","$dataType","$coerced","$bracesCoercion","$type","checkDataType","$shouldUseRule","$ruleImplementsSomeKeyword","impl","finalCleanUpCode","metaSchemaRef","stringifyPrimitive","objectKeys","ks","escapedChars","A_CODE","_parse","ptr","topLevel","whitespace","char","getChar","read","parseArray","parseObject","backChar","parseNumber","unexpectedToken","loop","getCharCode","wasUnexpectedToken","numStr","getDigits","itemPtr","getLoc","propPtr","escapeJsonPointer","mapLoc","checkUnexpectedEnd","digits","SyntaxError","validType","wsPos","wsColumn","wsLine","repeat","_stringify","_data","lvl","quoted","stringifyArray","stringifyObject","itemLvl","propLvl","VALID_TYPES","ESC_QUOTE","ESC_B","ESC_F","ESC_N","ESC_R","ESC_T","ESC_0","ESC_1","oFxNcL","oFyNcL","sre","dre","hre","ore","insensitive","xN","yN","xD","yD","cLoc","numS","$allSchemasEmpty","contentMenuClicked","_onShowAllClick","_onSegmentClick","selectionCallback","_onContextMenuItemClick","contextMenuCallback","sepEl","pathEl","leftRectPos","showAllBtn","cycles","aobj","bobj","seen","seenIndex","dataType","negate","EQUAL","AND","OK","NOT","checkDataTypes","dataTypes","null","integer","unescapeJsonPointer","COERCE_TO_TYPES","optionCoerceTypes","IDENTIFIER","SINGLE_QUOTE","expr","EMPTY_ELSE","EMPTY_IF_NO_ELSE","EMPTY_IF_WITH_ELSE","ERRORS_REGEXP","REMOVE_ERRORS","REMOVE_ERRORS_ASYNC","RETURN_VALID","RETURN_TRUE","RETURN_ASYNC","RETURN_DATA_ASYNC","ROOTDATA_REGEXP","REMOVE_ROOTDATA","exceptKeyword","currentPath","isNumber","joinPaths","jsonPointer","segment","setDirection","sortedBy","pathArray","onsubmit","classCallCheck","instance","Constructor","createClass","protoProps","staticProps","slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","padStart","pad","colorNames","tqw","qmrn","zr","bsq","bck","nch","bvt","brwn","brw","ctb","hrt","chcT","cr","rnw","crns","crms","cn","Db","Dcn","Dgnr","Dgr","Dgrn","Dkhk","Dmgn","Dvgr","Drng","Drch","Dr","Dsmn","Dsgr","DsTb","DsTg","Dtrq","Dvt","ppnk","pskb","mgr","grb","rbrc","rwht","stg","chs","gnsb","gnr","gr","grn","grnw","hnw","htpn","ng","vr","khk","vnr","nrb","wngr","mnch","Lb","Lcr","Lcn","Lgnr","Lgr","Lgrn","Lpnk","Lsmn","Lsgr","Lskb","LsTg","Lstb","Lw","mgrn","mgnt","mrn","mqm","mmb","mmrc","mmpr","mmsT","mtr","mmvt","mnLb","ntc","mstr","mccs","vjw","nv","vrb","rng","rngr","rch","pgnr","pgrn","ptrq","pvtr","ppwh","pchp","pr","pnk","pm","pwrb","prp","cc","sbr","rb","sbrw","smn","nbr","sgrn","ssh","snn","svr","skb","sTb","sTgr","snw","stb","tn","thst","tmT","trqs","vt","whT","wht","hts","wgrn","printNum","decs","Color","_input$match$map","_input$match$map2","_a","_input$match$map3","_input$match$map4","_r","_g","_b","_a2","hexToRgb","nameToRgb","rgb","vals","mults","suff","_rgba","_hsla","hslToRgb","rgbToHsl","_ref","_ref2","_ref3","_ref4","hue2rgb","_addRule","ruleGroup","rg"],"mappings":"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","file":"js/chunk-31c4aefe.5e74836c.js","sourcesContent":["'use strict';\nmodule.exports = function generate_format(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $unknownFormats = it.opts.unknownFormats,\n    $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = 'format' + $lvl,\n      $isObject = 'isObject' + $lvl,\n      $formatType = 'formatType' + $lvl;\n    out += ' var ' + ($format) + ' = formats[' + ($schemaValue) + ']; var ' + ($isObject) + ' = typeof ' + ($format) + ' == \\'object\\' && !(' + ($format) + ' instanceof RegExp) && ' + ($format) + '.validate; var ' + ($formatType) + ' = ' + ($isObject) + ' && ' + ($format) + '.type || \\'string\\'; if (' + ($isObject) + ') { ';\n    if (it.async) {\n      out += ' var async' + ($lvl) + ' = ' + ($format) + '.async; ';\n    }\n    out += ' ' + ($format) + ' = ' + ($format) + '.validate; } if (  ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n    }\n    out += ' (';\n    if ($unknownFormats != 'ignore') {\n      out += ' (' + ($schemaValue) + ' && !' + ($format) + ' ';\n      if ($allowUnknown) {\n        out += ' && self._opts.unknownFormats.indexOf(' + ($schemaValue) + ') == -1 ';\n      }\n      out += ') || ';\n    }\n    out += ' (' + ($format) + ' && ' + ($formatType) + ' == \\'' + ($ruleType) + '\\' && !(typeof ' + ($format) + ' == \\'function\\' ? ';\n    if (it.async) {\n      out += ' (async' + ($lvl) + ' ? ' + (it.yieldAwait) + ' ' + ($format) + '(' + ($data) + ') : ' + ($format) + '(' + ($data) + ')) ';\n    } else {\n      out += ' ' + ($format) + '(' + ($data) + ') ';\n    }\n    out += ' : ' + ($format) + '.test(' + ($data) + '))))) {';\n  } else {\n    var $format = it.formats[$schema];\n    if (!$format) {\n      if ($unknownFormats == 'ignore') {\n        it.logger.warn('unknown format \"' + $schema + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema) >= 0) {\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == 'object' && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || 'string';\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += ' if (true) { ';\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async) throw new Error('async format in sync schema');\n      var $formatRef = 'formats' + it.util.getProperty($schema) + '.validate';\n      out += ' if (!(' + (it.yieldAwait) + ' ' + ($formatRef) + '(' + ($data) + '))) { ';\n    } else {\n      out += ' if (! ';\n      var $formatRef = 'formats' + it.util.getProperty($schema);\n      if ($isObject) $formatRef += '.validate';\n      if (typeof $format == 'function') {\n        out += ' ' + ($formatRef) + '(' + ($data) + ') ';\n      } else {\n        out += ' ' + ($formatRef) + '.test(' + ($data) + ') ';\n      }\n      out += ') { ';\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('format') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { format:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match format \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_not(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if (it.util.schemaHasRules($schema, it.RULES.all)) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += ' ' + (it.validate($it)) + ' ';\n    $it.createErrors = true;\n    if ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (' + ($nextValid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    out += '  var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if ($breakOnError) {\n      out += ' if (false) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_const(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!$isData) {\n    out += ' var schema' + ($lvl) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ' = equal(' + ($data) + ', schema' + ($lvl) + '); if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('const') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to constant\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","/* Jison generated parser */\nvar jsonlint = (function(){\nvar parser = {trace: function trace() { },\nyy: {},\nsymbols_: {\"error\":2,\"JSONString\":3,\"STRING\":4,\"JSONNumber\":5,\"NUMBER\":6,\"JSONNullLiteral\":7,\"NULL\":8,\"JSONBooleanLiteral\":9,\"TRUE\":10,\"FALSE\":11,\"JSONText\":12,\"JSONValue\":13,\"EOF\":14,\"JSONObject\":15,\"JSONArray\":16,\"{\":17,\"}\":18,\"JSONMemberList\":19,\"JSONMember\":20,\":\":21,\",\":22,\"[\":23,\"]\":24,\"JSONElementList\":25,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",4:\"STRING\",6:\"NUMBER\",8:\"NULL\",10:\"TRUE\",11:\"FALSE\",14:\"EOF\",17:\"{\",18:\"}\",21:\":\",22:\",\",23:\"[\",24:\"]\"},\nproductions_: [0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],\nperformAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1: // replace escaped characters with actual character\n          this.$ = yytext.replace(/\\\\(\\\\|\")/g, \"$\"+\"1\")\n                     .replace(/\\\\n/g,'\\n')\n                     .replace(/\\\\r/g,'\\r')\n                     .replace(/\\\\t/g,'\\t')\n                     .replace(/\\\\v/g,'\\v')\n                     .replace(/\\\\f/g,'\\f')\n                     .replace(/\\\\b/g,'\\b');\n        \nbreak;\ncase 2:this.$ = Number(yytext);\nbreak;\ncase 3:this.$ = null;\nbreak;\ncase 4:this.$ = true;\nbreak;\ncase 5:this.$ = false;\nbreak;\ncase 6:return this.$ = $$[$0-1];\nbreak;\ncase 13:this.$ = {};\nbreak;\ncase 14:this.$ = $$[$0-1];\nbreak;\ncase 15:this.$ = [$$[$0-2], $$[$0]];\nbreak;\ncase 16:this.$ = {}; this.$[$$[$0][0]] = $$[$0][1];\nbreak;\ncase 17:this.$ = $$[$0-2]; $$[$0-2][$$[$0][0]] = $$[$0][1];\nbreak;\ncase 18:this.$ = [];\nbreak;\ncase 19:this.$ = $$[$0-1];\nbreak;\ncase 20:this.$ = [$$[$0]];\nbreak;\ncase 21:this.$ = $$[$0-2]; $$[$0-2].push($$[$0]);\nbreak;\n}\n},\ntable: [{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],\ndefaultActions: {16:[2,6]},\nparseError: function parseError(str, hash) {\n    throw new Error(str);\n},\nparse: function parse(input) {\n    var self = this,\n        stack = [0],\n        vstack = [null], // semantic value stack\n        lstack = [], // location stack\n        table = this.table,\n        yytext = '',\n        yylineno = 0,\n        yyleng = 0,\n        recovering = 0,\n        TERROR = 2,\n        EOF = 1;\n\n    //this.reductionCount = this.shiftCount = 0;\n\n    this.lexer.setInput(input);\n    this.lexer.yy = this.yy;\n    this.yy.lexer = this.lexer;\n    if (typeof this.lexer.yylloc == 'undefined')\n        this.lexer.yylloc = {};\n    var yyloc = this.lexer.yylloc;\n    lstack.push(yyloc);\n\n    if (typeof this.yy.parseError === 'function')\n        this.parseError = this.yy.parseError;\n\n    function popStack (n) {\n        stack.length = stack.length - 2*n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n\n    function lex() {\n        var token;\n        token = self.lexer.lex() || 1; // $end = 1\n        // if token isn't its numeric value, convert\n        if (typeof token !== 'number') {\n            token = self.symbols_[token] || token;\n        }\n        return token;\n    }\n\n    var symbol, preErrorSymbol, state, action, a, r, yyval={},p,len,newState, expected;\n    while (true) {\n        // retreive state number from top of stack\n        state = stack[stack.length-1];\n\n        // use default actions if available\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol == null)\n                symbol = lex();\n            // read action for current state and first input\n            action = table[state] && table[state][symbol];\n        }\n\n        // handle parse error\n        _handle_error:\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\n\n            if (!recovering) {\n                // Report error\n                expected = [];\n                for (p in table[state]) if (this.terminals_[p] && p > 2) {\n                    expected.push(\"'\"+this.terminals_[p]+\"'\");\n                }\n                var errStr = '';\n                if (this.lexer.showPosition) {\n                    errStr = 'Parse error on line '+(yylineno+1)+\":\\n\"+this.lexer.showPosition()+\"\\nExpecting \"+expected.join(', ') + \", got '\" + this.terminals_[symbol]+ \"'\";\n                } else {\n                    errStr = 'Parse error on line '+(yylineno+1)+\": Unexpected \" +\n                                  (symbol == 1 /*EOF*/ ? \"end of input\" :\n                                              (\"'\"+(this.terminals_[symbol] || symbol)+\"'\"));\n                }\n                this.parseError(errStr,\n                    {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});\n            }\n\n            // just recovered from another error\n            if (recovering == 3) {\n                if (symbol == EOF) {\n                    throw new Error(errStr || 'Parsing halted.');\n                }\n\n                // discard current lookahead and grab another\n                yyleng = this.lexer.yyleng;\n                yytext = this.lexer.yytext;\n                yylineno = this.lexer.yylineno;\n                yyloc = this.lexer.yylloc;\n                symbol = lex();\n            }\n\n            // try to recover from error\n            while (1) {\n                // check for error recovery rule in this state\n                if ((TERROR.toString()) in table[state]) {\n                    break;\n                }\n                if (state == 0) {\n                    throw new Error(errStr || 'Parsing halted.');\n                }\n                popStack(1);\n                state = stack[stack.length-1];\n            }\n\n            preErrorSymbol = symbol; // save the lookahead token\n            symbol = TERROR;         // insert generic error symbol as new lookahead\n            state = stack[stack.length-1];\n            action = table[state] && table[state][TERROR];\n            recovering = 3; // allow 3 real symbols to be shifted before reporting a new error\n        }\n\n        // this shouldn't happen, unless resolve defaults are off\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: '+state+', token: '+symbol);\n        }\n\n        switch (action[0]) {\n\n            case 1: // shift\n                //this.shiftCount++;\n\n                stack.push(symbol);\n                vstack.push(this.lexer.yytext);\n                lstack.push(this.lexer.yylloc);\n                stack.push(action[1]); // push state\n                symbol = null;\n                if (!preErrorSymbol) { // normal execution/no error\n                    yyleng = this.lexer.yyleng;\n                    yytext = this.lexer.yytext;\n                    yylineno = this.lexer.yylineno;\n                    yyloc = this.lexer.yylloc;\n                    if (recovering > 0)\n                        recovering--;\n                } else { // error just occurred, resume old lookahead f/ before error\n                    symbol = preErrorSymbol;\n                    preErrorSymbol = null;\n                }\n                break;\n\n            case 2: // reduce\n                //this.reductionCount++;\n\n                len = this.productions_[action[1]][1];\n\n                // perform semantic action\n                yyval.$ = vstack[vstack.length-len]; // default to $$ = $1\n                // default location, uses first token for firsts, last for lasts\n                yyval._$ = {\n                    first_line: lstack[lstack.length-(len||1)].first_line,\n                    last_line: lstack[lstack.length-1].last_line,\n                    first_column: lstack[lstack.length-(len||1)].first_column,\n                    last_column: lstack[lstack.length-1].last_column\n                };\n                r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);\n\n                if (typeof r !== 'undefined') {\n                    return r;\n                }\n\n                // pop off stack\n                if (len) {\n                    stack = stack.slice(0,-1*len*2);\n                    vstack = vstack.slice(0, -1*len);\n                    lstack = lstack.slice(0, -1*len);\n                }\n\n                stack.push(this.productions_[action[1]][0]);    // push nonterminal (reduce)\n                vstack.push(yyval.$);\n                lstack.push(yyval._$);\n                // goto new state = table[STATE][NONTERMINAL]\n                newState = table[stack[stack.length-2]][stack[stack.length-1]];\n                stack.push(newState);\n                break;\n\n            case 3: // accept\n                return true;\n        }\n\n    }\n\n    return true;\n}};\n/* Jison generated lexer */\nvar lexer = (function(){\nvar lexer = ({EOF:1,\nparseError:function parseError(str, hash) {\n        if (this.yy.parseError) {\n            this.yy.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\nsetInput:function (input) {\n        this._input = input;\n        this._more = this._less = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};\n        return this;\n    },\ninput:function () {\n        var ch = this._input[0];\n        this.yytext+=ch;\n        this.yyleng++;\n        this.match+=ch;\n        this.matched+=ch;\n        var lines = ch.match(/\\n/);\n        if (lines) this.yylineno++;\n        this._input = this._input.slice(1);\n        return ch;\n    },\nunput:function (ch) {\n        this._input = ch + this._input;\n        return this;\n    },\nmore:function () {\n        this._more = true;\n        return this;\n    },\nless:function (n) {\n        this._input = this.match.slice(n) + this._input;\n    },\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\\n/g, \"\");\n    },\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c+\"^\";\n    },\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) this.done = true;\n\n        var token,\n            match,\n            tempMatch,\n            index,\n            col,\n            lines;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i=0;i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (!this.options.flex) break;\n            }\n        }\n        if (match) {\n            lines = match[0].match(/\\n.*/g);\n            if (lines) this.yylineno += lines.length;\n            this.yylloc = {first_line: this.yylloc.last_line,\n                           last_line: this.yylineno+1,\n                           first_column: this.yylloc.last_column,\n                           last_column: lines ? lines[lines.length-1].length-1 : this.yylloc.last_column + match[0].length}\n            this.yytext += match[0];\n            this.match += match[0];\n            this.yyleng = this.yytext.length;\n            this._more = false;\n            this._input = this._input.slice(match[0].length);\n            this.matched += match[0];\n            token = this.performAction.call(this, this.yy, this, rules[index],this.conditionStack[this.conditionStack.length-1]);\n            if (this.done && this._input) this.done = false;\n            if (token) return token;\n            else return;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\\n'+this.showPosition(), \n                    {text: \"\", token: null, line: this.yylineno});\n        }\n    },\nlex:function lex() {\n        var r = this.next();\n        if (typeof r !== 'undefined') {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\nbegin:function begin(condition) {\n        this.conditionStack.push(condition);\n    },\npopState:function popState() {\n        return this.conditionStack.pop();\n    },\n_currentRules:function _currentRules() {\n        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;\n    },\ntopState:function () {\n        return this.conditionStack[this.conditionStack.length-2];\n    },\npushState:function begin(condition) {\n        this.begin(condition);\n    }});\nlexer.options = {};\nlexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\n\nvar YYSTATE=YY_START\nswitch($avoiding_name_collisions) {\ncase 0:/* skip whitespace */\nbreak;\ncase 1:return 6\nbreak;\ncase 2:yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2); return 4\nbreak;\ncase 3:return 17\nbreak;\ncase 4:return 18\nbreak;\ncase 5:return 23\nbreak;\ncase 6:return 24\nbreak;\ncase 7:return 22\nbreak;\ncase 8:return 21\nbreak;\ncase 9:return 10\nbreak;\ncase 10:return 11\nbreak;\ncase 11:return 8\nbreak;\ncase 12:return 14\nbreak;\ncase 13:return 'INVALID'\nbreak;\n}\n};\nlexer.rules = [/^(?:\\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/,/^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/,/^(?:\\{)/,/^(?:\\})/,/^(?:\\[)/,/^(?:\\])/,/^(?:,)/,/^(?::)/,/^(?:true\\b)/,/^(?:false\\b)/,/^(?:null\\b)/,/^(?:$)/,/^(?:.)/];\nlexer.conditions = {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13],\"inclusive\":true}};\n\n\n;\nreturn lexer;})()\nparser.lexer = lexer;\nreturn parser;\n})();\nif (typeof require !== 'undefined' && typeof exports !== 'undefined') {\n  exports.parser = jsonlint;\n  exports.parse = jsonlint.parse.bind(jsonlint);\n}","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\n/**\n * Define a module along with a payload\n * @param module a name for the payload\n * @param payload a function to call with (acequire, exports, module) params\n */\n\n(function() {\n\nvar ACE_NAMESPACE = \"ace\";\n\nvar global = (function() { return this; })();\nif (!global && typeof window != \"undefined\") global = window; // strict mode\n\n\nif (!ACE_NAMESPACE && typeof acequirejs !== \"undefined\")\n    return;\n\n\nvar define = function(module, deps, payload) {\n    if (typeof module !== \"string\") {\n        if (define.original)\n            define.original.apply(this, arguments);\n        else {\n            console.error(\"dropping module because define wasn\\'t a string.\");\n            console.trace();\n        }\n        return;\n    }\n    if (arguments.length == 2)\n        payload = deps;\n    if (!define.modules[module]) {\n        define.payloads[module] = payload;\n        define.modules[module] = null;\n    }\n};\n\ndefine.modules = {};\ndefine.payloads = {};\n\n/**\n * Get at functionality define()ed using the function above\n */\nvar _acequire = function(parentId, module, callback) {\n    if (typeof module === \"string\") {\n        var payload = lookup(parentId, module);\n        if (payload != undefined) {\n            callback && callback();\n            return payload;\n        }\n    } else if (Object.prototype.toString.call(module) === \"[object Array]\") {\n        var params = [];\n        for (var i = 0, l = module.length; i < l; ++i) {\n            var dep = lookup(parentId, module[i]);\n            if (dep == undefined && acequire.original)\n                return;\n            params.push(dep);\n        }\n        return callback && callback.apply(null, params) || true;\n    }\n};\n\nvar acequire = function(module, callback) {\n    var packagedModule = _acequire(\"\", module, callback);\n    if (packagedModule == undefined && acequire.original)\n        return acequire.original.apply(this, arguments);\n    return packagedModule;\n};\n\nvar normalizeModule = function(parentId, moduleName) {\n    // normalize plugin acequires\n    if (moduleName.indexOf(\"!\") !== -1) {\n        var chunks = moduleName.split(\"!\");\n        return normalizeModule(parentId, chunks[0]) + \"!\" + normalizeModule(parentId, chunks[1]);\n    }\n    // normalize relative acequires\n    if (moduleName.charAt(0) == \".\") {\n        var base = parentId.split(\"/\").slice(0, -1).join(\"/\");\n        moduleName = base + \"/\" + moduleName;\n\n        while(moduleName.indexOf(\".\") !== -1 && previous != moduleName) {\n            var previous = moduleName;\n            moduleName = moduleName.replace(/\\/\\.\\//, \"/\").replace(/[^\\/]+\\/\\.\\.\\//, \"\");\n        }\n    }\n    return moduleName;\n};\n\n/**\n * Internal function to lookup moduleNames and resolve them by calling the\n * definition function if needed.\n */\nvar lookup = function(parentId, moduleName) {\n    moduleName = normalizeModule(parentId, moduleName);\n\n    var module = define.modules[moduleName];\n    if (!module) {\n        module = define.payloads[moduleName];\n        if (typeof module === 'function') {\n            var exports = {};\n            var mod = {\n                id: moduleName,\n                uri: '',\n                exports: exports,\n                packaged: true\n            };\n\n            var req = function(module, callback) {\n                return _acequire(moduleName, module, callback);\n            };\n\n            var returnValue = module(req, exports, mod);\n            exports = returnValue || mod.exports;\n            define.modules[moduleName] = exports;\n            delete define.payloads[moduleName];\n        }\n        module = define.modules[moduleName] = exports || module;\n    }\n    return module;\n};\n\nfunction exportAce(ns) {\n    var root = global;\n    if (ns) {\n        if (!global[ns])\n            global[ns] = {};\n        root = global[ns];\n    }\n\n    if (!root.define || !root.define.packaged) {\n        define.original = root.define;\n        root.define = define;\n        root.define.packaged = true;\n    }\n\n    if (!root.acequire || !root.acequire.packaged) {\n        acequire.original = root.acequire;\n        root.acequire = acequire;\n        root.acequire.packaged = true;\n    }\n}\n\nexportAce(ACE_NAMESPACE);\n\n})();\n\nace.define(\"ace/lib/regexp\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\n    var real = {\n            exec: RegExp.prototype.exec,\n            test: RegExp.prototype.test,\n            match: String.prototype.match,\n            replace: String.prototype.replace,\n            split: String.prototype.split\n        },\n        compliantExecNpcg = real.exec.call(/()??/, \"\")[1] === undefined, // check `exec` handling of nonparticipating capturing groups\n        compliantLastIndexIncrement = function () {\n            var x = /^/g;\n            real.test.call(x, \"\");\n            return !x.lastIndex;\n        }();\n\n    if (compliantLastIndexIncrement && compliantExecNpcg)\n        return;\n    RegExp.prototype.exec = function (str) {\n        var match = real.exec.apply(this, arguments),\n            name, r2;\n        if ( typeof(str) == 'string' && match) {\n            if (!compliantExecNpcg && match.length > 1 && indexOf(match, \"\") > -1) {\n                r2 = RegExp(this.source, real.replace.call(getNativeFlags(this), \"g\", \"\"));\n                real.replace.call(str.slice(match.index), r2, function () {\n                    for (var i = 1; i < arguments.length - 2; i++) {\n                        if (arguments[i] === undefined)\n                            match[i] = undefined;\n                    }\n                });\n            }\n            if (this._xregexp && this._xregexp.captureNames) {\n                for (var i = 1; i < match.length; i++) {\n                    name = this._xregexp.captureNames[i - 1];\n                    if (name)\n                       match[name] = match[i];\n                }\n            }\n            if (!compliantLastIndexIncrement && this.global && !match[0].length && (this.lastIndex > match.index))\n                this.lastIndex--;\n        }\n        return match;\n    };\n    if (!compliantLastIndexIncrement) {\n        RegExp.prototype.test = function (str) {\n            var match = real.exec.call(this, str);\n            if (match && this.global && !match[0].length && (this.lastIndex > match.index))\n                this.lastIndex--;\n            return !!match;\n        };\n    }\n\n    function getNativeFlags (regex) {\n        return (regex.global     ? \"g\" : \"\") +\n               (regex.ignoreCase ? \"i\" : \"\") +\n               (regex.multiline  ? \"m\" : \"\") +\n               (regex.extended   ? \"x\" : \"\") + // Proposed for ES4; included in AS3\n               (regex.sticky     ? \"y\" : \"\");\n    }\n\n    function indexOf (array, item, from) {\n        if (Array.prototype.indexOf) // Use the native array method if available\n            return array.indexOf(item, from);\n        for (var i = from || 0; i < array.length; i++) {\n            if (array[i] === item)\n                return i;\n        }\n        return -1;\n    }\n\n});\n\nace.define(\"ace/lib/es5-shim\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\nfunction Empty() {}\n\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function bind(that) { // .length is 1\n        var target = this;\n        if (typeof target != \"function\") {\n            throw new TypeError(\"Function.prototype.bind called on incompatible \" + target);\n        }\n        var args = slice.call(arguments, 1); // for normal call\n        var bound = function () {\n\n            if (this instanceof bound) {\n\n                var result = target.apply(\n                    this,\n                    args.concat(slice.call(arguments))\n                );\n                if (Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                return target.apply(\n                    that,\n                    args.concat(slice.call(arguments))\n                );\n\n            }\n\n        };\n        if(target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            Empty.prototype = null;\n        }\n        return bound;\n    };\n}\nvar call = Function.prototype.call;\nvar prototypeOfArray = Array.prototype;\nvar prototypeOfObject = Object.prototype;\nvar slice = prototypeOfArray.slice;\nvar _toString = call.bind(prototypeOfObject.toString);\nvar owns = call.bind(prototypeOfObject.hasOwnProperty);\nvar defineGetter;\nvar defineSetter;\nvar lookupGetter;\nvar lookupSetter;\nvar supportsAccessors;\nif ((supportsAccessors = owns(prototypeOfObject, \"__defineGetter__\"))) {\n    defineGetter = call.bind(prototypeOfObject.__defineGetter__);\n    defineSetter = call.bind(prototypeOfObject.__defineSetter__);\n    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);\n    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);\n}\nif ([1,2].splice(0).length != 2) {\n    if(function() { // test IE < 9 to splice bug - see issue #138\n        function makeArray(l) {\n            var a = new Array(l+2);\n            a[0] = a[1] = 0;\n            return a;\n        }\n        var array = [], lengthBefore;\n        \n        array.splice.apply(array, makeArray(20));\n        array.splice.apply(array, makeArray(26));\n\n        lengthBefore = array.length; //46\n        array.splice(5, 0, \"XXX\"); // add one element\n\n        lengthBefore + 1 == array.length\n\n        if (lengthBefore + 1 == array.length) {\n            return true;// has right splice implementation without bugs\n        }\n    }()) {//IE 6/7\n        var array_splice = Array.prototype.splice;\n        Array.prototype.splice = function(start, deleteCount) {\n            if (!arguments.length) {\n                return [];\n            } else {\n                return array_splice.apply(this, [\n                    start === void 0 ? 0 : start,\n                    deleteCount === void 0 ? (this.length - start) : deleteCount\n                ].concat(slice.call(arguments, 2)))\n            }\n        };\n    } else {//IE8\n        Array.prototype.splice = function(pos, removeCount){\n            var length = this.length;\n            if (pos > 0) {\n                if (pos > length)\n                    pos = length;\n            } else if (pos == void 0) {\n                pos = 0;\n            } else if (pos < 0) {\n                pos = Math.max(length + pos, 0);\n            }\n\n            if (!(pos+removeCount < length))\n                removeCount = length - pos;\n\n            var removed = this.slice(pos, pos+removeCount);\n            var insert = slice.call(arguments, 2);\n            var add = insert.length;            \n            if (pos === length) {\n                if (add) {\n                    this.push.apply(this, insert);\n                }\n            } else {\n                var remove = Math.min(removeCount, length - pos);\n                var tailOldPos = pos + remove;\n                var tailNewPos = tailOldPos + add - remove;\n                var tailCount = length - tailOldPos;\n                var lengthAfterRemove = length - remove;\n\n                if (tailNewPos < tailOldPos) { // case A\n                    for (var i = 0; i < tailCount; ++i) {\n                        this[tailNewPos+i] = this[tailOldPos+i];\n                    }\n                } else if (tailNewPos > tailOldPos) { // case B\n                    for (i = tailCount; i--; ) {\n                        this[tailNewPos+i] = this[tailOldPos+i];\n                    }\n                } // else, add == remove (nothing to do)\n\n                if (add && pos === lengthAfterRemove) {\n                    this.length = lengthAfterRemove; // truncate array\n                    this.push.apply(this, insert);\n                } else {\n                    this.length = lengthAfterRemove + add; // reserves space\n                    for (i = 0; i < add; ++i) {\n                        this[pos+i] = insert[i];\n                    }\n                }\n            }\n            return removed;\n        };\n    }\n}\nif (!Array.isArray) {\n    Array.isArray = function isArray(obj) {\n        return _toString(obj) == \"[object Array]\";\n    };\n}\nvar boxedString = Object(\"a\"),\n    splitString = boxedString[0] != \"a\" || !(0 in boxedString);\n\nif (!Array.prototype.forEach) {\n    Array.prototype.forEach = function forEach(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(); // TODO message\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                fun.call(thisp, self[i], i, object);\n            }\n        }\n    };\n}\nif (!Array.prototype.map) {\n    Array.prototype.map = function map(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            result = Array(length),\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self)\n                result[i] = fun.call(thisp, self[i], i, object);\n        }\n        return result;\n    };\n}\nif (!Array.prototype.filter) {\n    Array.prototype.filter = function filter(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                    object,\n            length = self.length >>> 0,\n            result = [],\n            value,\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                value = self[i];\n                if (fun.call(thisp, value, i, object)) {\n                    result.push(value);\n                }\n            }\n        }\n        return result;\n    };\n}\nif (!Array.prototype.every) {\n    Array.prototype.every = function every(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && !fun.call(thisp, self[i], i, object)) {\n                return false;\n            }\n        }\n        return true;\n    };\n}\nif (!Array.prototype.some) {\n    Array.prototype.some = function some(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && fun.call(thisp, self[i], i, object)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\nif (!Array.prototype.reduce) {\n    Array.prototype.reduce = function reduce(fun /*, initial*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0;\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n        if (!length && arguments.length == 1) {\n            throw new TypeError(\"reduce of empty array with no initial value\");\n        }\n\n        var i = 0;\n        var result;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i++];\n                    break;\n                }\n                if (++i >= length) {\n                    throw new TypeError(\"reduce of empty array with no initial value\");\n                }\n            } while (true);\n        }\n\n        for (; i < length; i++) {\n            if (i in self) {\n                result = fun.call(void 0, result, self[i], i, object);\n            }\n        }\n\n        return result;\n    };\n}\nif (!Array.prototype.reduceRight) {\n    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {\n        var object = toObject(this),\n            self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0;\n        if (_toString(fun) != \"[object Function]\") {\n            throw new TypeError(fun + \" is not a function\");\n        }\n        if (!length && arguments.length == 1) {\n            throw new TypeError(\"reduceRight of empty array with no initial value\");\n        }\n\n        var result, i = length - 1;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i--];\n                    break;\n                }\n                if (--i < 0) {\n                    throw new TypeError(\"reduceRight of empty array with no initial value\");\n                }\n            } while (true);\n        }\n\n        do {\n            if (i in this) {\n                result = fun.call(void 0, result, self[i], i, object);\n            }\n        } while (i--);\n\n        return result;\n    };\n}\nif (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {\n    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {\n        var self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = toInteger(arguments[1]);\n        }\n        i = i >= 0 ? i : Math.max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === sought) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\nif (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {\n    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {\n        var self = splitString && _toString(this) == \"[object String]\" ?\n                this.split(\"\") :\n                toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n        var i = length - 1;\n        if (arguments.length > 1) {\n            i = Math.min(i, toInteger(arguments[1]));\n        }\n        i = i >= 0 ? i : length - Math.abs(i);\n        for (; i >= 0; i--) {\n            if (i in self && sought === self[i]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\nif (!Object.getPrototypeOf) {\n    Object.getPrototypeOf = function getPrototypeOf(object) {\n        return object.__proto__ || (\n            object.constructor ?\n            object.constructor.prototype :\n            prototypeOfObject\n        );\n    };\n}\nif (!Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = \"Object.getOwnPropertyDescriptor called on a \" +\n                         \"non-object: \";\n    Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {\n        if ((typeof object != \"object\" && typeof object != \"function\") || object === null)\n            throw new TypeError(ERR_NON_OBJECT + object);\n        if (!owns(object, property))\n            return;\n\n        var descriptor, getter, setter;\n        descriptor =  { enumerable: true, configurable: true };\n        if (supportsAccessors) {\n            var prototype = object.__proto__;\n            object.__proto__ = prototypeOfObject;\n\n            var getter = lookupGetter(object, property);\n            var setter = lookupSetter(object, property);\n            object.__proto__ = prototype;\n\n            if (getter || setter) {\n                if (getter) descriptor.get = getter;\n                if (setter) descriptor.set = setter;\n                return descriptor;\n            }\n        }\n        descriptor.value = object[property];\n        return descriptor;\n    };\n}\nif (!Object.getOwnPropertyNames) {\n    Object.getOwnPropertyNames = function getOwnPropertyNames(object) {\n        return Object.keys(object);\n    };\n}\nif (!Object.create) {\n    var createEmpty;\n    if (Object.prototype.__proto__ === null) {\n        createEmpty = function () {\n            return { \"__proto__\": null };\n        };\n    } else {\n        createEmpty = function () {\n            var empty = {};\n            for (var i in empty)\n                empty[i] = null;\n            empty.constructor =\n            empty.hasOwnProperty =\n            empty.propertyIsEnumerable =\n            empty.isPrototypeOf =\n            empty.toLocaleString =\n            empty.toString =\n            empty.valueOf =\n            empty.__proto__ = null;\n            return empty;\n        }\n    }\n\n    Object.create = function create(prototype, properties) {\n        var object;\n        if (prototype === null) {\n            object = createEmpty();\n        } else {\n            if (typeof prototype != \"object\")\n                throw new TypeError(\"typeof prototype[\"+(typeof prototype)+\"] != 'object'\");\n            var Type = function () {};\n            Type.prototype = prototype;\n            object = new Type();\n            object.__proto__ = prototype;\n        }\n        if (properties !== void 0)\n            Object.defineProperties(object, properties);\n        return object;\n    };\n}\n\nfunction doesDefinePropertyWork(object) {\n    try {\n        Object.defineProperty(object, \"sentinel\", {});\n        return \"sentinel\" in object;\n    } catch (exception) {\n    }\n}\nif (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({});\n    var definePropertyWorksOnDom = typeof document == \"undefined\" ||\n        doesDefinePropertyWork(document.createElement(\"div\"));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {\n        var definePropertyFallback = Object.defineProperty;\n    }\n}\n\nif (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = \"Property description must be an object: \";\n    var ERR_NON_OBJECT_TARGET = \"Object.defineProperty called on non-object: \"\n    var ERR_ACCESSORS_NOT_SUPPORTED = \"getters & setters can not be defined \" +\n                                      \"on this javascript engine\";\n\n    Object.defineProperty = function defineProperty(object, property, descriptor) {\n        if ((typeof object != \"object\" && typeof object != \"function\") || object === null)\n            throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n        if ((typeof descriptor != \"object\" && typeof descriptor != \"function\") || descriptor === null)\n            throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n        if (definePropertyFallback) {\n            try {\n                return definePropertyFallback.call(Object, object, property, descriptor);\n            } catch (exception) {\n            }\n        }\n        if (owns(descriptor, \"value\")) {\n\n            if (supportsAccessors && (lookupGetter(object, property) ||\n                                      lookupSetter(object, property)))\n            {\n                var prototype = object.__proto__;\n                object.__proto__ = prototypeOfObject;\n                delete object[property];\n                object[property] = descriptor.value;\n                object.__proto__ = prototype;\n            } else {\n                object[property] = descriptor.value;\n            }\n        } else {\n            if (!supportsAccessors)\n                throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n            if (owns(descriptor, \"get\"))\n                defineGetter(object, property, descriptor.get);\n            if (owns(descriptor, \"set\"))\n                defineSetter(object, property, descriptor.set);\n        }\n\n        return object;\n    };\n}\nif (!Object.defineProperties) {\n    Object.defineProperties = function defineProperties(object, properties) {\n        for (var property in properties) {\n            if (owns(properties, property))\n                Object.defineProperty(object, property, properties[property]);\n        }\n        return object;\n    };\n}\nif (!Object.seal) {\n    Object.seal = function seal(object) {\n        return object;\n    };\n}\nif (!Object.freeze) {\n    Object.freeze = function freeze(object) {\n        return object;\n    };\n}\ntry {\n    Object.freeze(function () {});\n} catch (exception) {\n    Object.freeze = (function freeze(freezeObject) {\n        return function freeze(object) {\n            if (typeof object == \"function\") {\n                return object;\n            } else {\n                return freezeObject(object);\n            }\n        };\n    })(Object.freeze);\n}\nif (!Object.preventExtensions) {\n    Object.preventExtensions = function preventExtensions(object) {\n        return object;\n    };\n}\nif (!Object.isSealed) {\n    Object.isSealed = function isSealed(object) {\n        return false;\n    };\n}\nif (!Object.isFrozen) {\n    Object.isFrozen = function isFrozen(object) {\n        return false;\n    };\n}\nif (!Object.isExtensible) {\n    Object.isExtensible = function isExtensible(object) {\n        if (Object(object) === object) {\n            throw new TypeError(); // TODO message\n        }\n        var name = '';\n        while (owns(object, name)) {\n            name += '?';\n        }\n        object[name] = true;\n        var returnValue = owns(object, name);\n        delete object[name];\n        return returnValue;\n    };\n}\nif (!Object.keys) {\n    var hasDontEnumBug = true,\n        dontEnums = [\n            \"toString\",\n            \"toLocaleString\",\n            \"valueOf\",\n            \"hasOwnProperty\",\n            \"isPrototypeOf\",\n            \"propertyIsEnumerable\",\n            \"constructor\"\n        ],\n        dontEnumsLength = dontEnums.length;\n\n    for (var key in {\"toString\": null}) {\n        hasDontEnumBug = false;\n    }\n\n    Object.keys = function keys(object) {\n\n        if (\n            (typeof object != \"object\" && typeof object != \"function\") ||\n            object === null\n        ) {\n            throw new TypeError(\"Object.keys called on a non-object\");\n        }\n\n        var keys = [];\n        for (var name in object) {\n            if (owns(object, name)) {\n                keys.push(name);\n            }\n        }\n\n        if (hasDontEnumBug) {\n            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {\n                var dontEnum = dontEnums[i];\n                if (owns(object, dontEnum)) {\n                    keys.push(dontEnum);\n                }\n            }\n        }\n        return keys;\n    };\n\n}\nif (!Date.now) {\n    Date.now = function now() {\n        return new Date().getTime();\n    };\n}\nvar ws = \"\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\" +\n    \"\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\" +\n    \"\\u2029\\uFEFF\";\nif (!String.prototype.trim || ws.trim()) {\n    ws = \"[\" + ws + \"]\";\n    var trimBeginRegexp = new RegExp(\"^\" + ws + ws + \"*\"),\n        trimEndRegexp = new RegExp(ws + ws + \"*$\");\n    String.prototype.trim = function trim() {\n        return String(this).replace(trimBeginRegexp, \"\").replace(trimEndRegexp, \"\");\n    };\n}\n\nfunction toInteger(n) {\n    n = +n;\n    if (n !== n) { // isNaN\n        n = 0;\n    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n    return n;\n}\n\nfunction isPrimitive(input) {\n    var type = typeof input;\n    return (\n        input === null ||\n        type === \"undefined\" ||\n        type === \"boolean\" ||\n        type === \"number\" ||\n        type === \"string\"\n    );\n}\n\nfunction toPrimitive(input) {\n    var val, valueOf, toString;\n    if (isPrimitive(input)) {\n        return input;\n    }\n    valueOf = input.valueOf;\n    if (typeof valueOf === \"function\") {\n        val = valueOf.call(input);\n        if (isPrimitive(val)) {\n            return val;\n        }\n    }\n    toString = input.toString;\n    if (typeof toString === \"function\") {\n        val = toString.call(input);\n        if (isPrimitive(val)) {\n            return val;\n        }\n    }\n    throw new TypeError();\n}\nvar toObject = function (o) {\n    if (o == null) { // this matches both null and undefined\n        throw new TypeError(\"can't convert \"+o+\" to object\");\n    }\n    return Object(o);\n};\n\n});\n\nace.define(\"ace/lib/fixoldbrowsers\",[\"require\",\"exports\",\"module\",\"ace/lib/regexp\",\"ace/lib/es5-shim\"], function(acequire, exports, module) {\n\"use strict\";\n\nacequire(\"./regexp\");\nacequire(\"./es5-shim\");\n\n});\n\nace.define(\"ace/lib/dom\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar XHTML_NS = \"http://www.w3.org/1999/xhtml\";\n\nexports.getDocumentHead = function(doc) {\n    if (!doc)\n        doc = document;\n    return doc.head || doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\n};\n\nexports.createElement = function(tag, ns) {\n    return document.createElementNS ?\n           document.createElementNS(ns || XHTML_NS, tag) :\n           document.createElement(tag);\n};\n\nexports.hasCssClass = function(el, name) {\n    var classes = (el.className + \"\").split(/\\s+/g);\n    return classes.indexOf(name) !== -1;\n};\nexports.addCssClass = function(el, name) {\n    if (!exports.hasCssClass(el, name)) {\n        el.className += \" \" + name;\n    }\n};\nexports.removeCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g);\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        classes.splice(index, 1);\n    }\n    el.className = classes.join(\" \");\n};\n\nexports.toggleCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g), add = true;\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        add = false;\n        classes.splice(index, 1);\n    }\n    if (add)\n        classes.push(name);\n\n    el.className = classes.join(\" \");\n    return add;\n};\nexports.setCssClass = function(node, className, include) {\n    if (include) {\n        exports.addCssClass(node, className);\n    } else {\n        exports.removeCssClass(node, className);\n    }\n};\n\nexports.hasCssString = function(id, doc) {\n    var index = 0, sheets;\n    doc = doc || document;\n\n    if (doc.createStyleSheet && (sheets = doc.styleSheets)) {\n        while (index < sheets.length)\n            if (sheets[index++].owningElement.id === id) return true;\n    } else if ((sheets = doc.getElementsByTagName(\"style\"))) {\n        while (index < sheets.length)\n            if (sheets[index++].id === id) return true;\n    }\n\n    return false;\n};\n\nexports.importCssString = function importCssString(cssText, id, doc) {\n    doc = doc || document;\n    if (id && exports.hasCssString(id, doc))\n        return null;\n    \n    var style;\n    \n    if (id)\n        cssText += \"\\n/*# sourceURL=ace/css/\" + id + \" */\";\n    \n    if (doc.createStyleSheet) {\n        style = doc.createStyleSheet();\n        style.cssText = cssText;\n        if (id)\n            style.owningElement.id = id;\n    } else {\n        style = exports.createElement(\"style\");\n        style.appendChild(doc.createTextNode(cssText));\n        if (id)\n            style.id = id;\n\n        exports.getDocumentHead(doc).appendChild(style);\n    }\n};\n\nexports.importCssStylsheet = function(uri, doc) {\n    if (doc.createStyleSheet) {\n        doc.createStyleSheet(uri);\n    } else {\n        var link = exports.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = uri;\n\n        exports.getDocumentHead(doc).appendChild(link);\n    }\n};\n\nexports.getInnerWidth = function(element) {\n    return (\n        parseInt(exports.computedStyle(element, \"paddingLeft\"), 10) +\n        parseInt(exports.computedStyle(element, \"paddingRight\"), 10) + \n        element.clientWidth\n    );\n};\n\nexports.getInnerHeight = function(element) {\n    return (\n        parseInt(exports.computedStyle(element, \"paddingTop\"), 10) +\n        parseInt(exports.computedStyle(element, \"paddingBottom\"), 10) +\n        element.clientHeight\n    );\n};\n\nexports.scrollbarWidth = function(document) {\n    var inner = exports.createElement(\"ace_inner\");\n    inner.style.width = \"100%\";\n    inner.style.minWidth = \"0px\";\n    inner.style.height = \"200px\";\n    inner.style.display = \"block\";\n\n    var outer = exports.createElement(\"ace_outer\");\n    var style = outer.style;\n\n    style.position = \"absolute\";\n    style.left = \"-10000px\";\n    style.overflow = \"hidden\";\n    style.width = \"200px\";\n    style.minWidth = \"0px\";\n    style.height = \"150px\";\n    style.display = \"block\";\n\n    outer.appendChild(inner);\n\n    var body = document.documentElement;\n    body.appendChild(outer);\n\n    var noScrollbar = inner.offsetWidth;\n\n    style.overflow = \"scroll\";\n    var withScrollbar = inner.offsetWidth;\n\n    if (noScrollbar == withScrollbar) {\n        withScrollbar = outer.clientWidth;\n    }\n\n    body.removeChild(outer);\n\n    return noScrollbar-withScrollbar;\n};\n\nif (typeof document == \"undefined\") {\n    exports.importCssString = function() {};\n    return;\n}\n\nif (window.pageYOffset !== undefined) {\n    exports.getPageScrollTop = function() {\n        return window.pageYOffset;\n    };\n\n    exports.getPageScrollLeft = function() {\n        return window.pageXOffset;\n    };\n}\nelse {\n    exports.getPageScrollTop = function() {\n        return document.body.scrollTop;\n    };\n\n    exports.getPageScrollLeft = function() {\n        return document.body.scrollLeft;\n    };\n}\n\nif (window.getComputedStyle)\n    exports.computedStyle = function(element, style) {\n        if (style)\n            return (window.getComputedStyle(element, \"\") || {})[style] || \"\";\n        return window.getComputedStyle(element, \"\") || {};\n    };\nelse\n    exports.computedStyle = function(element, style) {\n        if (style)\n            return element.currentStyle[style];\n        return element.currentStyle;\n    };\nexports.setInnerHtml = function(el, innerHtml) {\n    var element = el.cloneNode(false);//document.createElement(\"div\");\n    element.innerHTML = innerHtml;\n    el.parentNode.replaceChild(element, el);\n    return element;\n};\n\nif (\"textContent\" in document.documentElement) {\n    exports.setInnerText = function(el, innerText) {\n        el.textContent = innerText;\n    };\n\n    exports.getInnerText = function(el) {\n        return el.textContent;\n    };\n}\nelse {\n    exports.setInnerText = function(el, innerText) {\n        el.innerText = innerText;\n    };\n\n    exports.getInnerText = function(el) {\n        return el.innerText;\n    };\n}\n\nexports.getParentWindow = function(document) {\n    return document.defaultView || document.parentWindow;\n};\n\n});\n\nace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nexports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n};\n\nexports.mixin = function(obj, mixin) {\n    for (var key in mixin) {\n        obj[key] = mixin[key];\n    }\n    return obj;\n};\n\nexports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin);\n};\n\n});\n\nace.define(\"ace/lib/keys\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/lib/oop\"], function(acequire, exports, module) {\n\"use strict\";\n\nacequire(\"./fixoldbrowsers\");\n\nvar oop = acequire(\"./oop\");\nvar Keys = (function() {\n    var ret = {\n        MODIFIER_KEYS: {\n            16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta'\n        },\n\n        KEY_MODS: {\n            \"ctrl\": 1, \"alt\": 2, \"option\" : 2, \"shift\": 4,\n            \"super\": 8, \"meta\": 8, \"command\": 8, \"cmd\": 8\n        },\n\n        FUNCTION_KEYS : {\n            8  : \"Backspace\",\n            9  : \"Tab\",\n            13 : \"Return\",\n            19 : \"Pause\",\n            27 : \"Esc\",\n            32 : \"Space\",\n            33 : \"PageUp\",\n            34 : \"PageDown\",\n            35 : \"End\",\n            36 : \"Home\",\n            37 : \"Left\",\n            38 : \"Up\",\n            39 : \"Right\",\n            40 : \"Down\",\n            44 : \"Print\",\n            45 : \"Insert\",\n            46 : \"Delete\",\n            96 : \"Numpad0\",\n            97 : \"Numpad1\",\n            98 : \"Numpad2\",\n            99 : \"Numpad3\",\n            100: \"Numpad4\",\n            101: \"Numpad5\",\n            102: \"Numpad6\",\n            103: \"Numpad7\",\n            104: \"Numpad8\",\n            105: \"Numpad9\",\n            '-13': \"NumpadEnter\",\n            112: \"F1\",\n            113: \"F2\",\n            114: \"F3\",\n            115: \"F4\",\n            116: \"F5\",\n            117: \"F6\",\n            118: \"F7\",\n            119: \"F8\",\n            120: \"F9\",\n            121: \"F10\",\n            122: \"F11\",\n            123: \"F12\",\n            144: \"Numlock\",\n            145: \"Scrolllock\"\n        },\n\n        PRINTABLE_KEYS: {\n           32: ' ',  48: '0',  49: '1',  50: '2',  51: '3',  52: '4', 53:  '5',\n           54: '6',  55: '7',  56: '8',  57: '9',  59: ';',  61: '=', 65:  'a',\n           66: 'b',  67: 'c',  68: 'd',  69: 'e',  70: 'f',  71: 'g', 72:  'h',\n           73: 'i',  74: 'j',  75: 'k',  76: 'l',  77: 'm',  78: 'n', 79:  'o',\n           80: 'p',  81: 'q',  82: 'r',  83: 's',  84: 't',  85: 'u', 86:  'v',\n           87: 'w',  88: 'x',  89: 'y',  90: 'z', 107: '+', 109: '-', 110: '.',\n          186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',\n          219: '[', 220: '\\\\',221: ']', 222: \"'\", 111: '/', 106: '*'\n        }\n    };\n    var name, i;\n    for (i in ret.FUNCTION_KEYS) {\n        name = ret.FUNCTION_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n    for (i in ret.PRINTABLE_KEYS) {\n        name = ret.PRINTABLE_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n    oop.mixin(ret, ret.MODIFIER_KEYS);\n    oop.mixin(ret, ret.PRINTABLE_KEYS);\n    oop.mixin(ret, ret.FUNCTION_KEYS);\n    ret.enter = ret[\"return\"];\n    ret.escape = ret.esc;\n    ret.del = ret[\"delete\"];\n    ret[173] = '-';\n    \n    (function() {\n        var mods = [\"cmd\", \"ctrl\", \"alt\", \"shift\"];\n        for (var i = Math.pow(2, mods.length); i--;) {            \n            ret.KEY_MODS[i] = mods.filter(function(x) {\n                return i & ret.KEY_MODS[x];\n            }).join(\"-\") + \"-\";\n        }\n    })();\n\n    ret.KEY_MODS[0] = \"\";\n    ret.KEY_MODS[-1] = \"input-\";\n\n    return ret;\n})();\noop.mixin(exports, Keys);\n\nexports.keyCodeToString = function(keyCode) {\n    var keyString = Keys[keyCode];\n    if (typeof keyString != \"string\")\n        keyString = String.fromCharCode(keyCode);\n    return keyString.toLowerCase();\n};\n\n});\n\nace.define(\"ace/lib/useragent\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\nexports.OS = {\n    LINUX: \"LINUX\",\n    MAC: \"MAC\",\n    WINDOWS: \"WINDOWS\"\n};\nexports.getOS = function() {\n    if (exports.isMac) {\n        return exports.OS.MAC;\n    } else if (exports.isLinux) {\n        return exports.OS.LINUX;\n    } else {\n        return exports.OS.WINDOWS;\n    }\n};\nif (typeof navigator != \"object\")\n    return;\n\nvar os = (navigator.platform.match(/mac|win|linux/i) || [\"other\"])[0].toLowerCase();\nvar ua = navigator.userAgent;\nexports.isWin = (os == \"win\");\nexports.isMac = (os == \"mac\");\nexports.isLinux = (os == \"linux\");\nexports.isIE = \n    (navigator.appName == \"Microsoft Internet Explorer\" || navigator.appName.indexOf(\"MSAppHost\") >= 0)\n    ? parseFloat((ua.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1])\n    : parseFloat((ua.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1]); // for ie\n    \nexports.isOldIE = exports.isIE && exports.isIE < 9;\nexports.isGecko = exports.isMozilla = (window.Controllers || window.controllers) && window.navigator.product === \"Gecko\";\nexports.isOldGecko = exports.isGecko && parseInt((ua.match(/rv:(\\d+)/)||[])[1], 10) < 4;\nexports.isOpera = window.opera && Object.prototype.toString.call(window.opera) == \"[object Opera]\";\nexports.isWebKit = parseFloat(ua.split(\"WebKit/\")[1]) || undefined;\n\nexports.isChrome = parseFloat(ua.split(\" Chrome/\")[1]) || undefined;\n\nexports.isAIR = ua.indexOf(\"AdobeAIR\") >= 0;\n\nexports.isIPad = ua.indexOf(\"iPad\") >= 0;\n\nexports.isChromeOS = ua.indexOf(\" CrOS \") >= 0;\n\nexports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;\n\nif (exports.isIOS) exports.isMac = true;\n\n});\n\nace.define(\"ace/lib/event\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar keys = acequire(\"./keys\");\nvar useragent = acequire(\"./useragent\");\n\nvar pressedKeys = null;\nvar ts = 0;\n\nexports.addListener = function(elem, type, callback) {\n    if (elem.addEventListener) {\n        return elem.addEventListener(type, callback, false);\n    }\n    if (elem.attachEvent) {\n        var wrapper = function() {\n            callback.call(elem, window.event);\n        };\n        callback._wrapper = wrapper;\n        elem.attachEvent(\"on\" + type, wrapper);\n    }\n};\n\nexports.removeListener = function(elem, type, callback) {\n    if (elem.removeEventListener) {\n        return elem.removeEventListener(type, callback, false);\n    }\n    if (elem.detachEvent) {\n        elem.detachEvent(\"on\" + type, callback._wrapper || callback);\n    }\n};\nexports.stopEvent = function(e) {\n    exports.stopPropagation(e);\n    exports.preventDefault(e);\n    return false;\n};\n\nexports.stopPropagation = function(e) {\n    if (e.stopPropagation)\n        e.stopPropagation();\n    else\n        e.cancelBubble = true;\n};\n\nexports.preventDefault = function(e) {\n    if (e.preventDefault)\n        e.preventDefault();\n    else\n        e.returnValue = false;\n};\nexports.getButton = function(e) {\n    if (e.type == \"dblclick\")\n        return 0;\n    if (e.type == \"contextmenu\" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))\n        return 2;\n    if (e.preventDefault) {\n        return e.button;\n    }\n    else {\n        return {1:0, 2:2, 4:1}[e.button];\n    }\n};\n\nexports.capture = function(el, eventHandler, releaseCaptureHandler) {\n    function onMouseUp(e) {\n        eventHandler && eventHandler(e);\n        releaseCaptureHandler && releaseCaptureHandler(e);\n\n        exports.removeListener(document, \"mousemove\", eventHandler, true);\n        exports.removeListener(document, \"mouseup\", onMouseUp, true);\n        exports.removeListener(document, \"dragstart\", onMouseUp, true);\n    }\n\n    exports.addListener(document, \"mousemove\", eventHandler, true);\n    exports.addListener(document, \"mouseup\", onMouseUp, true);\n    exports.addListener(document, \"dragstart\", onMouseUp, true);\n    \n    return onMouseUp;\n};\n\nexports.addTouchMoveListener = function (el, callback) {\n    var startx, starty;\n    exports.addListener(el, \"touchstart\", function (e) {\n        var touches = e.touches;\n        var touchObj = touches[0];\n        startx = touchObj.clientX;\n        starty = touchObj.clientY;\n    });\n    exports.addListener(el, \"touchmove\", function (e) {\n        var touches = e.touches;\n        if (touches.length > 1) return;\n\n        var touchObj = touches[0];\n\n        e.wheelX = startx - touchObj.clientX;\n        e.wheelY = starty - touchObj.clientY;\n\n        startx = touchObj.clientX;\n        starty = touchObj.clientY;\n\n        callback(e);\n    });\n};\n\nexports.addMouseWheelListener = function(el, callback) {\n    if (\"onmousewheel\" in el) {\n        exports.addListener(el, \"mousewheel\", function(e) {\n            var factor = 8;\n            if (e.wheelDeltaX !== undefined) {\n                e.wheelX = -e.wheelDeltaX / factor;\n                e.wheelY = -e.wheelDeltaY / factor;\n            } else {\n                e.wheelX = 0;\n                e.wheelY = -e.wheelDelta / factor;\n            }\n            callback(e);\n        });\n    } else if (\"onwheel\" in el) {\n        exports.addListener(el, \"wheel\",  function(e) {\n            var factor = 0.35;\n            switch (e.deltaMode) {\n                case e.DOM_DELTA_PIXEL:\n                    e.wheelX = e.deltaX * factor || 0;\n                    e.wheelY = e.deltaY * factor || 0;\n                    break;\n                case e.DOM_DELTA_LINE:\n                case e.DOM_DELTA_PAGE:\n                    e.wheelX = (e.deltaX || 0) * 5;\n                    e.wheelY = (e.deltaY || 0) * 5;\n                    break;\n            }\n            \n            callback(e);\n        });\n    } else {\n        exports.addListener(el, \"DOMMouseScroll\", function(e) {\n            if (e.axis && e.axis == e.HORIZONTAL_AXIS) {\n                e.wheelX = (e.detail || 0) * 5;\n                e.wheelY = 0;\n            } else {\n                e.wheelX = 0;\n                e.wheelY = (e.detail || 0) * 5;\n            }\n            callback(e);\n        });\n    }\n};\n\nexports.addMultiMouseDownListener = function(elements, timeouts, eventHandler, callbackName) {\n    var clicks = 0;\n    var startX, startY, timer; \n    var eventNames = {\n        2: \"dblclick\",\n        3: \"tripleclick\",\n        4: \"quadclick\"\n    };\n\n    function onMousedown(e) {\n        if (exports.getButton(e) !== 0) {\n            clicks = 0;\n        } else if (e.detail > 1) {\n            clicks++;\n            if (clicks > 4)\n                clicks = 1;\n        } else {\n            clicks = 1;\n        }\n        if (useragent.isIE) {\n            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;\n            if (!timer || isNewClick)\n                clicks = 1;\n            if (timer)\n                clearTimeout(timer);\n            timer = setTimeout(function() {timer = null;}, timeouts[clicks - 1] || 600);\n\n            if (clicks == 1) {\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n        }\n        \n        e._clicks = clicks;\n\n        eventHandler[callbackName](\"mousedown\", e);\n\n        if (clicks > 4)\n            clicks = 0;\n        else if (clicks > 1)\n            return eventHandler[callbackName](eventNames[clicks], e);\n    }\n    function onDblclick(e) {\n        clicks = 2;\n        if (timer)\n            clearTimeout(timer);\n        timer = setTimeout(function() {timer = null;}, timeouts[clicks - 1] || 600);\n        eventHandler[callbackName](\"mousedown\", e);\n        eventHandler[callbackName](eventNames[clicks], e);\n    }\n    if (!Array.isArray(elements))\n        elements = [elements];\n    elements.forEach(function(el) {\n        exports.addListener(el, \"mousedown\", onMousedown);\n        if (useragent.isOldIE)\n            exports.addListener(el, \"dblclick\", onDblclick);\n    });\n};\n\nvar getModifierHash = useragent.isMac && useragent.isOpera && !(\"KeyboardEvent\" in window)\n    ? function(e) {\n        return 0 | (e.metaKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.ctrlKey ? 8 : 0);\n    }\n    : function(e) {\n        return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);\n    };\n\nexports.getModifierString = function(e) {\n    return keys.KEY_MODS[getModifierHash(e)];\n};\n\nfunction normalizeCommandKeys(callback, e, keyCode) {\n    var hashId = getModifierHash(e);\n\n    if (!useragent.isMac && pressedKeys) {\n        if (e.getModifierState && (e.getModifierState(\"OS\") || e.getModifierState(\"Win\")))\n            hashId |= 8;\n        if (pressedKeys.altGr) {\n            if ((3 & hashId) != 3)\n                pressedKeys.altGr = 0;\n            else\n                return;\n        }\n        if (keyCode === 18 || keyCode === 17) {\n            var location = \"location\" in e ? e.location : e.keyLocation;\n            if (keyCode === 17 && location === 1) {\n                if (pressedKeys[keyCode] == 1)\n                    ts = e.timeStamp;\n            } else if (keyCode === 18 && hashId === 3 && location === 2) {\n                var dt = e.timeStamp - ts;\n                if (dt < 50)\n                    pressedKeys.altGr = true;\n            }\n        }\n    }\n    \n    if (keyCode in keys.MODIFIER_KEYS) {\n        keyCode = -1;\n    }\n    if (hashId & 8 && (keyCode >= 91 && keyCode <= 93)) {\n        keyCode = -1;\n    }\n    \n    if (!hashId && keyCode === 13) {\n        var location = \"location\" in e ? e.location : e.keyLocation;\n        if (location === 3) {\n            callback(e, hashId, -keyCode);\n            if (e.defaultPrevented)\n                return;\n        }\n    }\n    \n    if (useragent.isChromeOS && hashId & 8) {\n        callback(e, hashId, keyCode);\n        if (e.defaultPrevented)\n            return;\n        else\n            hashId &= ~8;\n    }\n    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {\n        return false;\n    }\n    \n    return callback(e, hashId, keyCode);\n}\n\n\nexports.addCommandKeyListener = function(el, callback) {\n    var addListener = exports.addListener;\n    if (useragent.isOldGecko || (useragent.isOpera && !(\"KeyboardEvent\" in window))) {\n        var lastKeyDownKeyCode = null;\n        addListener(el, \"keydown\", function(e) {\n            lastKeyDownKeyCode = e.keyCode;\n        });\n        addListener(el, \"keypress\", function(e) {\n            return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);\n        });\n    } else {\n        var lastDefaultPrevented = null;\n\n        addListener(el, \"keydown\", function(e) {\n            pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;\n            var result = normalizeCommandKeys(callback, e, e.keyCode);\n            lastDefaultPrevented = e.defaultPrevented;\n            return result;\n        });\n\n        addListener(el, \"keypress\", function(e) {\n            if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {\n                exports.stopEvent(e);\n                lastDefaultPrevented = null;\n            }\n        });\n\n        addListener(el, \"keyup\", function(e) {\n            pressedKeys[e.keyCode] = null;\n        });\n\n        if (!pressedKeys) {\n            resetPressedKeys();\n            addListener(window, \"focus\", resetPressedKeys);\n        }\n    }\n};\nfunction resetPressedKeys() {\n    pressedKeys = Object.create(null);\n}\n\nif (typeof window == \"object\" && window.postMessage && !useragent.isOldIE) {\n    var postMessageId = 1;\n    exports.nextTick = function(callback, win) {\n        win = win || window;\n        var messageName = \"zero-timeout-message-\" + postMessageId;\n        exports.addListener(win, \"message\", function listener(e) {\n            if (e.data == messageName) {\n                exports.stopPropagation(e);\n                exports.removeListener(win, \"message\", listener);\n                callback();\n            }\n        });\n        win.postMessage(messageName, \"*\");\n    };\n}\n\n\nexports.nextFrame = typeof window == \"object\" && (window.requestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.msRequestAnimationFrame\n    || window.oRequestAnimationFrame);\n\nif (exports.nextFrame)\n    exports.nextFrame = exports.nextFrame.bind(window);\nelse\n    exports.nextFrame = function(callback) {\n        setTimeout(callback, 17);\n    };\n});\n\nace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nexports.last = function(a) {\n    return a[a.length - 1];\n};\n\nexports.stringReverse = function(string) {\n    return string.split(\"\").reverse().join(\"\");\n};\n\nexports.stringRepeat = function (string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n\n        if (count >>= 1)\n            string += string;\n    }\n    return result;\n};\n\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\n\nexports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n};\n\nexports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n};\n\nexports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n};\n\nexports.copyArray = function(array){\n    var copy = [];\n    for (var i=0, l=array.length; i<l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else \n            copy[i] = array[i];\n    }\n    return copy;\n};\n\nexports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (var key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n    \n    copy = {};\n    for (var key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n};\n\nexports.arrayToMap = function(arr) {\n    var map = {};\n    for (var i=0; i<arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n\n};\n\nexports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n};\nexports.arrayRemove = function(array, value) {\n  for (var i = 0; i <= array.length; i++) {\n    if (value === array[i]) {\n      array.splice(i, 1);\n    }\n  }\n};\n\nexports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\n\nexports.escapeHTML = function(str) {\n    return str.replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n};\n\nexports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n\n    string.replace(regExp, function(str) {\n        matches.push({\n            offset: arguments[arguments.length-2],\n            length: str.length\n        });\n    });\n\n    return matches;\n};\nexports.deferredCall = function(fcn) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var deferred = function(timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n\n    deferred.schedule = deferred;\n\n    deferred.call = function() {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n\n    deferred.cancel = function() {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n    \n    deferred.isPending = function() {\n        return timer;\n    };\n\n    return deferred;\n};\n\n\nexports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var _self = function(timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.delay = function(timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n\n    _self.call = function() {\n        this.cancel();\n        fcn();\n    };\n\n    _self.cancel = function() {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n\n    _self.isPending = function() {\n        return timer;\n    };\n\n    return _self;\n};\n});\n\nace.define(\"ace/keyboard/textinput_ios\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/keys\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar event = acequire(\"../lib/event\");\nvar useragent = acequire(\"../lib/useragent\");\nvar dom = acequire(\"../lib/dom\");\nvar lang = acequire(\"../lib/lang\");\nvar KEYS = acequire(\"../lib/keys\");\nvar MODS = KEYS.KEY_MODS;\nvar BROKEN_SETDATA = useragent.isChrome < 18;\nvar USE_IE_MIME_TYPE =  useragent.isIE;\n\nvar TextInput = function(parentNode, host) {\n    var self = this;\n    var text = dom.createElement(\"textarea\");\n    text.className = useragent.isIOS ? \"ace_text-input ace_text-input-ios\" : \"ace_text-input\";\n\n    if (useragent.isTouchPad)\n        text.setAttribute(\"x-palm-disable-auto-cap\", true);\n\n    text.setAttribute(\"wrap\", \"off\");\n    text.setAttribute(\"autocorrect\", \"off\");\n    text.setAttribute(\"autocapitalize\", \"off\");\n    text.setAttribute(\"spellcheck\", false);\n\n    text.style.opacity = \"0\";\n    parentNode.insertBefore(text, parentNode.firstChild);\n\n    var PLACEHOLDER = \"\\n aaaa a\\n\";\n\n    var copied = false;\n    var cut = false;\n    var pasted = false;\n    var inComposition = false;\n    var tempStyle = '';\n    var isSelectionEmpty = true;\n    try { var isFocused = document.activeElement === text; } catch(e) {}\n\n    event.addListener(text, \"blur\", function(e) {\n        host.onBlur(e);\n        isFocused = false;\n    });\n    event.addListener(text, \"focus\", function(e) {\n        isFocused = true;\n        host.onFocus(e);\n        resetSelection();\n    });\n    this.focus = function() {\n        if (tempStyle) return text.focus();\n        text.style.position = \"fixed\";\n        text.focus();\n    };\n    this.blur = function() {\n        text.blur();\n    };\n    this.isFocused = function() {\n        return isFocused;\n    };\n    var syncSelection = lang.delayedCall(function() {\n        isFocused && resetSelection(isSelectionEmpty);\n    });\n    var syncValue = lang.delayedCall(function() {\n         if (!inComposition) {\n            text.value = PLACEHOLDER;\n            isFocused && resetSelection();\n         }\n    });\n\n    function resetSelection(isEmpty) {\n        if (inComposition)\n            return;\n        inComposition = true;\n\n        if (inputHandler) {\n            selectionStart = 0;\n            selectionEnd = isEmpty ? 0 : text.value.length - 1;\n        } else {\n            var selectionStart = 4;\n            var selectionEnd = 5;\n        }\n        try {\n            text.setSelectionRange(selectionStart, selectionEnd);\n        } catch(e) {}\n\n        inComposition = false;\n    }\n\n    function resetValue() {\n        if (inComposition)\n            return;\n        text.value = PLACEHOLDER;\n        if (useragent.isWebKit)\n            syncValue.schedule();\n    }\n\n    useragent.isWebKit || host.addEventListener('changeSelection', function() {\n        if (host.selection.isEmpty() != isSelectionEmpty) {\n            isSelectionEmpty = !isSelectionEmpty;\n            syncSelection.schedule();\n        }\n    });\n\n    resetValue();\n    if (isFocused)\n        host.onFocus();\n\n\n    var isAllSelected = function(text) {\n        return text.selectionStart === 0 && text.selectionEnd === text.value.length;\n    };\n\n    var onSelect = function(e) {\n        if (isAllSelected(text)) {\n            host.selectAll();\n            resetSelection();\n        } else if (inputHandler) {\n            resetSelection(host.selection.isEmpty());\n        }\n    };\n\n    var inputHandler = null;\n    this.setInputHandler = function(cb) {inputHandler = cb;};\n    this.getInputHandler = function() {return inputHandler;};\n    var afterContextMenu = false;\n\n    var sendText = function(data) {\n        if (text.selectionStart === 4 && text.selectionEnd === 5) {\n          return;\n        }\n        if (inputHandler) {\n            data = inputHandler(data);\n            inputHandler = null;\n        }\n        if (pasted) {\n            resetSelection();\n            if (data)\n                host.onPaste(data);\n            pasted = false;\n        } else if (data == PLACEHOLDER.substr(0) && text.selectionStart === 4) {\n            if (afterContextMenu)\n                host.execCommand(\"del\", {source: \"ace\"});\n            else // some versions of android do not fire keydown when pressing backspace\n                host.execCommand(\"backspace\", {source: \"ace\"});\n        } else if (!copied) {\n            if (data.substring(0, 9) == PLACEHOLDER && data.length > PLACEHOLDER.length)\n                data = data.substr(9);\n            else if (data.substr(0, 4) == PLACEHOLDER.substr(0, 4))\n                data = data.substr(4, data.length - PLACEHOLDER.length + 1);\n            else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))\n                data = data.slice(0, -1);\n            if (data == PLACEHOLDER.charAt(0)) {\n            } else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))\n                data = data.slice(0, -1);\n\n            if (data)\n                host.onTextInput(data);\n        }\n        if (copied) {\n          copied = false;\n        }\n        if (afterContextMenu)\n            afterContextMenu = false;\n    };\n    var onInput = function(e) {\n        if (inComposition)\n            return;\n        var data = text.value;\n        sendText(data);\n        resetValue();\n    };\n\n    var handleClipboardData = function(e, data, forceIEMime) {\n        var clipboardData = e.clipboardData || window.clipboardData;\n        if (!clipboardData || BROKEN_SETDATA)\n            return;\n        var mime = USE_IE_MIME_TYPE || forceIEMime ? \"Text\" : \"text/plain\";\n        try {\n            if (data) {\n                return clipboardData.setData(mime, data) !== false;\n            } else {\n                return clipboardData.getData(mime);\n            }\n        } catch(e) {\n            if (!forceIEMime)\n                return handleClipboardData(e, data, true);\n        }\n    };\n\n    var doCopy = function(e, isCut) {\n        var data = host.getCopyText();\n        if (!data)\n            return event.preventDefault(e);\n\n        if (handleClipboardData(e, data)) {\n            if (useragent.isIOS) {\n                cut = isCut;\n                text.value = \"\\n aa\" + data + \"a a\\n\";\n                text.setSelectionRange(4, 4 + data.length);\n                copied = {\n                    value: data\n                };\n            }\n            isCut ? host.onCut() : host.onCopy();\n            if (!useragent.isIOS) event.preventDefault(e);\n        } else {\n            copied = true;\n            text.value = data;\n            text.select();\n            setTimeout(function(){\n                copied = false;\n                resetValue();\n                resetSelection();\n                isCut ? host.onCut() : host.onCopy();\n            });\n        }\n    };\n\n    var onCut = function(e) {\n        doCopy(e, true);\n    };\n\n    var onCopy = function(e) {\n        doCopy(e, false);\n    };\n\n    var onPaste = function(e) {\n        var data = handleClipboardData(e);\n        if (typeof data == \"string\") {\n            if (data)\n                host.onPaste(data, e);\n            if (useragent.isIE)\n                setTimeout(resetSelection);\n            event.preventDefault(e);\n        }\n        else {\n            text.value = \"\";\n            pasted = true;\n        }\n    };\n\n    event.addCommandKeyListener(text, host.onCommandKey.bind(host));\n\n    event.addListener(text, \"select\", onSelect);\n\n    event.addListener(text, \"input\", onInput);\n\n    event.addListener(text, \"cut\", onCut);\n    event.addListener(text, \"copy\", onCopy);\n    event.addListener(text, \"paste\", onPaste);\n    var onCompositionStart = function(e) {\n        if (inComposition || !host.onCompositionStart || host.$readOnly)\n            return;\n        inComposition = {};\n        inComposition.canUndo = host.session.$undoManager;\n        host.onCompositionStart();\n        setTimeout(onCompositionUpdate, 0);\n        host.on(\"mousedown\", onCompositionEnd);\n        if (inComposition.canUndo && !host.selection.isEmpty()) {\n            host.insert(\"\");\n            host.session.markUndoGroup();\n            host.selection.clearSelection();\n        }\n        host.session.markUndoGroup();\n    };\n\n    var onCompositionUpdate = function() {\n        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)\n            return;\n        var val = text.value.replace(/\\x01/g, \"\");\n        if (inComposition.lastValue === val) return;\n\n        host.onCompositionUpdate(val);\n        if (inComposition.lastValue)\n            host.undo();\n        if (inComposition.canUndo)\n            inComposition.lastValue = val;\n        if (inComposition.lastValue) {\n            var r = host.selection.getRange();\n            host.insert(inComposition.lastValue);\n            host.session.markUndoGroup();\n            inComposition.range = host.selection.getRange();\n            host.selection.setRange(r);\n            host.selection.clearSelection();\n        }\n    };\n\n    var onCompositionEnd = function(e) {\n        if (!host.onCompositionEnd || host.$readOnly) return;\n        var c = inComposition;\n        inComposition = false;\n        var timer = setTimeout(function() {\n            timer = null;\n            var str = text.value.replace(/\\x01/g, \"\");\n            if (inComposition)\n                return;\n            else if (str == c.lastValue)\n                resetValue();\n            else if (!c.lastValue && str) {\n                resetValue();\n                sendText(str);\n            }\n        });\n        inputHandler = function compositionInputHandler(str) {\n            if (timer)\n                clearTimeout(timer);\n            str = str.replace(/\\x01/g, \"\");\n            if (str == c.lastValue)\n                return \"\";\n            if (c.lastValue && timer)\n                host.undo();\n            return str;\n        };\n        host.onCompositionEnd();\n        host.removeListener(\"mousedown\", onCompositionEnd);\n        if (e.type == \"compositionend\" && c.range) {\n            host.selection.setRange(c.range);\n        }\n        var needsOnInput =\n            (!!useragent.isChrome && useragent.isChrome >= 53) ||\n            (!!useragent.isWebKit && useragent.isWebKit >= 603);\n\n        if (needsOnInput) {\n          onInput();\n        }\n    };\n\n\n\n    var syncComposition = lang.delayedCall(onCompositionUpdate, 50);\n\n    event.addListener(text, \"compositionstart\", onCompositionStart);\n    if (useragent.isGecko) {\n        event.addListener(text, \"text\", function(){syncComposition.schedule();});\n    } else {\n        event.addListener(text, \"keyup\", function(){syncComposition.schedule();});\n        event.addListener(text, \"keydown\", function(){syncComposition.schedule();});\n    }\n    event.addListener(text, \"compositionend\", onCompositionEnd);\n\n    this.getElement = function() {\n        return text;\n    };\n\n    this.setReadOnly = function(readOnly) {\n       text.readOnly = readOnly;\n    };\n\n    this.onContextMenu = function(e) {\n        afterContextMenu = true;\n        resetSelection(host.selection.isEmpty());\n        host._emit(\"nativecontextmenu\", {target: host, domEvent: e});\n        this.moveToMouse(e, true);\n    };\n\n    this.moveToMouse = function(e, bringToFront) {\n        if (!tempStyle)\n            tempStyle = text.style.cssText;\n        text.style.cssText = (bringToFront ? \"z-index:100000;\" : \"\")\n            + \"height:\" + text.style.height + \";\"\n            + (useragent.isIE ? \"opacity:0.1;\" : \"\");\n\n        var rect = host.container.getBoundingClientRect();\n        var style = dom.computedStyle(host.container);\n        var top = rect.top + (parseInt(style.borderTopWidth) || 0);\n        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);\n        var maxTop = rect.bottom - top - text.clientHeight -2;\n        var move = function(e) {\n            text.style.left = e.clientX - left - 2 + \"px\";\n            text.style.top = Math.min(e.clientY - top - 2, maxTop) + \"px\";\n        };\n        move(e);\n\n        if (e.type != \"mousedown\")\n            return;\n\n        if (host.renderer.$keepTextAreaAtCursor)\n            host.renderer.$keepTextAreaAtCursor = null;\n\n        clearTimeout(closeTimeout);\n        if (useragent.isWin)\n            event.capture(host.container, move, onContextMenuClose);\n    };\n\n    this.onContextMenuClose = onContextMenuClose;\n    var closeTimeout;\n    function onContextMenuClose() {\n        clearTimeout(closeTimeout);\n        closeTimeout = setTimeout(function () {\n            if (tempStyle) {\n                text.style.cssText = tempStyle;\n                tempStyle = '';\n            }\n            if (host.renderer.$keepTextAreaAtCursor == null) {\n                host.renderer.$keepTextAreaAtCursor = true;\n                host.renderer.$moveTextAreaToCursor();\n            }\n        }, 0);\n    }\n\n    var onContextMenu = function(e) {\n        host.textInput.onContextMenu(e);\n        onContextMenuClose();\n    };\n    event.addListener(text, \"mouseup\", onContextMenu);\n    event.addListener(text, \"mousedown\", function(e) {\n        e.preventDefault();\n        onContextMenuClose();\n    });\n    event.addListener(host.renderer.scroller, \"contextmenu\", onContextMenu);\n    event.addListener(text, \"contextmenu\", onContextMenu);\n\n    if (useragent.isIOS) {\n        var typingResetTimeout = null;\n        var typing = false;\n\n        parentNode.addEventListener(\"keydown\", function (e) {\n            if (typingResetTimeout) clearTimeout(typingResetTimeout);\n            typing = true;\n        });\n\n        parentNode.addEventListener(\"keyup\", function (e) {\n            typingResetTimeout = setTimeout(function () {\n                typing = false;\n            }, 100);\n        });\n        var detectArrowKeys = function(e) {\n            if (document.activeElement !== text) return;\n            if (typing) return;\n\n            if (cut) {\n                return setTimeout(function () {\n                    cut = false;\n                }, 100);\n            }\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n            text.setSelectionRange(4, 5);\n            if (selectionStart == selectionEnd) {\n                switch (selectionStart) {\n                    case 0: host.onCommandKey(null, 0, KEYS.up); break;\n                    case 1: host.onCommandKey(null, 0, KEYS.home); break;\n                    case 2: host.onCommandKey(null, MODS.option, KEYS.left); break;\n                    case 4: host.onCommandKey(null, 0, KEYS.left); break;\n                    case 5: host.onCommandKey(null, 0, KEYS.right); break;\n                    case 7: host.onCommandKey(null, MODS.option, KEYS.right); break;\n                    case 8: host.onCommandKey(null, 0, KEYS.end); break;\n                    case 9: host.onCommandKey(null, 0, KEYS.down); break;\n                }\n            } else {\n                switch (selectionEnd) {\n                    case 6: host.onCommandKey(null, MODS.shift, KEYS.right); break;\n                    case 7: host.onCommandKey(null, MODS.shift | MODS.option, KEYS.right); break;\n                    case 8: host.onCommandKey(null, MODS.shift, KEYS.end); break;\n                    case 9: host.onCommandKey(null, MODS.shift, KEYS.down); break;\n                }\n                switch (selectionStart) {\n                    case 0: host.onCommandKey(null, MODS.shift, KEYS.up); break;\n                    case 1: host.onCommandKey(null, MODS.shift, KEYS.home); break;\n                    case 2: host.onCommandKey(null, MODS.shift | MODS.option, KEYS.left); break;\n                    case 3: host.onCommandKey(null, MODS.shift, KEYS.left); break;\n                }\n            }\n        };\n        document.addEventListener(\"selectionchange\", detectArrowKeys);\n        host.on(\"destroy\", function() {\n            document.removeEventListener(\"selectionchange\", detectArrowKeys);\n        });\n    }\n};\n\nexports.TextInput = TextInput;\n});\n\nace.define(\"ace/keyboard/textinput\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/keyboard/textinput_ios\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar event = acequire(\"../lib/event\");\nvar useragent = acequire(\"../lib/useragent\");\nvar dom = acequire(\"../lib/dom\");\nvar lang = acequire(\"../lib/lang\");\nvar BROKEN_SETDATA = useragent.isChrome < 18;\nvar USE_IE_MIME_TYPE =  useragent.isIE;\n\nvar TextInputIOS = acequire(\"./textinput_ios\").TextInput;\nvar TextInput = function(parentNode, host) {\n    if (useragent.isIOS)\n        return TextInputIOS.call(this, parentNode, host);\n\n    var text = dom.createElement(\"textarea\");\n    text.className = \"ace_text-input\";\n\n    text.setAttribute(\"wrap\", \"off\");\n    text.setAttribute(\"autocorrect\", \"off\");\n    text.setAttribute(\"autocapitalize\", \"off\");\n    text.setAttribute(\"spellcheck\", false);\n\n    text.style.opacity = \"0\";\n    parentNode.insertBefore(text, parentNode.firstChild);\n\n    var PLACEHOLDER = \"\\u2028\\u2028\";\n\n    var copied = false;\n    var pasted = false;\n    var inComposition = false;\n    var tempStyle = '';\n    var isSelectionEmpty = true;\n    try { var isFocused = document.activeElement === text; } catch(e) {}\n    \n    event.addListener(text, \"blur\", function(e) {\n        host.onBlur(e);\n        isFocused = false;\n    });\n    event.addListener(text, \"focus\", function(e) {\n        isFocused = true;\n        host.onFocus(e);\n        resetSelection();\n    });\n    this.focus = function() {\n        if (tempStyle) return text.focus();\n        var top = text.style.top;\n        text.style.position = \"fixed\";\n        text.style.top = \"0px\";\n        text.focus();\n        setTimeout(function() {\n            text.style.position = \"\";\n            if (text.style.top == \"0px\")\n                text.style.top = top;\n        }, 0);\n    };\n    this.blur = function() {\n        text.blur();\n    };\n    this.isFocused = function() {\n        return isFocused;\n    };\n    var syncSelection = lang.delayedCall(function() {\n        isFocused && resetSelection(isSelectionEmpty);\n    });\n    var syncValue = lang.delayedCall(function() {\n         if (!inComposition) {\n            text.value = PLACEHOLDER;\n            isFocused && resetSelection();\n         }\n    });\n\n    function resetSelection(isEmpty) {\n        if (inComposition)\n            return;\n        inComposition = true;\n        \n        if (inputHandler) {\n            var selectionStart = 0;\n            var selectionEnd = isEmpty ? 0 : text.value.length - 1;\n        } else {\n            var selectionStart = isEmpty ? 2 : 1;\n            var selectionEnd = 2;\n        }\n        try {\n            text.setSelectionRange(selectionStart, selectionEnd);\n        } catch(e){}\n        \n        inComposition = false;\n    }\n\n    function resetValue() {\n        if (inComposition)\n            return;\n        text.value = PLACEHOLDER;\n        if (useragent.isWebKit)\n            syncValue.schedule();\n    }\n\n    useragent.isWebKit || host.addEventListener('changeSelection', function() {\n        if (host.selection.isEmpty() != isSelectionEmpty) {\n            isSelectionEmpty = !isSelectionEmpty;\n            syncSelection.schedule();\n        }\n    });\n\n    resetValue();\n    if (isFocused)\n        host.onFocus();\n\n\n    var isAllSelected = function(text) {\n        return text.selectionStart === 0 && text.selectionEnd === text.value.length;\n    };\n\n    var onSelect = function(e) {\n        if (copied) {\n            copied = false;\n        } else if (isAllSelected(text)) {\n            host.selectAll();\n            resetSelection();\n        } else if (inputHandler) {\n            resetSelection(host.selection.isEmpty());\n        }\n    };\n\n    var inputHandler = null;\n    this.setInputHandler = function(cb) {inputHandler = cb;};\n    this.getInputHandler = function() {return inputHandler;};\n    var afterContextMenu = false;\n    \n    var sendText = function(data) {\n        if (inputHandler) {\n            data = inputHandler(data);\n            inputHandler = null;\n        }\n        if (pasted) {\n            resetSelection();\n            if (data)\n                host.onPaste(data);\n            pasted = false;\n        } else if (data == PLACEHOLDER.charAt(0)) {\n            if (afterContextMenu)\n                host.execCommand(\"del\", {source: \"ace\"});\n            else // some versions of android do not fire keydown when pressing backspace\n                host.execCommand(\"backspace\", {source: \"ace\"});\n        } else {\n            if (data.substring(0, 2) == PLACEHOLDER)\n                data = data.substr(2);\n            else if (data.charAt(0) == PLACEHOLDER.charAt(0))\n                data = data.substr(1);\n            else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))\n                data = data.slice(0, -1);\n            if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))\n                data = data.slice(0, -1);\n            \n            if (data)\n                host.onTextInput(data);\n        }\n        if (afterContextMenu)\n            afterContextMenu = false;\n    };\n    var onInput = function(e) {\n        if (inComposition)\n            return;\n        var data = text.value;\n        sendText(data);\n        resetValue();\n    };\n    \n    var handleClipboardData = function(e, data, forceIEMime) {\n        var clipboardData = e.clipboardData || window.clipboardData;\n        if (!clipboardData || BROKEN_SETDATA)\n            return;\n        var mime = USE_IE_MIME_TYPE || forceIEMime ? \"Text\" : \"text/plain\";\n        try {\n            if (data) {\n                return clipboardData.setData(mime, data) !== false;\n            } else {\n                return clipboardData.getData(mime);\n            }\n        } catch(e) {\n            if (!forceIEMime)\n                return handleClipboardData(e, data, true);\n        }\n    };\n\n    var doCopy = function(e, isCut) {\n        var data = host.getCopyText();\n        if (!data)\n            return event.preventDefault(e);\n\n        if (handleClipboardData(e, data)) {\n            isCut ? host.onCut() : host.onCopy();\n            event.preventDefault(e);\n        } else {\n            copied = true;\n            text.value = data;\n            text.select();\n            setTimeout(function(){\n                copied = false;\n                resetValue();\n                resetSelection();\n                isCut ? host.onCut() : host.onCopy();\n            });\n        }\n    };\n    \n    var onCut = function(e) {\n        doCopy(e, true);\n    };\n    \n    var onCopy = function(e) {\n        doCopy(e, false);\n    };\n    \n    var onPaste = function(e) {\n        var data = handleClipboardData(e);\n        if (typeof data == \"string\") {\n            if (data)\n                host.onPaste(data, e);\n            if (useragent.isIE)\n                setTimeout(resetSelection);\n            event.preventDefault(e);\n        }\n        else {\n            text.value = \"\";\n            pasted = true;\n        }\n    };\n\n    event.addCommandKeyListener(text, host.onCommandKey.bind(host));\n\n    event.addListener(text, \"select\", onSelect);\n\n    event.addListener(text, \"input\", onInput);\n\n    event.addListener(text, \"cut\", onCut);\n    event.addListener(text, \"copy\", onCopy);\n    event.addListener(text, \"paste\", onPaste);\n    if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)) {\n        event.addListener(parentNode, \"keydown\", function(e) {\n            if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)\n                return;\n\n            switch (e.keyCode) {\n                case 67:\n                    onCopy(e);\n                    break;\n                case 86:\n                    onPaste(e);\n                    break;\n                case 88:\n                    onCut(e);\n                    break;\n            }\n        });\n    }\n    var onCompositionStart = function(e) {\n        if (inComposition || !host.onCompositionStart || host.$readOnly) \n            return;\n        inComposition = {};\n        inComposition.canUndo = host.session.$undoManager;\n        host.onCompositionStart();\n        setTimeout(onCompositionUpdate, 0);\n        host.on(\"mousedown\", onCompositionEnd);\n        if (inComposition.canUndo && !host.selection.isEmpty()) {\n            host.insert(\"\");\n            host.session.markUndoGroup();\n            host.selection.clearSelection();\n        }\n        host.session.markUndoGroup();\n    };\n\n    var onCompositionUpdate = function() {\n        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)\n            return;\n        var val = text.value.replace(/\\u2028/g, \"\");\n        if (inComposition.lastValue === val) return;\n        \n        host.onCompositionUpdate(val);\n        if (inComposition.lastValue)\n            host.undo();\n        if (inComposition.canUndo)\n            inComposition.lastValue = val;\n        if (inComposition.lastValue) {\n            var r = host.selection.getRange();\n            host.insert(inComposition.lastValue);\n            host.session.markUndoGroup();\n            inComposition.range = host.selection.getRange();\n            host.selection.setRange(r);\n            host.selection.clearSelection();\n        }\n    };\n\n    var onCompositionEnd = function(e) {\n        if (!host.onCompositionEnd || host.$readOnly) return;\n        var c = inComposition;\n        inComposition = false;\n        var timer = setTimeout(function() {\n            timer = null;\n            var str = text.value.replace(/\\u2028/g, \"\");\n            if (inComposition)\n                return;\n            else if (str == c.lastValue)\n                resetValue();\n            else if (!c.lastValue && str) {\n                resetValue();\n                sendText(str);\n            }\n        });\n        inputHandler = function compositionInputHandler(str) {\n            if (timer)\n                clearTimeout(timer);\n            str = str.replace(/\\u2028/g, \"\");\n            if (str == c.lastValue)\n                return \"\";\n            if (c.lastValue && timer)\n                host.undo();\n            return str;\n        };\n        host.onCompositionEnd();\n        host.removeListener(\"mousedown\", onCompositionEnd);\n        if (e.type == \"compositionend\" && c.range) {\n            host.selection.setRange(c.range);\n        }\n        var needsOnInput =\n            (!!useragent.isChrome && useragent.isChrome >= 53) ||\n            (!!useragent.isWebKit && useragent.isWebKit >= 603);\n\n        if (needsOnInput) {\n          onInput();\n        }\n    };\n    \n    \n\n    var syncComposition = lang.delayedCall(onCompositionUpdate, 50);\n\n    event.addListener(text, \"compositionstart\", onCompositionStart);\n    if (useragent.isGecko) {\n        event.addListener(text, \"text\", function(){syncComposition.schedule();});\n    } else {\n        event.addListener(text, \"keyup\", function(){syncComposition.schedule();});\n        event.addListener(text, \"keydown\", function(){syncComposition.schedule();});\n    }\n    event.addListener(text, \"compositionend\", onCompositionEnd);\n\n    this.getElement = function() {\n        return text;\n    };\n\n    this.setReadOnly = function(readOnly) {\n       text.readOnly = readOnly;\n    };\n\n    this.onContextMenu = function(e) {\n        afterContextMenu = true;\n        resetSelection(host.selection.isEmpty());\n        host._emit(\"nativecontextmenu\", {target: host, domEvent: e});\n        this.moveToMouse(e, true);\n    };\n    \n    this.moveToMouse = function(e, bringToFront) {\n        if (!tempStyle)\n            tempStyle = text.style.cssText;\n        text.style.cssText = (bringToFront ? \"z-index:100000;\" : \"\")\n            + \"height:\" + text.style.height + \";\"\n            + (useragent.isIE ? \"opacity:0.1;\" : \"\");\n\n        var rect = host.container.getBoundingClientRect();\n        var style = dom.computedStyle(host.container);\n        var top = rect.top + (parseInt(style.borderTopWidth) || 0);\n        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);\n        var maxTop = rect.bottom - top - text.clientHeight -2;\n        var move = function(e) {\n            text.style.left = e.clientX - left - 2 + \"px\";\n            text.style.top = Math.min(e.clientY - top - 2, maxTop) + \"px\";\n        }; \n        move(e);\n\n        if (e.type != \"mousedown\")\n            return;\n\n        if (host.renderer.$keepTextAreaAtCursor)\n            host.renderer.$keepTextAreaAtCursor = null;\n\n        clearTimeout(closeTimeout);\n        if (useragent.isWin)\n            event.capture(host.container, move, onContextMenuClose);\n    };\n\n    this.onContextMenuClose = onContextMenuClose;\n    var closeTimeout;\n    function onContextMenuClose() {\n        clearTimeout(closeTimeout);\n        closeTimeout = setTimeout(function () {\n            if (tempStyle) {\n                text.style.cssText = tempStyle;\n                tempStyle = '';\n            }\n            if (host.renderer.$keepTextAreaAtCursor == null) {\n                host.renderer.$keepTextAreaAtCursor = true;\n                host.renderer.$moveTextAreaToCursor();\n            }\n        }, 0);\n    }\n\n    var onContextMenu = function(e) {\n        host.textInput.onContextMenu(e);\n        onContextMenuClose();\n    };\n    event.addListener(text, \"mouseup\", onContextMenu);\n    event.addListener(text, \"mousedown\", function(e) {\n        e.preventDefault();\n        onContextMenuClose();\n    });\n    event.addListener(host.renderer.scroller, \"contextmenu\", onContextMenu);\n    event.addListener(text, \"contextmenu\", onContextMenu);\n};\n\nexports.TextInput = TextInput;\n});\n\nace.define(\"ace/mouse/default_handlers\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/useragent\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar dom = acequire(\"../lib/dom\");\nvar event = acequire(\"../lib/event\");\nvar useragent = acequire(\"../lib/useragent\");\n\nvar DRAG_OFFSET = 0; // pixels\nvar SCROLL_COOLDOWN_T = 250; // milliseconds\n\nfunction DefaultHandlers(mouseHandler) {\n    mouseHandler.$clickSelection = null;\n\n    var editor = mouseHandler.editor;\n    editor.setDefaultHandler(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n    editor.setDefaultHandler(\"dblclick\", this.onDoubleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"tripleclick\", this.onTripleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"quadclick\", this.onQuadClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"mousewheel\", this.onMouseWheel.bind(mouseHandler));\n    editor.setDefaultHandler(\"touchmove\", this.onTouchMove.bind(mouseHandler));\n\n    var exports = [\"select\", \"startSelect\", \"selectEnd\", \"selectAllEnd\", \"selectByWordsEnd\",\n        \"selectByLinesEnd\", \"dragWait\", \"dragWaitEnd\", \"focusWait\"];\n\n    exports.forEach(function(x) {\n        mouseHandler[x] = this[x];\n    }, this);\n\n    mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, \"getLineRange\");\n    mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, \"getWordRange\");\n}\n\n(function() {\n\n    this.onMouseDown = function(ev) {\n        var inSelection = ev.inSelection();\n        var pos = ev.getDocumentPosition();\n        this.mousedownEvent = ev;\n        var editor = this.editor;\n\n        var button = ev.getButton();\n        if (button !== 0) {\n            var selectionRange = editor.getSelectionRange();\n            var selectionEmpty = selectionRange.isEmpty();\n            editor.$blockScrolling++;\n            if (selectionEmpty || button == 1)\n                editor.selection.moveToPosition(pos);\n            editor.$blockScrolling--;\n            if (button == 2) {\n                editor.textInput.onContextMenu(ev.domEvent);\n                if (!useragent.isMozilla)\n                    ev.preventDefault();\n            }\n            return;\n        }\n\n        this.mousedownEvent.time = Date.now();\n        if (inSelection && !editor.isFocused()) {\n            editor.focus();\n            if (this.$focusTimout && !this.$clickSelection && !editor.inMultiSelectMode) {\n                this.setState(\"focusWait\");\n                this.captureMouse(ev);\n                return;\n            }\n        }\n\n        this.captureMouse(ev);\n        this.startSelect(pos, ev.domEvent._clicks > 1);\n        return ev.preventDefault();\n    };\n\n    this.startSelect = function(pos, waitForClickSelection) {\n        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var editor = this.editor;\n        editor.$blockScrolling++;\n        if (this.mousedownEvent.getShiftKey())\n            editor.selection.selectToPosition(pos);\n        else if (!waitForClickSelection)\n            editor.selection.moveToPosition(pos);\n        if (!waitForClickSelection)\n            this.select();\n        if (editor.renderer.scroller.setCapture) {\n            editor.renderer.scroller.setCapture();\n        }\n        editor.setStyle(\"ace_selecting\");\n        this.setState(\"select\");\n        editor.$blockScrolling--;\n    };\n\n    this.select = function() {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        editor.$blockScrolling++;\n        if (this.$clickSelection) {\n            var cmp = this.$clickSelection.comparePoint(cursor);\n\n            if (cmp == -1) {\n                anchor = this.$clickSelection.end;\n            } else if (cmp == 1) {\n                anchor = this.$clickSelection.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.$blockScrolling--;\n        editor.renderer.scrollCursorIntoView();\n    };\n\n    this.extendSelectionBy = function(unitName) {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var range = editor.selection[unitName](cursor.row, cursor.column);\n        editor.$blockScrolling++;\n        if (this.$clickSelection) {\n            var cmpStart = this.$clickSelection.comparePoint(range.start);\n            var cmpEnd = this.$clickSelection.comparePoint(range.end);\n\n            if (cmpStart == -1 && cmpEnd <= 0) {\n                anchor = this.$clickSelection.end;\n                if (range.end.row != cursor.row || range.end.column != cursor.column)\n                    cursor = range.start;\n            } else if (cmpEnd == 1 && cmpStart >= 0) {\n                anchor = this.$clickSelection.start;\n                if (range.start.row != cursor.row || range.start.column != cursor.column)\n                    cursor = range.end;\n            } else if (cmpStart == -1 && cmpEnd == 1) {\n                cursor = range.end;\n                anchor = range.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.$blockScrolling--;\n        editor.renderer.scrollCursorIntoView();\n    };\n\n    this.selectEnd =\n    this.selectAllEnd =\n    this.selectByWordsEnd =\n    this.selectByLinesEnd = function() {\n        this.$clickSelection = null;\n        this.editor.unsetStyle(\"ace_selecting\");\n        if (this.editor.renderer.scroller.releaseCapture) {\n            this.editor.renderer.scroller.releaseCapture();\n        }\n    };\n\n    this.focusWait = function() {\n        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n        var time = Date.now();\n\n        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimout)\n            this.startSelect(this.mousedownEvent.getDocumentPosition());\n    };\n\n    this.onDoubleClick = function(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        var session = editor.session;\n\n        var range = session.getBracketRange(pos);\n        if (range) {\n            if (range.isEmpty()) {\n                range.start.column--;\n                range.end.column++;\n            }\n            this.setState(\"select\");\n        } else {\n            range = editor.selection.getWordRange(pos.row, pos.column);\n            this.setState(\"selectByWords\");\n        }\n        this.$clickSelection = range;\n        this.select();\n    };\n\n    this.onTripleClick = function(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n\n        this.setState(\"selectByLines\");\n        var range = editor.getSelectionRange();\n        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {\n            this.$clickSelection = editor.selection.getLineRange(range.start.row);\n            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;\n        } else {\n            this.$clickSelection = editor.selection.getLineRange(pos.row);\n        }\n        this.select();\n    };\n\n    this.onQuadClick = function(ev) {\n        var editor = this.editor;\n\n        editor.selectAll();\n        this.$clickSelection = editor.getSelectionRange();\n        this.setState(\"selectAll\");\n    };\n\n    this.onMouseWheel = function(ev) {\n        if (ev.getAccelKey())\n            return;\n        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n            ev.wheelX = ev.wheelY;\n            ev.wheelY = 0;\n        }\n        \n        var editor = this.editor;\n\n        if (!this.$lastScroll)\n            this.$lastScroll = { t: 0, vx: 0, vy: 0, allowed: 0 };\n\n        var prevScroll = this.$lastScroll;\n        var t = ev.domEvent.timeStamp;\n        var dt = t - prevScroll.t;\n        var vx = ev.wheelX / dt;\n        var vy = ev.wheelY / dt;\n        if (dt < SCROLL_COOLDOWN_T) {\n            vx = (vx + prevScroll.vx) / 2;\n            vy = (vy + prevScroll.vy) / 2;\n        }\n\n        var direction = Math.abs(vx / vy);\n\n        var canScroll = false;\n        if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0))\n            canScroll = true;\n        if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed))\n            canScroll = true;\n\n        if (canScroll) {\n            prevScroll.allowed = t;\n        } else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {\n            var isSlower = Math.abs(vx) <= 1.1 * Math.abs(prevScroll.vx)\n                && Math.abs(vy) <= 1.1 * Math.abs(prevScroll.vy);\n            if (isSlower) {\n                canScroll = true;\n                prevScroll.allowed = t;\n            }\n            else {\n                prevScroll.allowed = 0;\n            }\n        }\n\n        prevScroll.t = t;\n        prevScroll.vx = vx;\n        prevScroll.vy = vy;\n\n        if (canScroll) {\n            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n            return ev.stop();\n        }\n    };\n\n    this.onTouchMove = function(ev) {\n        this.editor._emit(\"mousewheel\", ev);\n    };\n\n}).call(DefaultHandlers.prototype);\n\nexports.DefaultHandlers = DefaultHandlers;\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nfunction calcRangeOrientation(range, cursor) {\n    if (range.start.row == range.end.row)\n        var cmp = 2 * cursor.column - range.start.column - range.end.column;\n    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)\n        var cmp = cursor.column - 4;\n    else\n        var cmp = 2 * cursor.row - range.start.row - range.end.row;\n\n    if (cmp < 0)\n        return {cursor: range.start, anchor: range.end};\n    else\n        return {cursor: range.end, anchor: range.start};\n}\n\n});\n\nace.define(\"ace/tooltip\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar dom = acequire(\"./lib/dom\");\nfunction Tooltip (parentNode) {\n    this.isOpen = false;\n    this.$element = null;\n    this.$parentNode = parentNode;\n}\n\n(function() {\n    this.$init = function() {\n        this.$element = dom.createElement(\"div\");\n        this.$element.className = \"ace_tooltip\";\n        this.$element.style.display = \"none\";\n        this.$parentNode.appendChild(this.$element);\n        return this.$element;\n    };\n    this.getElement = function() {\n        return this.$element || this.$init();\n    };\n    this.setText = function(text) {\n        dom.setInnerText(this.getElement(), text);\n    };\n    this.setHtml = function(html) {\n        this.getElement().innerHTML = html;\n    };\n    this.setPosition = function(x, y) {\n        this.getElement().style.left = x + \"px\";\n        this.getElement().style.top = y + \"px\";\n    };\n    this.setClassName = function(className) {\n        dom.addCssClass(this.getElement(), className);\n    };\n    this.show = function(text, x, y) {\n        if (text != null)\n            this.setText(text);\n        if (x != null && y != null)\n            this.setPosition(x, y);\n        if (!this.isOpen) {\n            this.getElement().style.display = \"block\";\n            this.isOpen = true;\n        }\n    };\n\n    this.hide = function() {\n        if (this.isOpen) {\n            this.getElement().style.display = \"none\";\n            this.isOpen = false;\n        }\n    };\n    this.getHeight = function() {\n        return this.getElement().offsetHeight;\n    };\n    this.getWidth = function() {\n        return this.getElement().offsetWidth;\n    };\n\n    this.destroy = function() {\n        this.isOpen = false;\n        if (this.$element && this.$element.parentNode) {\n            this.$element.parentNode.removeChild(this.$element);\n        }\n    };\n\n}).call(Tooltip.prototype);\n\nexports.Tooltip = Tooltip;\n});\n\nace.define(\"ace/mouse/default_gutter_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event\",\"ace/tooltip\"], function(acequire, exports, module) {\n\"use strict\";\nvar dom = acequire(\"../lib/dom\");\nvar oop = acequire(\"../lib/oop\");\nvar event = acequire(\"../lib/event\");\nvar Tooltip = acequire(\"../tooltip\").Tooltip;\n\nfunction GutterHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var gutter = editor.renderer.$gutterLayer;\n    var tooltip = new GutterTooltip(editor.container);\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousedown\", function(e) {\n        if (!editor.isFocused() || e.getButton() != 0)\n            return;\n        var gutterRegion = gutter.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\")\n            return;\n\n        var row = e.getDocumentPosition().row;\n        var selection = editor.session.selection;\n\n        if (e.getShiftKey())\n            selection.selectTo(row, 0);\n        else {\n            if (e.domEvent.detail == 2) {\n                editor.selectAll();\n                return e.preventDefault();\n            }\n            mouseHandler.$clickSelection = editor.selection.getLineRange(row);\n        }\n        mouseHandler.setState(\"selectByLines\");\n        mouseHandler.captureMouse(e);\n        return e.preventDefault();\n    });\n\n\n    var tooltipTimeout, mouseEvent, tooltipAnnotation;\n\n    function showTooltip() {\n        var row = mouseEvent.getDocumentPosition().row;\n        var annotation = gutter.$annotations[row];\n        if (!annotation)\n            return hideTooltip();\n\n        var maxRow = editor.session.getLength();\n        if (row == maxRow) {\n            var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;\n            var pos = mouseEvent.$pos;\n            if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))\n                return hideTooltip();\n        }\n\n        if (tooltipAnnotation == annotation)\n            return;\n        tooltipAnnotation = annotation.text.join(\"<br/>\");\n\n        tooltip.setHtml(tooltipAnnotation);\n        tooltip.show();\n        editor._signal(\"showGutterTooltip\", tooltip);\n        editor.on(\"mousewheel\", hideTooltip);\n\n        if (mouseHandler.$tooltipFollowsMouse) {\n            moveTooltip(mouseEvent);\n        } else {\n            var gutterElement = mouseEvent.domEvent.target;\n            var rect = gutterElement.getBoundingClientRect();\n            var style = tooltip.getElement().style;\n            style.left = rect.right + \"px\";\n            style.top = rect.bottom + \"px\";\n        }\n    }\n\n    function hideTooltip() {\n        if (tooltipTimeout)\n            tooltipTimeout = clearTimeout(tooltipTimeout);\n        if (tooltipAnnotation) {\n            tooltip.hide();\n            tooltipAnnotation = null;\n            editor._signal(\"hideGutterTooltip\", tooltip);\n            editor.removeEventListener(\"mousewheel\", hideTooltip);\n        }\n    }\n\n    function moveTooltip(e) {\n        tooltip.setPosition(e.x, e.y);\n    }\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousemove\", function(e) {\n        var target = e.domEvent.target || e.domEvent.srcElement;\n        if (dom.hasCssClass(target, \"ace_fold-widget\"))\n            return hideTooltip();\n\n        if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse)\n            moveTooltip(e);\n\n        mouseEvent = e;\n        if (tooltipTimeout)\n            return;\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            if (mouseEvent && !mouseHandler.isMousePressed)\n                showTooltip();\n            else\n                hideTooltip();\n        }, 50);\n    });\n\n    event.addListener(editor.renderer.$gutter, \"mouseout\", function(e) {\n        mouseEvent = null;\n        if (!tooltipAnnotation || tooltipTimeout)\n            return;\n\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            hideTooltip();\n        }, 50);\n    });\n    \n    editor.on(\"changeSession\", hideTooltip);\n}\n\nfunction GutterTooltip(parentNode) {\n    Tooltip.call(this, parentNode);\n}\n\noop.inherits(GutterTooltip, Tooltip);\n\n(function(){\n    this.setPosition = function(x, y) {\n        var windowWidth = window.innerWidth || document.documentElement.clientWidth;\n        var windowHeight = window.innerHeight || document.documentElement.clientHeight;\n        var width = this.getWidth();\n        var height = this.getHeight();\n        x += 15;\n        y += 15;\n        if (x + width > windowWidth) {\n            x -= (x + width) - windowWidth;\n        }\n        if (y + height > windowHeight) {\n            y -= 20 + height;\n        }\n        Tooltip.prototype.setPosition.call(this, x, y);\n    };\n\n}).call(GutterTooltip.prototype);\n\n\n\nexports.GutterHandler = GutterHandler;\n\n});\n\nace.define(\"ace/mouse/mouse_event\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar event = acequire(\"../lib/event\");\nvar useragent = acequire(\"../lib/useragent\");\nvar MouseEvent = exports.MouseEvent = function(domEvent, editor) {\n    this.domEvent = domEvent;\n    this.editor = editor;\n    \n    this.x = this.clientX = domEvent.clientX;\n    this.y = this.clientY = domEvent.clientY;\n\n    this.$pos = null;\n    this.$inSelection = null;\n    \n    this.propagationStopped = false;\n    this.defaultPrevented = false;\n};\n\n(function() {  \n    \n    this.stopPropagation = function() {\n        event.stopPropagation(this.domEvent);\n        this.propagationStopped = true;\n    };\n    \n    this.preventDefault = function() {\n        event.preventDefault(this.domEvent);\n        this.defaultPrevented = true;\n    };\n    \n    this.stop = function() {\n        this.stopPropagation();\n        this.preventDefault();\n    };\n    this.getDocumentPosition = function() {\n        if (this.$pos)\n            return this.$pos;\n        \n        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);\n        return this.$pos;\n    };\n    this.inSelection = function() {\n        if (this.$inSelection !== null)\n            return this.$inSelection;\n            \n        var editor = this.editor;\n        \n\n        var selectionRange = editor.getSelectionRange();\n        if (selectionRange.isEmpty())\n            this.$inSelection = false;\n        else {\n            var pos = this.getDocumentPosition();\n            this.$inSelection = selectionRange.contains(pos.row, pos.column);\n        }\n\n        return this.$inSelection;\n    };\n    this.getButton = function() {\n        return event.getButton(this.domEvent);\n    };\n    this.getShiftKey = function() {\n        return this.domEvent.shiftKey;\n    };\n    \n    this.getAccelKey = useragent.isMac\n        ? function() { return this.domEvent.metaKey; }\n        : function() { return this.domEvent.ctrlKey; };\n    \n}).call(MouseEvent.prototype);\n\n});\n\nace.define(\"ace/mouse/dragdrop_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/useragent\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar dom = acequire(\"../lib/dom\");\nvar event = acequire(\"../lib/event\");\nvar useragent = acequire(\"../lib/useragent\");\n\nvar AUTOSCROLL_DELAY = 200;\nvar SCROLL_CURSOR_DELAY = 200;\nvar SCROLL_CURSOR_HYSTERESIS = 5;\n\nfunction DragdropHandler(mouseHandler) {\n\n    var editor = mouseHandler.editor;\n\n    var blankImage = dom.createElement(\"img\");\n    blankImage.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    if (useragent.isOpera)\n        blankImage.style.cssText = \"width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;\";\n\n    var exports = [\"dragWait\", \"dragWaitEnd\", \"startDrag\", \"dragReadyEnd\", \"onMouseDrag\"];\n\n     exports.forEach(function(x) {\n         mouseHandler[x] = this[x];\n    }, this);\n    editor.addEventListener(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n\n\n    var mouseTarget = editor.container;\n    var dragSelectionMarker, x, y;\n    var timerId, range;\n    var dragCursor, counter = 0;\n    var dragOperation;\n    var isInternal;\n    var autoScrollStartTime;\n    var cursorMovedTime;\n    var cursorPointOnCaretMoved;\n\n    this.onDragStart = function(e) {\n        if (this.cancelDrag || !mouseTarget.draggable) {\n            var self = this;\n            setTimeout(function(){\n                self.startSelect();\n                self.captureMouse(e);\n            }, 0);\n            return e.preventDefault();\n        }\n        range = editor.getSelectionRange();\n\n        var dataTransfer = e.dataTransfer;\n        dataTransfer.effectAllowed = editor.getReadOnly() ? \"copy\" : \"copyMove\";\n        if (useragent.isOpera) {\n            editor.container.appendChild(blankImage);\n            blankImage.scrollTop = 0;\n        }\n        dataTransfer.setDragImage && dataTransfer.setDragImage(blankImage, 0, 0);\n        if (useragent.isOpera) {\n            editor.container.removeChild(blankImage);\n        }\n        dataTransfer.clearData();\n        dataTransfer.setData(\"Text\", editor.session.getTextRange());\n\n        isInternal = true;\n        this.setState(\"drag\");\n    };\n\n    this.onDragEnd = function(e) {\n        mouseTarget.draggable = false;\n        isInternal = false;\n        this.setState(null);\n        if (!editor.getReadOnly()) {\n            var dropEffect = e.dataTransfer.dropEffect;\n            if (!dragOperation && dropEffect == \"move\")\n                editor.session.remove(editor.getSelectionRange());\n            editor.renderer.$cursorLayer.setBlinking(true);\n        }\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n    };\n\n    this.onDragEnter = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker)\n            addDragMarker();\n        counter++;\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n\n    this.onDragOver = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker) {\n            addDragMarker();\n            counter++;\n        }\n        if (onMouseMoveTimer !== null)\n            onMouseMoveTimer = null;\n\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n\n    this.onDragLeave = function(e) {\n        counter--;\n        if (counter <= 0 && dragSelectionMarker) {\n            clearDragMarker();\n            dragOperation = null;\n            return event.preventDefault(e);\n        }\n    };\n\n    this.onDrop = function(e) {\n        if (!dragCursor)\n            return;\n        var dataTransfer = e.dataTransfer;\n        if (isInternal) {\n            switch (dragOperation) {\n                case \"move\":\n                    if (range.contains(dragCursor.row, dragCursor.column)) {\n                        range = {\n                            start: dragCursor,\n                            end: dragCursor\n                        };\n                    } else {\n                        range = editor.moveText(range, dragCursor);\n                    }\n                    break;\n                case \"copy\":\n                    range = editor.moveText(range, dragCursor, true);\n                    break;\n            }\n        } else {\n            var dropData = dataTransfer.getData('Text');\n            range = {\n                start: dragCursor,\n                end: editor.session.insert(dragCursor, dropData)\n            };\n            editor.focus();\n            dragOperation = null;\n        }\n        clearDragMarker();\n        return event.preventDefault(e);\n    };\n\n    event.addListener(mouseTarget, \"dragstart\", this.onDragStart.bind(mouseHandler));\n    event.addListener(mouseTarget, \"dragend\", this.onDragEnd.bind(mouseHandler));\n    event.addListener(mouseTarget, \"dragenter\", this.onDragEnter.bind(mouseHandler));\n    event.addListener(mouseTarget, \"dragover\", this.onDragOver.bind(mouseHandler));\n    event.addListener(mouseTarget, \"dragleave\", this.onDragLeave.bind(mouseHandler));\n    event.addListener(mouseTarget, \"drop\", this.onDrop.bind(mouseHandler));\n\n    function scrollCursorIntoView(cursor, prevCursor) {\n        var now = Date.now();\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        var hMovement = !prevCursor || cursor.column != prevCursor.column;\n        if (!cursorMovedTime || vMovement || hMovement) {\n            editor.$blockScrolling += 1;\n            editor.moveCursorToPosition(cursor);\n            editor.$blockScrolling -= 1;\n            cursorMovedTime = now;\n            cursorPointOnCaretMoved = {x: x, y: y};\n        } else {\n            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);\n            if (distance > SCROLL_CURSOR_HYSTERESIS) {\n                cursorMovedTime = null;\n            } else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {\n                editor.renderer.scrollCursorIntoView();\n                cursorMovedTime = null;\n            }\n        }\n    }\n\n    function autoScroll(cursor, prevCursor) {\n        var now = Date.now();\n        var lineHeight = editor.renderer.layerConfig.lineHeight;\n        var characterWidth = editor.renderer.layerConfig.characterWidth;\n        var editorRect = editor.renderer.scroller.getBoundingClientRect();\n        var offsets = {\n           x: {\n               left: x - editorRect.left,\n               right: editorRect.right - x\n           },\n           y: {\n               top: y - editorRect.top,\n               bottom: editorRect.bottom - y\n           }\n        };\n        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);\n        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);\n        var scrollCursor = {row: cursor.row, column: cursor.column};\n        if (nearestXOffset / characterWidth <= 2) {\n            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);\n        }\n        if (nearestYOffset / lineHeight <= 1) {\n            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);\n        }\n        var vScroll = cursor.row != scrollCursor.row;\n        var hScroll = cursor.column != scrollCursor.column;\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        if (vScroll || (hScroll && !vMovement)) {\n            if (!autoScrollStartTime)\n                autoScrollStartTime = now;\n            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)\n                editor.renderer.scrollCursorIntoView(scrollCursor);\n        } else {\n            autoScrollStartTime = null;\n        }\n    }\n\n    function onDragInterval() {\n        var prevCursor = dragCursor;\n        dragCursor = editor.renderer.screenToTextCoordinates(x, y);\n        scrollCursorIntoView(dragCursor, prevCursor);\n        autoScroll(dragCursor, prevCursor);\n    }\n\n    function addDragMarker() {\n        range = editor.selection.toOrientedRange();\n        dragSelectionMarker = editor.session.addMarker(range, \"ace_selection\", editor.getSelectionStyle());\n        editor.clearSelection();\n        if (editor.isFocused())\n            editor.renderer.$cursorLayer.setBlinking(false);\n        clearInterval(timerId);\n        onDragInterval();\n        timerId = setInterval(onDragInterval, 20);\n        counter = 0;\n        event.addListener(document, \"mousemove\", onMouseMove);\n    }\n\n    function clearDragMarker() {\n        clearInterval(timerId);\n        editor.session.removeMarker(dragSelectionMarker);\n        dragSelectionMarker = null;\n        editor.$blockScrolling += 1;\n        editor.selection.fromOrientedRange(range);\n        editor.$blockScrolling -= 1;\n        if (editor.isFocused() && !isInternal)\n            editor.renderer.$cursorLayer.setBlinking(!editor.getReadOnly());\n        range = null;\n        dragCursor = null;\n        counter = 0;\n        autoScrollStartTime = null;\n        cursorMovedTime = null;\n        event.removeListener(document, \"mousemove\", onMouseMove);\n    }\n    var onMouseMoveTimer = null;\n    function onMouseMove() {\n        if (onMouseMoveTimer == null) {\n            onMouseMoveTimer = setTimeout(function() {\n                if (onMouseMoveTimer != null && dragSelectionMarker)\n                    clearDragMarker();\n            }, 20);\n        }\n    }\n\n    function canAccept(dataTransfer) {\n        var types = dataTransfer.types;\n        return !types || Array.prototype.some.call(types, function(type) {\n            return type == 'text/plain' || type == 'Text';\n        });\n    }\n\n    function getDropEffect(e) {\n        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];\n        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];\n\n        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;\n        var effectAllowed = \"uninitialized\";\n        try {\n            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();\n        } catch (e) {}\n        var dropEffect = \"none\";\n\n        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        else if (moveAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"move\";\n        else if (copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n\n        return dropEffect;\n    }\n}\n\n(function() {\n\n    this.dragWait = function() {\n        var interval = Date.now() - this.mousedownEvent.time;\n        if (interval > this.editor.getDragDelay())\n            this.startDrag();\n    };\n\n    this.dragWaitEnd = function() {\n        var target = this.editor.container;\n        target.draggable = false;\n        this.startSelect(this.mousedownEvent.getDocumentPosition());\n        this.selectEnd();\n    };\n\n    this.dragReadyEnd = function(e) {\n        this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n        this.dragWaitEnd();\n    };\n\n    this.startDrag = function(){\n        this.cancelDrag = false;\n        var editor = this.editor;\n        var target = editor.container;\n        target.draggable = true;\n        editor.renderer.$cursorLayer.setBlinking(false);\n        editor.setStyle(\"ace_dragging\");\n        var cursorStyle = useragent.isWin ? \"default\" : \"move\";\n        editor.renderer.setCursorStyle(cursorStyle);\n        this.setState(\"dragReady\");\n    };\n\n    this.onMouseDrag = function(e) {\n        var target = this.editor.container;\n        if (useragent.isIE && this.state == \"dragReady\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 3)\n                target.dragDrop();\n        }\n        if (this.state === \"dragWait\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 0) {\n                target.draggable = false;\n                this.startSelect(this.mousedownEvent.getDocumentPosition());\n            }\n        }\n    };\n\n    this.onMouseDown = function(e) {\n        if (!this.$dragEnabled)\n            return;\n        this.mousedownEvent = e;\n        var editor = this.editor;\n\n        var inSelection = e.inSelection();\n        var button = e.getButton();\n        var clickCount = e.domEvent.detail || 1;\n        if (clickCount === 1 && button === 0 && inSelection) {\n            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))\n                return;\n            this.mousedownEvent.time = Date.now();\n            var eventTarget = e.domEvent.target || e.domEvent.srcElement;\n            if (\"unselectable\" in eventTarget)\n                eventTarget.unselectable = \"on\";\n            if (editor.getDragDelay()) {\n                if (useragent.isWebKit) {\n                    this.cancelDrag = true;\n                    var mouseTarget = editor.container;\n                    mouseTarget.draggable = true;\n                }\n                this.setState(\"dragWait\");\n            } else {\n                this.startDrag();\n            }\n            this.captureMouse(e, this.onMouseDrag.bind(this));\n            e.defaultPrevented = true;\n        }\n    };\n\n}).call(DragdropHandler.prototype);\n\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nexports.DragdropHandler = DragdropHandler;\n\n});\n\nace.define(\"ace/lib/net\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(acequire, exports, module) {\n\"use strict\";\nvar dom = acequire(\"./dom\");\n\nexports.get = function (url, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            callback(xhr.responseText);\n        }\n    };\n    xhr.send(null);\n};\n\nexports.loadScript = function(path, callback) {\n    var head = dom.getDocumentHead();\n    var s = document.createElement('script');\n\n    s.src = path;\n    head.appendChild(s);\n\n    s.onload = s.onreadystatechange = function(_, isAbort) {\n        if (isAbort || !s.readyState || s.readyState == \"loaded\" || s.readyState == \"complete\") {\n            s = s.onload = s.onreadystatechange = null;\n            if (!isAbort)\n                callback();\n        }\n    };\n};\nexports.qualifyURL = function(url) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a.href;\n};\n\n});\n\nace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar EventEmitter = {};\nvar stopPropagation = function() { this.propagationStopped = true; };\nvar preventDefault = function() { this.defaultPrevented = true; };\n\nEventEmitter._emit =\nEventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {});\n    this._defaultHandlers || (this._defaultHandlers = {});\n\n    var listeners = this._eventRegistry[eventName] || [];\n    var defaultHandler = this._defaultHandlers[eventName];\n    if (!listeners.length && !defaultHandler)\n        return;\n\n    if (typeof e != \"object\" || !e)\n        e = {};\n\n    if (!e.type)\n        e.type = eventName;\n    if (!e.stopPropagation)\n        e.stopPropagation = stopPropagation;\n    if (!e.preventDefault)\n        e.preventDefault = preventDefault;\n\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++) {\n        listeners[i](e, this);\n        if (e.propagationStopped)\n            break;\n    }\n    \n    if (defaultHandler && !e.defaultPrevented)\n        return defaultHandler(e, this);\n};\n\n\nEventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++)\n        listeners[i](e, this);\n};\n\nEventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    callback && this.addEventListener(eventName, function newCallback() {\n        _self.removeEventListener(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n};\n\n\nEventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        handlers = this._defaultHandlers = {_disabled_: {}};\n    \n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1) \n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    \n    if (handlers[eventName] == callback) {\n        var old = handlers[eventName];\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    } else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\n\nEventEmitter.on =\nEventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        listeners = this._eventRegistry[eventName] = [];\n\n    if (listeners.indexOf(callback) == -1)\n        listeners[capturing ? \"unshift\" : \"push\"](callback);\n    return callback;\n};\n\nEventEmitter.off =\nEventEmitter.removeListener =\nEventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        return;\n\n    var index = listeners.indexOf(callback);\n    if (index !== -1)\n        listeners.splice(index, 1);\n};\n\nEventEmitter.removeAllListeners = function(eventName) {\n    if (this._eventRegistry) this._eventRegistry[eventName] = [];\n};\n\nexports.EventEmitter = EventEmitter;\n\n});\n\nace.define(\"ace/lib/app_config\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"no use strict\";\n\nvar oop = acequire(\"./oop\");\nvar EventEmitter = acequire(\"./event_emitter\").EventEmitter;\n\nvar optionsProvider = {\n    setOptions: function(optList) {\n        Object.keys(optList).forEach(function(key) {\n            this.setOption(key, optList[key]);\n        }, this);\n    },\n    getOptions: function(optionNames) {\n        var result = {};\n        if (!optionNames) {\n            optionNames = Object.keys(this.$options);\n        } else if (!Array.isArray(optionNames)) {\n            result = optionNames;\n            optionNames = Object.keys(result);\n        }\n        optionNames.forEach(function(key) {\n            result[key] = this.getOption(key);\n        }, this);\n        return result;\n    },\n    setOption: function(name, value) {\n        if (this[\"$\" + name] === value)\n            return;\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);\n\n        if (!opt.handlesSet)\n            this[\"$\" + name] = value;\n        if (opt && opt.set)\n            opt.set.call(this, value);\n    },\n    getOption: function(name) {\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);\n        return opt && opt.get ? opt.get.call(this) : this[\"$\" + name];\n    }\n};\n\nfunction warn(message) {\n    if (typeof console != \"undefined\" && console.warn)\n        console.warn.apply(console, arguments);\n}\n\nfunction reportError(msg, data) {\n    var e = new Error(msg);\n    e.data = data;\n    if (typeof console == \"object\" && console.error)\n        console.error(e);\n    setTimeout(function() { throw e; });\n}\n\nvar AppConfig = function() {\n    this.$defaultOptions = {};\n};\n\n(function() {\n    oop.implement(this, EventEmitter);\n    this.defineOptions = function(obj, path, options) {\n        if (!obj.$options)\n            this.$defaultOptions[path] = obj.$options = {};\n\n        Object.keys(options).forEach(function(key) {\n            var opt = options[key];\n            if (typeof opt == \"string\")\n                opt = {forwardTo: opt};\n\n            opt.name || (opt.name = key);\n            obj.$options[opt.name] = opt;\n            if (\"initialValue\" in opt)\n                obj[\"$\" + opt.name] = opt.initialValue;\n        });\n        oop.implement(obj, optionsProvider);\n\n        return this;\n    };\n\n    this.resetOptions = function(obj) {\n        Object.keys(obj.$options).forEach(function(key) {\n            var opt = obj.$options[key];\n            if (\"value\" in opt)\n                obj.setOption(key, opt.value);\n        });\n    };\n\n    this.setDefaultValue = function(path, name, value) {\n        var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});\n        if (opts[name]) {\n            if (opts.forwardTo)\n                this.setDefaultValue(opts.forwardTo, name, value);\n            else\n                opts[name].value = value;\n        }\n    };\n\n    this.setDefaultValues = function(path, optionHash) {\n        Object.keys(optionHash).forEach(function(key) {\n            this.setDefaultValue(path, key, optionHash[key]);\n        }, this);\n    };\n    \n    this.warn = warn;\n    this.reportError = reportError;\n    \n}).call(AppConfig.prototype);\n\nexports.AppConfig = AppConfig;\n\n});\n\nace.define(\"ace/config\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/app_config\"], function(acequire, exports, module) {\n\"no use strict\";\n\nvar lang = acequire(\"./lib/lang\");\nvar oop = acequire(\"./lib/oop\");\nvar net = acequire(\"./lib/net\");\nvar AppConfig = acequire(\"./lib/app_config\").AppConfig;\n\nmodule.exports = exports = new AppConfig();\n\nvar global = (function() {\n    return this || typeof window != \"undefined\" && window;\n})();\n\nvar options = {\n    packaged: false,\n    workerPath: null,\n    modePath: null,\n    themePath: null,\n    basePath: \"\",\n    suffix: \".js\",\n    $moduleUrls: {}\n};\n\nexports.get = function(key) {\n    if (!options.hasOwnProperty(key))\n        throw new Error(\"Unknown config key: \" + key);\n\n    return options[key];\n};\n\nexports.set = function(key, value) {\n    if (!options.hasOwnProperty(key))\n        throw new Error(\"Unknown config key: \" + key);\n\n    options[key] = value;\n};\n\nexports.all = function() {\n    return lang.copyObject(options);\n};\nexports.moduleUrl = function(name, component) {\n    if (options.$moduleUrls[name])\n        return options.$moduleUrls[name];\n\n    var parts = name.split(\"/\");\n    component = component || parts[parts.length - 2] || \"\";\n    var sep = component == \"snippets\" ? \"/\" : \"-\";\n    var base = parts[parts.length - 1];\n    if (component == \"worker\" && sep == \"-\") {\n        var re = new RegExp(\"^\" + component + \"[\\\\-_]|[\\\\-_]\" + component + \"$\", \"g\");\n        base = base.replace(re, \"\");\n    }\n\n    if ((!base || base == component) && parts.length > 1)\n        base = parts[parts.length - 2];\n    var path = options[component + \"Path\"];\n    if (path == null) {\n        path = options.basePath;\n    } else if (sep == \"/\") {\n        component = sep = \"\";\n    }\n    if (path && path.slice(-1) != \"/\")\n        path += \"/\";\n    return path + component + sep + base + this.get(\"suffix\");\n};\n\nexports.setModuleUrl = function(name, subst) {\n    return options.$moduleUrls[name] = subst;\n};\n\nexports.$loading = {};\nexports.loadModule = function(moduleName, onLoad) {\n    var module, moduleType;\n    if (Array.isArray(moduleName)) {\n        moduleType = moduleName[0];\n        moduleName = moduleName[1];\n    }\n\n    try {\n        module = acequire(moduleName);\n    } catch (e) {}\n    if (module && !exports.$loading[moduleName])\n        return onLoad && onLoad(module);\n\n    if (!exports.$loading[moduleName])\n        exports.$loading[moduleName] = [];\n\n    exports.$loading[moduleName].push(onLoad);\n\n    if (exports.$loading[moduleName].length > 1)\n        return;\n\n    var afterLoad = function() {\n        acequire([moduleName], function(module) {\n            exports._emit(\"load.module\", {name: moduleName, module: module});\n            var listeners = exports.$loading[moduleName];\n            exports.$loading[moduleName] = null;\n            listeners.forEach(function(onLoad) {\n                onLoad && onLoad(module);\n            });\n        });\n    };\n\n    if (!exports.get(\"packaged\"))\n        return afterLoad();\n    net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);\n};\ninit(true);function init(packaged) {\n\n    if (!global || !global.document)\n        return;\n    \n    options.packaged = packaged || acequire.packaged || module.packaged || (global.define && define.packaged);\n\n    var scriptOptions = {};\n    var scriptUrl = \"\";\n    var currentScript = (document.currentScript || document._currentScript ); // native or polyfill\n    var currentDocument = currentScript && currentScript.ownerDocument || document;\n    \n    var scripts = currentDocument.getElementsByTagName(\"script\");\n    for (var i=0; i<scripts.length; i++) {\n        var script = scripts[i];\n\n        var src = script.src || script.getAttribute(\"src\");\n        if (!src)\n            continue;\n\n        var attributes = script.attributes;\n        for (var j=0, l=attributes.length; j < l; j++) {\n            var attr = attributes[j];\n            if (attr.name.indexOf(\"data-ace-\") === 0) {\n                scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, \"\"))] = attr.value;\n            }\n        }\n\n        var m = src.match(/^(.*)\\/ace(\\-\\w+)?\\.js(\\?|$)/);\n        if (m)\n            scriptUrl = m[1];\n    }\n\n    if (scriptUrl) {\n        scriptOptions.base = scriptOptions.base || scriptUrl;\n        scriptOptions.packaged = true;\n    }\n\n    scriptOptions.basePath = scriptOptions.base;\n    scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;\n    scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;\n    scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;\n    delete scriptOptions.base;\n\n    for (var key in scriptOptions)\n        if (typeof scriptOptions[key] !== \"undefined\")\n            exports.set(key, scriptOptions[key]);\n}\n\nexports.init = init;\n\nfunction deHyphenate(str) {\n    return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });\n}\n\n});\n\nace.define(\"ace/mouse/mouse_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/mouse/default_handlers\",\"ace/mouse/default_gutter_handler\",\"ace/mouse/mouse_event\",\"ace/mouse/dragdrop_handler\",\"ace/config\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar event = acequire(\"../lib/event\");\nvar useragent = acequire(\"../lib/useragent\");\nvar DefaultHandlers = acequire(\"./default_handlers\").DefaultHandlers;\nvar DefaultGutterHandler = acequire(\"./default_gutter_handler\").GutterHandler;\nvar MouseEvent = acequire(\"./mouse_event\").MouseEvent;\nvar DragdropHandler = acequire(\"./dragdrop_handler\").DragdropHandler;\nvar config = acequire(\"../config\");\n\nvar MouseHandler = function(editor) {\n    var _self = this;\n    this.editor = editor;\n\n    new DefaultHandlers(this);\n    new DefaultGutterHandler(this);\n    new DragdropHandler(this);\n\n    var focusEditor = function(e) {\n        var windowBlurred = !document.hasFocus || !document.hasFocus()\n            || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());\n        if (windowBlurred)\n            window.focus();\n        editor.focus();\n    };\n\n    var mouseTarget = editor.renderer.getMouseEventTarget();\n    event.addListener(mouseTarget, \"click\", this.onMouseEvent.bind(this, \"click\"));\n    event.addListener(mouseTarget, \"mousemove\", this.onMouseMove.bind(this, \"mousemove\"));\n    event.addMultiMouseDownListener([\n        mouseTarget,\n        editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,\n        editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,\n        editor.textInput && editor.textInput.getElement()\n    ].filter(Boolean), [400, 300, 250], this, \"onMouseEvent\");\n    event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, \"mousewheel\"));\n    event.addTouchMoveListener(editor.container, this.onTouchMove.bind(this, \"touchmove\"));\n\n    var gutterEl = editor.renderer.$gutter;\n    event.addListener(gutterEl, \"mousedown\", this.onMouseEvent.bind(this, \"guttermousedown\"));\n    event.addListener(gutterEl, \"click\", this.onMouseEvent.bind(this, \"gutterclick\"));\n    event.addListener(gutterEl, \"dblclick\", this.onMouseEvent.bind(this, \"gutterdblclick\"));\n    event.addListener(gutterEl, \"mousemove\", this.onMouseEvent.bind(this, \"guttermousemove\"));\n\n    event.addListener(mouseTarget, \"mousedown\", focusEditor);\n    event.addListener(gutterEl, \"mousedown\", focusEditor);\n    if (useragent.isIE && editor.renderer.scrollBarV) {\n        event.addListener(editor.renderer.scrollBarV.element, \"mousedown\", focusEditor);\n        event.addListener(editor.renderer.scrollBarH.element, \"mousedown\", focusEditor);\n    }\n\n    editor.on(\"mousemove\", function(e){\n        if (_self.state || _self.$dragDelay || !_self.$dragEnabled)\n            return;\n\n        var character = editor.renderer.screenToTextCoordinates(e.x, e.y);\n        var range = editor.session.selection.getRange();\n        var renderer = editor.renderer;\n\n        if (!range.isEmpty() && range.insideStart(character.row, character.column)) {\n            renderer.setCursorStyle(\"default\");\n        } else {\n            renderer.setCursorStyle(\"\");\n        }\n    });\n};\n\n(function() {\n    this.onMouseEvent = function(name, e) {\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n\n    this.onMouseMove = function(name, e) {\n        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;\n        if (!listeners || !listeners.length)\n            return;\n\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n\n    this.onMouseWheel = function(name, e) {\n        var mouseEvent = new MouseEvent(e, this.editor);\n        mouseEvent.speed = this.$scrollSpeed * 2;\n        mouseEvent.wheelX = e.wheelX;\n        mouseEvent.wheelY = e.wheelY;\n\n        this.editor._emit(name, mouseEvent);\n    };\n    \n    this.onTouchMove = function (name, e) {\n        var mouseEvent = new MouseEvent(e, this.editor);\n        mouseEvent.speed = 1;//this.$scrollSpeed * 2;\n        mouseEvent.wheelX = e.wheelX;\n        mouseEvent.wheelY = e.wheelY;\n        this.editor._emit(name, mouseEvent);\n    };\n\n    this.setState = function(state) {\n        this.state = state;\n    };\n\n    this.captureMouse = function(ev, mouseMoveHandler) {\n        this.x = ev.x;\n        this.y = ev.y;\n\n        this.isMousePressed = true;\n        var renderer = this.editor.renderer;\n        if (renderer.$keepTextAreaAtCursor)\n            renderer.$keepTextAreaAtCursor = null;\n\n        var self = this;\n        var onMouseMove = function(e) {\n            if (!e) return;\n            if (useragent.isWebKit && !e.which && self.releaseMouse)\n                return self.releaseMouse();\n\n            self.x = e.clientX;\n            self.y = e.clientY;\n            mouseMoveHandler && mouseMoveHandler(e);\n            self.mouseEvent = new MouseEvent(e, self.editor);\n            self.$mouseMoved = true;\n        };\n\n        var onCaptureEnd = function(e) {\n            clearInterval(timerId);\n            onCaptureInterval();\n            self[self.state + \"End\"] && self[self.state + \"End\"](e);\n            self.state = \"\";\n            if (renderer.$keepTextAreaAtCursor == null) {\n                renderer.$keepTextAreaAtCursor = true;\n                renderer.$moveTextAreaToCursor();\n            }\n            self.isMousePressed = false;\n            self.$onCaptureMouseMove = self.releaseMouse = null;\n            e && self.onMouseEvent(\"mouseup\", e);\n        };\n\n        var onCaptureInterval = function() {\n            self[self.state] && self[self.state]();\n            self.$mouseMoved = false;\n        };\n\n        if (useragent.isOldIE && ev.domEvent.type == \"dblclick\") {\n            return setTimeout(function() {onCaptureEnd(ev);});\n        }\n\n        self.$onCaptureMouseMove = onMouseMove;\n        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);\n        var timerId = setInterval(onCaptureInterval, 20);\n    };\n    this.releaseMouse = null;\n    this.cancelContextMenu = function() {\n        var stop = function(e) {\n            if (e && e.domEvent && e.domEvent.type != \"contextmenu\")\n                return;\n            this.editor.off(\"nativecontextmenu\", stop);\n            if (e && e.domEvent)\n                event.stopEvent(e.domEvent);\n        }.bind(this);\n        setTimeout(stop, 10);\n        this.editor.on(\"nativecontextmenu\", stop);\n    };\n}).call(MouseHandler.prototype);\n\nconfig.defineOptions(MouseHandler.prototype, \"mouseHandler\", {\n    scrollSpeed: {initialValue: 2},\n    dragDelay: {initialValue: (useragent.isMac ? 150 : 0)},\n    dragEnabled: {initialValue: true},\n    focusTimout: {initialValue: 0},\n    tooltipFollowsMouse: {initialValue: true}\n});\n\n\nexports.MouseHandler = MouseHandler;\n});\n\nace.define(\"ace/mouse/fold_handler\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nfunction FoldHandler(editor) {\n\n    editor.on(\"click\", function(e) {\n        var position = e.getDocumentPosition();\n        var session = editor.session;\n        var fold = session.getFoldAt(position.row, position.column, 1);\n        if (fold) {\n            if (e.getAccelKey())\n                session.removeFold(fold);\n            else\n                session.expandFold(fold);\n\n            e.stop();\n        }\n    });\n\n    editor.on(\"gutterclick\", function(e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            if (session.foldWidgets && session.foldWidgets[row])\n                editor.session.onFoldWidgetClick(row, e);\n            if (!editor.isFocused())\n                editor.focus();\n            e.stop();\n        }\n    });\n\n    editor.on(\"gutterdblclick\", function(e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            var data = session.getParentFoldRangeData(row, true);\n            var range = data.range || data.firstRange;\n\n            if (range) {\n                row = range.start.row;\n                var fold = session.getFoldAt(row, session.getLine(row).length, 1);\n\n                if (fold) {\n                    session.removeFold(fold);\n                } else {\n                    session.addFold(\"...\", range);\n                    editor.renderer.scrollCursorIntoView({row: range.start.row, column: 0});\n                }\n            }\n            e.stop();\n        }\n    });\n}\n\nexports.FoldHandler = FoldHandler;\n\n});\n\nace.define(\"ace/keyboard/keybinding\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/event\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar keyUtil  = acequire(\"../lib/keys\");\nvar event = acequire(\"../lib/event\");\n\nvar KeyBinding = function(editor) {\n    this.$editor = editor;\n    this.$data = {editor: editor};\n    this.$handlers = [];\n    this.setDefaultHandler(editor.commands);\n};\n\n(function() {\n    this.setDefaultHandler = function(kb) {\n        this.removeKeyboardHandler(this.$defaultHandler);\n        this.$defaultHandler = kb;\n        this.addKeyboardHandler(kb, 0);\n    };\n\n    this.setKeyboardHandler = function(kb) {\n        var h = this.$handlers;\n        if (h[h.length - 1] == kb)\n            return;\n\n        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)\n            this.removeKeyboardHandler(h[h.length - 1]);\n\n        this.addKeyboardHandler(kb, 1);\n    };\n\n    this.addKeyboardHandler = function(kb, pos) {\n        if (!kb)\n            return;\n        if (typeof kb == \"function\" && !kb.handleKeyboard)\n            kb.handleKeyboard = kb;\n        var i = this.$handlers.indexOf(kb);\n        if (i != -1)\n            this.$handlers.splice(i, 1);\n\n        if (pos == undefined)\n            this.$handlers.push(kb);\n        else\n            this.$handlers.splice(pos, 0, kb);\n\n        if (i == -1 && kb.attach)\n            kb.attach(this.$editor);\n    };\n\n    this.removeKeyboardHandler = function(kb) {\n        var i = this.$handlers.indexOf(kb);\n        if (i == -1)\n            return false;\n        this.$handlers.splice(i, 1);\n        kb.detach && kb.detach(this.$editor);\n        return true;\n    };\n\n    this.getKeyboardHandler = function() {\n        return this.$handlers[this.$handlers.length - 1];\n    };\n    \n    this.getStatusText = function() {\n        var data = this.$data;\n        var editor = data.editor;\n        return this.$handlers.map(function(h) {\n            return h.getStatusText && h.getStatusText(editor, data) || \"\";\n        }).filter(Boolean).join(\" \");\n    };\n\n    this.$callKeyboardHandlers = function(hashId, keyString, keyCode, e) {\n        var toExecute;\n        var success = false;\n        var commands = this.$editor.commands;\n\n        for (var i = this.$handlers.length; i--;) {\n            toExecute = this.$handlers[i].handleKeyboard(\n                this.$data, hashId, keyString, keyCode, e\n            );\n            if (!toExecute || !toExecute.command)\n                continue;\n            if (toExecute.command == \"null\") {\n                success = true;\n            } else {\n                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);\n            }\n            if (success && e && hashId != -1 && \n                toExecute.passEvent != true && toExecute.command.passEvent != true\n            ) {\n                event.stopEvent(e);\n            }\n            if (success)\n                break;\n        }\n        \n        if (!success && hashId == -1) {\n            toExecute = {command: \"insertstring\"};\n            success = commands.exec(\"insertstring\", this.$editor, keyString);\n        }\n        \n        if (success && this.$editor._signal)\n            this.$editor._signal(\"keyboardActivity\", toExecute);\n        \n        return success;\n    };\n\n    this.onCommandKey = function(e, hashId, keyCode) {\n        var keyString = keyUtil.keyCodeToString(keyCode);\n        this.$callKeyboardHandlers(hashId, keyString, keyCode, e);\n    };\n\n    this.onTextInput = function(text) {\n        this.$callKeyboardHandlers(-1, text);\n    };\n\n}).call(KeyBinding.prototype);\n\nexports.KeyBinding = KeyBinding;\n});\n\nace.define(\"ace/lib/bidiutil\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar ArabicAlefBetIntervalsBegine = ['\\u0621', '\\u0641'];\nvar ArabicAlefBetIntervalsEnd = ['\\u063A', '\\u064a'];\nvar dir = 0, hiLevel = 0;\nvar lastArabic = false, hasUBAT_AL = false,  hasUBAT_B = false,  hasUBAT_S = false, hasBlockSep = false, hasSegSep = false;\n\nvar impTab_LTR = [\t[\t0,\t\t3,\t\t0,\t\t1,\t\t0,\t\t0,\t\t0\t],\t[\t0,\t\t3,\t\t0,\t\t1,\t\t2,\t\t2,\t\t0\t],\t[\t0,\t\t3,\t\t0,\t\t0x11,\t\t2,\t\t0,\t\t1\t],\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t1,\t\t0\t],\t[\t0,\t\t3,\t\t0x15,\t\t0x15,\t\t4,\t\t0,\t\t1\t],\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t2,\t\t0\t]\n];\n\nvar impTab_RTL = [\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t1,\t\t0\t],\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t2,\t\t0\t],\t[\t2,\t\t0,\t\t2,\t\t1,\t\t3,\t\t2,\t\t0\t],\t[\t2,\t\t0,\t\t2,\t\t0x21,\t\t3,\t\t1,\t\t1\t]\n];\n\nvar LTR = 0, RTL = 1;\n\nvar L = 0;\nvar R = 1;\nvar EN = 2;\nvar AN = 3;\nvar ON = 4;\nvar B = 5;\nvar S = 6;\nvar AL = 7;\nvar WS = 8;\nvar CS = 9;\nvar ES = 10;\nvar ET = 11;\nvar NSM = 12;\nvar LRE = 13;\nvar RLE = 14;\nvar PDF = 15;\nvar LRO = 16;\nvar RLO = 17;\nvar BN = 18;\n\nvar UnicodeTBL00 = [\nBN,BN,BN,BN,BN,BN,BN,BN,BN,S,B,S,WS,B,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,B,B,B,S,\nWS,ON,ON,ET,ET,ET,ON,ON,ON,ON,ON,ES,CS,ES,CS,CS,\nEN,EN,EN,EN,EN,EN,EN,EN,EN,EN,CS,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,BN,\nBN,BN,BN,BN,BN,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nCS,ON,ET,ET,ET,ET,ON,ON,ON,ON,L,ON,ON,BN,ON,ON,\nET,ET,EN,EN,ON,L,ON,ON,ON,EN,L,ON,ON,ON,ON,ON\n];\n\nvar UnicodeTBL20 = [\nWS,WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,BN,BN,BN,L,R\t,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,WS,B,LRE,RLE,PDF,LRO,RLO,CS,\nET,ET,ET,ET,ET,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,CS,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS\n];\n\nfunction _computeLevels(chars, levels, len, charTypes) {\n\tvar impTab = dir ? impTab_RTL : impTab_LTR\n\t\t, prevState = null, newClass = null, newLevel = null, newState = 0\n\t\t, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];\n\n\tif (!charTypes) {\n\t\tfor (i = 0, charTypes = []; i < len; i++) {\n\t\t\tcharTypes[i] = _getCharacterType(chars[i]);\n\t\t}\n\t}\n\thiLevel = dir;\n\tlastArabic = false;\n\thasUBAT_AL = false;\n\thasUBAT_B = false;\n\thasUBAT_S = false;\n\tfor (ix = 0; ix < len; ix++){\n\t\tprevState = newState;\n\t\tclasses[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);\n\t\tnewState = impTab[prevState][newClass];\n\t\taction = newState & 0xF0;\n\t\tnewState &= 0x0F;\n\t\tlevels[ix] = newLevel = impTab[newState][5];\n\t\tif (action > 0){\n\t\t\tif (action == 0x10){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = 1;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t} else {\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tcond = impTab[newState][6];\n\t\tif (cond){\n\t\t\tif(condPos == -1){\n\t\t\t\tcondPos = ix;\n\t\t\t}\n\t\t}else{\n\t\t\tif (condPos > -1){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = newLevel;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tif (charTypes[ix] == B){\n\t\t\tlevels[ix] = 0;\n\t\t}\n\t\thiLevel |= newLevel;\n\t}\n\tif (hasUBAT_S){\n\t\tfor(i = 0; i < len; i++){\n\t\t\tif(charTypes[i] == S){\n\t\t\t\tlevels[i] = dir;\n\t\t\t\tfor(var j = i - 1; j >= 0; j--){\n\t\t\t\t\tif(charTypes[j] == WS){\n\t\t\t\t\t\tlevels[j] = dir;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction _invertLevel(lev, levels, _array) {\n\tif (hiLevel < lev){\n\t\treturn;\n\t}\n\tif (lev == 1 && dir == RTL && !hasUBAT_B){\n\t\t_array.reverse();\n\t\treturn;\n\t}\n\tvar len = _array.length, start = 0, end, lo, hi, tmp;\n\twhile(start < len){\n\t\tif (levels[start] >= lev){\n\t\t\tend = start + 1;\n\t\twhile(end < len && levels[end] >= lev){\n\t\t\tend++;\n\t\t}\n\t\tfor(lo = start, hi = end - 1 ; lo < hi; lo++, hi--){\n\t\t\ttmp = _array[lo];\n\t\t\t_array[lo] = _array[hi];\n\t\t\t_array[hi] = tmp;\n\t\t}\n\t\tstart = end;\n\t}\n\tstart++;\n\t}\n}\n\nfunction _getCharClass(chars, types, classes, ix) {\n\tvar cType = types[ix], wType, nType, len, i;\n\tswitch(cType){\n\t\tcase L:\n\t\tcase R:\n\t\t\tlastArabic = false;\n\t\tcase ON:\n\t\tcase AN:\n\t\t\treturn cType;\n\t\tcase EN:\n\t\t\treturn lastArabic ? AN : EN;\n\t\tcase AL:\n\t\t\tlastArabic = true;\n\t\t\thasUBAT_AL = true;\n\t\t\treturn R;\n\t\tcase WS:\n\t\t\treturn ON;\n\t\tcase CS:\n\t\t\tif (ix < 1 || (ix + 1) >= types.length ||\n\t\t\t\t((wType = classes[ix - 1]) != EN && wType != AN) ||\n\t\t\t\t((nType = types[ix + 1]) != EN && nType != AN)){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\tif (lastArabic){nType = AN;}\n\t\t\treturn nType == wType ? nType : ON;\n\t\tcase ES:\n\t\t\twType = ix > 0 ? classes[ix - 1] : B;\n\t\t\tif (wType == EN && (ix + 1) < types.length && types[ix + 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase ET:\n\t\t\tif (ix > 0 && classes[ix - 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\tif (lastArabic){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\ti = ix + 1;\n\t\t\tlen = types.length;\n\t\t\twhile (i < len && types[i] == ET){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len && types[i] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase NSM:\n\t\t\tlen = types.length;\n\t\t\ti = ix + 1;\n\t\t\twhile (i < len && types[i] == NSM){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len){\n\t\t\t\tvar c = chars[ix], rtlCandidate = (c >= 0x0591 && c <= 0x08FF) || c == 0xFB1E;\n\n\t\t\t\twType = types[i];\n\t\t\t\tif (rtlCandidate && (wType == R || wType == AL)){\n\t\t\t\t\treturn R;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ix < 1 || (wType = types[ix - 1]) == B){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\treturn classes[ix - 1];\n\t\tcase B:\n\t\t\tlastArabic = false;\n\t\t\thasUBAT_B = true;\n\t\t\treturn dir;\n\t\tcase S:\n\t\t\thasUBAT_S = true;\n\t\t\treturn ON;\n\t\tcase LRE:\n\t\tcase RLE:\n\t\tcase LRO:\n\t\tcase RLO:\n\t\tcase PDF:\n\t\t\tlastArabic = false;\n\t\tcase BN:\n\t\t\treturn ON;\n\t}\n}\n\nfunction _getCharacterType( ch ) {\n\tvar uc = ch.charCodeAt(0), hi = uc >> 8;\n\n\tif (hi == 0) {\n\t\treturn ((uc > 0x00BF) ? L : UnicodeTBL00[uc]);\n\t} else if (hi == 5) {\n\t\treturn (/[\\u0591-\\u05f4]/.test(ch) ? R : L);\n\t} else if (hi == 6) {\n\t\tif (/[\\u0610-\\u061a\\u064b-\\u065f\\u06d6-\\u06e4\\u06e7-\\u06ed]/.test(ch))\n\t\t\treturn NSM;\n\t\telse if (/[\\u0660-\\u0669\\u066b-\\u066c]/.test(ch))\n\t\t\treturn AN;\n\t\telse if (uc == 0x066A)\n\t\t\treturn ET;\n\t\telse if (/[\\u06f0-\\u06f9]/.test(ch))\n\t\t\treturn EN;\n\t\telse\n\t\t\treturn AL;\n\t} else if (hi == 0x20 && uc <= 0x205F) {\n\t\treturn UnicodeTBL20[uc & 0xFF];\n\t} else if (hi == 0xFE) {\n\t\treturn (uc >= 0xFE70 ? AL : ON);\n\t}\n\treturn ON;\n}\n\nfunction _isArabicDiacritics( ch ) {\n\treturn (ch >= '\\u064b' && ch <= '\\u0655');\n}\nexports.L = L;\nexports.R = R;\nexports.EN = EN;\nexports.ON_R = 3;\nexports.AN = 4;\nexports.R_H = 5;\nexports.B = 6;\n\nexports.DOT = \"\\xB7\";\nexports.doBidiReorder = function(text, textCharTypes, isRtl) {\n\tif (text.length < 2)\n\t\treturn {};\n\n\tvar chars = text.split(\"\"), logicalFromVisual = new Array(chars.length),\n\t\tbidiLevels = new Array(chars.length), levels = [];\n\n\tdir = isRtl ? RTL : LTR;\n\n\t_computeLevels(chars, levels, chars.length, textCharTypes);\n\n\tfor (var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++);\n\n\t_invertLevel(2, levels, logicalFromVisual);\n\t_invertLevel(1, levels, logicalFromVisual);\n\n\tfor (var i = 0; i < logicalFromVisual.length - 1; i++) { //fix levels to reflect character width\n\t\tif (textCharTypes[i] === AN) {\n\t\t\tlevels[i] = exports.AN;\n\t\t} else if (levels[i] === R && ((textCharTypes[i] > AL && textCharTypes[i] < LRE)\n\t\t\t|| textCharTypes[i] === ON || textCharTypes[i] === BN)) {\n\t\t\tlevels[i] = exports.ON_R;\n\t\t} else if ((i > 0 && chars[i - 1] === '\\u0644') && /\\u0622|\\u0623|\\u0625|\\u0627/.test(chars[i])) {\n\t\t\tlevels[i - 1] = levels[i] = exports.R_H;\n\t\t\ti++;\n\t\t}\n\t}\n\tif (chars[chars.length - 1] === exports.DOT)\n\t\tlevels[chars.length - 1] = exports.B;\n\n\tfor (var i = 0; i < logicalFromVisual.length; i++) {\n\t\tbidiLevels[i] = levels[logicalFromVisual[i]];\n\t}\n\n\treturn {'logicalFromVisual': logicalFromVisual, 'bidiLevels': bidiLevels};\n};\nexports.hasBidiCharacters = function(text, textCharTypes){\n\tvar ret = false;\n\tfor (var i = 0; i < text.length; i++){\n\t\ttextCharTypes[i] = _getCharacterType(text.charAt(i));\n\t\tif (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL))\n\t\t\tret = true;\n\t}\n\treturn ret;\n};\nexports.getVisualFromLogicalIdx = function(logIdx, rowMap) {\n\tfor (var i = 0; i < rowMap.logicalFromVisual.length; i++) {\n\t\tif (rowMap.logicalFromVisual[i] == logIdx)\n\t\t\treturn i;\n\t}\n\treturn 0;\n};\n\n});\n\nace.define(\"ace/bidihandler\",[\"require\",\"exports\",\"module\",\"ace/lib/bidiutil\",\"ace/lib/lang\",\"ace/lib/useragent\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar bidiUtil = acequire(\"./lib/bidiutil\");\nvar lang = acequire(\"./lib/lang\");\nvar useragent = acequire(\"./lib/useragent\");\nvar bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\nvar BidiHandler = function(session) {\n    this.session = session;\n    this.bidiMap = {};\n    this.currentRow = null;\n    this.bidiUtil = bidiUtil;\n    this.charWidths = [];\n    this.EOL = \"\\xAC\";\n    this.showInvisibles = true;\n    this.isRtlDir = false;\n    this.line = \"\";\n    this.wrapIndent = 0;\n    this.isLastRow = false;\n    this.EOF = \"\\xB6\";\n    this.seenBidi = false;\n};\n\n(function() {\n    this.isBidiRow = function(screenRow, docRow, splitIndex) {\n        if (!this.seenBidi)\n            return false;\n        if (screenRow !== this.currentRow) {\n            this.currentRow = screenRow;\n            this.updateRowLine(docRow, splitIndex);\n            this.updateBidiMap();\n        }\n        return this.bidiMap.bidiLevels;\n    };\n\n    this.onChange = function(delta) {\n        if (!this.seenBidi) {\n            if (delta.action == \"insert\" && bidiRE.test(delta.lines.join(\"\\n\"))) {\n                this.seenBidi = true;\n                this.currentRow = null;\n            }\n        }\n        else {\n            this.currentRow = null;\n        }\n    };\n\n    this.getDocumentRow = function() {\n        var docRow = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            if (index >= 0)\n                docRow = this.session.$docRowCache[index];\n        }\n\n        return docRow;\n    };\n\n    this.getSplitIndex = function() {\n        var splitIndex = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            while (this.currentRow - splitIndex > 0) {\n                currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);\n                if (currentIndex !== prevIndex)\n                    break;\n\n                prevIndex = currentIndex;\n                splitIndex++;\n            }\n        }\n\n        return splitIndex;\n    };\n\n    this.updateRowLine = function(docRow, splitIndex) {\n        if (docRow === undefined)\n            docRow = this.getDocumentRow();\n\n        this.wrapIndent = 0;\n        this.isLastRow = (docRow === this.session.getLength() - 1);\n        this.line = this.session.getLine(docRow);\n        if (this.session.$useWrapMode) {\n            var splits = this.session.$wrapData[docRow];\n            if (splits) {\n                if (splitIndex === undefined)\n                    splitIndex = this.getSplitIndex();\n\n                if(splitIndex > 0 && splits.length) {\n                    this.wrapIndent = splits.indent;\n                    this.line = (splitIndex < splits.length) ?\n                        this.line.substring(splits[splitIndex - 1], splits[splits.length - 1]) :\n                            this.line.substring(splits[splits.length - 1]);\n                } else {\n                    this.line = this.line.substring(0, splits[splitIndex]);\n                }\n            }\n        }\n        var session = this.session, shift = 0, size;\n        this.line = this.line.replace(/\\t|[\\u1100-\\u2029, \\u202F-\\uFFE6]/g, function(ch, i){\n            if (ch === '\\t' || session.isFullWidth(ch.charCodeAt(0))) {\n                size = (ch === '\\t') ? session.getScreenTabSize(i + shift) : 2;\n                shift += size - 1;\n                return lang.stringRepeat(bidiUtil.DOT, size);\n            }\n            return ch;\n        });\n    };\n\n    this.updateBidiMap = function() {\n        var textCharTypes = [], endOfLine = this.isLastRow ? this.EOF : this.EOL;\n        var line = this.line + (this.showInvisibles ? endOfLine : bidiUtil.DOT);\n        if (bidiUtil.hasBidiCharacters(line, textCharTypes)) {\n            this.bidiMap = bidiUtil.doBidiReorder(line, textCharTypes, this.isRtlDir);\n        } else {\n            this.bidiMap = {};\n        }\n    };\n    this.markAsDirty = function() {\n        this.currentRow = null;\n    };\n    this.updateCharacterWidths = function(fontMetrics) {\n        if (!this.seenBidi)\n            return;\n        if (this.characterWidth === fontMetrics.$characterSize.width)\n            return;\n\n        var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;\n        var bidiCharWidth = fontMetrics.$measureCharWidth(\"\\u05d4\");\n\n        this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;\n        this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;\n        this.charWidths[bidiUtil.R_H] = useragent.isChrome ? bidiCharWidth : bidiCharWidth * 0.45;\n        this.charWidths[bidiUtil.B] = 0;\n\n        this.currentRow = null;\n    };\n\n    this.getShowInvisibles = function() {\n        return this.showInvisibles;\n    };\n\n    this.setShowInvisibles = function(showInvisibles) {\n        this.showInvisibles = showInvisibles;\n        this.currentRow = null;\n    };\n\n    this.setEolChar = function(eolChar) {\n        this.EOL = eolChar;\n    };\n\n    this.setTextDir = function(isRtlDir) {\n        this.isRtlDir = isRtlDir;\n    };\n    this.getPosLeft = function(col) {\n        col -= this.wrapIndent;\n        var visualIdx = bidiUtil.getVisualFromLogicalIdx(col > 0 ? col - 1 : 0, this.bidiMap),\n            levels = this.bidiMap.bidiLevels, left = 0;\n\n        if (col === 0 && levels[visualIdx] % 2 !== 0)\n            visualIdx++;\n\n        for (var i = 0; i < visualIdx; i++) {\n            left += this.charWidths[levels[i]];\n        }\n\n        if (col !== 0 && levels[visualIdx] % 2 === 0)\n            left += this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent)\n            left += this.wrapIndent * this.charWidths[bidiUtil.L];\n\n        return left;\n    };\n    this.getSelections = function(startCol, endCol) {\n        var map = this.bidiMap, levels = map.bidiLevels, level, offset = this.wrapIndent * this.charWidths[bidiUtil.L], selections = [],\n            selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent,\n                isSelected = false, isSelectedPrev = false, selectionStart = 0;\n\n        for (var logIdx, visIdx = 0; visIdx < levels.length; visIdx++) {\n            logIdx = map.logicalFromVisual[visIdx];\n            level = levels[visIdx];\n            isSelected = (logIdx >= selColMin) && (logIdx < selColMax);\n            if (isSelected && !isSelectedPrev) {\n                selectionStart = offset;\n            } else if (!isSelected && isSelectedPrev) {\n                selections.push({left: selectionStart, width: offset - selectionStart});\n            }\n            offset += this.charWidths[level];\n            isSelectedPrev = isSelected;\n        }\n\n        if (isSelected && (visIdx === levels.length)) {\n            selections.push({left: selectionStart, width: offset - selectionStart});\n        }\n\n        return selections;\n    };\n    this.offsetToCol = function(posX) {\n        var logicalIdx = 0, posX = Math.max(posX, 0),\n            offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels,\n                charWidth = this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent) {\n            posX -= this.wrapIndent * this.charWidths[bidiUtil.L];\n        }\n\n        while(posX > offset + charWidth/2) {\n            offset += charWidth;\n            if(visualIdx === levels.length - 1) {\n                charWidth = 0;\n                break;\n            }\n            charWidth = this.charWidths[levels[++visualIdx]];\n        }\n\n        if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && (levels[visualIdx] % 2 === 0)){\n            if(posX < offset)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n\n        } else if (visualIdx > 0 && (levels[visualIdx - 1] % 2 === 0) && (levels[visualIdx] % 2 !== 0)){\n            logicalIdx = 1 + ((posX > offset) ? this.bidiMap.logicalFromVisual[visualIdx]\n                    : this.bidiMap.logicalFromVisual[visualIdx - 1]);\n\n        } else if ((this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && (levels[visualIdx - 1] % 2 === 0))\n                || (!this.isRtlDir && visualIdx === 0 && (levels[visualIdx] % 2 !== 0))){\n            logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];\n        } else {\n            if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && charWidth !== 0)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n\n        return (logicalIdx + this.wrapIndent);\n    };\n\n}).call(BidiHandler.prototype);\n\nexports.BidiHandler = BidiHandler;\n});\n\nace.define(\"ace/range\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\nvar comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\nvar Range = function(startRow, startColumn, endRow, endColumn) {\n    this.start = {\n        row: startRow,\n        column: startColumn\n    };\n\n    this.end = {\n        row: endRow,\n        column: endColumn\n    };\n};\n\n(function() {\n    this.isEqual = function(range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    };\n    this.toString = function() {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    };\n\n    this.contains = function(row, column) {\n        return this.compare(row, column) == 0;\n    };\n    this.compareRange = function(range) {\n        var cmp,\n            end = range.end,\n            start = range.start;\n\n        cmp = this.compare(end.row, end.column);\n        if (cmp == 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == 1) {\n                return 2;\n            } else if (cmp == 0) {\n                return 1;\n            } else {\n                return 0;\n            }\n        } else if (cmp == -1) {\n            return -2;\n        } else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == -1) {\n                return -1;\n            } else if (cmp == 1) {\n                return 42;\n            } else {\n                return 0;\n            }\n        }\n    };\n    this.comparePoint = function(p) {\n        return this.compare(p.row, p.column);\n    };\n    this.containsRange = function(range) {\n        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    };\n    this.intersects = function(range) {\n        var cmp = this.compareRange(range);\n        return (cmp == -1 || cmp == 0 || cmp == 1);\n    };\n    this.isEnd = function(row, column) {\n        return this.end.row == row && this.end.column == column;\n    };\n    this.isStart = function(row, column) {\n        return this.start.row == row && this.start.column == column;\n    };\n    this.setStart = function(row, column) {\n        if (typeof row == \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        } else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    };\n    this.setEnd = function(row, column) {\n        if (typeof row == \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        } else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    };\n    this.inside = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideStart = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideEnd = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.compare = function(row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n\n        if (row < this.start.row)\n            return -1;\n\n        if (row > this.end.row)\n            return 1;\n\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n\n        return 0;\n    };\n    this.compareStart = function(row, column) {\n        if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareEnd = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareInside = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.clipRows = function(firstRow, lastRow) {\n        if (this.end.row > lastRow)\n            var end = {row: lastRow + 1, column: 0};\n        else if (this.end.row < firstRow)\n            var end = {row: firstRow, column: 0};\n\n        if (this.start.row > lastRow)\n            var start = {row: lastRow + 1, column: 0};\n        else if (this.start.row < firstRow)\n            var start = {row: firstRow, column: 0};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n    this.extend = function(row, column) {\n        var cmp = this.compare(row, column);\n\n        if (cmp == 0)\n            return this;\n        else if (cmp == -1)\n            var start = {row: row, column: column};\n        else\n            var end = {row: row, column: column};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n\n    this.isEmpty = function() {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    };\n    this.isMultiLine = function() {\n        return (this.start.row !== this.end.row);\n    };\n    this.clone = function() {\n        return Range.fromPoints(this.start, this.end);\n    };\n    this.collapseRows = function() {\n        if (this.end.column == 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    };\n    this.toScreenRange = function(session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n\n        return new Range(\n            screenPosStart.row, screenPosStart.column,\n            screenPosEnd.row, screenPosEnd.column\n        );\n    };\n    this.moveBy = function(row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    };\n\n}).call(Range.prototype);\nRange.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n};\nRange.comparePoints = comparePoints;\n\nRange.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\n\n\nexports.Range = Range;\n});\n\nace.define(\"ace/selection\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar lang = acequire(\"./lib/lang\");\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\nvar Range = acequire(\"./range\").Range;\nvar Selection = function(session) {\n    this.session = session;\n    this.doc = session.getDocument();\n\n    this.clearSelection();\n    this.lead = this.selectionLead = this.doc.createAnchor(0, 0);\n    this.anchor = this.selectionAnchor = this.doc.createAnchor(0, 0);\n\n    var self = this;\n    this.lead.on(\"change\", function(e) {\n        self._emit(\"changeCursor\");\n        if (!self.$isEmpty)\n            self._emit(\"changeSelection\");\n        if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)\n            self.$desiredColumn = null;\n    });\n\n    this.selectionAnchor.on(\"change\", function() {\n        if (!self.$isEmpty)\n            self._emit(\"changeSelection\");\n    });\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.isEmpty = function() {\n        return (this.$isEmpty || (\n            this.anchor.row == this.lead.row &&\n            this.anchor.column == this.lead.column\n        ));\n    };\n    this.isMultiLine = function() {\n        if (this.isEmpty()) {\n            return false;\n        }\n\n        return this.getRange().isMultiLine();\n    };\n    this.getCursor = function() {\n        return this.lead.getPosition();\n    };\n    this.setSelectionAnchor = function(row, column) {\n        this.anchor.setPosition(row, column);\n\n        if (this.$isEmpty) {\n            this.$isEmpty = false;\n            this._emit(\"changeSelection\");\n        }\n    };\n    this.getSelectionAnchor = function() {\n        if (this.$isEmpty)\n            return this.getSelectionLead();\n        else\n            return this.anchor.getPosition();\n    };\n    this.getSelectionLead = function() {\n        return this.lead.getPosition();\n    };\n    this.shiftSelection = function(columns) {\n        if (this.$isEmpty) {\n            this.moveCursorTo(this.lead.row, this.lead.column + columns);\n            return;\n        }\n\n        var anchor = this.getSelectionAnchor();\n        var lead = this.getSelectionLead();\n\n        var isBackwards = this.isBackwards();\n\n        if (!isBackwards || anchor.column !== 0)\n            this.setSelectionAnchor(anchor.row, anchor.column + columns);\n\n        if (isBackwards || lead.column !== 0) {\n            this.$moveSelection(function() {\n                this.moveCursorTo(lead.row, lead.column + columns);\n            });\n        }\n    };\n    this.isBackwards = function() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));\n    };\n    this.getRange = function() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n\n        if (this.isEmpty())\n            return Range.fromPoints(lead, lead);\n\n        if (this.isBackwards()) {\n            return Range.fromPoints(lead, anchor);\n        }\n        else {\n            return Range.fromPoints(anchor, lead);\n        }\n    };\n    this.clearSelection = function() {\n        if (!this.$isEmpty) {\n            this.$isEmpty = true;\n            this._emit(\"changeSelection\");\n        }\n    };\n    this.selectAll = function() {\n        var lastRow = this.doc.getLength() - 1;\n        this.setSelectionAnchor(0, 0);\n        this.moveCursorTo(lastRow, this.doc.getLine(lastRow).length);\n    };\n    this.setRange =\n    this.setSelectionRange = function(range, reverse) {\n        if (reverse) {\n            this.setSelectionAnchor(range.end.row, range.end.column);\n            this.selectTo(range.start.row, range.start.column);\n        } else {\n            this.setSelectionAnchor(range.start.row, range.start.column);\n            this.selectTo(range.end.row, range.end.column);\n        }\n        if (this.getRange().isEmpty())\n            this.$isEmpty = true;\n        this.$desiredColumn = null;\n    };\n\n    this.$moveSelection = function(mover) {\n        var lead = this.lead;\n        if (this.$isEmpty)\n            this.setSelectionAnchor(lead.row, lead.column);\n\n        mover.call(this);\n    };\n    this.selectTo = function(row, column) {\n        this.$moveSelection(function() {\n            this.moveCursorTo(row, column);\n        });\n    };\n    this.selectToPosition = function(pos) {\n        this.$moveSelection(function() {\n            this.moveCursorToPosition(pos);\n        });\n    };\n    this.moveTo = function(row, column) {\n        this.clearSelection();\n        this.moveCursorTo(row, column);\n    };\n    this.moveToPosition = function(pos) {\n        this.clearSelection();\n        this.moveCursorToPosition(pos);\n    };\n    this.selectUp = function() {\n        this.$moveSelection(this.moveCursorUp);\n    };\n    this.selectDown = function() {\n        this.$moveSelection(this.moveCursorDown);\n    };\n    this.selectRight = function() {\n        this.$moveSelection(this.moveCursorRight);\n    };\n    this.selectLeft = function() {\n        this.$moveSelection(this.moveCursorLeft);\n    };\n    this.selectLineStart = function() {\n        this.$moveSelection(this.moveCursorLineStart);\n    };\n    this.selectLineEnd = function() {\n        this.$moveSelection(this.moveCursorLineEnd);\n    };\n    this.selectFileEnd = function() {\n        this.$moveSelection(this.moveCursorFileEnd);\n    };\n    this.selectFileStart = function() {\n        this.$moveSelection(this.moveCursorFileStart);\n    };\n    this.selectWordRight = function() {\n        this.$moveSelection(this.moveCursorWordRight);\n    };\n    this.selectWordLeft = function() {\n        this.$moveSelection(this.moveCursorWordLeft);\n    };\n    this.getWordRange = function(row, column) {\n        if (typeof column == \"undefined\") {\n            var cursor = row || this.lead;\n            row = cursor.row;\n            column = cursor.column;\n        }\n        return this.session.getWordRange(row, column);\n    };\n    this.selectWord = function() {\n        this.setSelectionRange(this.getWordRange());\n    };\n    this.selectAWord = function() {\n        var cursor = this.getCursor();\n        var range = this.session.getAWordRange(cursor.row, cursor.column);\n        this.setSelectionRange(range);\n    };\n\n    this.getLineRange = function(row, excludeLastChar) {\n        var rowStart = typeof row == \"number\" ? row : this.lead.row;\n        var rowEnd;\n\n        var foldLine = this.session.getFoldLine(rowStart);\n        if (foldLine) {\n            rowStart = foldLine.start.row;\n            rowEnd = foldLine.end.row;\n        } else {\n            rowEnd = rowStart;\n        }\n        if (excludeLastChar === true)\n            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);\n        else\n            return new Range(rowStart, 0, rowEnd + 1, 0);\n    };\n    this.selectLine = function() {\n        this.setSelectionRange(this.getLineRange());\n    };\n    this.moveCursorUp = function() {\n        this.moveCursorBy(-1, 0);\n    };\n    this.moveCursorDown = function() {\n        this.moveCursorBy(1, 0);\n    };\n    this.wouldMoveIntoSoftTab = function(cursor, tabSize, direction) {\n        var start = cursor.column;\n        var end = cursor.column + tabSize;\n\n        if (direction < 0) {\n            start = cursor.column - tabSize;\n            end = cursor.column;\n        }\n        return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(\" \").length-1 == tabSize;\n    };\n    this.moveCursorLeft = function() {\n        var cursor = this.lead.getPosition(),\n            fold;\n\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n        } else if (cursor.column === 0) {\n            if (cursor.row > 0) {\n                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, -tabSize);\n            } else {\n                this.moveCursorBy(0, -1);\n            }\n        }\n    };\n    this.moveCursorRight = function() {\n        var cursor = this.lead.getPosition(),\n            fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n        }\n        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {\n            if (this.lead.row < this.doc.getLength() - 1) {\n                this.moveCursorTo(this.lead.row + 1, 0);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            var cursor = this.lead;\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, tabSize);\n            } else {\n                this.moveCursorBy(0, 1);\n            }\n        }\n    };\n    this.moveCursorLineStart = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var screenRow = this.session.documentToScreenRow(row, column);\n        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);\n        var beforeCursor = this.session.getDisplayLine(\n            row, null, firstColumnPosition.row,\n            firstColumnPosition.column\n        );\n\n        var leadingSpace = beforeCursor.match(/^\\s*/);\n        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)\n            firstColumnPosition.column += leadingSpace[0].length;\n        this.moveCursorToPosition(firstColumnPosition);\n    };\n    this.moveCursorLineEnd = function() {\n        var lead = this.lead;\n        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);\n        if (this.lead.column == lineEnd.column) {\n            var line = this.session.getLine(lineEnd.row);\n            if (lineEnd.column == line.length) {\n                var textEnd = line.search(/\\s+$/);\n                if (textEnd > 0)\n                    lineEnd.column = textEnd;\n            }\n        }\n\n        this.moveCursorTo(lineEnd.row, lineEnd.column);\n    };\n    this.moveCursorFileEnd = function() {\n        var row = this.doc.getLength() - 1;\n        var column = this.doc.getLine(row).length;\n        this.moveCursorTo(row, column);\n    };\n    this.moveCursorFileStart = function() {\n        this.moveCursorTo(0, 0);\n    };\n    this.moveCursorLongWordRight = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        var match;\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n            return;\n        }\n        if (match = this.session.nonTokenRe.exec(rightOfCursor)) {\n            column += this.session.nonTokenRe.lastIndex;\n            this.session.nonTokenRe.lastIndex = 0;\n            rightOfCursor = line.substring(column);\n        }\n        if (column >= line.length) {\n            this.moveCursorTo(row, line.length);\n            this.moveCursorRight();\n            if (row < this.doc.getLength() - 1)\n                this.moveCursorWordRight();\n            return;\n        }\n        if (match = this.session.tokenRe.exec(rightOfCursor)) {\n            column += this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    };\n    this.moveCursorLongWordLeft = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n            return;\n        }\n\n        var str = this.session.getFoldStringAt(row, column, -1);\n        if (str == null) {\n            str = this.doc.getLine(row).substring(0, column);\n        }\n\n        var leftOfCursor = lang.stringReverse(str);\n        var match;\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        if (match = this.session.nonTokenRe.exec(leftOfCursor)) {\n            column -= this.session.nonTokenRe.lastIndex;\n            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);\n            this.session.nonTokenRe.lastIndex = 0;\n        }\n        if (column <= 0) {\n            this.moveCursorTo(row, 0);\n            this.moveCursorLeft();\n            if (row > 0)\n                this.moveCursorWordLeft();\n            return;\n        }\n        if (match = this.session.tokenRe.exec(leftOfCursor)) {\n            column -= this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    };\n\n    this.$shortWordEndIndex = function(rightOfCursor) {\n        var match, index = 0, ch;\n        var whitespaceRe = /\\s/;\n        var tokenRe = this.session.tokenRe;\n\n        tokenRe.lastIndex = 0;\n        if (match = this.session.tokenRe.exec(rightOfCursor)) {\n            index = this.session.tokenRe.lastIndex;\n        } else {\n            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                index ++;\n\n            if (index < 1) {\n                tokenRe.lastIndex = 0;\n                 while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {\n                    tokenRe.lastIndex = 0;\n                    index ++;\n                    if (whitespaceRe.test(ch)) {\n                        if (index > 2) {\n                            index--;\n                            break;\n                        } else {\n                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                                index ++;\n                            if (index > 2)\n                                break;\n                        }\n                    }\n                }\n            }\n        }\n        tokenRe.lastIndex = 0;\n\n        return index;\n    };\n\n    this.moveCursorShortWordRight = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold)\n            return this.moveCursorTo(fold.end.row, fold.end.column);\n\n        if (column == line.length) {\n            var l = this.doc.getLength();\n            do {\n                row++;\n                rightOfCursor = this.doc.getLine(row);\n            } while (row < l && /^\\s*$/.test(rightOfCursor));\n\n            if (!/^\\s+/.test(rightOfCursor))\n                rightOfCursor = \"\";\n            column = 0;\n        }\n\n        var index = this.$shortWordEndIndex(rightOfCursor);\n\n        this.moveCursorTo(row, column + index);\n    };\n\n    this.moveCursorShortWordLeft = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1))\n            return this.moveCursorTo(fold.start.row, fold.start.column);\n\n        var line = this.session.getLine(row).substring(0, column);\n        if (column === 0) {\n            do {\n                row--;\n                line = this.doc.getLine(row);\n            } while (row > 0 && /^\\s*$/.test(line));\n\n            column = line.length;\n            if (!/\\s+$/.test(line))\n                line = \"\";\n        }\n\n        var leftOfCursor = lang.stringReverse(line);\n        var index = this.$shortWordEndIndex(leftOfCursor);\n\n        return this.moveCursorTo(row, column - index);\n    };\n\n    this.moveCursorWordRight = function() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordRight();\n        else\n            this.moveCursorShortWordRight();\n    };\n\n    this.moveCursorWordLeft = function() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordLeft();\n        else\n            this.moveCursorShortWordLeft();\n    };\n    this.moveCursorBy = function(rows, chars) {\n        var screenPos = this.session.documentToScreenPosition(\n            this.lead.row,\n            this.lead.column\n        );\n\n        var offsetX;\n\n        if (chars === 0) {\n            if (rows !== 0) {\n                if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {\n                    offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);\n                    screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);\n                } else {\n                    offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];\n                }\n            }\n\n            if (this.$desiredColumn)\n                screenPos.column = this.$desiredColumn;\n            else\n                this.$desiredColumn = screenPos.column;\n        }\n\n        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);\n        \n        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {\n            if (this.session.lineWidgets && this.session.lineWidgets[docPos.row]) {\n                if (docPos.row > 0 || rows > 0)\n                    docPos.row++;\n            }\n        }\n        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);\n    };\n    this.moveCursorToPosition = function(position) {\n        this.moveCursorTo(position.row, position.column);\n    };\n    this.moveCursorTo = function(row, column, keepDesiredColumn) {\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            row = fold.start.row;\n            column = fold.start.column;\n        }\n\n        this.$keepDesiredColumnOnChange = true;\n        var line = this.session.getLine(row);\n        if (/[\\uDC00-\\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {\n            if (this.lead.row == row && this.lead.column == column + 1)\n                column = column - 1;\n            else\n                column = column + 1;\n        }\n        this.lead.setPosition(row, column);\n        this.$keepDesiredColumnOnChange = false;\n\n        if (!keepDesiredColumn)\n            this.$desiredColumn = null;\n    };\n    this.moveCursorToScreen = function(row, column, keepDesiredColumn) {\n        var pos = this.session.screenToDocumentPosition(row, column);\n        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);\n    };\n    this.detach = function() {\n        this.lead.detach();\n        this.anchor.detach();\n        this.session = this.doc = null;\n    };\n\n    this.fromOrientedRange = function(range) {\n        this.setSelectionRange(range, range.cursor == range.start);\n        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;\n    };\n\n    this.toOrientedRange = function(range) {\n        var r = this.getRange();\n        if (range) {\n            range.start.column = r.start.column;\n            range.start.row = r.start.row;\n            range.end.column = r.end.column;\n            range.end.row = r.end.row;\n        } else {\n            range = r;\n        }\n\n        range.cursor = this.isBackwards() ? range.start : range.end;\n        range.desiredColumn = this.$desiredColumn;\n        return range;\n    };\n    this.getRangeOfMovements = function(func) {\n        var start = this.getCursor();\n        try {\n            func(this);\n            var end = this.getCursor();\n            return Range.fromPoints(start,end);\n        } catch(e) {\n            return Range.fromPoints(start,start);\n        } finally {\n            this.moveCursorToPosition(start);\n        }\n    };\n\n    this.toJSON = function() {\n        if (this.rangeCount) {\n            var data = this.ranges.map(function(r) {\n                var r1 = r.clone();\n                r1.isBackwards = r.cursor == r.start;\n                return r1;\n            });\n        } else {\n            var data = this.getRange();\n            data.isBackwards = this.isBackwards();\n        }\n        return data;\n    };\n\n    this.fromJSON = function(data) {\n        if (data.start == undefined) {\n            if (this.rangeList) {\n                this.toSingleRange(data[0]);\n                for (var i = data.length; i--; ) {\n                    var r = Range.fromPoints(data[i].start, data[i].end);\n                    if (data[i].isBackwards)\n                        r.cursor = r.start;\n                    this.addRange(r, true);\n                }\n                return;\n            } else\n                data = data[0];\n        }\n        if (this.rangeList)\n            this.toSingleRange(data);\n        this.setSelectionRange(data, data.isBackwards);\n    };\n\n    this.isEqual = function(data) {\n        if ((data.length || this.rangeCount) && data.length != this.rangeCount)\n            return false;\n        if (!data.length || !this.ranges)\n            return this.getRange().isEqual(data);\n\n        for (var i = this.ranges.length; i--; ) {\n            if (!this.ranges[i].isEqual(data[i]))\n                return false;\n        }\n        return true;\n    };\n\n}).call(Selection.prototype);\n\nexports.Selection = Selection;\n});\n\nace.define(\"ace/tokenizer\",[\"require\",\"exports\",\"module\",\"ace/config\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar config = acequire(\"./config\");\nvar MAX_TOKEN_COUNT = 2000;\nvar Tokenizer = function(rules) {\n    this.states = rules;\n\n    this.regExps = {};\n    this.matchMappings = {};\n    for (var key in this.states) {\n        var state = this.states[key];\n        var ruleRegExps = [];\n        var matchTotal = 0;\n        var mapping = this.matchMappings[key] = {defaultToken: \"text\"};\n        var flag = \"g\";\n\n        var splitterRurles = [];\n        for (var i = 0; i < state.length; i++) {\n            var rule = state[i];\n            if (rule.defaultToken)\n                mapping.defaultToken = rule.defaultToken;\n            if (rule.caseInsensitive)\n                flag = \"gi\";\n            if (rule.regex == null)\n                continue;\n\n            if (rule.regex instanceof RegExp)\n                rule.regex = rule.regex.toString().slice(1, -1);\n            var adjustedregex = rule.regex;\n            var matchcount = new RegExp(\"(?:(\" + adjustedregex + \")|(.))\").exec(\"a\").length - 2;\n            if (Array.isArray(rule.token)) {\n                if (rule.token.length == 1 || matchcount == 1) {\n                    rule.token = rule.token[0];\n                } else if (matchcount - 1 != rule.token.length) {\n                    this.reportError(\"number of classes and regexp groups doesn't match\", { \n                        rule: rule,\n                        groupCount: matchcount - 1\n                    });\n                    rule.token = rule.token[0];\n                } else {\n                    rule.tokenArray = rule.token;\n                    rule.token = null;\n                    rule.onMatch = this.$arrayTokens;\n                }\n            } else if (typeof rule.token == \"function\" && !rule.onMatch) {\n                if (matchcount > 1)\n                    rule.onMatch = this.$applyToken;\n                else\n                    rule.onMatch = rule.token;\n            }\n\n            if (matchcount > 1) {\n                if (/\\\\\\d/.test(rule.regex)) {\n                    adjustedregex = rule.regex.replace(/\\\\([0-9]+)/g, function(match, digit) {\n                        return \"\\\\\" + (parseInt(digit, 10) + matchTotal + 1);\n                    });\n                } else {\n                    matchcount = 1;\n                    adjustedregex = this.removeCapturingGroups(rule.regex);\n                }\n                if (!rule.splitRegex && typeof rule.token != \"string\")\n                    splitterRurles.push(rule); // flag will be known only at the very end\n            }\n\n            mapping[matchTotal] = i;\n            matchTotal += matchcount;\n\n            ruleRegExps.push(adjustedregex);\n            if (!rule.onMatch)\n                rule.onMatch = null;\n        }\n        \n        if (!ruleRegExps.length) {\n            mapping[0] = 0;\n            ruleRegExps.push(\"$\");\n        }\n        \n        splitterRurles.forEach(function(rule) {\n            rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);\n        }, this);\n\n        this.regExps[key] = new RegExp(\"(\" + ruleRegExps.join(\")|(\") + \")|($)\", flag);\n    }\n};\n\n(function() {\n    this.$setMaxTokenCount = function(m) {\n        MAX_TOKEN_COUNT = m | 0;\n    };\n    \n    this.$applyToken = function(str) {\n        var values = this.splitRegex.exec(str).slice(1);\n        var types = this.token.apply(this, values);\n        if (typeof types === \"string\")\n            return [{type: types, value: str}];\n\n        var tokens = [];\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i]\n                };\n        }\n        return tokens;\n    };\n\n    this.$arrayTokens = function(str) {\n        if (!str)\n            return [];\n        var values = this.splitRegex.exec(str);\n        if (!values)\n            return \"text\";\n        var tokens = [];\n        var types = this.tokenArray;\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i + 1])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i + 1]\n                };\n        }\n        return tokens;\n    };\n\n    this.removeCapturingGroups = function(src) {\n        var r = src.replace(\n            /\\[(?:\\\\.|[^\\]])*?\\]|\\\\.|\\(\\?[:=!]|(\\()/g,\n            function(x, y) {return y ? \"(?:\" : x;}\n        );\n        return r;\n    };\n\n    this.createSplitterRegexp = function(src, flag) {\n        if (src.indexOf(\"(?=\") != -1) {\n            var stack = 0;\n            var inChClass = false;\n            var lastCapture = {};\n            src.replace(/(\\\\.)|(\\((?:\\?[=!])?)|(\\))|([\\[\\]])/g, function(\n                m, esc, parenOpen, parenClose, square, index\n            ) {\n                if (inChClass) {\n                    inChClass = square != \"]\";\n                } else if (square) {\n                    inChClass = true;\n                } else if (parenClose) {\n                    if (stack == lastCapture.stack) {\n                        lastCapture.end = index+1;\n                        lastCapture.stack = -1;\n                    }\n                    stack--;\n                } else if (parenOpen) {\n                    stack++;\n                    if (parenOpen.length != 1) {\n                        lastCapture.stack = stack;\n                        lastCapture.start = index;\n                    }\n                }\n                return m;\n            });\n\n            if (lastCapture.end != null && /^\\)*$/.test(src.substr(lastCapture.end)))\n                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);\n        }\n        if (src.charAt(0) != \"^\") src = \"^\" + src;\n        if (src.charAt(src.length - 1) != \"$\") src += \"$\";\n        \n        return new RegExp(src, (flag||\"\").replace(\"g\", \"\"));\n    };\n    this.getLineTokens = function(line, startState) {\n        if (startState && typeof startState != \"string\") {\n            var stack = startState.slice(0);\n            startState = stack[0];\n            if (startState === \"#tmp\") {\n                stack.shift();\n                startState = stack.shift();\n            }\n        } else\n            var stack = [];\n\n        var currentState = startState || \"start\";\n        var state = this.states[currentState];\n        if (!state) {\n            currentState = \"start\";\n            state = this.states[currentState];\n        }\n        var mapping = this.matchMappings[currentState];\n        var re = this.regExps[currentState];\n        re.lastIndex = 0;\n\n        var match, tokens = [];\n        var lastIndex = 0;\n        var matchAttempts = 0;\n\n        var token = {type: null, value: \"\"};\n\n        while (match = re.exec(line)) {\n            var type = mapping.defaultToken;\n            var rule = null;\n            var value = match[0];\n            var index = re.lastIndex;\n\n            if (index - value.length > lastIndex) {\n                var skipped = line.substring(lastIndex, index - value.length);\n                if (token.type == type) {\n                    token.value += skipped;\n                } else {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: type, value: skipped};\n                }\n            }\n\n            for (var i = 0; i < match.length-2; i++) {\n                if (match[i + 1] === undefined)\n                    continue;\n\n                rule = state[mapping[i]];\n\n                if (rule.onMatch)\n                    type = rule.onMatch(value, currentState, stack, line);\n                else\n                    type = rule.token;\n\n                if (rule.next) {\n                    if (typeof rule.next == \"string\") {\n                        currentState = rule.next;\n                    } else {\n                        currentState = rule.next(currentState, stack);\n                    }\n                    \n                    state = this.states[currentState];\n                    if (!state) {\n                        this.reportError(\"state doesn't exist\", currentState);\n                        currentState = \"start\";\n                        state = this.states[currentState];\n                    }\n                    mapping = this.matchMappings[currentState];\n                    lastIndex = index;\n                    re = this.regExps[currentState];\n                    re.lastIndex = index;\n                }\n                if (rule.consumeLineEnd)\n                    lastIndex = index;\n                break;\n            }\n\n            if (value) {\n                if (typeof type === \"string\") {\n                    if ((!rule || rule.merge !== false) && token.type === type) {\n                        token.value += value;\n                    } else {\n                        if (token.type)\n                            tokens.push(token);\n                        token = {type: type, value: value};\n                    }\n                } else if (type) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: null, value: \"\"};\n                    for (var i = 0; i < type.length; i++)\n                        tokens.push(type[i]);\n                }\n            }\n\n            if (lastIndex == line.length)\n                break;\n\n            lastIndex = index;\n\n            if (matchAttempts++ > MAX_TOKEN_COUNT) {\n                if (matchAttempts > 2 * line.length) {\n                    this.reportError(\"infinite loop with in ace tokenizer\", {\n                        startState: startState,\n                        line: line\n                    });\n                }\n                while (lastIndex < line.length) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {\n                        value: line.substring(lastIndex, lastIndex += 2000),\n                        type: \"overflow\"\n                    };\n                }\n                currentState = \"start\";\n                stack = [];\n                break;\n            }\n        }\n\n        if (token.type)\n            tokens.push(token);\n        \n        if (stack.length > 1) {\n            if (stack[0] !== currentState)\n                stack.unshift(\"#tmp\", currentState);\n        }\n        return {\n            tokens : tokens,\n            state : stack.length ? stack : currentState\n        };\n    };\n    \n    this.reportError = config.reportError;\n    \n}).call(Tokenizer.prototype);\n\nexports.Tokenizer = Tokenizer;\n});\n\nace.define(\"ace/mode/text_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar lang = acequire(\"../lib/lang\");\n\nvar TextHighlightRules = function() {\n\n    this.$rules = {\n        \"start\" : [{\n            token : \"empty_line\",\n            regex : '^$'\n        }, {\n            defaultToken : \"text\"\n        }]\n    };\n};\n\n(function() {\n\n    this.addRules = function(rules, prefix) {\n        if (!prefix) {\n            for (var key in rules)\n                this.$rules[key] = rules[key];\n            return;\n        }\n        for (var key in rules) {\n            var state = rules[key];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.next || rule.onMatch) {\n                    if (typeof rule.next == \"string\") {\n                        if (rule.next.indexOf(prefix) !== 0)\n                            rule.next = prefix + rule.next;\n                    }\n                    if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)\n                        rule.nextState = prefix + rule.nextState;\n                }\n            }\n            this.$rules[prefix + key] = state;\n        }\n    };\n\n    this.getRules = function() {\n        return this.$rules;\n    };\n\n    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {\n        var embedRules = typeof HighlightRules == \"function\"\n            ? new HighlightRules().getRules()\n            : HighlightRules;\n        if (states) {\n            for (var i = 0; i < states.length; i++)\n                states[i] = prefix + states[i];\n        } else {\n            states = [];\n            for (var key in embedRules)\n                states.push(prefix + key);\n        }\n\n        this.addRules(embedRules, prefix);\n\n        if (escapeRules) {\n            var addRules = Array.prototype[append ? \"push\" : \"unshift\"];\n            for (var i = 0; i < states.length; i++)\n                addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));\n        }\n\n        if (!this.$embeds)\n            this.$embeds = [];\n        this.$embeds.push(prefix);\n    };\n\n    this.getEmbeds = function() {\n        return this.$embeds;\n    };\n\n    var pushState = function(currentState, stack) {\n        if (currentState != \"start\" || stack.length)\n            stack.unshift(this.nextState, currentState);\n        return this.nextState;\n    };\n    var popState = function(currentState, stack) {\n        stack.shift();\n        return stack.shift() || \"start\";\n    };\n\n    this.normalizeRules = function() {\n        var id = 0;\n        var rules = this.$rules;\n        function processState(key) {\n            var state = rules[key];\n            state.processed = true;\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                var toInsert = null;\n                if (Array.isArray(rule)) {\n                    toInsert = rule;\n                    rule = {};\n                }\n                if (!rule.regex && rule.start) {\n                    rule.regex = rule.start;\n                    if (!rule.next)\n                        rule.next = [];\n                    rule.next.push({\n                        defaultToken: rule.token\n                    }, {\n                        token: rule.token + \".end\",\n                        regex: rule.end || rule.start,\n                        next: \"pop\"\n                    });\n                    rule.token = rule.token + \".start\";\n                    rule.push = true;\n                }\n                var next = rule.next || rule.push;\n                if (next && Array.isArray(next)) {\n                    var stateName = rule.stateName;\n                    if (!stateName)  {\n                        stateName = rule.token;\n                        if (typeof stateName != \"string\")\n                            stateName = stateName[0] || \"\";\n                        if (rules[stateName])\n                            stateName += id++;\n                    }\n                    rules[stateName] = next;\n                    rule.next = stateName;\n                    processState(stateName);\n                } else if (next == \"pop\") {\n                    rule.next = popState;\n                }\n\n                if (rule.push) {\n                    rule.nextState = rule.next || rule.push;\n                    rule.next = pushState;\n                    delete rule.push;\n                }\n\n                if (rule.rules) {\n                    for (var r in rule.rules) {\n                        if (rules[r]) {\n                            if (rules[r].push)\n                                rules[r].push.apply(rules[r], rule.rules[r]);\n                        } else {\n                            rules[r] = rule.rules[r];\n                        }\n                    }\n                }\n                var includeName = typeof rule == \"string\" ? rule : rule.include;\n                if (includeName) {\n                    if (Array.isArray(includeName))\n                        toInsert = includeName.map(function(x) { return rules[x]; });\n                    else\n                        toInsert = rules[includeName];\n                }\n\n                if (toInsert) {\n                    var args = [i, 1].concat(toInsert);\n                    if (rule.noEscape)\n                        args = args.filter(function(x) {return !x.next;});\n                    state.splice.apply(state, args);\n                    i--;\n                }\n                \n                if (rule.keywordMap) {\n                    rule.token = this.createKeywordMapper(\n                        rule.keywordMap, rule.defaultToken || \"text\", rule.caseInsensitive\n                    );\n                    delete rule.defaultToken;\n                }\n            }\n        }\n        Object.keys(rules).forEach(processState, this);\n    };\n\n    this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {\n        var keywords = Object.create(null);\n        Object.keys(map).forEach(function(className) {\n            var a = map[className];\n            if (ignoreCase)\n                a = a.toLowerCase();\n            var list = a.split(splitChar || \"|\");\n            for (var i = list.length; i--; )\n                keywords[list[i]] = className;\n        });\n        if (Object.getPrototypeOf(keywords)) {\n            keywords.__proto__ = null;\n        }\n        this.$keywordList = Object.keys(keywords);\n        map = null;\n        return ignoreCase\n            ? function(value) {return keywords[value.toLowerCase()] || defaultToken; }\n            : function(value) {return keywords[value] || defaultToken; };\n    };\n\n    this.getKeywords = function() {\n        return this.$keywords;\n    };\n\n}).call(TextHighlightRules.prototype);\n\nexports.TextHighlightRules = TextHighlightRules;\n});\n\nace.define(\"ace/mode/behaviour\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Behaviour = function() {\n   this.$behaviours = {};\n};\n\n(function () {\n\n    this.add = function (name, action, callback) {\n        switch (undefined) {\n          case this.$behaviours:\n              this.$behaviours = {};\n          case this.$behaviours[name]:\n              this.$behaviours[name] = {};\n        }\n        this.$behaviours[name][action] = callback;\n    };\n    \n    this.addBehaviours = function (behaviours) {\n        for (var key in behaviours) {\n            for (var action in behaviours[key]) {\n                this.add(key, action, behaviours[key][action]);\n            }\n        }\n    };\n    \n    this.remove = function (name) {\n        if (this.$behaviours && this.$behaviours[name]) {\n            delete this.$behaviours[name];\n        }\n    };\n    \n    this.inherit = function (mode, filter) {\n        if (typeof mode === \"function\") {\n            var behaviours = new mode().getBehaviours(filter);\n        } else {\n            var behaviours = mode.getBehaviours(filter);\n        }\n        this.addBehaviours(behaviours);\n    };\n    \n    this.getBehaviours = function (filter) {\n        if (!filter) {\n            return this.$behaviours;\n        } else {\n            var ret = {};\n            for (var i = 0; i < filter.length; i++) {\n                if (this.$behaviours[filter[i]]) {\n                    ret[filter[i]] = this.$behaviours[filter[i]];\n                }\n            }\n            return ret;\n        }\n    };\n\n}).call(Behaviour.prototype);\n\nexports.Behaviour = Behaviour;\n});\n\nace.define(\"ace/token_iterator\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"./range\").Range;\nvar TokenIterator = function(session, initialRow, initialColumn) {\n    this.$session = session;\n    this.$row = initialRow;\n    this.$rowTokens = session.getTokens(initialRow);\n\n    var token = session.getTokenAt(initialRow, initialColumn);\n    this.$tokenIndex = token ? token.index : -1;\n};\n\n(function() { \n    this.stepBackward = function() {\n        this.$tokenIndex -= 1;\n        \n        while (this.$tokenIndex < 0) {\n            this.$row -= 1;\n            if (this.$row < 0) {\n                this.$row = 0;\n                return null;\n            }\n                \n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = this.$rowTokens.length - 1;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    };   \n    this.stepForward = function() {\n        this.$tokenIndex += 1;\n        var rowCount;\n        while (this.$tokenIndex >= this.$rowTokens.length) {\n            this.$row += 1;\n            if (!rowCount)\n                rowCount = this.$session.getLength();\n            if (this.$row >= rowCount) {\n                this.$row = rowCount - 1;\n                return null;\n            }\n\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = 0;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    };      \n    this.getCurrentToken = function () {\n        return this.$rowTokens[this.$tokenIndex];\n    };      \n    this.getCurrentTokenRow = function () {\n        return this.$row;\n    };     \n    this.getCurrentTokenColumn = function() {\n        var rowTokens = this.$rowTokens;\n        var tokenIndex = this.$tokenIndex;\n        var column = rowTokens[tokenIndex].start;\n        if (column !== undefined)\n            return column;\n            \n        column = 0;\n        while (tokenIndex > 0) {\n            tokenIndex -= 1;\n            column += rowTokens[tokenIndex].value.length;\n        }\n        \n        return column;  \n    };\n    this.getCurrentTokenPosition = function() {\n        return {row: this.$row, column: this.getCurrentTokenColumn()};\n    };\n    this.getCurrentTokenRange = function() {\n        var token = this.$rowTokens[this.$tokenIndex];\n        var column = this.getCurrentTokenColumn();\n        return new Range(this.$row, column, this.$row, column + token.value.length);\n    };\n\n}).call(TokenIterator.prototype);\n\nexports.TokenIterator = TokenIterator;\n});\n\nace.define(\"ace/mode/behaviour/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/token_iterator\",\"ace/lib/lang\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../../lib/oop\");\nvar Behaviour = acequire(\"../behaviour\").Behaviour;\nvar TokenIterator = acequire(\"../../token_iterator\").TokenIterator;\nvar lang = acequire(\"../../lib/lang\");\n\nvar SAFE_INSERT_IN_TOKENS =\n    [\"text\", \"paren.rparen\", \"punctuation.operator\"];\nvar SAFE_INSERT_BEFORE_TOKENS =\n    [\"text\", \"paren.rparen\", \"punctuation.operator\", \"comment\"];\n\nvar context;\nvar contextCache = {};\nvar defaultQuotes = {'\"' : '\"', \"'\" : \"'\"};\n\nvar initContext = function(editor) {\n    var id = -1;\n    if (editor.multiSelect) {\n        id = editor.selection.index;\n        if (contextCache.rangeCount != editor.multiSelect.rangeCount)\n            contextCache = {rangeCount: editor.multiSelect.rangeCount};\n    }\n    if (contextCache[id])\n        return context = contextCache[id];\n    context = contextCache[id] = {\n        autoInsertedBrackets: 0,\n        autoInsertedRow: -1,\n        autoInsertedLineEnd: \"\",\n        maybeInsertedBrackets: 0,\n        maybeInsertedRow: -1,\n        maybeInsertedLineStart: \"\",\n        maybeInsertedLineEnd: \"\"\n    };\n};\n\nvar getWrapped = function(selection, selected, opening, closing) {\n    var rowDiff = selection.end.row - selection.start.row;\n    return {\n        text: opening + selected + closing,\n        selection: [\n                0,\n                selection.start.column + 1,\n                rowDiff,\n                selection.end.column + (rowDiff ? 0 : 1)\n            ]\n    };\n};\n\nvar CstyleBehaviour = function(options) {\n    this.add(\"braces\", \"insertion\", function(state, action, editor, session, text) {\n        var cursor = editor.getCursorPosition();\n        var line = session.doc.getLine(cursor.row);\n        if (text == '{') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && selected !== \"{\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '{', '}');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                if (/[\\]\\}\\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options && options.braces) {\n                    CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                    return {\n                        text: '{}',\n                        selection: [1, 1]\n                    };\n                } else {\n                    CstyleBehaviour.recordMaybeInsert(editor, session, \"{\");\n                    return {\n                        text: '{',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == '}') {\n            initContext(editor);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == '}') {\n                var matching = session.$findOpeningBracket('}', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == \"\\n\" || text == \"\\r\\n\") {\n            initContext(editor);\n            var closing = \"\";\n            if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {\n                closing = lang.stringRepeat(\"}\", context.maybeInsertedBrackets);\n                CstyleBehaviour.clearMaybeInsertedClosing();\n            }\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar === '}') {\n                var openBracePos = session.findMatchingBracket({row: cursor.row, column: cursor.column+1}, '}');\n                if (!openBracePos)\n                     return null;\n                var next_indent = this.$getIndent(session.getLine(openBracePos.row));\n            } else if (closing) {\n                var next_indent = this.$getIndent(line);\n            } else {\n                CstyleBehaviour.clearMaybeInsertedClosing();\n                return;\n            }\n            var indent = next_indent + session.getTabString();\n\n            return {\n                text: '\\n' + indent + '\\n' + next_indent + closing,\n                selection: [1, indent.length, 1, indent.length]\n            };\n        } else {\n            CstyleBehaviour.clearMaybeInsertedClosing();\n        }\n    });\n\n    this.add(\"braces\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '{') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.end.column, range.end.column + 1);\n            if (rightChar == '}') {\n                range.end.column++;\n                return range;\n            } else {\n                context.maybeInsertedBrackets--;\n            }\n        }\n    });\n\n    this.add(\"parens\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '(') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '(', ')');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \")\");\n                return {\n                    text: '()',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ')') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ')') {\n                var matching = session.$findOpeningBracket(')', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"parens\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '(') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ')') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '[') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '[', ']');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \"]\");\n                return {\n                    text: '[]',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ']') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ']') {\n                var matching = session.$findOpeningBracket(']', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '[') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ']') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"insertion\", function(state, action, editor, session, text) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        if (text.length == 1 && quotes[text]) {\n            if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1)\n                return;\n            initContext(editor);\n            var quote = text;\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, quote, quote);\n            } else if (!selected) {\n                var cursor = editor.getCursorPosition();\n                var line = session.doc.getLine(cursor.row);\n                var leftChar = line.substring(cursor.column-1, cursor.column);\n                var rightChar = line.substring(cursor.column, cursor.column + 1);\n\n                var token = session.getTokenAt(cursor.row, cursor.column);\n                var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);\n                if (leftChar == \"\\\\\" && token && /escape/.test(token.type))\n                    return null;\n\n                var stringBefore = token && /string|escape/.test(token.type);\n                var stringAfter = !rightToken || /string|escape/.test(rightToken.type);\n\n                var pair;\n                if (rightChar == quote) {\n                    pair = stringBefore !== stringAfter;\n                    if (pair && /string\\.end/.test(rightToken.type))\n                        pair = false;\n                } else {\n                    if (stringBefore && !stringAfter)\n                        return null; // wrap string with different quote\n                    if (stringBefore && stringAfter)\n                        return null; // do not pair quotes inside strings\n                    var wordRe = session.$mode.tokenRe;\n                    wordRe.lastIndex = 0;\n                    var isWordBefore = wordRe.test(leftChar);\n                    wordRe.lastIndex = 0;\n                    var isWordAfter = wordRe.test(leftChar);\n                    if (isWordBefore || isWordAfter)\n                        return null; // before or after alphanumeric\n                    if (rightChar && !/[\\s;,.})\\]\\\\]/.test(rightChar))\n                        return null; // there is rightChar and it isn't closing\n                    pair = true;\n                }\n                return {\n                    text: pair ? quote + quote : \"\",\n                    selection: [1,1]\n                };\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && (selected == '\"' || selected == \"'\")) {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == selected) {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n};\n\n\nCstyleBehaviour.isSaneInsertion = function(editor, session) {\n    var cursor = editor.getCursorPosition();\n    var iterator = new TokenIterator(session, cursor.row, cursor.column);\n    if (!this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS)) {\n        var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);\n        if (!this.$matchTokenType(iterator2.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS))\n            return false;\n    }\n    iterator.stepForward();\n    return iterator.getCurrentTokenRow() !== cursor.row ||\n        this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_BEFORE_TOKENS);\n};\n\nCstyleBehaviour.$matchTokenType = function(token, types) {\n    return types.indexOf(token.type || token) > -1;\n};\n\nCstyleBehaviour.recordAutoInsert = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this.isAutoInsertedClosing(cursor, line, context.autoInsertedLineEnd[0]))\n        context.autoInsertedBrackets = 0;\n    context.autoInsertedRow = cursor.row;\n    context.autoInsertedLineEnd = bracket + line.substr(cursor.column);\n    context.autoInsertedBrackets++;\n};\n\nCstyleBehaviour.recordMaybeInsert = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this.isMaybeInsertedClosing(cursor, line))\n        context.maybeInsertedBrackets = 0;\n    context.maybeInsertedRow = cursor.row;\n    context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;\n    context.maybeInsertedLineEnd = line.substr(cursor.column);\n    context.maybeInsertedBrackets++;\n};\n\nCstyleBehaviour.isAutoInsertedClosing = function(cursor, line, bracket) {\n    return context.autoInsertedBrackets > 0 &&\n        cursor.row === context.autoInsertedRow &&\n        bracket === context.autoInsertedLineEnd[0] &&\n        line.substr(cursor.column) === context.autoInsertedLineEnd;\n};\n\nCstyleBehaviour.isMaybeInsertedClosing = function(cursor, line) {\n    return context.maybeInsertedBrackets > 0 &&\n        cursor.row === context.maybeInsertedRow &&\n        line.substr(cursor.column) === context.maybeInsertedLineEnd &&\n        line.substr(0, cursor.column) == context.maybeInsertedLineStart;\n};\n\nCstyleBehaviour.popAutoInsertedClosing = function() {\n    context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);\n    context.autoInsertedBrackets--;\n};\n\nCstyleBehaviour.clearMaybeInsertedClosing = function() {\n    if (context) {\n        context.maybeInsertedBrackets = 0;\n        context.maybeInsertedRow = -1;\n    }\n};\n\n\n\noop.inherits(CstyleBehaviour, Behaviour);\n\nexports.CstyleBehaviour = CstyleBehaviour;\n});\n\nace.define(\"ace/unicode\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\nexports.packages = {};\n\naddUnicodePackage({\n    L:  \"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC\",\n    Ll: \"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A\",\n    Lu: \"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A\",\n    Lt: \"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC\",\n    Lm: \"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F\",\n    Lo: \"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC\",\n    M:  \"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26\",\n    Mn: \"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26\",\n    Mc: \"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC\",\n    Me: \"0488048906DE20DD-20E020E2-20E4A670-A672\",\n    N:  \"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19\",\n    Nd: \"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19\",\n    Nl: \"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF\",\n    No: \"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835\",\n    P:  \"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65\",\n    Pd: \"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D\",\n    Ps: \"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62\",\n    Pe: \"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63\",\n    Pi: \"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20\",\n    Pf: \"00BB2019201D203A2E032E052E0A2E0D2E1D2E21\",\n    Pc: \"005F203F20402054FE33FE34FE4D-FE4FFF3F\",\n    Po: \"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65\",\n    S:  \"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD\",\n    Sm: \"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC\",\n    Sc: \"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6\",\n    Sk: \"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3\",\n    So: \"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD\",\n    Z:  \"002000A01680180E2000-200A20282029202F205F3000\",\n    Zs: \"002000A01680180E2000-200A202F205F3000\",\n    Zl: \"2028\",\n    Zp: \"2029\",\n    C:  \"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF\",\n    Cc: \"0000-001F007F-009F\",\n    Cf: \"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB\",\n    Co: \"E000-F8FF\",\n    Cs: \"D800-DFFF\",\n    Cn: \"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF\"\n});\n\nfunction addUnicodePackage (pack) {\n    var codePoint = /\\w{4}/g;\n    for (var name in pack)\n        exports.packages[name] = pack[name].replace(codePoint, \"\\\\u$&\");\n}\n\n});\n\nace.define(\"ace/mode/text\",[\"require\",\"exports\",\"module\",\"ace/tokenizer\",\"ace/mode/text_highlight_rules\",\"ace/mode/behaviour/cstyle\",\"ace/unicode\",\"ace/lib/lang\",\"ace/token_iterator\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Tokenizer = acequire(\"../tokenizer\").Tokenizer;\nvar TextHighlightRules = acequire(\"./text_highlight_rules\").TextHighlightRules;\nvar CstyleBehaviour = acequire(\"./behaviour/cstyle\").CstyleBehaviour;\nvar unicode = acequire(\"../unicode\");\nvar lang = acequire(\"../lib/lang\");\nvar TokenIterator = acequire(\"../token_iterator\").TokenIterator;\nvar Range = acequire(\"../range\").Range;\n\nvar Mode = function() {\n    this.HighlightRules = TextHighlightRules;\n};\n\n(function() {\n    this.$defaultBehaviour = new CstyleBehaviour();\n\n    this.tokenRe = new RegExp(\"^[\"\n        + unicode.packages.L\n        + unicode.packages.Mn + unicode.packages.Mc\n        + unicode.packages.Nd\n        + unicode.packages.Pc + \"\\\\$_]+\", \"g\"\n    );\n\n    this.nonTokenRe = new RegExp(\"^(?:[^\"\n        + unicode.packages.L\n        + unicode.packages.Mn + unicode.packages.Mc\n        + unicode.packages.Nd\n        + unicode.packages.Pc + \"\\\\$_]|\\\\s])+\", \"g\"\n    );\n\n    this.getTokenizer = function() {\n        if (!this.$tokenizer) {\n            this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);\n            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());\n        }\n        return this.$tokenizer;\n    };\n\n    this.lineCommentStart = \"\";\n    this.blockComment = \"\";\n\n    this.toggleCommentLines = function(state, session, startRow, endRow) {\n        var doc = session.doc;\n\n        var ignoreBlankLines = true;\n        var shouldRemove = true;\n        var minIndent = Infinity;\n        var tabSize = session.getTabSize();\n        var insertAtTabStop = false;\n\n        if (!this.lineCommentStart) {\n            if (!this.blockComment)\n                return false;\n            var lineCommentStart = this.blockComment.start;\n            var lineCommentEnd = this.blockComment.end;\n            var regexpStart = new RegExp(\"^(\\\\s*)(?:\" + lang.escapeRegExp(lineCommentStart) + \")\");\n            var regexpEnd = new RegExp(\"(?:\" + lang.escapeRegExp(lineCommentEnd) + \")\\\\s*$\");\n\n            var comment = function(line, i) {\n                if (testRemove(line, i))\n                    return;\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    doc.insertInLine({row: i, column: line.length}, lineCommentEnd);\n                    doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n\n            var uncomment = function(line, i) {\n                var m;\n                if (m = line.match(regexpEnd))\n                    doc.removeInLine(i, line.length - m[0].length, line.length);\n                if (m = line.match(regexpStart))\n                    doc.removeInLine(i, m[1].length, m[0].length);\n            };\n\n            var testRemove = function(line, row) {\n                if (regexpStart.test(line))\n                    return true;\n                var tokens = session.getTokens(row);\n                for (var i = 0; i < tokens.length; i++) {\n                    if (tokens[i].type === \"comment\")\n                        return true;\n                }\n            };\n        } else {\n            if (Array.isArray(this.lineCommentStart)) {\n                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join(\"|\");\n                var lineCommentStart = this.lineCommentStart[0];\n            } else {\n                var regexpStart = lang.escapeRegExp(this.lineCommentStart);\n                var lineCommentStart = this.lineCommentStart;\n            }\n            regexpStart = new RegExp(\"^(\\\\s*)(?:\" + regexpStart + \") ?\");\n            \n            insertAtTabStop = session.getUseSoftTabs();\n\n            var uncomment = function(line, i) {\n                var m = line.match(regexpStart);\n                if (!m) return;\n                var start = m[1].length, end = m[0].length;\n                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == \" \")\n                    end--;\n                doc.removeInLine(i, start, end);\n            };\n            var commentWithSpace = lineCommentStart + \" \";\n            var comment = function(line, i) {\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    if (shouldInsertSpace(line, minIndent, minIndent))\n                        doc.insertInLine({row: i, column: minIndent}, commentWithSpace);\n                    else\n                        doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n            var testRemove = function(line, i) {\n                return regexpStart.test(line);\n            };\n            \n            var shouldInsertSpace = function(line, before, after) {\n                var spaces = 0;\n                while (before-- && line.charAt(before) == \" \")\n                    spaces++;\n                if (spaces % tabSize != 0)\n                    return false;\n                var spaces = 0;\n                while (line.charAt(after++) == \" \")\n                    spaces++;\n                if (tabSize > 2)\n                    return spaces % tabSize != tabSize - 1;\n                else\n                    return spaces % tabSize == 0;\n                return true;\n            };\n        }\n\n        function iter(fun) {\n            for (var i = startRow; i <= endRow; i++)\n                fun(doc.getLine(i), i);\n        }\n\n\n        var minEmptyLength = Infinity;\n        iter(function(line, i) {\n            var indent = line.search(/\\S/);\n            if (indent !== -1) {\n                if (indent < minIndent)\n                    minIndent = indent;\n                if (shouldRemove && !testRemove(line, i))\n                    shouldRemove = false;\n            } else if (minEmptyLength > line.length) {\n                minEmptyLength = line.length;\n            }\n        });\n\n        if (minIndent == Infinity) {\n            minIndent = minEmptyLength;\n            ignoreBlankLines = false;\n            shouldRemove = false;\n        }\n\n        if (insertAtTabStop && minIndent % tabSize != 0)\n            minIndent = Math.floor(minIndent / tabSize) * tabSize;\n\n        iter(shouldRemove ? uncomment : comment);\n    };\n\n    this.toggleBlockComment = function(state, session, range, cursor) {\n        var comment = this.blockComment;\n        if (!comment)\n            return;\n        if (!comment.start && comment[0])\n            comment = comment[0];\n\n        var iterator = new TokenIterator(session, cursor.row, cursor.column);\n        var token = iterator.getCurrentToken();\n\n        var sel = session.selection;\n        var initialRange = session.selection.toOrientedRange();\n        var startRow, colDiff;\n\n        if (token && /comment/.test(token.type)) {\n            var startRange, endRange;\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.start);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    startRange = new Range(row, column, row, column + comment.start.length);\n                    break;\n                }\n                token = iterator.stepBackward();\n            }\n\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.end);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    endRange = new Range(row, column, row, column + comment.end.length);\n                    break;\n                }\n                token = iterator.stepForward();\n            }\n            if (endRange)\n                session.remove(endRange);\n            if (startRange) {\n                session.remove(startRange);\n                startRow = startRange.start.row;\n                colDiff = -comment.start.length;\n            }\n        } else {\n            colDiff = comment.start.length;\n            startRow = range.start.row;\n            session.insert(range.end, comment.end);\n            session.insert(range.start, comment.start);\n        }\n        if (initialRange.start.row == startRow)\n            initialRange.start.column += colDiff;\n        if (initialRange.end.row == startRow)\n            initialRange.end.column += colDiff;\n        session.selection.fromOrientedRange(initialRange);\n    };\n\n    this.getNextLineIndent = function(state, line, tab) {\n        return this.$getIndent(line);\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return false;\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n    this.createWorker = function(session) {\n        return null;\n    };\n\n    this.createModeDelegates = function (mapping) {\n        this.$embeds = [];\n        this.$modes = {};\n        for (var i in mapping) {\n            if (mapping[i]) {\n                this.$embeds.push(i);\n                this.$modes[i] = new mapping[i]();\n            }\n        }\n\n        var delegations = [\"toggleBlockComment\", \"toggleCommentLines\", \"getNextLineIndent\", \n            \"checkOutdent\", \"autoOutdent\", \"transformAction\", \"getCompletions\"];\n\n        for (var i = 0; i < delegations.length; i++) {\n            (function(scope) {\n              var functionName = delegations[i];\n              var defaultHandler = scope[functionName];\n              scope[delegations[i]] = function() {\n                  return this.$delegator(functionName, arguments, defaultHandler);\n              };\n            }(this));\n        }\n    };\n\n    this.$delegator = function(method, args, defaultHandler) {\n        var state = args[0];\n        if (typeof state != \"string\")\n            state = state[0];\n        for (var i = 0; i < this.$embeds.length; i++) {\n            if (!this.$modes[this.$embeds[i]]) continue;\n\n            var split = state.split(this.$embeds[i]);\n            if (!split[0] && split[1]) {\n                args[0] = split[1];\n                var mode = this.$modes[this.$embeds[i]];\n                return mode[method].apply(mode, args);\n            }\n        }\n        var ret = defaultHandler.apply(this, args);\n        return defaultHandler ? ret : undefined;\n    };\n\n    this.transformAction = function(state, action, editor, session, param) {\n        if (this.$behaviour) {\n            var behaviours = this.$behaviour.getBehaviours();\n            for (var key in behaviours) {\n                if (behaviours[key][action]) {\n                    var ret = behaviours[key][action].apply(this, arguments);\n                    if (ret) {\n                        return ret;\n                    }\n                }\n            }\n        }\n    };\n    \n    this.getKeywords = function(append) {\n        if (!this.completionKeywords) {\n            var rules = this.$tokenizer.rules;\n            var completionKeywords = [];\n            for (var rule in rules) {\n                var ruleItr = rules[rule];\n                for (var r = 0, l = ruleItr.length; r < l; r++) {\n                    if (typeof ruleItr[r].token === \"string\") {\n                        if (/keyword|support|storage/.test(ruleItr[r].token))\n                            completionKeywords.push(ruleItr[r].regex);\n                    }\n                    else if (typeof ruleItr[r].token === \"object\") {\n                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {    \n                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {\n                                var rule = ruleItr[r].regex.match(/\\(.+?\\)/g)[a];\n                                completionKeywords.push(rule.substr(1, rule.length - 2));\n                            }\n                        }\n                    }\n                }\n            }\n            this.completionKeywords = completionKeywords;\n        }\n        if (!append)\n            return this.$keywordList;\n        return completionKeywords.concat(this.$keywordList || []);\n    };\n    \n    this.$createKeywordList = function() {\n        if (!this.$highlightRules)\n            this.getTokenizer();\n        return this.$keywordList = this.$highlightRules.$keywordList || [];\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        var keywords = this.$keywordList || this.$createKeywordList();\n        return keywords.map(function(word) {\n            return {\n                name: word,\n                value: word,\n                score: 0,\n                meta: \"keyword\"\n            };\n        });\n    };\n\n    this.$id = \"ace/mode/text\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n});\n\nace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\n\nfunction throwDeltaError(delta, errorText){\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n}\n\nfunction positionInDocument(docLines, position) {\n    return position.row    >= 0 && position.row    <  docLines.length &&\n           position.column >= 0 && position.column <= docLines[position.row].length;\n}\n\nfunction validateDelta(docLines, delta) {\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n    if (!delta.start || !delta.end)\n       throwDeltaError(delta, \"delta.start/end must be an present\");\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\n\nexports.applyDelta = function(docLines, delta, doNotValidate) {\n    \n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            } else {\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            } else {\n                docLines.splice(\n                    row, endRow - row + 1,\n                    line.substring(0, startColumn) + docLines[endRow].substring(endColumn)\n                );\n            }\n            break;\n    }\n};\n});\n\nace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\n\nvar Anchor = exports.Anchor = function(doc, row, column) {\n    this.$onChange = this.onChange.bind(this);\n    this.attach(doc);\n    \n    if (typeof column == \"undefined\")\n        this.setPosition(row.row, row.column);\n    else\n        this.setPosition(row, column);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.getPosition = function() {\n        return this.$clipPositionToDocument(this.row, this.column);\n    };\n    this.getDocument = function() {\n        return this.document;\n    };\n    this.$insertRight = false;\n    this.onChange = function(delta) {\n        if (delta.start.row == delta.end.row && delta.start.row != this.row)\n            return;\n\n        if (delta.start.row > this.row)\n            return;\n            \n        var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    };\n    \n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n        return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);\n    }\n            \n    function $getTransformedPoint(delta, point, moveIfEqual) {\n        var deltaIsInsert = delta.action == \"insert\";\n        var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);\n        var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n        var deltaStart = delta.start;\n        var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n        if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n            return {\n                row: point.row,\n                column: point.column\n            };\n        }\n        if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n            return {\n                row: point.row + deltaRowShift,\n                column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n            };\n        }\n        \n        return {\n            row: deltaStart.row,\n            column: deltaStart.column\n        };\n    }\n    this.setPosition = function(row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        } else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n\n        if (this.row == pos.row && this.column == pos.column)\n            return;\n\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    };\n    this.detach = function() {\n        this.document.removeEventListener(\"change\", this.$onChange);\n    };\n    this.attach = function(doc) {\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    };\n    this.$clipPositionToDocument = function(row, column) {\n        var pos = {};\n\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n\n        if (column < 0)\n            pos.column = 0;\n\n        return pos;\n    };\n\n}).call(Anchor.prototype);\n\n});\n\nace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar applyDelta = acequire(\"./apply_delta\").applyDelta;\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\nvar Range = acequire(\"./range\").Range;\nvar Anchor = acequire(\"./anchor\").Anchor;\n\nvar Document = function(textOrLines) {\n    this.$lines = [\"\"];\n    if (textOrLines.length === 0) {\n        this.$lines = [\"\"];\n    } else if (Array.isArray(textOrLines)) {\n        this.insertMergedLines({row: 0, column: 0}, textOrLines);\n    } else {\n        this.insert({row: 0, column:0}, textOrLines);\n    }\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.setValue = function(text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({row: 0, column: 0}, text);\n    };\n    this.getValue = function() {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    };\n    this.createAnchor = function(row, column) {\n        return new Anchor(this, row, column);\n    };\n    if (\"aaa\".split(/a/).length === 0) {\n        this.$split = function(text) {\n            return text.replace(/\\r\\n|\\r/g, \"\\n\").split(\"\\n\");\n        };\n    } else {\n        this.$split = function(text) {\n            return text.split(/\\r\\n|\\r|\\n/);\n        };\n    }\n\n\n    this.$detectNewLine = function(text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineCharacter = function() {\n        switch (this.$newLineMode) {\n          case \"windows\":\n            return \"\\r\\n\";\n          case \"unix\":\n            return \"\\n\";\n          default:\n            return this.$autoNewLine || \"\\n\";\n        }\n    };\n\n    this.$autoNewLine = \"\";\n    this.$newLineMode = \"auto\";\n    this.setNewLineMode = function(newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineMode = function() {\n        return this.$newLineMode;\n    };\n    this.isNewLine = function(text) {\n        return (text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\");\n    };\n    this.getLine = function(row) {\n        return this.$lines[row] || \"\";\n    };\n    this.getLines = function(firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    };\n    this.getAllLines = function() {\n        return this.getLines(0, this.getLength());\n    };\n    this.getLength = function() {\n        return this.$lines.length;\n    };\n    this.getTextRange = function(range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    };\n    this.getLinesForRange = function(range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        } else {\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row == l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    };\n    this.insertLines = function(row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    };\n    this.removeLines = function(firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    };\n    this.insertNewLine = function(position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    };\n    this.insert = function(position, text) {\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n        \n        return this.insertMergedLines(position, this.$split(text));\n    };\n    this.insertInLine = function(position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n        \n        return this.clonePos(end);\n    };\n    \n    this.clippedPos = function(row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        } else if (row < 0) {\n            row = 0;\n        } else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column == undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return {row: row, column: column};\n    };\n    \n    this.clonePos = function(pos) {\n        return {row: pos.row, column: pos.column};\n    };\n    \n    this.pos = function(row, column) {\n        return {row: row, column: column};\n    };\n    \n    this.$clipPosition = function(position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        } else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    };\n    this.insertFullLines = function(row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        var column = 0;\n        if (row < this.getLength()) {\n            lines = lines.concat([\"\"]);\n            column = 0;\n        } else {\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n        this.insertMergedLines({row: row, column: column}, lines);\n    };    \n    this.insertMergedLines = function(position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n        \n        return this.clonePos(end);\n    };\n    this.remove = function(range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        });\n        return this.clonePos(start);\n    };\n    this.removeInLine = function(row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        }, true);\n        \n        return this.clonePos(start);\n    };\n    this.removeFullLines = function(firstRow, lastRow) {\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);\n        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine  = lastRow  < this.getLength() - 1;\n        var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );\n        var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );\n        var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );\n        var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length ); \n        var range = new Range(startRow, startCol, endRow, endCol);\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        \n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n        return deletedLines;\n    };\n    this.removeNewLine = function(row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    };\n    this.replace = function(range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n        if (text == this.getTextRange(range))\n            return range.end;\n\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n        \n        return end;\n    };\n    this.applyDeltas = function(deltas) {\n        for (var i=0; i<deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    };\n    this.revertDeltas = function(deltas) {\n        for (var i=deltas.length-1; i>=0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    };\n    this.applyDelta = function(delta, doNotValidate) {\n        var isInsert = delta.action == \"insert\";\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n        \n        if (isInsert && delta.lines.length > 20000)\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        applyDelta(this.$lines, delta, doNotValidate);\n        this._signal(\"change\", delta);\n    };\n    \n    this.$splitAndapplyLargeDelta = function(delta, MAX) {\n        var lines = delta.lines;\n        var l = lines.length;\n        var row = delta.start.row; \n        var column = delta.start.column;\n        var from = 0, to = 0;\n        do {\n            from = to;\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            if (to > l) {\n                delta.lines = chunk;\n                delta.start.row = row + from;\n                delta.start.column = column;\n                break;\n            }\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        } while(true);\n    };\n    this.revertDelta = function(delta) {\n        this.applyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action == \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    };\n    this.indexToPosition = function(index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return {row: i, column: index + lines[i].length + newlineLength};\n        }\n        return {row: l-1, column: lines[l-1].length};\n    };\n    this.positionToIndex = function(pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n\n        return index + pos.column;\n    };\n\n}).call(Document.prototype);\n\nexports.Document = Document;\n});\n\nace.define(\"ace/background_tokenizer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\n\nvar BackgroundTokenizer = function(tokenizer, editor) {\n    this.running = false;\n    this.lines = [];\n    this.states = [];\n    this.currentLine = 0;\n    this.tokenizer = tokenizer;\n\n    var self = this;\n\n    this.$worker = function() {\n        if (!self.running) { return; }\n\n        var workerStart = new Date();\n        var currentLine = self.currentLine;\n        var endLine = -1;\n        var doc = self.doc;\n\n        var startLine = currentLine;\n        while (self.lines[currentLine])\n            currentLine++;\n        \n        var len = doc.getLength();\n        var processedLines = 0;\n        self.running = false;\n        while (currentLine < len) {\n            self.$tokenizeRow(currentLine);\n            endLine = currentLine;\n            do {\n                currentLine++;\n            } while (self.lines[currentLine]);\n            processedLines ++;\n            if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {                \n                self.running = setTimeout(self.$worker, 20);\n                break;\n            }\n        }\n        self.currentLine = currentLine;\n        \n        if (endLine == -1)\n            endLine = currentLine;\n\n        if (startLine <= endLine)\n            self.fireUpdateEvent(startLine, endLine);\n    };\n};\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n    this.setTokenizer = function(tokenizer) {\n        this.tokenizer = tokenizer;\n        this.lines = [];\n        this.states = [];\n\n        this.start(0);\n    };\n    this.setDocument = function(doc) {\n        this.doc = doc;\n        this.lines = [];\n        this.states = [];\n\n        this.stop();\n    };\n    this.fireUpdateEvent = function(firstRow, lastRow) {\n        var data = {\n            first: firstRow,\n            last: lastRow\n        };\n        this._signal(\"update\", {data: data});\n    };\n    this.start = function(startRow) {\n        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());\n        this.lines.splice(this.currentLine, this.lines.length);\n        this.states.splice(this.currentLine, this.states.length);\n\n        this.stop();\n        this.running = setTimeout(this.$worker, 700);\n    };\n    \n    this.scheduleStart = function() {\n        if (!this.running)\n            this.running = setTimeout(this.$worker, 700);\n    };\n\n    this.$updateOnChange = function(delta) {\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n            this.lines[startRow] = null;\n        } else if (delta.action == \"remove\") {\n            this.lines.splice(startRow, len + 1, null);\n            this.states.splice(startRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(startRow, 1);\n            this.lines.splice.apply(this.lines, args);\n            this.states.splice.apply(this.states, args);\n        }\n\n        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());\n\n        this.stop();\n    };\n    this.stop = function() {\n        if (this.running)\n            clearTimeout(this.running);\n        this.running = false;\n    };\n    this.getTokens = function(row) {\n        return this.lines[row] || this.$tokenizeRow(row);\n    };\n    this.getState = function(row) {\n        if (this.currentLine == row)\n            this.$tokenizeRow(row);\n        return this.states[row] || \"start\";\n    };\n\n    this.$tokenizeRow = function(row) {\n        var line = this.doc.getLine(row);\n        var state = this.states[row - 1];\n\n        var data = this.tokenizer.getLineTokens(line, state, row);\n\n        if (this.states[row] + \"\" !== data.state + \"\") {\n            this.states[row] = data.state;\n            this.lines[row + 1] = null;\n            if (this.currentLine > row + 1)\n                this.currentLine = row + 1;\n        } else if (this.currentLine == row) {\n            this.currentLine = row + 1;\n        }\n\n        return this.lines[row] = data.tokens;\n    };\n\n}).call(BackgroundTokenizer.prototype);\n\nexports.BackgroundTokenizer = BackgroundTokenizer;\n});\n\nace.define(\"ace/search_highlight\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar lang = acequire(\"./lib/lang\");\nvar oop = acequire(\"./lib/oop\");\nvar Range = acequire(\"./range\").Range;\n\nvar SearchHighlight = function(regExp, clazz, type) {\n    this.setRegexp(regExp);\n    this.clazz = clazz;\n    this.type = type || \"text\";\n};\n\n(function() {\n    this.MAX_RANGES = 500;\n    \n    this.setRegexp = function(regExp) {\n        if (this.regExp+\"\" == regExp+\"\")\n            return;\n        this.regExp = regExp;\n        this.cache = [];\n    };\n\n    this.update = function(html, markerLayer, session, config) {\n        if (!this.regExp)\n            return;\n        var start = config.firstRow, end = config.lastRow;\n\n        for (var i = start; i <= end; i++) {\n            var ranges = this.cache[i];\n            if (ranges == null) {\n                ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);\n                if (ranges.length > this.MAX_RANGES)\n                    ranges = ranges.slice(0, this.MAX_RANGES);\n                ranges = ranges.map(function(match) {\n                    return new Range(i, match.offset, i, match.offset + match.length);\n                });\n                this.cache[i] = ranges.length ? ranges : \"\";\n            }\n\n            for (var j = ranges.length; j --; ) {\n                markerLayer.drawSingleLineMarker(\n                    html, ranges[j].toScreenRange(session), this.clazz, config);\n            }\n        }\n    };\n\n}).call(SearchHighlight.prototype);\n\nexports.SearchHighlight = SearchHighlight;\n});\n\nace.define(\"ace/edit_session/fold_line\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"../range\").Range;\nfunction FoldLine(foldData, folds) {\n    this.foldData = foldData;\n    if (Array.isArray(folds)) {\n        this.folds = folds;\n    } else {\n        folds = this.folds = [ folds ];\n    }\n\n    var last = folds[folds.length - 1];\n    this.range = new Range(folds[0].start.row, folds[0].start.column,\n                           last.end.row, last.end.column);\n    this.start = this.range.start;\n    this.end   = this.range.end;\n\n    this.folds.forEach(function(fold) {\n        fold.setFoldLine(this);\n    }, this);\n}\n\n(function() {\n    this.shiftRow = function(shift) {\n        this.start.row += shift;\n        this.end.row += shift;\n        this.folds.forEach(function(fold) {\n            fold.start.row += shift;\n            fold.end.row += shift;\n        });\n    };\n\n    this.addFold = function(fold) {\n        if (fold.sameRow) {\n            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {\n                throw new Error(\"Can't add a fold to this FoldLine as it has no connection\");\n            }\n            this.folds.push(fold);\n            this.folds.sort(function(a, b) {\n                return -a.range.compareEnd(b.start.row, b.start.column);\n            });\n            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {\n                this.end.row = fold.end.row;\n                this.end.column =  fold.end.column;\n            } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {\n                this.start.row = fold.start.row;\n                this.start.column = fold.start.column;\n            }\n        } else if (fold.start.row == this.end.row) {\n            this.folds.push(fold);\n            this.end.row = fold.end.row;\n            this.end.column = fold.end.column;\n        } else if (fold.end.row == this.start.row) {\n            this.folds.unshift(fold);\n            this.start.row = fold.start.row;\n            this.start.column = fold.start.column;\n        } else {\n            throw new Error(\"Trying to add fold to FoldRow that doesn't have a matching row\");\n        }\n        fold.foldLine = this;\n    };\n\n    this.containsRow = function(row) {\n        return row >= this.start.row && row <= this.end.row;\n    };\n\n    this.walk = function(callback, endRow, endColumn) {\n        var lastEnd = 0,\n            folds = this.folds,\n            fold,\n            cmp, stop, isNewRow = true;\n\n        if (endRow == null) {\n            endRow = this.end.row;\n            endColumn = this.end.column;\n        }\n\n        for (var i = 0; i < folds.length; i++) {\n            fold = folds[i];\n\n            cmp = fold.range.compareStart(endRow, endColumn);\n            if (cmp == -1) {\n                callback(null, endRow, endColumn, lastEnd, isNewRow);\n                return;\n            }\n\n            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);\n            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);\n            if (stop || cmp === 0) {\n                return;\n            }\n            isNewRow = !fold.sameRow;\n            lastEnd = fold.end.column;\n        }\n        callback(null, endRow, endColumn, lastEnd, isNewRow);\n    };\n\n    this.getNextFoldTo = function(row, column) {\n        var fold, cmp;\n        for (var i = 0; i < this.folds.length; i++) {\n            fold = this.folds[i];\n            cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                return {\n                    fold: fold,\n                    kind: \"after\"\n                };\n            } else if (cmp === 0) {\n                return {\n                    fold: fold,\n                    kind: \"inside\"\n                };\n            }\n        }\n        return null;\n    };\n\n    this.addRemoveChars = function(row, column, len) {\n        var ret = this.getNextFoldTo(row, column),\n            fold, folds;\n        if (ret) {\n            fold = ret.fold;\n            if (ret.kind == \"inside\"\n                && fold.start.column != column\n                && fold.start.row != row)\n            {\n                window.console && window.console.log(row, column, fold);\n            } else if (fold.start.row == row) {\n                folds = this.folds;\n                var i = folds.indexOf(fold);\n                if (i === 0) {\n                    this.start.column += len;\n                }\n                for (i; i < folds.length; i++) {\n                    fold = folds[i];\n                    fold.start.column += len;\n                    if (!fold.sameRow) {\n                        return;\n                    }\n                    fold.end.column += len;\n                }\n                this.end.column += len;\n            }\n        }\n    };\n\n    this.split = function(row, column) {\n        var pos = this.getNextFoldTo(row, column);\n        \n        if (!pos || pos.kind == \"inside\")\n            return null;\n            \n        var fold = pos.fold;\n        var folds = this.folds;\n        var foldData = this.foldData;\n        \n        var i = folds.indexOf(fold);\n        var foldBefore = folds[i - 1];\n        this.end.row = foldBefore.end.row;\n        this.end.column = foldBefore.end.column;\n        folds = folds.splice(i, folds.length - i);\n\n        var newFoldLine = new FoldLine(foldData, folds);\n        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);\n        return newFoldLine;\n    };\n\n    this.merge = function(foldLineNext) {\n        var folds = foldLineNext.folds;\n        for (var i = 0; i < folds.length; i++) {\n            this.addFold(folds[i]);\n        }\n        var foldData = this.foldData;\n        foldData.splice(foldData.indexOf(foldLineNext), 1);\n    };\n\n    this.toString = function() {\n        var ret = [this.range.toString() + \": [\" ];\n\n        this.folds.forEach(function(fold) {\n            ret.push(\"  \" + fold.toString());\n        });\n        ret.push(\"]\");\n        return ret.join(\"\\n\");\n    };\n\n    this.idxToPosition = function(idx) {\n        var lastFoldEndColumn = 0;\n\n        for (var i = 0; i < this.folds.length; i++) {\n            var fold = this.folds[i];\n\n            idx -= fold.start.column - lastFoldEndColumn;\n            if (idx < 0) {\n                return {\n                    row: fold.start.row,\n                    column: fold.start.column + idx\n                };\n            }\n\n            idx -= fold.placeholder.length;\n            if (idx < 0) {\n                return fold.start;\n            }\n\n            lastFoldEndColumn = fold.end.column;\n        }\n\n        return {\n            row: this.end.row,\n            column: this.end.column + idx\n        };\n    };\n}).call(FoldLine.prototype);\n\nexports.FoldLine = FoldLine;\n});\n\nace.define(\"ace/range_list\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\nvar Range = acequire(\"./range\").Range;\nvar comparePoints = Range.comparePoints;\n\nvar RangeList = function() {\n    this.ranges = [];\n};\n\n(function() {\n    this.comparePoints = comparePoints;\n\n    this.pointIndex = function(pos, excludeEdges, startIndex) {\n        var list = this.ranges;\n\n        for (var i = startIndex || 0; i < list.length; i++) {\n            var range = list[i];\n            var cmpEnd = comparePoints(pos, range.end);\n            if (cmpEnd > 0)\n                continue;\n            var cmpStart = comparePoints(pos, range.start);\n            if (cmpEnd === 0)\n                return excludeEdges && cmpStart !== 0 ? -i-2 : i;\n            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))\n                return i;\n\n            return -i-1;\n        }\n        return -i - 1;\n    };\n\n    this.add = function(range) {\n        var excludeEdges = !range.isEmpty();\n        var startIndex = this.pointIndex(range.start, excludeEdges);\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n\n        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);\n\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        else\n            endIndex++;\n        return this.ranges.splice(startIndex, endIndex - startIndex, range);\n    };\n\n    this.addList = function(list) {\n        var removed = [];\n        for (var i = list.length; i--; ) {\n            removed.push.apply(removed, this.add(list[i]));\n        }\n        return removed;\n    };\n\n    this.substractPoint = function(pos) {\n        var i = this.pointIndex(pos);\n\n        if (i >= 0)\n            return this.ranges.splice(i, 1);\n    };\n    this.merge = function() {\n        var removed = [];\n        var list = this.ranges;\n        \n        list = list.sort(function(a, b) {\n            return comparePoints(a.start, b.start);\n        });\n        \n        var next = list[0], range;\n        for (var i = 1; i < list.length; i++) {\n            range = next;\n            next = list[i];\n            var cmp = comparePoints(range.end, next.start);\n            if (cmp < 0)\n                continue;\n\n            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())\n                continue;\n\n            if (comparePoints(range.end, next.end) < 0) {\n                range.end.row = next.end.row;\n                range.end.column = next.end.column;\n            }\n\n            list.splice(i, 1);\n            removed.push(next);\n            next = range;\n            i--;\n        }\n        \n        this.ranges = list;\n\n        return removed;\n    };\n\n    this.contains = function(row, column) {\n        return this.pointIndex({row: row, column: column}) >= 0;\n    };\n\n    this.containsPoint = function(pos) {\n        return this.pointIndex(pos) >= 0;\n    };\n\n    this.rangeAtPoint = function(pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges[i];\n    };\n\n\n    this.clipRows = function(startRow, endRow) {\n        var list = this.ranges;\n        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)\n            return [];\n\n        var startIndex = this.pointIndex({row: startRow, column: 0});\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        var endIndex = this.pointIndex({row: endRow, column: 0}, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n\n        var clipped = [];\n        for (var i = startIndex; i < endIndex; i++) {\n            clipped.push(list[i]);\n        }\n        return clipped;\n    };\n\n    this.removeAll = function() {\n        return this.ranges.splice(0, this.ranges.length);\n    };\n\n    this.attach = function(session) {\n        if (this.session)\n            this.detach();\n\n        this.session = session;\n        this.onChange = this.$onChange.bind(this);\n\n        this.session.on('change', this.onChange);\n    };\n\n    this.detach = function() {\n        if (!this.session)\n            return;\n        this.session.removeListener('change', this.onChange);\n        this.session = null;\n    };\n\n    this.$onChange = function(delta) {\n        if (delta.action == \"insert\"){\n            var start = delta.start;\n            var end = delta.end;\n        } else {\n            var end = delta.start;\n            var start = delta.end;\n        }\n        var startRow = start.row;\n        var endRow = end.row;\n        var lineDif = endRow - startRow;\n\n        var colDiff = -start.column + end.column;\n        var ranges = this.ranges;\n\n        for (var i = 0, n = ranges.length; i < n; i++) {\n            var r = ranges[i];\n            if (r.end.row < startRow)\n                continue;\n            if (r.start.row > startRow)\n                break;\n\n            if (r.start.row == startRow && r.start.column >= start.column ) {\n                if (r.start.column == start.column && this.$insertRight) {\n                } else {\n                    r.start.column += colDiff;\n                    r.start.row += lineDif;\n                }\n            }\n            if (r.end.row == startRow && r.end.column >= start.column) {\n                if (r.end.column == start.column && this.$insertRight) {\n                    continue;\n                }\n                if (r.end.column == start.column && colDiff > 0 && i < n - 1) {                \n                    if (r.end.column > r.start.column && r.end.column == ranges[i+1].start.column)\n                        r.end.column -= colDiff;\n                }\n                r.end.column += colDiff;\n                r.end.row += lineDif;\n            }\n        }\n\n        if (lineDif != 0 && i < n) {\n            for (; i < n; i++) {\n                var r = ranges[i];\n                r.start.row += lineDif;\n                r.end.row += lineDif;\n            }\n        }\n    };\n\n}).call(RangeList.prototype);\n\nexports.RangeList = RangeList;\n});\n\nace.define(\"ace/edit_session/fold\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/range_list\",\"ace/lib/oop\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"../range\").Range;\nvar RangeList = acequire(\"../range_list\").RangeList;\nvar oop = acequire(\"../lib/oop\");\nvar Fold = exports.Fold = function(range, placeholder) {\n    this.foldLine = null;\n    this.placeholder = placeholder;\n    this.range = range;\n    this.start = range.start;\n    this.end = range.end;\n\n    this.sameRow = range.start.row == range.end.row;\n    this.subFolds = this.ranges = [];\n};\n\noop.inherits(Fold, RangeList);\n\n(function() {\n\n    this.toString = function() {\n        return '\"' + this.placeholder + '\" ' + this.range.toString();\n    };\n\n    this.setFoldLine = function(foldLine) {\n        this.foldLine = foldLine;\n        this.subFolds.forEach(function(fold) {\n            fold.setFoldLine(foldLine);\n        });\n    };\n\n    this.clone = function() {\n        var range = this.range.clone();\n        var fold = new Fold(range, this.placeholder);\n        this.subFolds.forEach(function(subFold) {\n            fold.subFolds.push(subFold.clone());\n        });\n        fold.collapseChildren = this.collapseChildren;\n        return fold;\n    };\n\n    this.addSubFold = function(fold) {\n        if (this.range.isEqual(fold))\n            return;\n\n        if (!this.range.containsRange(fold))\n            throw new Error(\"A fold can't intersect already existing fold\" + fold.range + this.range);\n        consumeRange(fold, this.start);\n\n        var row = fold.start.row, column = fold.start.column;\n        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {\n            cmp = this.subFolds[i].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        var afterStart = this.subFolds[i];\n\n        if (cmp == 0)\n            return afterStart.addSubFold(fold);\n        var row = fold.range.end.row, column = fold.range.end.column;\n        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {\n            cmp = this.subFolds[j].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        var afterEnd = this.subFolds[j];\n\n        if (cmp == 0)\n            throw new Error(\"A fold can't intersect already existing fold\" + fold.range + this.range);\n\n        var consumedFolds = this.subFolds.splice(i, j - i, fold);\n        fold.setFoldLine(this.foldLine);\n\n        return fold;\n    };\n    \n    this.restoreRange = function(range) {\n        return restoreRange(range, this.start);\n    };\n\n}).call(Fold.prototype);\n\nfunction consumePoint(point, anchor) {\n    point.row -= anchor.row;\n    if (point.row == 0)\n        point.column -= anchor.column;\n}\nfunction consumeRange(range, anchor) {\n    consumePoint(range.start, anchor);\n    consumePoint(range.end, anchor);\n}\nfunction restorePoint(point, anchor) {\n    if (point.row == 0)\n        point.column += anchor.column;\n    point.row += anchor.row;\n}\nfunction restoreRange(range, anchor) {\n    restorePoint(range.start, anchor);\n    restorePoint(range.end, anchor);\n}\n\n});\n\nace.define(\"ace/edit_session/folding\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/edit_session/fold_line\",\"ace/edit_session/fold\",\"ace/token_iterator\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"../range\").Range;\nvar FoldLine = acequire(\"./fold_line\").FoldLine;\nvar Fold = acequire(\"./fold\").Fold;\nvar TokenIterator = acequire(\"../token_iterator\").TokenIterator;\n\nfunction Folding() {\n    this.getFoldAt = function(row, column, side) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var folds = foldLine.folds;\n        for (var i = 0; i < folds.length; i++) {\n            var fold = folds[i];\n            if (fold.range.contains(row, column)) {\n                if (side == 1 && fold.range.isEnd(row, column)) {\n                    continue;\n                } else if (side == -1 && fold.range.isStart(row, column)) {\n                    continue;\n                }\n                return fold;\n            }\n        }\n    };\n    this.getFoldsInRange = function(range) {\n        var start = range.start;\n        var end = range.end;\n        var foldLines = this.$foldData;\n        var foundFolds = [];\n\n        start.column += 1;\n        end.column -= 1;\n\n        for (var i = 0; i < foldLines.length; i++) {\n            var cmp = foldLines[i].range.compareRange(range);\n            if (cmp == 2) {\n                continue;\n            }\n            else if (cmp == -2) {\n                break;\n            }\n\n            var folds = foldLines[i].folds;\n            for (var j = 0; j < folds.length; j++) {\n                var fold = folds[j];\n                cmp = fold.range.compareRange(range);\n                if (cmp == -2) {\n                    break;\n                } else if (cmp == 2) {\n                    continue;\n                } else\n                if (cmp == 42) {\n                    break;\n                }\n                foundFolds.push(fold);\n            }\n        }\n        start.column -= 1;\n        end.column += 1;\n\n        return foundFolds;\n    };\n\n    this.getFoldsInRangeList = function(ranges) {\n        if (Array.isArray(ranges)) {\n            var folds = [];\n            ranges.forEach(function(range) {\n                folds = folds.concat(this.getFoldsInRange(range));\n            }, this);\n        } else {\n            var folds = this.getFoldsInRange(ranges);\n        }\n        return folds;\n    };\n    this.getAllFolds = function() {\n        var folds = [];\n        var foldLines = this.$foldData;\n        \n        for (var i = 0; i < foldLines.length; i++)\n            for (var j = 0; j < foldLines[i].folds.length; j++)\n                folds.push(foldLines[i].folds[j]);\n\n        return folds;\n    };\n    this.getFoldStringAt = function(row, column, trim, foldLine) {\n        foldLine = foldLine || this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var lastFold = {\n            end: { column: 0 }\n        };\n        var str, fold;\n        for (var i = 0; i < foldLine.folds.length; i++) {\n            fold = foldLine.folds[i];\n            var cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                str = this\n                    .getLine(fold.start.row)\n                    .substring(lastFold.end.column, fold.start.column);\n                break;\n            }\n            else if (cmp === 0) {\n                return null;\n            }\n            lastFold = fold;\n        }\n        if (!str)\n            str = this.getLine(fold.start.row).substring(lastFold.end.column);\n\n        if (trim == -1)\n            return str.substring(0, column - lastFold.end.column);\n        else if (trim == 1)\n            return str.substring(column - lastFold.end.column);\n        else\n            return str;\n    };\n\n    this.getFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {\n                return foldLine;\n            } else if (foldLine.end.row > docRow) {\n                return null;\n            }\n        }\n        return null;\n    };\n    this.getNextFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n        }\n        return null;\n    };\n\n    this.getFoldedRowCount = function(first, last) {\n        var foldData = this.$foldData, rowCount = last-first+1;\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i],\n                end = foldLine.end.row,\n                start = foldLine.start.row;\n            if (end >= last) {\n                if (start < last) {\n                    if (start >= first)\n                        rowCount -= last-start;\n                    else\n                        rowCount = 0; // in one fold\n                }\n                break;\n            } else if (end >= first){\n                if (start >= first) // fold inside range\n                    rowCount -=  end-start;\n                else\n                    rowCount -=  end-first+1;\n            }\n        }\n        return rowCount;\n    };\n\n    this.$addFoldLine = function(foldLine) {\n        this.$foldData.push(foldLine);\n        this.$foldData.sort(function(a, b) {\n            return a.start.row - b.start.row;\n        });\n        return foldLine;\n    };\n    this.addFold = function(placeholder, range) {\n        var foldData = this.$foldData;\n        var added = false;\n        var fold;\n        \n        if (placeholder instanceof Fold)\n            fold = placeholder;\n        else {\n            fold = new Fold(range, placeholder);\n            fold.collapseChildren = range.collapseChildren;\n        }\n        this.$clipRangeToDocument(fold.range);\n\n        var startRow = fold.start.row;\n        var startColumn = fold.start.column;\n        var endRow = fold.end.row;\n        var endColumn = fold.end.column;\n        if (!(startRow < endRow || \n            startRow == endRow && startColumn <= endColumn - 2))\n            throw new Error(\"The range has to be at least 2 characters width\");\n\n        var startFold = this.getFoldAt(startRow, startColumn, 1);\n        var endFold = this.getFoldAt(endRow, endColumn, -1);\n        if (startFold && endFold == startFold)\n            return startFold.addSubFold(fold);\n\n        if (startFold && !startFold.range.isStart(startRow, startColumn))\n            this.removeFold(startFold);\n        \n        if (endFold && !endFold.range.isEnd(endRow, endColumn))\n            this.removeFold(endFold);\n        var folds = this.getFoldsInRange(fold.range);\n        if (folds.length > 0) {\n            this.removeFolds(folds);\n            folds.forEach(function(subFold) {\n                fold.addSubFold(subFold);\n            });\n        }\n\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (endRow == foldLine.start.row) {\n                foldLine.addFold(fold);\n                added = true;\n                break;\n            } else if (startRow == foldLine.end.row) {\n                foldLine.addFold(fold);\n                added = true;\n                if (!fold.sameRow) {\n                    var foldLineNext = foldData[i + 1];\n                    if (foldLineNext && foldLineNext.start.row == endRow) {\n                        foldLine.merge(foldLineNext);\n                        break;\n                    }\n                }\n                break;\n            } else if (endRow <= foldLine.start.row) {\n                break;\n            }\n        }\n\n        if (!added)\n            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));\n\n        if (this.$useWrapMode)\n            this.$updateWrapData(foldLine.start.row, foldLine.start.row);\n        else\n            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"add\" });\n\n        return fold;\n    };\n\n    this.addFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.addFold(fold);\n        }, this);\n    };\n\n    this.removeFold = function(fold) {\n        var foldLine = fold.foldLine;\n        var startRow = foldLine.start.row;\n        var endRow = foldLine.end.row;\n\n        var foldLines = this.$foldData;\n        var folds = foldLine.folds;\n        if (folds.length == 1) {\n            foldLines.splice(foldLines.indexOf(foldLine), 1);\n        } else\n        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {\n            folds.pop();\n            foldLine.end.row = folds[folds.length - 1].end.row;\n            foldLine.end.column = folds[folds.length - 1].end.column;\n        } else\n        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {\n            folds.shift();\n            foldLine.start.row = folds[0].start.row;\n            foldLine.start.column = folds[0].start.column;\n        } else\n        if (fold.sameRow) {\n            folds.splice(folds.indexOf(fold), 1);\n        } else\n        {\n            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);\n            folds = newFoldLine.folds;\n            folds.shift();\n            newFoldLine.start.row = folds[0].start.row;\n            newFoldLine.start.column = folds[0].start.column;\n        }\n\n        if (!this.$updating) {\n            if (this.$useWrapMode)\n                this.$updateWrapData(startRow, endRow);\n            else\n                this.$updateRowLengthCache(startRow, endRow);\n        }\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"remove\" });\n    };\n\n    this.removeFolds = function(folds) {\n        var cloneFolds = [];\n        for (var i = 0; i < folds.length; i++) {\n            cloneFolds.push(folds[i]);\n        }\n\n        cloneFolds.forEach(function(fold) {\n            this.removeFold(fold);\n        }, this);\n        this.$modified = true;\n    };\n\n    this.expandFold = function(fold) {\n        this.removeFold(fold);\n        fold.subFolds.forEach(function(subFold) {\n            fold.restoreRange(subFold);\n            this.addFold(subFold);\n        }, this);\n        if (fold.collapseChildren > 0) {\n            this.foldAll(fold.start.row+1, fold.end.row, fold.collapseChildren-1);\n        }\n        fold.subFolds = [];\n    };\n\n    this.expandFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.expandFold(fold);\n        }, this);\n    };\n\n    this.unfold = function(location, expandInner) {\n        var range, folds;\n        if (location == null) {\n            range = new Range(0, 0, this.getLength(), 0);\n            expandInner = true;\n        } else if (typeof location == \"number\")\n            range = new Range(location, 0, location, this.getLine(location).length);\n        else if (\"row\" in location)\n            range = Range.fromPoints(location, location);\n        else\n            range = location;\n        \n        folds = this.getFoldsInRangeList(range);\n        if (expandInner) {\n            this.removeFolds(folds);\n        } else {\n            var subFolds = folds;\n            while (subFolds.length) {\n                this.expandFolds(subFolds);\n                subFolds = this.getFoldsInRangeList(range);\n            }\n        }\n        if (folds.length)\n            return folds;\n    };\n    this.isRowFolded = function(docRow, startFoldRow) {\n        return !!this.getFoldLine(docRow, startFoldRow);\n    };\n\n    this.getRowFoldEnd = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.end.row : docRow;\n    };\n\n    this.getRowFoldStart = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.start.row : docRow;\n    };\n\n    this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {\n        if (startRow == null)\n            startRow = foldLine.start.row;\n        if (startColumn == null)\n            startColumn = 0;\n        if (endRow == null)\n            endRow = foldLine.end.row;\n        if (endColumn == null)\n            endColumn = this.getLine(endRow).length;\n        var doc = this.doc;\n        var textLine = \"\";\n\n        foldLine.walk(function(placeholder, row, column, lastColumn) {\n            if (row < startRow)\n                return;\n            if (row == startRow) {\n                if (column < startColumn)\n                    return;\n                lastColumn = Math.max(startColumn, lastColumn);\n            }\n\n            if (placeholder != null) {\n                textLine += placeholder;\n            } else {\n                textLine += doc.getLine(row).substring(lastColumn, column);\n            }\n        }, endRow, endColumn);\n        return textLine;\n    };\n\n    this.getDisplayLine = function(row, endColumn, startRow, startColumn) {\n        var foldLine = this.getFoldLine(row);\n\n        if (!foldLine) {\n            var line;\n            line = this.doc.getLine(row);\n            return line.substring(startColumn || 0, endColumn || line.length);\n        } else {\n            return this.getFoldDisplayLine(\n                foldLine, row, endColumn, startRow, startColumn);\n        }\n    };\n\n    this.$cloneFoldData = function() {\n        var fd = [];\n        fd = this.$foldData.map(function(foldLine) {\n            var folds = foldLine.folds.map(function(fold) {\n                return fold.clone();\n            });\n            return new FoldLine(fd, folds);\n        });\n\n        return fd;\n    };\n\n    this.toggleFold = function(tryToUnfold) {\n        var selection = this.selection;\n        var range = selection.getRange();\n        var fold;\n        var bracketPos;\n\n        if (range.isEmpty()) {\n            var cursor = range.start;\n            fold = this.getFoldAt(cursor.row, cursor.column);\n\n            if (fold) {\n                this.expandFold(fold);\n                return;\n            } else if (bracketPos = this.findMatchingBracket(cursor)) {\n                if (range.comparePoint(bracketPos) == 1) {\n                    range.end = bracketPos;\n                } else {\n                    range.start = bracketPos;\n                    range.start.column++;\n                    range.end.column--;\n                }\n            } else if (bracketPos = this.findMatchingBracket({row: cursor.row, column: cursor.column + 1})) {\n                if (range.comparePoint(bracketPos) == 1)\n                    range.end = bracketPos;\n                else\n                    range.start = bracketPos;\n\n                range.start.column++;\n            } else {\n                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;\n            }\n        } else {\n            var folds = this.getFoldsInRange(range);\n            if (tryToUnfold && folds.length) {\n                this.expandFolds(folds);\n                return;\n            } else if (folds.length == 1 ) {\n                fold = folds[0];\n            }\n        }\n\n        if (!fold)\n            fold = this.getFoldAt(range.start.row, range.start.column);\n\n        if (fold && fold.range.toString() == range.toString()) {\n            this.expandFold(fold);\n            return;\n        }\n\n        var placeholder = \"...\";\n        if (!range.isMultiLine()) {\n            placeholder = this.getTextRange(range);\n            if (placeholder.length < 4)\n                return;\n            placeholder = placeholder.trim().substring(0, 2) + \"..\";\n        }\n\n        this.addFold(placeholder, range);\n    };\n\n    this.getCommentFoldRange = function(row, column, dir) {\n        var iterator = new TokenIterator(this, row, column);\n        var token = iterator.getCurrentToken();\n        var type = token.type;\n        if (token && /^comment|string/.test(type)) {\n            type = type.match(/comment|string/)[0];\n            if (type == \"comment\")\n                type += \"|doc-start\";\n            var re = new RegExp(type);\n            var range = new Range();\n            if (dir != 1) {\n                do {\n                    token = iterator.stepBackward();\n                } while (token && re.test(token.type));\n                iterator.stepForward();\n            }\n            \n            range.start.row = iterator.getCurrentTokenRow();\n            range.start.column = iterator.getCurrentTokenColumn() + 2;\n\n            iterator = new TokenIterator(this, row, column);\n            \n            if (dir != -1) {\n                var lastRow = -1;\n                do {\n                    token = iterator.stepForward();\n                    if (lastRow == -1) {\n                        var state = this.getState(iterator.$row);\n                        if (!re.test(state))\n                            lastRow = iterator.$row;\n                    } else if (iterator.$row > lastRow) {\n                        break;\n                    }\n                } while (token && re.test(token.type));\n                token = iterator.stepBackward();\n            } else\n                token = iterator.getCurrentToken();\n\n            range.end.row = iterator.getCurrentTokenRow();\n            range.end.column = iterator.getCurrentTokenColumn() + token.value.length - 2;\n            return range;\n        }\n    };\n\n    this.foldAll = function(startRow, endRow, depth) {\n        if (depth == undefined)\n            depth = 100000; // JSON.stringify doesn't hanle Infinity\n        var foldWidgets = this.foldWidgets;\n        if (!foldWidgets)\n            return; // mode doesn't support folding\n        endRow = endRow || this.getLength();\n        startRow = startRow || 0;\n        for (var row = startRow; row < endRow; row++) {\n            if (foldWidgets[row] == null)\n                foldWidgets[row] = this.getFoldWidget(row);\n            if (foldWidgets[row] != \"start\")\n                continue;\n\n            var range = this.getFoldWidgetRange(row);\n            if (range && range.isMultiLine()\n                && range.end.row <= endRow\n                && range.start.row >= startRow\n            ) {\n                row = range.end.row;\n                try {\n                    var fold = this.addFold(\"...\", range);\n                    if (fold)\n                        fold.collapseChildren = depth;\n                } catch(e) {}\n            }\n        }\n    };\n    this.$foldStyles = {\n        \"manual\": 1,\n        \"markbegin\": 1,\n        \"markbeginend\": 1\n    };\n    this.$foldStyle = \"markbegin\";\n    this.setFoldStyle = function(style) {\n        if (!this.$foldStyles[style])\n            throw new Error(\"invalid fold style: \" + style + \"[\" + Object.keys(this.$foldStyles).join(\", \") + \"]\");\n        \n        if (this.$foldStyle == style)\n            return;\n\n        this.$foldStyle = style;\n        \n        if (style == \"manual\")\n            this.unfold();\n        var mode = this.$foldMode;\n        this.$setFolding(null);\n        this.$setFolding(mode);\n    };\n\n    this.$setFolding = function(foldMode) {\n        if (this.$foldMode == foldMode)\n            return;\n            \n        this.$foldMode = foldMode;\n        \n        this.off('change', this.$updateFoldWidgets);\n        this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n        this._signal(\"changeAnnotation\");\n        \n        if (!foldMode || this.$foldStyle == \"manual\") {\n            this.foldWidgets = null;\n            return;\n        }\n        \n        this.foldWidgets = [];\n        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);\n        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);\n        \n        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);\n        this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);\n        this.on('change', this.$updateFoldWidgets);\n        this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n    };\n\n    this.getParentFoldRangeData = function (row, ignoreCurrent) {\n        var fw = this.foldWidgets;\n        if (!fw || (ignoreCurrent && fw[row]))\n            return {};\n\n        var i = row - 1, firstRange;\n        while (i >= 0) {\n            var c = fw[i];\n            if (c == null)\n                c = fw[i] = this.getFoldWidget(i);\n\n            if (c == \"start\") {\n                var range = this.getFoldWidgetRange(i);\n                if (!firstRange)\n                    firstRange = range;\n                if (range && range.end.row >= row)\n                    break;\n            }\n            i--;\n        }\n\n        return {\n            range: i !== -1 && range,\n            firstRange: firstRange\n        };\n    };\n\n    this.onFoldWidgetClick = function(row, e) {\n        e = e.domEvent;\n        var options = {\n            children: e.shiftKey,\n            all: e.ctrlKey || e.metaKey,\n            siblings: e.altKey\n        };\n        \n        var range = this.$toggleFoldWidget(row, options);\n        if (!range) {\n            var el = (e.target || e.srcElement);\n            if (el && /ace_fold-widget/.test(el.className))\n                el.className += \" ace_invalid\";\n        }\n    };\n    \n    this.$toggleFoldWidget = function(row, options) {\n        if (!this.getFoldWidget)\n            return;\n        var type = this.getFoldWidget(row);\n        var line = this.getLine(row);\n\n        var dir = type === \"end\" ? -1 : 1;\n        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);\n\n        if (fold) {\n            if (options.children || options.all)\n                this.removeFold(fold);\n            else\n                this.expandFold(fold);\n            return fold;\n        }\n\n        var range = this.getFoldWidgetRange(row, true);\n        if (range && !range.isMultiLine()) {\n            fold = this.getFoldAt(range.start.row, range.start.column, 1);\n            if (fold && range.isEqual(fold.range)) {\n                this.removeFold(fold);\n                return fold;\n            }\n        }\n        \n        if (options.siblings) {\n            var data = this.getParentFoldRangeData(row);\n            if (data.range) {\n                var startRow = data.range.start.row + 1;\n                var endRow = data.range.end.row;\n            }\n            this.foldAll(startRow, endRow, options.all ? 10000 : 0);\n        } else if (options.children) {\n            endRow = range ? range.end.row : this.getLength();\n            this.foldAll(row + 1, endRow, options.all ? 10000 : 0);\n        } else if (range) {\n            if (options.all) \n                range.collapseChildren = 10000;\n            this.addFold(\"...\", range);\n        }\n        \n        return range;\n    };\n    \n    \n    \n    this.toggleFoldWidget = function(toggleParent) {\n        var row = this.selection.getCursor().row;\n        row = this.getRowFoldStart(row);\n        var range = this.$toggleFoldWidget(row, {});\n        \n        if (range)\n            return;\n        var data = this.getParentFoldRangeData(row, true);\n        range = data.range || data.firstRange;\n        \n        if (range) {\n            row = range.start.row;\n            var fold = this.getFoldAt(row, this.getLine(row).length, 1);\n\n            if (fold) {\n                this.removeFold(fold);\n            } else {\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n\n    this.updateFoldWidgets = function(delta) {\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n\n        if (len === 0) {\n            this.foldWidgets[firstRow] = null;\n        } else if (delta.action == 'remove') {\n            this.foldWidgets.splice(firstRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.foldWidgets.splice.apply(this.foldWidgets, args);\n        }\n    };\n    this.tokenizerUpdateFoldWidgets = function(e) {\n        var rows = e.data;\n        if (rows.first != rows.last) {\n            if (this.foldWidgets.length > rows.first)\n                this.foldWidgets.splice(rows.first, this.foldWidgets.length);\n        }\n    };\n}\n\nexports.Folding = Folding;\n\n});\n\nace.define(\"ace/edit_session/bracket_match\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar TokenIterator = acequire(\"../token_iterator\").TokenIterator;\nvar Range = acequire(\"../range\").Range;\n\n\nfunction BracketMatch() {\n\n    this.findMatchingBracket = function(position, chr) {\n        if (position.column == 0) return null;\n\n        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column-1);\n        if (charBeforeCursor == \"\") return null;\n\n        var match = charBeforeCursor.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match)\n            return null;\n\n        if (match[1])\n            return this.$findClosingBracket(match[1], position);\n        else\n            return this.$findOpeningBracket(match[2], position);\n    };\n    \n    this.getBracketRange = function(pos) {\n        var line = this.getLine(pos.row);\n        var before = true, range;\n\n        var chr = line.charAt(pos.column-1);\n        var match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match) {\n            chr = line.charAt(pos.column);\n            pos = {row: pos.row, column: pos.column + 1};\n            match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n            before = false;\n        }\n        if (!match)\n            return null;\n\n        if (match[1]) {\n            var bracketPos = this.$findClosingBracket(match[1], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(pos, bracketPos);\n            if (!before) {\n                range.end.column++;\n                range.start.column--;\n            }\n            range.cursor = range.end;\n        } else {\n            var bracketPos = this.$findOpeningBracket(match[2], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(bracketPos, pos);\n            if (!before) {\n                range.start.column++;\n                range.end.column--;\n            }\n            range.cursor = range.start;\n        }\n        \n        return range;\n    };\n\n    this.$brackets = {\n        \")\": \"(\",\n        \"(\": \")\",\n        \"]\": \"[\",\n        \"[\": \"]\",\n        \"{\": \"}\",\n        \"}\": \"{\"\n    };\n\n    this.$findOpeningBracket = function(bracket, position, typeRe) {\n        var openBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        \n         if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"rparen\", \".paren\")\n                    .replace(/\\b(?:end)\\b/, \"(?:start|begin|end)\")\n                + \")+\"\n            );\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;\n        var value = token.value;\n        \n        while (true) {\n        \n            while (valueIndex >= 0) {\n                var chr = value.charAt(valueIndex);\n                if (chr == openBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex -= 1;\n            }\n            do {\n                token = iterator.stepBackward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n                \n            value = token.value;\n            valueIndex = value.length - 1;\n        }\n        \n        return null;\n    };\n\n    this.$findClosingBracket = function(bracket, position, typeRe) {\n        var closingBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n\n        if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"lparen\", \".paren\")\n                    .replace(/\\b(?:start|begin)\\b/, \"(?:start|begin|end)\")\n                + \")+\"\n            );\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn();\n\n        while (true) {\n\n            var value = token.value;\n            var valueLength = value.length;\n            while (valueIndex < valueLength) {\n                var chr = value.charAt(valueIndex);\n                if (chr == closingBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex += 1;\n            }\n            do {\n                token = iterator.stepForward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n\n            valueIndex = 0;\n        }\n        \n        return null;\n    };\n}\nexports.BracketMatch = BracketMatch;\n\n});\n\nace.define(\"ace/edit_session\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/bidihandler\",\"ace/config\",\"ace/lib/event_emitter\",\"ace/selection\",\"ace/mode/text\",\"ace/range\",\"ace/document\",\"ace/background_tokenizer\",\"ace/search_highlight\",\"ace/edit_session/folding\",\"ace/edit_session/bracket_match\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar lang = acequire(\"./lib/lang\");\nvar BidiHandler = acequire(\"./bidihandler\").BidiHandler;\nvar config = acequire(\"./config\");\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\nvar Selection = acequire(\"./selection\").Selection;\nvar TextMode = acequire(\"./mode/text\").Mode;\nvar Range = acequire(\"./range\").Range;\nvar Document = acequire(\"./document\").Document;\nvar BackgroundTokenizer = acequire(\"./background_tokenizer\").BackgroundTokenizer;\nvar SearchHighlight = acequire(\"./search_highlight\").SearchHighlight;\n\nvar EditSession = function(text, mode) {\n    this.$breakpoints = [];\n    this.$decorations = [];\n    this.$frontMarkers = {};\n    this.$backMarkers = {};\n    this.$markerId = 1;\n    this.$undoSelect = true;\n\n    this.$foldData = [];\n    this.id = \"session\" + (++EditSession.$uid);\n    this.$foldData.toString = function() {\n        return this.join(\"\\n\");\n    };\n    this.on(\"changeFold\", this.onChangeFold.bind(this));\n    this.$onChange = this.onChange.bind(this);\n\n    if (typeof text != \"object\" || !text.getLine)\n        text = new Document(text);\n\n    this.$bidiHandler = new BidiHandler(this);\n    this.setDocument(text);\n    this.selection = new Selection(this);\n\n    config.resetOptions(this);\n    this.setMode(mode);\n    config._signal(\"session\", this);\n};\n\n\nEditSession.$uid = 0;\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.setDocument = function(doc) {\n        if (this.doc)\n            this.doc.removeListener(\"change\", this.$onChange);\n\n        this.doc = doc;\n        doc.on(\"change\", this.$onChange);\n\n        if (this.bgTokenizer)\n            this.bgTokenizer.setDocument(this.getDocument());\n\n        this.resetCaches();\n    };\n    this.getDocument = function() {\n        return this.doc;\n    };\n    this.$resetRowCache = function(docRow) {\n        if (!docRow) {\n            this.$docRowCache = [];\n            this.$screenRowCache = [];\n            return;\n        }\n        var l = this.$docRowCache.length;\n        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;\n        if (l > i) {\n            this.$docRowCache.splice(i, l);\n            this.$screenRowCache.splice(i, l);\n        }\n    };\n\n    this.$getRowCacheIndex = function(cacheArray, val) {\n        var low = 0;\n        var hi = cacheArray.length - 1;\n\n        while (low <= hi) {\n            var mid = (low + hi) >> 1;\n            var c = cacheArray[mid];\n\n            if (val > c)\n                low = mid + 1;\n            else if (val < c)\n                hi = mid - 1;\n            else\n                return mid;\n        }\n\n        return low -1;\n    };\n\n    this.resetCaches = function() {\n        this.$modified = true;\n        this.$wrapData = [];\n        this.$rowLengthCache = [];\n        this.$resetRowCache(0);\n        if (this.bgTokenizer)\n            this.bgTokenizer.start(0);\n    };\n\n    this.onChangeFold = function(e) {\n        var fold = e.data;\n        this.$resetRowCache(fold.start.row);\n    };\n\n    this.onChange = function(delta) {\n        this.$modified = true;\n        this.$bidiHandler.onChange(delta);\n        this.$resetRowCache(delta.start.row);\n\n        var removedFolds = this.$updateInternalDataOnChange(delta);\n        if (!this.$fromUndo && this.$undoManager && !delta.ignore) {\n            this.$deltasDoc.push(delta);\n            if (removedFolds && removedFolds.length != 0) {\n                this.$deltasFold.push({\n                    action: \"removeFolds\",\n                    folds:  removedFolds\n                });\n            }\n\n            this.$informUndoManager.schedule();\n        }\n\n        this.bgTokenizer && this.bgTokenizer.$updateOnChange(delta);\n        this._signal(\"change\", delta);\n    };\n    this.setValue = function(text) {\n        this.doc.setValue(text);\n        this.selection.moveTo(0, 0);\n\n        this.$resetRowCache(0);\n        this.$deltas = [];\n        this.$deltasDoc = [];\n        this.$deltasFold = [];\n        this.setUndoManager(this.$undoManager);\n        this.getUndoManager().reset();\n    };\n    this.getValue =\n    this.toString = function() {\n        return this.doc.getValue();\n    };\n    this.getSelection = function() {\n        return this.selection;\n    };\n    this.getState = function(row) {\n        return this.bgTokenizer.getState(row);\n    };\n    this.getTokens = function(row) {\n        return this.bgTokenizer.getTokens(row);\n    };\n    this.getTokenAt = function(row, column) {\n        var tokens = this.bgTokenizer.getTokens(row);\n        var token, c = 0;\n        if (column == null) {\n            var i = tokens.length - 1;\n            c = this.getLine(row).length;\n        } else {\n            for (var i = 0; i < tokens.length; i++) {\n                c += tokens[i].value.length;\n                if (c >= column)\n                    break;\n            }\n        }\n        token = tokens[i];\n        if (!token)\n            return null;\n        token.index = i;\n        token.start = c - token.value.length;\n        return token;\n    };\n    this.setUndoManager = function(undoManager) {\n        this.$undoManager = undoManager;\n        this.$deltas = [];\n        this.$deltasDoc = [];\n        this.$deltasFold = [];\n\n        if (this.$informUndoManager)\n            this.$informUndoManager.cancel();\n\n        if (undoManager) {\n            var self = this;\n\n            this.$syncInformUndoManager = function() {\n                self.$informUndoManager.cancel();\n\n                if (self.$deltasFold.length) {\n                    self.$deltas.push({\n                        group: \"fold\",\n                        deltas: self.$deltasFold\n                    });\n                    self.$deltasFold = [];\n                }\n\n                if (self.$deltasDoc.length) {\n                    self.$deltas.push({\n                        group: \"doc\",\n                        deltas: self.$deltasDoc\n                    });\n                    self.$deltasDoc = [];\n                }\n\n                if (self.$deltas.length > 0) {\n                    undoManager.execute({\n                        action: \"aceupdate\",\n                        args: [self.$deltas, self],\n                        merge: self.mergeUndoDeltas\n                    });\n                }\n                self.mergeUndoDeltas = false;\n                self.$deltas = [];\n            };\n            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);\n        }\n    };\n    this.markUndoGroup = function() {\n        if (this.$syncInformUndoManager)\n            this.$syncInformUndoManager();\n    };\n    \n    this.$defaultUndoManager = {\n        undo: function() {},\n        redo: function() {},\n        reset: function() {}\n    };\n    this.getUndoManager = function() {\n        return this.$undoManager || this.$defaultUndoManager;\n    };\n    this.getTabString = function() {\n        if (this.getUseSoftTabs()) {\n            return lang.stringRepeat(\" \", this.getTabSize());\n        } else {\n            return \"\\t\";\n        }\n    };\n    this.setUseSoftTabs = function(val) {\n        this.setOption(\"useSoftTabs\", val);\n    };\n    this.getUseSoftTabs = function() {\n        return this.$useSoftTabs && !this.$mode.$indentWithTabs;\n    };\n    this.setTabSize = function(tabSize) {\n        this.setOption(\"tabSize\", tabSize);\n    };\n    this.getTabSize = function() {\n        return this.$tabSize;\n    };\n    this.isTabStop = function(position) {\n        return this.$useSoftTabs && (position.column % this.$tabSize === 0);\n    };\n    this.setNavigateWithinSoftTabs = function (navigateWithinSoftTabs) {\n        this.setOption(\"navigateWithinSoftTabs\", navigateWithinSoftTabs);\n    };\n    this.getNavigateWithinSoftTabs = function() {\n        return this.$navigateWithinSoftTabs;\n    };\n\n    this.$overwrite = false;\n    this.setOverwrite = function(overwrite) {\n        this.setOption(\"overwrite\", overwrite);\n    };\n    this.getOverwrite = function() {\n        return this.$overwrite;\n    };\n    this.toggleOverwrite = function() {\n        this.setOverwrite(!this.$overwrite);\n    };\n    this.addGutterDecoration = function(row, className) {\n        if (!this.$decorations[row])\n            this.$decorations[row] = \"\";\n        this.$decorations[row] += \" \" + className;\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.removeGutterDecoration = function(row, className) {\n        this.$decorations[row] = (this.$decorations[row] || \"\").replace(\" \" + className, \"\");\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.getBreakpoints = function() {\n        return this.$breakpoints;\n    };\n    this.setBreakpoints = function(rows) {\n        this.$breakpoints = [];\n        for (var i=0; i<rows.length; i++) {\n            this.$breakpoints[rows[i]] = \"ace_breakpoint\";\n        }\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.clearBreakpoints = function() {\n        this.$breakpoints = [];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.setBreakpoint = function(row, className) {\n        if (className === undefined)\n            className = \"ace_breakpoint\";\n        if (className)\n            this.$breakpoints[row] = className;\n        else\n            delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.clearBreakpoint = function(row) {\n        delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.addMarker = function(range, clazz, type, inFront) {\n        var id = this.$markerId++;\n\n        var marker = {\n            range : range,\n            type : type || \"line\",\n            renderer: typeof type == \"function\" ? type : null,\n            clazz : clazz,\n            inFront: !!inFront,\n            id: id\n        };\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return id;\n    };\n    this.addDynamicMarker = function(marker, inFront) {\n        if (!marker.update)\n            return;\n        var id = this.$markerId++;\n        marker.id = id;\n        marker.inFront = !!inFront;\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return marker;\n    };\n    this.removeMarker = function(markerId) {\n        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];\n        if (!marker)\n            return;\n\n        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;\n        if (marker) {\n            delete (markers[markerId]);\n            this._signal(marker.inFront ? \"changeFrontMarker\" : \"changeBackMarker\");\n        }\n    };\n    this.getMarkers = function(inFront) {\n        return inFront ? this.$frontMarkers : this.$backMarkers;\n    };\n\n    this.highlight = function(re) {\n        if (!this.$searchHighlight) {\n            var highlight = new SearchHighlight(null, \"ace_selected-word\", \"text\");\n            this.$searchHighlight = this.addDynamicMarker(highlight);\n        }\n        this.$searchHighlight.setRegexp(re);\n    };\n    this.highlightLines = function(startRow, endRow, clazz, inFront) {\n        if (typeof endRow != \"number\") {\n            clazz = endRow;\n            endRow = startRow;\n        }\n        if (!clazz)\n            clazz = \"ace_step\";\n\n        var range = new Range(startRow, 0, endRow, Infinity);\n        range.id = this.addMarker(range, clazz, \"fullLine\", inFront);\n        return range;\n    };\n    this.setAnnotations = function(annotations) {\n        this.$annotations = annotations;\n        this._signal(\"changeAnnotation\", {});\n    };\n    this.getAnnotations = function() {\n        return this.$annotations || [];\n    };\n    this.clearAnnotations = function() {\n        this.setAnnotations([]);\n    };\n    this.$detectNewLine = function(text) {\n        var match = text.match(/^.*?(\\r?\\n)/m);\n        if (match) {\n            this.$autoNewLine = match[1];\n        } else {\n            this.$autoNewLine = \"\\n\";\n        }\n    };\n    this.getWordRange = function(row, column) {\n        var line = this.getLine(row);\n\n        var inToken = false;\n        if (column > 0)\n            inToken = !!line.charAt(column - 1).match(this.tokenRe);\n\n        if (!inToken)\n            inToken = !!line.charAt(column).match(this.tokenRe);\n\n        if (inToken)\n            var re = this.tokenRe;\n        else if (/^\\s+$/.test(line.slice(column-1, column+1)))\n            var re = /\\s/;\n        else\n            var re = this.nonTokenRe;\n\n        var start = column;\n        if (start > 0) {\n            do {\n                start--;\n            }\n            while (start >= 0 && line.charAt(start).match(re));\n            start++;\n        }\n\n        var end = column;\n        while (end < line.length && line.charAt(end).match(re)) {\n            end++;\n        }\n\n        return new Range(row, start, row, end);\n    };\n    this.getAWordRange = function(row, column) {\n        var wordRange = this.getWordRange(row, column);\n        var line = this.getLine(wordRange.end.row);\n\n        while (line.charAt(wordRange.end.column).match(/[ \\t]/)) {\n            wordRange.end.column += 1;\n        }\n        return wordRange;\n    };\n    this.setNewLineMode = function(newLineMode) {\n        this.doc.setNewLineMode(newLineMode);\n    };\n    this.getNewLineMode = function() {\n        return this.doc.getNewLineMode();\n    };\n    this.setUseWorker = function(useWorker) { this.setOption(\"useWorker\", useWorker); };\n    this.getUseWorker = function() { return this.$useWorker; };\n    this.onReloadTokenizer = function(e) {\n        var rows = e.data;\n        this.bgTokenizer.start(rows.first);\n        this._signal(\"tokenizerUpdate\", e);\n    };\n\n    this.$modes = {};\n    this.$mode = null;\n    this.$modeId = null;\n    this.setMode = function(mode, cb) {\n        if (mode && typeof mode === \"object\") {\n            if (mode.getTokenizer)\n                return this.$onChangeMode(mode);\n            var options = mode;\n            var path = options.path;\n        } else {\n            path = mode || \"ace/mode/text\";\n        }\n        if (!this.$modes[\"ace/mode/text\"])\n            this.$modes[\"ace/mode/text\"] = new TextMode();\n\n        if (this.$modes[path] && !options) {\n            this.$onChangeMode(this.$modes[path]);\n            cb && cb();\n            return;\n        }\n        this.$modeId = path;\n        config.loadModule([\"mode\", path], function(m) {\n            if (this.$modeId !== path)\n                return cb && cb();\n            if (this.$modes[path] && !options) {\n                this.$onChangeMode(this.$modes[path]);\n            } else if (m && m.Mode) {\n                m = new m.Mode(options);\n                if (!options) {\n                    this.$modes[path] = m;\n                    m.$id = path;\n                }\n                this.$onChangeMode(m);\n            }\n            cb && cb();\n        }.bind(this));\n        if (!this.$mode)\n            this.$onChangeMode(this.$modes[\"ace/mode/text\"], true);\n    };\n\n    this.$onChangeMode = function(mode, $isPlaceholder) {\n        if (!$isPlaceholder)\n            this.$modeId = mode.$id;\n        if (this.$mode === mode) \n            return;\n\n        this.$mode = mode;\n\n        this.$stopWorker();\n\n        if (this.$useWorker)\n            this.$startWorker();\n\n        var tokenizer = mode.getTokenizer();\n\n        if(tokenizer.addEventListener !== undefined) {\n            var onReloadTokenizer = this.onReloadTokenizer.bind(this);\n            tokenizer.addEventListener(\"update\", onReloadTokenizer);\n        }\n\n        if (!this.bgTokenizer) {\n            this.bgTokenizer = new BackgroundTokenizer(tokenizer);\n            var _self = this;\n            this.bgTokenizer.addEventListener(\"update\", function(e) {\n                _self._signal(\"tokenizerUpdate\", e);\n            });\n        } else {\n            this.bgTokenizer.setTokenizer(tokenizer);\n        }\n\n        this.bgTokenizer.setDocument(this.getDocument());\n\n        this.tokenRe = mode.tokenRe;\n        this.nonTokenRe = mode.nonTokenRe;\n\n        \n        if (!$isPlaceholder) {\n            if (mode.attachToSession)\n                mode.attachToSession(this);\n            this.$options.wrapMethod.set.call(this, this.$wrapMethod);\n            this.$setFolding(mode.foldingRules);\n            this.bgTokenizer.start(0);\n            this._emit(\"changeMode\");\n        }\n    };\n\n    this.$stopWorker = function() {\n        if (this.$worker) {\n            this.$worker.terminate();\n            this.$worker = null;\n        }\n    };\n\n    this.$startWorker = function() {\n        try {\n            this.$worker = this.$mode.createWorker(this);\n        } catch (e) {\n            config.warn(\"Could not load worker\", e);\n            this.$worker = null;\n        }\n    };\n    this.getMode = function() {\n        return this.$mode;\n    };\n\n    this.$scrollTop = 0;\n    this.setScrollTop = function(scrollTop) {\n        if (this.$scrollTop === scrollTop || isNaN(scrollTop))\n            return;\n\n        this.$scrollTop = scrollTop;\n        this._signal(\"changeScrollTop\", scrollTop);\n    };\n    this.getScrollTop = function() {\n        return this.$scrollTop;\n    };\n\n    this.$scrollLeft = 0;\n    this.setScrollLeft = function(scrollLeft) {\n        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))\n            return;\n\n        this.$scrollLeft = scrollLeft;\n        this._signal(\"changeScrollLeft\", scrollLeft);\n    };\n    this.getScrollLeft = function() {\n        return this.$scrollLeft;\n    };\n    this.getScreenWidth = function() {\n        this.$computeWidth();\n        if (this.lineWidgets) \n            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);\n        return this.screenWidth;\n    };\n    \n    this.getLineWidgetMaxWidth = function() {\n        if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;\n        var width = 0;\n        this.lineWidgets.forEach(function(w) {\n            if (w && w.screenWidth > width)\n                width = w.screenWidth;\n        });\n        return this.lineWidgetWidth = width;\n    };\n\n    this.$computeWidth = function(force) {\n        if (this.$modified || force) {\n            this.$modified = false;\n\n            if (this.$useWrapMode)\n                return this.screenWidth = this.$wrapLimit;\n\n            var lines = this.doc.getAllLines();\n            var cache = this.$rowLengthCache;\n            var longestScreenLine = 0;\n            var foldIndex = 0;\n            var foldLine = this.$foldData[foldIndex];\n            var foldStart = foldLine ? foldLine.start.row : Infinity;\n            var len = lines.length;\n\n            for (var i = 0; i < len; i++) {\n                if (i > foldStart) {\n                    i = foldLine.end.row + 1;\n                    if (i >= len)\n                        break;\n                    foldLine = this.$foldData[foldIndex++];\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n\n                if (cache[i] == null)\n                    cache[i] = this.$getStringScreenWidth(lines[i])[0];\n\n                if (cache[i] > longestScreenLine)\n                    longestScreenLine = cache[i];\n            }\n            this.screenWidth = longestScreenLine;\n        }\n    };\n    this.getLine = function(row) {\n        return this.doc.getLine(row);\n    };\n    this.getLines = function(firstRow, lastRow) {\n        return this.doc.getLines(firstRow, lastRow);\n    };\n    this.getLength = function() {\n        return this.doc.getLength();\n    };\n    this.getTextRange = function(range) {\n        return this.doc.getTextRange(range || this.selection.getRange());\n    };\n    this.insert = function(position, text) {\n        return this.doc.insert(position, text);\n    };\n    this.remove = function(range) {\n        return this.doc.remove(range);\n    };\n    this.removeFullLines = function(firstRow, lastRow){\n        return this.doc.removeFullLines(firstRow, lastRow);\n    };\n    this.undoChanges = function(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        var lastUndoRange = null;\n        for (var i = deltas.length - 1; i != -1; i--) {\n            var delta = deltas[i];\n            if (delta.group == \"doc\") {\n                this.doc.revertDeltas(delta.deltas);\n                lastUndoRange =\n                    this.$getUndoSelection(delta.deltas, true, lastUndoRange);\n            } else {\n                delta.deltas.forEach(function(foldDelta) {\n                    this.addFolds(foldDelta.folds);\n                }, this);\n            }\n        }\n        this.$fromUndo = false;\n        lastUndoRange &&\n            this.$undoSelect &&\n            !dontSelect &&\n            this.selection.setSelectionRange(lastUndoRange);\n        return lastUndoRange;\n    };\n    this.redoChanges = function(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        var lastUndoRange = null;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (delta.group == \"doc\") {\n                this.doc.applyDeltas(delta.deltas);\n                lastUndoRange =\n                    this.$getUndoSelection(delta.deltas, false, lastUndoRange);\n            }\n        }\n        this.$fromUndo = false;\n        lastUndoRange &&\n            this.$undoSelect &&\n            !dontSelect &&\n            this.selection.setSelectionRange(lastUndoRange);\n        return lastUndoRange;\n    };\n    this.setUndoSelect = function(enable) {\n        this.$undoSelect = enable;\n    };\n\n    this.$getUndoSelection = function(deltas, isUndo, lastUndoRange) {\n        function isInsert(delta) {\n            return isUndo ? delta.action !== \"insert\" : delta.action === \"insert\";\n        }\n\n        var delta = deltas[0];\n        var range, point;\n        var lastDeltaIsInsert = false;\n        if (isInsert(delta)) {\n            range = Range.fromPoints(delta.start, delta.end);\n            lastDeltaIsInsert = true;\n        } else {\n            range = Range.fromPoints(delta.start, delta.start);\n            lastDeltaIsInsert = false;\n        }\n\n        for (var i = 1; i < deltas.length; i++) {\n            delta = deltas[i];\n            if (isInsert(delta)) {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range.setStart(point);\n                }\n                point = delta.end;\n                if (range.compare(point.row, point.column) == 1) {\n                    range.setEnd(point);\n                }\n                lastDeltaIsInsert = true;\n            } else {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n                lastDeltaIsInsert = false;\n            }\n        }\n        if (lastUndoRange != null) {\n            if (Range.comparePoints(lastUndoRange.start, range.start) === 0) {\n                lastUndoRange.start.column += range.end.column - range.start.column;\n                lastUndoRange.end.column += range.end.column - range.start.column;\n            }\n\n            var cmp = lastUndoRange.compareRange(range);\n            if (cmp == 1) {\n                range.setStart(lastUndoRange.start);\n            } else if (cmp == -1) {\n                range.setEnd(lastUndoRange.end);\n            }\n        }\n\n        return range;\n    };\n    this.replace = function(range, text) {\n        return this.doc.replace(range, text);\n    };\n    this.moveText = function(fromRange, toPosition, copy) {\n        var text = this.getTextRange(fromRange);\n        var folds = this.getFoldsInRange(fromRange);\n\n        var toRange = Range.fromPoints(toPosition, toPosition);\n        if (!copy) {\n            this.remove(fromRange);\n            var rowDiff = fromRange.start.row - fromRange.end.row;\n            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;\n            if (collDiff) {\n                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)\n                    toRange.start.column += collDiff;\n                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)\n                    toRange.end.column += collDiff;\n            }\n            if (rowDiff && toRange.start.row >= fromRange.end.row) {\n                toRange.start.row += rowDiff;\n                toRange.end.row += rowDiff;\n            }\n        }\n\n        toRange.end = this.insert(toRange.start, text);\n        if (folds.length) {\n            var oldStart = fromRange.start;\n            var newStart = toRange.start;\n            var rowDiff = newStart.row - oldStart.row;\n            var collDiff = newStart.column - oldStart.column;\n            this.addFolds(folds.map(function(x) {\n                x = x.clone();\n                if (x.start.row == oldStart.row)\n                    x.start.column += collDiff;\n                if (x.end.row == oldStart.row)\n                    x.end.column += collDiff;\n                x.start.row += rowDiff;\n                x.end.row += rowDiff;\n                return x;\n            }));\n        }\n\n        return toRange;\n    };\n    this.indentRows = function(startRow, endRow, indentString) {\n        indentString = indentString.replace(/\\t/g, this.getTabString());\n        for (var row=startRow; row<=endRow; row++)\n            this.doc.insertInLine({row: row, column: 0}, indentString);\n    };\n    this.outdentRows = function (range) {\n        var rowRange = range.collapseRows();\n        var deleteRange = new Range(0, 0, 0, 0);\n        var size = this.getTabSize();\n\n        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {\n            var line = this.getLine(i);\n\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            for (var j = 0; j < size; ++j)\n                if (line.charAt(j) != ' ')\n                    break;\n            if (j < size && line.charAt(j) == '\\t') {\n                deleteRange.start.column = j;\n                deleteRange.end.column = j + 1;\n            } else {\n                deleteRange.start.column = 0;\n                deleteRange.end.column = j;\n            }\n            this.remove(deleteRange);\n        }\n    };\n\n    this.$moveLines = function(firstRow, lastRow, dir) {\n        firstRow = this.getRowFoldStart(firstRow);\n        lastRow = this.getRowFoldEnd(lastRow);\n        if (dir < 0) {\n            var row = this.getRowFoldStart(firstRow + dir);\n            if (row < 0) return 0;\n            var diff = row-firstRow;\n        } else if (dir > 0) {\n            var row = this.getRowFoldEnd(lastRow + dir);\n            if (row > this.doc.getLength()-1) return 0;\n            var diff = row-lastRow;\n        } else {\n            firstRow = this.$clipRowToDocument(firstRow);\n            lastRow = this.$clipRowToDocument(lastRow);\n            var diff = lastRow - firstRow + 1;\n        }\n\n        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);\n        var folds = this.getFoldsInRange(range).map(function(x){\n            x = x.clone();\n            x.start.row += diff;\n            x.end.row += diff;\n            return x;\n        });\n        \n        var lines = dir == 0\n            ? this.doc.getLines(firstRow, lastRow)\n            : this.doc.removeFullLines(firstRow, lastRow);\n        this.doc.insertFullLines(firstRow+diff, lines);\n        folds.length && this.addFolds(folds);\n        return diff;\n    };\n    this.moveLinesUp = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, -1);\n    };\n    this.moveLinesDown = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 1);\n    };\n    this.duplicateLines = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 0);\n    };\n\n\n    this.$clipRowToDocument = function(row) {\n        return Math.max(0, Math.min(row, this.doc.getLength()-1));\n    };\n\n    this.$clipColumnToRow = function(row, column) {\n        if (column < 0)\n            return 0;\n        return Math.min(this.doc.getLine(row).length, column);\n    };\n\n\n    this.$clipPositionToDocument = function(row, column) {\n        column = Math.max(0, column);\n\n        if (row < 0) {\n            row = 0;\n            column = 0;\n        } else {\n            var len = this.doc.getLength();\n            if (row >= len) {\n                row = len - 1;\n                column = this.doc.getLine(len-1).length;\n            } else {\n                column = Math.min(this.doc.getLine(row).length, column);\n            }\n        }\n\n        return {\n            row: row,\n            column: column\n        };\n    };\n\n    this.$clipRangeToDocument = function(range) {\n        if (range.start.row < 0) {\n            range.start.row = 0;\n            range.start.column = 0;\n        } else {\n            range.start.column = this.$clipColumnToRow(\n                range.start.row,\n                range.start.column\n            );\n        }\n\n        var len = this.doc.getLength() - 1;\n        if (range.end.row > len) {\n            range.end.row = len;\n            range.end.column = this.doc.getLine(len).length;\n        } else {\n            range.end.column = this.$clipColumnToRow(\n                range.end.row,\n                range.end.column\n            );\n        }\n        return range;\n    };\n    this.$wrapLimit = 80;\n    this.$useWrapMode = false;\n    this.$wrapLimitRange = {\n        min : null,\n        max : null\n    };\n    this.setUseWrapMode = function(useWrapMode) {\n        if (useWrapMode != this.$useWrapMode) {\n            this.$useWrapMode = useWrapMode;\n            this.$modified = true;\n            this.$resetRowCache(0);\n            if (useWrapMode) {\n                var len = this.getLength();\n                this.$wrapData = Array(len);\n                this.$updateWrapData(0, len - 1);\n            }\n\n            this._signal(\"changeWrapMode\");\n        }\n    };\n    this.getUseWrapMode = function() {\n        return this.$useWrapMode;\n    };\n    this.setWrapLimitRange = function(min, max) {\n        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {\n            this.$wrapLimitRange = { min: min, max: max };\n            this.$modified = true;\n            this.$bidiHandler.markAsDirty();\n            if (this.$useWrapMode)\n                this._signal(\"changeWrapMode\");\n        }\n    };\n    this.adjustWrapLimit = function(desiredLimit, $printMargin) {\n        var limits = this.$wrapLimitRange;\n        if (limits.max < 0)\n            limits = {min: $printMargin, max: $printMargin};\n        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);\n        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {\n            this.$wrapLimit = wrapLimit;\n            this.$modified = true;\n            if (this.$useWrapMode) {\n                this.$updateWrapData(0, this.getLength() - 1);\n                this.$resetRowCache(0);\n                this._signal(\"changeWrapLimit\");\n            }\n            return true;\n        }\n        return false;\n    };\n\n    this.$constrainWrapLimit = function(wrapLimit, min, max) {\n        if (min)\n            wrapLimit = Math.max(min, wrapLimit);\n\n        if (max)\n            wrapLimit = Math.min(max, wrapLimit);\n\n        return wrapLimit;\n    };\n    this.getWrapLimit = function() {\n        return this.$wrapLimit;\n    };\n    this.setWrapLimit = function (limit) {\n        this.setWrapLimitRange(limit, limit);\n    };\n    this.getWrapLimitRange = function() {\n        return {\n            min : this.$wrapLimitRange.min,\n            max : this.$wrapLimitRange.max\n        };\n    };\n\n    this.$updateInternalDataOnChange = function(delta) {\n        var useWrapMode = this.$useWrapMode;\n        var action = delta.action;\n        var start = delta.start;\n        var end = delta.end;\n        var firstRow = start.row;\n        var lastRow = end.row;\n        var len = lastRow - firstRow;\n        var removedFolds = null;\n        \n        this.$updating = true;\n        if (len != 0) {\n            if (action === \"remove\") {\n                this[useWrapMode ? \"$wrapData\" : \"$rowLengthCache\"].splice(firstRow, len);\n\n                var foldLines = this.$foldData;\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                var foldLine = this.getFoldLine(end.row);\n                var idx = 0;\n                if (foldLine) {\n                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);\n                    foldLine.shiftRow(-len);\n\n                    var foldLineBefore = this.getFoldLine(firstRow);\n                    if (foldLineBefore && foldLineBefore !== foldLine) {\n                        foldLineBefore.merge(foldLine);\n                        foldLine = foldLineBefore;\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= end.row) {\n                        foldLine.shiftRow(-len);\n                    }\n                }\n\n                lastRow = firstRow;\n            } else {\n                var args = Array(len);\n                args.unshift(firstRow, 0);\n                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;\n                arr.splice.apply(arr, args);\n                var foldLines = this.$foldData;\n                var foldLine = this.getFoldLine(firstRow);\n                var idx = 0;\n                if (foldLine) {\n                    var cmp = foldLine.range.compareInside(start.row, start.column);\n                    if (cmp == 0) {\n                        foldLine = foldLine.split(start.row, start.column);\n                        if (foldLine) {\n                            foldLine.shiftRow(len);\n                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);\n                        }\n                    } else\n                    if (cmp == -1) {\n                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);\n                        foldLine.shiftRow(len);\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= firstRow) {\n                        foldLine.shiftRow(len);\n                    }\n                }\n            }\n        } else {\n            len = Math.abs(delta.start.column - delta.end.column);\n            if (action === \"remove\") {\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                len = -len;\n            }\n            var foldLine = this.getFoldLine(firstRow);\n            if (foldLine) {\n                foldLine.addRemoveChars(firstRow, start.column, len);\n            }\n        }\n\n        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {\n            console.error(\"doc.getLength() and $wrapData.length have to be the same!\");\n        }\n        this.$updating = false;\n\n        if (useWrapMode)\n            this.$updateWrapData(firstRow, lastRow);\n        else\n            this.$updateRowLengthCache(firstRow, lastRow);\n\n        return removedFolds;\n    };\n\n    this.$updateRowLengthCache = function(firstRow, lastRow, b) {\n        this.$rowLengthCache[firstRow] = null;\n        this.$rowLengthCache[lastRow] = null;\n    };\n\n    this.$updateWrapData = function(firstRow, lastRow) {\n        var lines = this.doc.getAllLines();\n        var tabSize = this.getTabSize();\n        var wrapData = this.$wrapData;\n        var wrapLimit = this.$wrapLimit;\n        var tokens;\n        var foldLine;\n\n        var row = firstRow;\n        lastRow = Math.min(lastRow, lines.length - 1);\n        while (row <= lastRow) {\n            foldLine = this.getFoldLine(row, foldLine);\n            if (!foldLine) {\n                tokens = this.$getDisplayTokens(lines[row]);\n                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row ++;\n            } else {\n                tokens = [];\n                foldLine.walk(function(placeholder, row, column, lastColumn) {\n                        var walkTokens;\n                        if (placeholder != null) {\n                            walkTokens = this.$getDisplayTokens(\n                                            placeholder, tokens.length);\n                            walkTokens[0] = PLACEHOLDER_START;\n                            for (var i = 1; i < walkTokens.length; i++) {\n                                walkTokens[i] = PLACEHOLDER_BODY;\n                            }\n                        } else {\n                            walkTokens = this.$getDisplayTokens(\n                                lines[row].substring(lastColumn, column),\n                                tokens.length);\n                        }\n                        tokens = tokens.concat(walkTokens);\n                    }.bind(this),\n                    foldLine.end.row,\n                    lines[foldLine.end.row].length + 1\n                );\n\n                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row = foldLine.end.row + 1;\n            }\n        }\n    };\n    var CHAR = 1,\n        CHAR_EXT = 2,\n        PLACEHOLDER_START = 3,\n        PLACEHOLDER_BODY =  4,\n        PUNCTUATION = 9,\n        SPACE = 10,\n        TAB = 11,\n        TAB_SPACE = 12;\n\n\n    this.$computeWrapSplits = function(tokens, wrapLimit, tabSize) {\n        if (tokens.length == 0) {\n            return [];\n        }\n\n        var splits = [];\n        var displayLength = tokens.length;\n        var lastSplit = 0, lastDocSplit = 0;\n\n        var isCode = this.$wrapAsCode;\n\n        var indentedSoftWrap = this.$indentedSoftWrap;\n        var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)\n            || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);\n\n        function getWrapIndent() {\n            var indentation = 0;\n            if (maxIndent === 0)\n                return indentation;\n            if (indentedSoftWrap) {\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    if (token == SPACE)\n                        indentation += 1;\n                    else if (token == TAB)\n                        indentation += tabSize;\n                    else if (token == TAB_SPACE)\n                        continue;\n                    else\n                        break;\n                }\n            }\n            if (isCode && indentedSoftWrap !== false)\n                indentation += tabSize;\n            return Math.min(indentation, maxIndent);\n        }\n        function addSplit(screenPos) {\n            var displayed = tokens.slice(lastSplit, screenPos);\n            var len = displayed.length;\n            displayed.join(\"\")\n                .replace(/12/g, function() {\n                    len -= 1;\n                })\n                .replace(/2/g, function() {\n                    len -= 1;\n                });\n\n            if (!splits.length) {\n                indent = getWrapIndent();\n                splits.indent = indent;\n            }\n            lastDocSplit += len;\n            splits.push(lastDocSplit);\n            lastSplit = screenPos;\n        }\n        var indent = 0;\n        while (displayLength - lastSplit > wrapLimit - indent) {\n            var split = lastSplit + wrapLimit - indent;\n            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {\n                addSplit(split);\n                continue;\n            }\n            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {\n                for (split; split != lastSplit - 1; split--) {\n                    if (tokens[split] == PLACEHOLDER_START) {\n                        break;\n                    }\n                }\n                if (split > lastSplit) {\n                    addSplit(split);\n                    continue;\n                }\n                split = lastSplit + wrapLimit;\n                for (split; split < tokens.length; split++) {\n                    if (tokens[split] != PLACEHOLDER_BODY) {\n                        break;\n                    }\n                }\n                if (split == tokens.length) {\n                    break;  // Breaks the while-loop.\n                }\n                addSplit(split);\n                continue;\n            }\n            var minSplit = Math.max(split - (wrapLimit -(wrapLimit>>2)), lastSplit - 1);\n            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                split --;\n            }\n            if (isCode) {\n                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                    split --;\n                }\n                while (split > minSplit && tokens[split] == PUNCTUATION) {\n                    split --;\n                }\n            } else {\n                while (split > minSplit && tokens[split] < SPACE) {\n                    split --;\n                }\n            }\n            if (split > minSplit) {\n                addSplit(++split);\n                continue;\n            }\n            split = lastSplit + wrapLimit;\n            if (tokens[split] == CHAR_EXT)\n                split--;\n            addSplit(split - indent);\n        }\n        return splits;\n    };\n    this.$getDisplayTokens = function(str, offset) {\n        var arr = [];\n        var tabSize;\n        offset = offset || 0;\n\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            if (c == 9) {\n                tabSize = this.getScreenTabSize(arr.length + offset);\n                arr.push(TAB);\n                for (var n = 1; n < tabSize; n++) {\n                    arr.push(TAB_SPACE);\n                }\n            }\n            else if (c == 32) {\n                arr.push(SPACE);\n            } else if((c > 39 && c < 48) || (c > 57 && c < 64)) {\n                arr.push(PUNCTUATION);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                arr.push(CHAR, CHAR_EXT);\n            } else {\n                arr.push(CHAR);\n            }\n        }\n        return arr;\n    };\n    this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {\n        if (maxScreenColumn == 0)\n            return [0, 0];\n        if (maxScreenColumn == null)\n            maxScreenColumn = Infinity;\n        screenColumn = screenColumn || 0;\n\n        var c, column;\n        for (column = 0; column < str.length; column++) {\n            c = str.charCodeAt(column);\n            if (c == 9) {\n                screenColumn += this.getScreenTabSize(screenColumn);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                screenColumn += 2;\n            } else {\n                screenColumn += 1;\n            }\n            if (screenColumn > maxScreenColumn) {\n                break;\n            }\n        }\n\n        return [screenColumn, column];\n    };\n\n    this.lineWidgets = null;\n    this.getRowLength = function(row) {\n        if (this.lineWidgets)\n            var h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        else \n            h = 0;\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1 + h;\n        } else {\n            return this.$wrapData[row].length + 1 + h;\n        }\n    };\n    this.getRowLineCount = function(row) {\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1;\n        } else {\n            return this.$wrapData[row].length + 1;\n        }\n    };\n\n    this.getRowWrapIndent = function(screenRow) {\n        if (this.$useWrapMode) {\n            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n            var splits = this.$wrapData[pos.row];\n            return splits.length && splits[0] < pos.column ? splits.indent : 0;\n        } else {\n            return 0;\n        }\n    };\n    this.getScreenLastRowColumn = function(screenRow) {\n        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n        return this.documentToScreenColumn(pos.row, pos.column);\n    };\n    this.getDocumentLastRowColumn = function(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.getScreenLastRowColumn(screenRow);\n    };\n    this.getDocumentLastRowColumnPosition = function(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);\n    };\n    this.getRowSplitData = function(row) {\n        if (!this.$useWrapMode) {\n            return undefined;\n        } else {\n            return this.$wrapData[row];\n        }\n    };\n    this.getScreenTabSize = function(screenColumn) {\n        return this.$tabSize - screenColumn % this.$tabSize;\n    };\n\n\n    this.screenToDocumentRow = function(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).row;\n    };\n\n\n    this.screenToDocumentColumn = function(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).column;\n    };\n    this.screenToDocumentPosition = function(screenRow, screenColumn, offsetX) {\n        if (screenRow < 0)\n            return {row: 0, column: 0};\n\n        var line;\n        var docRow = 0;\n        var docColumn = 0;\n        var column;\n        var row = 0;\n        var rowLength = 0;\n\n        var rowCache = this.$screenRowCache;\n        var i = this.$getRowCacheIndex(rowCache, screenRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var docRow = this.$docRowCache[i];\n            var doCache = screenRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var maxRow = this.getLength() - 1;\n        var foldLine = this.getNextFoldLine(docRow);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (row <= screenRow) {\n            rowLength = this.getRowLength(docRow);\n            if (row + rowLength > screenRow || docRow >= maxRow) {\n                break;\n            } else {\n                row += rowLength;\n                docRow++;\n                if (docRow > foldStart) {\n                    docRow = foldLine.end.row+1;\n                    foldLine = this.getNextFoldLine(docRow, foldLine);\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n            }\n\n            if (doCache) {\n                this.$docRowCache.push(docRow);\n                this.$screenRowCache.push(row);\n            }\n        }\n\n        if (foldLine && foldLine.start.row <= docRow) {\n            line = this.getFoldDisplayLine(foldLine);\n            docRow = foldLine.start.row;\n        } else if (row + rowLength <= screenRow || docRow > maxRow) {\n            return {\n                row: maxRow,\n                column: this.getLine(maxRow).length\n            };\n        } else {\n            line = this.getLine(docRow);\n            foldLine = null;\n        }\n        var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);\n        if (this.$useWrapMode) {\n            var splits = this.$wrapData[docRow];\n            if (splits) {\n                column = splits[splitIndex];\n                if(splitIndex > 0 && splits.length) {\n                    wrapIndent = splits.indent;\n                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];\n                    line = line.substring(docColumn);\n                }\n            }\n        }\n\n        if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex))\n            screenColumn = this.$bidiHandler.offsetToCol(offsetX);\n\n        docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];\n        if (this.$useWrapMode && docColumn >= column)\n            docColumn = column - 1;\n\n        if (foldLine)\n            return foldLine.idxToPosition(docColumn);\n\n        return {row: docRow, column: docColumn};\n    };\n    this.documentToScreenPosition = function(docRow, docColumn) {\n        if (typeof docColumn === \"undefined\")\n            var pos = this.$clipPositionToDocument(docRow.row, docRow.column);\n        else\n            pos = this.$clipPositionToDocument(docRow, docColumn);\n\n        docRow = pos.row;\n        docColumn = pos.column;\n\n        var screenRow = 0;\n        var foldStartRow = null;\n        var fold = null;\n        fold = this.getFoldAt(docRow, docColumn, 1);\n        if (fold) {\n            docRow = fold.start.row;\n            docColumn = fold.start.column;\n        }\n\n        var rowEnd, row = 0;\n\n\n        var rowCache = this.$docRowCache;\n        var i = this.$getRowCacheIndex(rowCache, docRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var screenRow = this.$screenRowCache[i];\n            var doCache = docRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var foldLine = this.getNextFoldLine(row);\n        var foldStart = foldLine ?foldLine.start.row :Infinity;\n\n        while (row < docRow) {\n            if (row >= foldStart) {\n                rowEnd = foldLine.end.row + 1;\n                if (rowEnd > docRow)\n                    break;\n                foldLine = this.getNextFoldLine(rowEnd, foldLine);\n                foldStart = foldLine ?foldLine.start.row :Infinity;\n            }\n            else {\n                rowEnd = row + 1;\n            }\n\n            screenRow += this.getRowLength(row);\n            row = rowEnd;\n\n            if (doCache) {\n                this.$docRowCache.push(row);\n                this.$screenRowCache.push(screenRow);\n            }\n        }\n        var textLine = \"\";\n        if (foldLine && row >= foldStart) {\n            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);\n            foldStartRow = foldLine.start.row;\n        } else {\n            textLine = this.getLine(docRow).substring(0, docColumn);\n            foldStartRow = docRow;\n        }\n        var wrapIndent = 0;\n        if (this.$useWrapMode) {\n            var wrapRow = this.$wrapData[foldStartRow];\n            if (wrapRow) {\n                var screenRowOffset = 0;\n                while (textLine.length >= wrapRow[screenRowOffset]) {\n                    screenRow ++;\n                    screenRowOffset++;\n                }\n                textLine = textLine.substring(\n                    wrapRow[screenRowOffset - 1] || 0, textLine.length\n                );\n                wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;\n            }\n        }\n\n        return {\n            row: screenRow,\n            column: wrapIndent + this.$getStringScreenWidth(textLine)[0]\n        };\n    };\n    this.documentToScreenColumn = function(row, docColumn) {\n        return this.documentToScreenPosition(row, docColumn).column;\n    };\n    this.documentToScreenRow = function(docRow, docColumn) {\n        return this.documentToScreenPosition(docRow, docColumn).row;\n    };\n    this.getScreenLength = function() {\n        var screenRows = 0;\n        var fold = null;\n        if (!this.$useWrapMode) {\n            screenRows = this.getLength();\n            var foldData = this.$foldData;\n            for (var i = 0; i < foldData.length; i++) {\n                fold = foldData[i];\n                screenRows -= fold.end.row - fold.start.row;\n            }\n        } else {\n            var lastRow = this.$wrapData.length;\n            var row = 0, i = 0;\n            var fold = this.$foldData[i++];\n            var foldStart = fold ? fold.start.row :Infinity;\n\n            while (row < lastRow) {\n                var splits = this.$wrapData[row];\n                screenRows += splits ? splits.length + 1 : 1;\n                row ++;\n                if (row > foldStart) {\n                    row = fold.end.row+1;\n                    fold = this.$foldData[i++];\n                    foldStart = fold ?fold.start.row :Infinity;\n                }\n            }\n        }\n        if (this.lineWidgets)\n            screenRows += this.$getWidgetScreenLength();\n\n        return screenRows;\n    };\n    this.$setFontMetrics = function(fm) {\n        if (!this.$enableVarChar) return;\n        this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {\n            if (maxScreenColumn === 0)\n                return [0, 0];\n            if (!maxScreenColumn)\n                maxScreenColumn = Infinity;\n            screenColumn = screenColumn || 0;\n            \n            var c, column;\n            for (column = 0; column < str.length; column++) {\n                c = str.charAt(column);\n                if (c === \"\\t\") {\n                    screenColumn += this.getScreenTabSize(screenColumn);\n                } else {\n                    screenColumn += fm.getCharacterWidth(c);\n                }\n                if (screenColumn > maxScreenColumn) {\n                    break;\n                }\n            }\n            \n            return [screenColumn, column];\n        };\n    };\n    \n    this.destroy = function() {\n        if (this.bgTokenizer) {\n            this.bgTokenizer.setDocument(null);\n            this.bgTokenizer = null;\n        }\n        this.$stopWorker();\n    };\n\n    this.isFullWidth = isFullWidth;\n    function isFullWidth(c) {\n        if (c < 0x1100)\n            return false;\n        return c >= 0x1100 && c <= 0x115F ||\n               c >= 0x11A3 && c <= 0x11A7 ||\n               c >= 0x11FA && c <= 0x11FF ||\n               c >= 0x2329 && c <= 0x232A ||\n               c >= 0x2E80 && c <= 0x2E99 ||\n               c >= 0x2E9B && c <= 0x2EF3 ||\n               c >= 0x2F00 && c <= 0x2FD5 ||\n               c >= 0x2FF0 && c <= 0x2FFB ||\n               c >= 0x3000 && c <= 0x303E ||\n               c >= 0x3041 && c <= 0x3096 ||\n               c >= 0x3099 && c <= 0x30FF ||\n               c >= 0x3105 && c <= 0x312D ||\n               c >= 0x3131 && c <= 0x318E ||\n               c >= 0x3190 && c <= 0x31BA ||\n               c >= 0x31C0 && c <= 0x31E3 ||\n               c >= 0x31F0 && c <= 0x321E ||\n               c >= 0x3220 && c <= 0x3247 ||\n               c >= 0x3250 && c <= 0x32FE ||\n               c >= 0x3300 && c <= 0x4DBF ||\n               c >= 0x4E00 && c <= 0xA48C ||\n               c >= 0xA490 && c <= 0xA4C6 ||\n               c >= 0xA960 && c <= 0xA97C ||\n               c >= 0xAC00 && c <= 0xD7A3 ||\n               c >= 0xD7B0 && c <= 0xD7C6 ||\n               c >= 0xD7CB && c <= 0xD7FB ||\n               c >= 0xF900 && c <= 0xFAFF ||\n               c >= 0xFE10 && c <= 0xFE19 ||\n               c >= 0xFE30 && c <= 0xFE52 ||\n               c >= 0xFE54 && c <= 0xFE66 ||\n               c >= 0xFE68 && c <= 0xFE6B ||\n               c >= 0xFF01 && c <= 0xFF60 ||\n               c >= 0xFFE0 && c <= 0xFFE6;\n    }\n\n}).call(EditSession.prototype);\n\nacequire(\"./edit_session/folding\").Folding.call(EditSession.prototype);\nacequire(\"./edit_session/bracket_match\").BracketMatch.call(EditSession.prototype);\n\n\nconfig.defineOptions(EditSession.prototype, \"session\", {\n    wrap: {\n        set: function(value) {\n            if (!value || value == \"off\")\n                value = false;\n            else if (value == \"free\")\n                value = true;\n            else if (value == \"printMargin\")\n                value = -1;\n            else if (typeof value == \"string\")\n                value = parseInt(value, 10) || false;\n\n            if (this.$wrap == value)\n                return;\n            this.$wrap = value;\n            if (!value) {\n                this.setUseWrapMode(false);\n            } else {\n                var col = typeof value == \"number\" ? value : null;\n                this.setWrapLimitRange(col, col);\n                this.setUseWrapMode(true);\n            }\n        },\n        get: function() {\n            if (this.getUseWrapMode()) {\n                if (this.$wrap == -1)\n                    return \"printMargin\";\n                if (!this.getWrapLimitRange().min)\n                    return \"free\";\n                return this.$wrap;\n            }\n            return \"off\";\n        },\n        handlesSet: true\n    },    \n    wrapMethod: {\n        set: function(val) {\n            val = val == \"auto\"\n                ? this.$mode.type != \"text\"\n                : val != \"text\";\n            if (val != this.$wrapAsCode) {\n                this.$wrapAsCode = val;\n                if (this.$useWrapMode) {\n                    this.$modified = true;\n                    this.$resetRowCache(0);\n                    this.$updateWrapData(0, this.getLength() - 1);\n                }\n            }\n        },\n        initialValue: \"auto\"\n    },\n    indentedSoftWrap: { initialValue: true },\n    firstLineNumber: {\n        set: function() {this._signal(\"changeBreakpoint\");},\n        initialValue: 1\n    },\n    useWorker: {\n        set: function(useWorker) {\n            this.$useWorker = useWorker;\n\n            this.$stopWorker();\n            if (useWorker)\n                this.$startWorker();\n        },\n        initialValue: true\n    },\n    useSoftTabs: {initialValue: true},\n    tabSize: {\n        set: function(tabSize) {\n            if (isNaN(tabSize) || this.$tabSize === tabSize) return;\n\n            this.$modified = true;\n            this.$rowLengthCache = [];\n            this.$tabSize = tabSize;\n            this._signal(\"changeTabSize\");\n        },\n        initialValue: 4,\n        handlesSet: true\n    },\n    navigateWithinSoftTabs: {initialValue: false},\n    overwrite: {\n        set: function(val) {this._signal(\"changeOverwrite\");},\n        initialValue: false\n    },\n    newLineMode: {\n        set: function(val) {this.doc.setNewLineMode(val);},\n        get: function() {return this.doc.getNewLineMode();},\n        handlesSet: true\n    },\n    mode: {\n        set: function(val) { this.setMode(val); },\n        get: function() { return this.$modeId; }\n    }\n});\n\nexports.EditSession = EditSession;\n});\n\nace.define(\"ace/search\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar lang = acequire(\"./lib/lang\");\nvar oop = acequire(\"./lib/oop\");\nvar Range = acequire(\"./range\").Range;\n\nvar Search = function() {\n    this.$options = {};\n};\n\n(function() {\n    this.set = function(options) {\n        oop.mixin(this.$options, options);\n        return this;\n    };\n    this.getOptions = function() {\n        return lang.copyObject(this.$options);\n    };\n    this.setOptions = function(options) {\n        this.$options = options;\n    };\n    this.find = function(session) {\n        var options = this.$options;\n        var iterator = this.$matchIterator(session, options);\n        if (!iterator)\n            return false;\n\n        var firstRange = null;\n        iterator.forEach(function(sr, sc, er, ec) {\n            firstRange = new Range(sr, sc, er, ec);\n            if (sc == ec && options.start && options.start.start\n                && options.skipCurrent != false && firstRange.isEqual(options.start)\n            ) {\n                firstRange = null;\n                return false;\n            }\n\n            return true;\n        });\n\n        return firstRange;\n    };\n    this.findAll = function(session) {\n        var options = this.$options;\n        if (!options.needle)\n            return [];\n        this.$assembleRegExp(options);\n\n        var range = options.range;\n        var lines = range\n            ? session.getLines(range.start.row, range.end.row)\n            : session.doc.getAllLines();\n\n        var ranges = [];\n        var re = options.re;\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var maxRow = lines.length - len;\n            var prevRange;\n            outer: for (var row = re.offset || 0; row <= maxRow; row++) {\n                for (var j = 0; j < len; j++)\n                    if (lines[row + j].search(re[j]) == -1)\n                        continue outer;\n                \n                var startLine = lines[row];\n                var line = lines[row + len - 1];\n                var startIndex = startLine.length - startLine.match(re[0])[0].length;\n                var endIndex = line.match(re[len - 1])[0].length;\n                \n                if (prevRange && prevRange.end.row === row &&\n                    prevRange.end.column > startIndex\n                ) {\n                    continue;\n                }\n                ranges.push(prevRange = new Range(\n                    row, startIndex, row + len - 1, endIndex\n                ));\n                if (len > 2)\n                    row = row + len - 2;\n            }\n        } else {\n            for (var i = 0; i < lines.length; i++) {\n                var matches = lang.getMatchOffsets(lines[i], re);\n                for (var j = 0; j < matches.length; j++) {\n                    var match = matches[j];\n                    ranges.push(new Range(i, match.offset, i, match.offset + match.length));\n                }\n            }\n        }\n\n        if (range) {\n            var startColumn = range.start.column;\n            var endColumn = range.start.column;\n            var i = 0, j = ranges.length - 1;\n            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == range.start.row)\n                i++;\n\n            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == range.end.row)\n                j--;\n            \n            ranges = ranges.slice(i, j + 1);\n            for (i = 0, j = ranges.length; i < j; i++) {\n                ranges[i].start.row += range.start.row;\n                ranges[i].end.row += range.start.row;\n            }\n        }\n\n        return ranges;\n    };\n    this.replace = function(input, replacement) {\n        var options = this.$options;\n\n        var re = this.$assembleRegExp(options);\n        if (options.$isMultiLine)\n            return replacement;\n\n        if (!re)\n            return;\n\n        var match = re.exec(input);\n        if (!match || match[0].length != input.length)\n            return null;\n        \n        replacement = input.replace(re, replacement);\n        if (options.preserveCase) {\n            replacement = replacement.split(\"\");\n            for (var i = Math.min(input.length, input.length); i--; ) {\n                var ch = input[i];\n                if (ch && ch.toLowerCase() != ch)\n                    replacement[i] = replacement[i].toUpperCase();\n                else\n                    replacement[i] = replacement[i].toLowerCase();\n            }\n            replacement = replacement.join(\"\");\n        }\n        \n        return replacement;\n    };\n\n    this.$assembleRegExp = function(options, $disableFakeMultiline) {\n        if (options.needle instanceof RegExp)\n            return options.re = options.needle;\n\n        var needle = options.needle;\n\n        if (!options.needle)\n            return options.re = false;\n\n        if (!options.regExp)\n            needle = lang.escapeRegExp(needle);\n\n        if (options.wholeWord)\n            needle = addWordBoundary(needle, options);\n\n        var modifier = options.caseSensitive ? \"gm\" : \"gmi\";\n\n        options.$isMultiLine = !$disableFakeMultiline && /[\\n\\r]/.test(needle);\n        if (options.$isMultiLine)\n            return options.re = this.$assembleMultilineRegExp(needle, modifier);\n\n        try {\n            var re = new RegExp(needle, modifier);\n        } catch(e) {\n            re = false;\n        }\n        return options.re = re;\n    };\n\n    this.$assembleMultilineRegExp = function(needle, modifier) {\n        var parts = needle.replace(/\\r\\n|\\r|\\n/g, \"$\\n^\").split(\"\\n\");\n        var re = [];\n        for (var i = 0; i < parts.length; i++) try {\n            re.push(new RegExp(parts[i], modifier));\n        } catch(e) {\n            return false;\n        }\n        return re;\n    };\n\n    this.$matchIterator = function(session, options) {\n        var re = this.$assembleRegExp(options);\n        if (!re)\n            return false;\n        var backwards = options.backwards == true;\n        var skipCurrent = options.skipCurrent != false;\n\n        var range = options.range;\n        var start = options.start;\n        if (!start)\n            start = range ? range[backwards ? \"end\" : \"start\"] : session.selection.getRange();\n         \n        if (start.start)\n            start = start[skipCurrent != backwards ? \"end\" : \"start\"];\n\n        var firstRow = range ? range.start.row : 0;\n        var lastRow = range ? range.end.row : session.getLength() - 1;\n\n        if (backwards) {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row--; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n            };\n        }\n        else {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row = row + 1; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n            };\n        }\n        \n        if (options.$isMultiLine) {\n            var len = re.length;\n            var forEachInLine = function(row, offset, callback) {\n                var startRow = backwards ? row - len + 1 : row;\n                if (startRow < 0) return;\n                var line = session.getLine(startRow);\n                var startIndex = line.search(re[0]);\n                if (!backwards && startIndex < offset || startIndex === -1) return;\n                for (var i = 1; i < len; i++) {\n                    line = session.getLine(startRow + i);\n                    if (line.search(re[i]) == -1)\n                        return;\n                }\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (backwards && endIndex > offset) return;\n                if (callback(startRow, startIndex, startRow + len - 1, endIndex))\n                    return true;\n            };\n        }\n        else if (backwards) {\n            var forEachInLine = function(row, endIndex, callback) {\n                var line = session.getLine(row);\n                var matches = [];\n                var m, last = 0;\n                re.lastIndex = 0;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (!length) {\n                        if (last >= line.length) break;\n                        re.lastIndex = last += 1;\n                    }\n                    if (m.index + length > endIndex)\n                        break;\n                    matches.push(m.index, length);\n                }\n                for (var i = matches.length - 1; i >= 0; i -= 2) {\n                    var column = matches[i - 1];\n                    var length = matches[i];\n                    if (callback(row, column, row, column + length))\n                        return true;\n                }\n            };\n        }\n        else {\n            var forEachInLine = function(row, startIndex, callback) {\n                var line = session.getLine(row);\n                var m;\n                var last = startIndex;\n                re.lastIndex = startIndex;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (callback(row, last, row,last + length))\n                        return true;\n                    if (!length) {\n                        re.lastIndex = last += 1;\n                        if (last >= line.length) return false;\n                    }\n                }\n            };\n        }\n        return {forEach: forEach};\n    };\n\n}).call(Search.prototype);\n\nfunction addWordBoundary(needle, options) {\n    function wordBoundary(c) {\n        if (/\\w/.test(c) || options.regExp) return \"\\\\b\";\n        return \"\";\n    }\n    return wordBoundary(needle[0]) + needle\n        + wordBoundary(needle[needle.length - 1]);\n}\n\nexports.Search = Search;\n});\n\nace.define(\"ace/keyboard/hash_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar keyUtil = acequire(\"../lib/keys\");\nvar useragent = acequire(\"../lib/useragent\");\nvar KEY_MODS = keyUtil.KEY_MODS;\n\nfunction HashHandler(config, platform) {\n    this.platform = platform || (useragent.isMac ? \"mac\" : \"win\");\n    this.commands = {};\n    this.commandKeyBinding = {};\n    this.addCommands(config);\n    this.$singleCommand = true;\n}\n\nfunction MultiHashHandler(config, platform) {\n    HashHandler.call(this, config, platform);\n    this.$singleCommand = false;\n}\n\nMultiHashHandler.prototype = HashHandler.prototype;\n\n(function() {\n    \n\n    this.addCommand = function(command) {\n        if (this.commands[command.name])\n            this.removeCommand(command);\n\n        this.commands[command.name] = command;\n\n        if (command.bindKey)\n            this._buildKeyHash(command);\n    };\n\n    this.removeCommand = function(command, keepCommand) {\n        var name = command && (typeof command === 'string' ? command : command.name);\n        command = this.commands[name];\n        if (!keepCommand)\n            delete this.commands[name];\n        var ckb = this.commandKeyBinding;\n        for (var keyId in ckb) {\n            var cmdGroup = ckb[keyId];\n            if (cmdGroup == command) {\n                delete ckb[keyId];\n            } else if (Array.isArray(cmdGroup)) {\n                var i = cmdGroup.indexOf(command);\n                if (i != -1) {\n                    cmdGroup.splice(i, 1);\n                    if (cmdGroup.length == 1)\n                        ckb[keyId] = cmdGroup[0];\n                }\n            }\n        }\n    };\n\n    this.bindKey = function(key, command, position) {\n        if (typeof key == \"object\" && key) {\n            if (position == undefined)\n                position = key.position;\n            key = key[this.platform];\n        }\n        if (!key)\n            return;\n        if (typeof command == \"function\")\n            return this.addCommand({exec: command, bindKey: key, name: command.name || key});\n        \n        key.split(\"|\").forEach(function(keyPart) {\n            var chain = \"\";\n            if (keyPart.indexOf(\" \") != -1) {\n                var parts = keyPart.split(/\\s+/);\n                keyPart = parts.pop();\n                parts.forEach(function(keyPart) {\n                    var binding = this.parseKeys(keyPart);\n                    var id = KEY_MODS[binding.hashId] + binding.key;\n                    chain += (chain ? \" \" : \"\") + id;\n                    this._addCommandToBinding(chain, \"chainKeys\");\n                }, this);\n                chain += \" \";\n            }\n            var binding = this.parseKeys(keyPart);\n            var id = KEY_MODS[binding.hashId] + binding.key;\n            this._addCommandToBinding(chain + id, command, position);\n        }, this);\n    };\n    \n    function getPosition(command) {\n        return typeof command == \"object\" && command.bindKey\n            && command.bindKey.position\n            || (command.isDefault ? -100 : 0);\n    }\n    this._addCommandToBinding = function(keyId, command, position) {\n        var ckb = this.commandKeyBinding, i;\n        if (!command) {\n            delete ckb[keyId];\n        } else if (!ckb[keyId] || this.$singleCommand) {\n            ckb[keyId] = command;\n        } else {\n            if (!Array.isArray(ckb[keyId])) {\n                ckb[keyId] = [ckb[keyId]];\n            } else if ((i = ckb[keyId].indexOf(command)) != -1) {\n                ckb[keyId].splice(i, 1);\n            }\n\n            if (typeof position != \"number\") {\n                position = getPosition(command);\n            }\n\n            var commands = ckb[keyId];\n            for (i = 0; i < commands.length; i++) {\n                var other = commands[i];\n                var otherPos = getPosition(other);\n                if (otherPos > position)\n                    break;\n            }\n            commands.splice(i, 0, command);\n        }\n    };\n\n    this.addCommands = function(commands) {\n        commands && Object.keys(commands).forEach(function(name) {\n            var command = commands[name];\n            if (!command)\n                return;\n            \n            if (typeof command === \"string\")\n                return this.bindKey(command, name);\n\n            if (typeof command === \"function\")\n                command = { exec: command };\n\n            if (typeof command !== \"object\")\n                return;\n\n            if (!command.name)\n                command.name = name;\n\n            this.addCommand(command);\n        }, this);\n    };\n\n    this.removeCommands = function(commands) {\n        Object.keys(commands).forEach(function(name) {\n            this.removeCommand(commands[name]);\n        }, this);\n    };\n\n    this.bindKeys = function(keyList) {\n        Object.keys(keyList).forEach(function(key) {\n            this.bindKey(key, keyList[key]);\n        }, this);\n    };\n\n    this._buildKeyHash = function(command) {\n        this.bindKey(command.bindKey, command);\n    };\n    this.parseKeys = function(keys) {\n        var parts = keys.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function(x){return x;});\n        var key = parts.pop();\n\n        var keyCode = keyUtil[key];\n        if (keyUtil.FUNCTION_KEYS[keyCode])\n            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();\n        else if (!parts.length)\n            return {key: key, hashId: -1};\n        else if (parts.length == 1 && parts[0] == \"shift\")\n            return {key: key.toUpperCase(), hashId: -1};\n\n        var hashId = 0;\n        for (var i = parts.length; i--;) {\n            var modifier = keyUtil.KEY_MODS[parts[i]];\n            if (modifier == null) {\n                if (typeof console != \"undefined\")\n                    console.error(\"invalid modifier \" + parts[i] + \" in \" + keys);\n                return false;\n            }\n            hashId |= modifier;\n        }\n        return {key: key, hashId: hashId};\n    };\n\n    this.findKeyCommand = function findKeyCommand(hashId, keyString) {\n        var key = KEY_MODS[hashId] + keyString;\n        return this.commandKeyBinding[key];\n    };\n\n    this.handleKeyboard = function(data, hashId, keyString, keyCode) {\n        if (keyCode < 0) return;\n        var key = KEY_MODS[hashId] + keyString;\n        var command = this.commandKeyBinding[key];\n        if (data.$keyChain) {\n            data.$keyChain += \" \" + key;\n            command = this.commandKeyBinding[data.$keyChain] || command;\n        }\n        \n        if (command) {\n            if (command == \"chainKeys\" || command[command.length - 1] == \"chainKeys\") {\n                data.$keyChain = data.$keyChain || key;\n                return {command: \"null\"};\n            }\n        }\n        \n        if (data.$keyChain) {\n            if ((!hashId || hashId == 4) && keyString.length == 1)\n                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input\n            else if (hashId == -1 || keyCode > 0)\n                data.$keyChain = \"\"; // reset keyChain\n        }\n        return {command: command};\n    };\n    \n    this.getStatusText = function(editor, data) {\n        return data.$keyChain || \"\";\n    };\n\n}).call(HashHandler.prototype);\n\nexports.HashHandler = HashHandler;\nexports.MultiHashHandler = MultiHashHandler;\n});\n\nace.define(\"ace/commands/command_manager\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/keyboard/hash_handler\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar MultiHashHandler = acequire(\"../keyboard/hash_handler\").MultiHashHandler;\nvar EventEmitter = acequire(\"../lib/event_emitter\").EventEmitter;\n\nvar CommandManager = function(platform, commands) {\n    MultiHashHandler.call(this, commands, platform);\n    this.byName = this.commands;\n    this.setDefaultHandler(\"exec\", function(e) {\n        return e.command.exec(e.editor, e.args || {});\n    });\n};\n\noop.inherits(CommandManager, MultiHashHandler);\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.exec = function(command, editor, args) {\n        if (Array.isArray(command)) {\n            for (var i = command.length; i--; ) {\n                if (this.exec(command[i], editor, args)) return true;\n            }\n            return false;\n        }\n\n        if (typeof command === \"string\")\n            command = this.commands[command];\n\n        if (!command)\n            return false;\n\n        if (editor && editor.$readOnly && !command.readOnly)\n            return false;\n\n        if (command.isAvailable && !command.isAvailable(editor))\n            return false;\n\n        var e = {editor: editor, command: command, args: args};\n        e.returnValue = this._emit(\"exec\", e);\n        this._signal(\"afterExec\", e);\n\n        return e.returnValue === false ? false : true;\n    };\n\n    this.toggleRecording = function(editor) {\n        if (this.$inReplay)\n            return;\n\n        editor && editor._emit(\"changeStatus\");\n        if (this.recording) {\n            this.macro.pop();\n            this.removeEventListener(\"exec\", this.$addCommandToMacro);\n\n            if (!this.macro.length)\n                this.macro = this.oldMacro;\n\n            return this.recording = false;\n        }\n        if (!this.$addCommandToMacro) {\n            this.$addCommandToMacro = function(e) {\n                this.macro.push([e.command, e.args]);\n            }.bind(this);\n        }\n\n        this.oldMacro = this.macro;\n        this.macro = [];\n        this.on(\"exec\", this.$addCommandToMacro);\n        return this.recording = true;\n    };\n\n    this.replay = function(editor) {\n        if (this.$inReplay || !this.macro)\n            return;\n\n        if (this.recording)\n            return this.toggleRecording(editor);\n\n        try {\n            this.$inReplay = true;\n            this.macro.forEach(function(x) {\n                if (typeof x == \"string\")\n                    this.exec(x, editor);\n                else\n                    this.exec(x[0], editor, x[1]);\n            }, this);\n        } finally {\n            this.$inReplay = false;\n        }\n    };\n\n    this.trimMacro = function(m) {\n        return m.map(function(x){\n            if (typeof x[0] != \"string\")\n                x[0] = x[0].name;\n            if (!x[1])\n                x = x[0];\n            return x;\n        });\n    };\n\n}).call(CommandManager.prototype);\n\nexports.CommandManager = CommandManager;\n\n});\n\nace.define(\"ace/commands/default_commands\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/config\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar lang = acequire(\"../lib/lang\");\nvar config = acequire(\"../config\");\nvar Range = acequire(\"../range\").Range;\n\nfunction bindKey(win, mac) {\n    return {win: win, mac: mac};\n}\nexports.commands = [{\n    name: \"showSettingsMenu\",\n    bindKey: bindKey(\"Ctrl-,\", \"Command-,\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/settings_menu\", function(module) {\n            module.init(editor);\n            editor.showSettingsMenu();\n        });\n    },\n    readOnly: true\n}, {\n    name: \"goToNextError\",\n    bindKey: bindKey(\"Alt-E\", \"F4\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, 1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"goToPreviousError\",\n    bindKey: bindKey(\"Alt-Shift-E\", \"Shift-F4\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, -1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selectall\",\n    bindKey: bindKey(\"Ctrl-A\", \"Command-A\"),\n    exec: function(editor) { editor.selectAll(); },\n    readOnly: true\n}, {\n    name: \"centerselection\",\n    bindKey: bindKey(null, \"Ctrl-L\"),\n    exec: function(editor) { editor.centerSelection(); },\n    readOnly: true\n}, {\n    name: \"gotoline\",\n    bindKey: bindKey(\"Ctrl-L\", \"Command-L\"),\n    exec: function(editor) {\n        var line = parseInt(prompt(\"Enter line number:\"), 10);\n        if (!isNaN(line)) {\n            editor.gotoLine(line);\n        }\n    },\n    readOnly: true\n}, {\n    name: \"fold\",\n    bindKey: bindKey(\"Alt-L|Ctrl-F1\", \"Command-Alt-L|Command-F1\"),\n    exec: function(editor) { editor.session.toggleFold(false); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfold\",\n    bindKey: bindKey(\"Alt-Shift-L|Ctrl-Shift-F1\", \"Command-Alt-Shift-L|Command-Shift-F1\"),\n    exec: function(editor) { editor.session.toggleFold(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleFoldWidget\",\n    bindKey: bindKey(\"F2\", \"F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleParentFoldWidget\",\n    bindKey: bindKey(\"Alt-F2\", \"Alt-F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldall\",\n    bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n    exec: function(editor) { editor.session.foldAll(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldOther\",\n    bindKey: bindKey(\"Alt-0\", \"Command-Option-0\"),\n    exec: function(editor) { \n        editor.session.foldAll();\n        editor.session.unfold(editor.selection.getAllRanges());\n    },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfoldall\",\n    bindKey: bindKey(\"Alt-Shift-0\", \"Command-Option-Shift-0\"),\n    exec: function(editor) { editor.session.unfold(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findnext\",\n    bindKey: bindKey(\"Ctrl-K\", \"Command-G\"),\n    exec: function(editor) { editor.findNext(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findprevious\",\n    bindKey: bindKey(\"Ctrl-Shift-K\", \"Command-Shift-G\"),\n    exec: function(editor) { editor.findPrevious(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"selectOrFindNext\",\n    bindKey: bindKey(\"Alt-K\", \"Ctrl-G\"),\n    exec: function(editor) {\n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findNext(); \n    },\n    readOnly: true\n}, {\n    name: \"selectOrFindPrevious\",\n    bindKey: bindKey(\"Alt-Shift-K\", \"Ctrl-Shift-G\"),\n    exec: function(editor) { \n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findPrevious();\n    },\n    readOnly: true\n}, {\n    name: \"find\",\n    bindKey: bindKey(\"Ctrl-F\", \"Command-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor);});\n    },\n    readOnly: true\n}, {\n    name: \"overwrite\",\n    bindKey: \"Insert\",\n    exec: function(editor) { editor.toggleOverwrite(); },\n    readOnly: true\n}, {\n    name: \"selecttostart\",\n    bindKey: bindKey(\"Ctrl-Shift-Home\", \"Command-Shift-Home|Command-Shift-Up\"),\n    exec: function(editor) { editor.getSelection().selectFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotostart\",\n    bindKey: bindKey(\"Ctrl-Home\", \"Command-Home|Command-Up\"),\n    exec: function(editor) { editor.navigateFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectup\",\n    bindKey: bindKey(\"Shift-Up\", \"Shift-Up|Ctrl-Shift-P\"),\n    exec: function(editor) { editor.getSelection().selectUp(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golineup\",\n    bindKey: bindKey(\"Up\", \"Up|Ctrl-P\"),\n    exec: function(editor, args) { editor.navigateUp(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttoend\",\n    bindKey: bindKey(\"Ctrl-Shift-End\", \"Command-Shift-End|Command-Shift-Down\"),\n    exec: function(editor) { editor.getSelection().selectFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotoend\",\n    bindKey: bindKey(\"Ctrl-End\", \"Command-End|Command-Down\"),\n    exec: function(editor) { editor.navigateFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectdown\",\n    bindKey: bindKey(\"Shift-Down\", \"Shift-Down|Ctrl-Shift-N\"),\n    exec: function(editor) { editor.getSelection().selectDown(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golinedown\",\n    bindKey: bindKey(\"Down\", \"Down|Ctrl-N\"),\n    exec: function(editor, args) { editor.navigateDown(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordleft\",\n    bindKey: bindKey(\"Ctrl-Shift-Left\", \"Option-Shift-Left\"),\n    exec: function(editor) { editor.getSelection().selectWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordleft\",\n    bindKey: bindKey(\"Ctrl-Left\", \"Option-Left\"),\n    exec: function(editor) { editor.navigateWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolinestart\",\n    bindKey: bindKey(\"Alt-Shift-Left\", \"Command-Shift-Left|Ctrl-Shift-A\"),\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolinestart\",\n    bindKey: bindKey(\"Alt-Left|Home\", \"Command-Left|Home|Ctrl-A\"),\n    exec: function(editor) { editor.navigateLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectleft\",\n    bindKey: bindKey(\"Shift-Left\", \"Shift-Left|Ctrl-Shift-B\"),\n    exec: function(editor) { editor.getSelection().selectLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoleft\",\n    bindKey: bindKey(\"Left\", \"Left|Ctrl-B\"),\n    exec: function(editor, args) { editor.navigateLeft(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordright\",\n    bindKey: bindKey(\"Ctrl-Shift-Right\", \"Option-Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordright\",\n    bindKey: bindKey(\"Ctrl-Right\", \"Option-Right\"),\n    exec: function(editor) { editor.navigateWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolineend\",\n    bindKey: bindKey(\"Alt-Shift-Right\", \"Command-Shift-Right|Shift-End|Ctrl-Shift-E\"),\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolineend\",\n    bindKey: bindKey(\"Alt-Right|End\", \"Command-Right|End|Ctrl-E\"),\n    exec: function(editor) { editor.navigateLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectright\",\n    bindKey: bindKey(\"Shift-Right\", \"Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoright\",\n    bindKey: bindKey(\"Right\", \"Right|Ctrl-F\"),\n    exec: function(editor, args) { editor.navigateRight(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectpagedown\",\n    bindKey: \"Shift-PageDown\",\n    exec: function(editor) { editor.selectPageDown(); },\n    readOnly: true\n}, {\n    name: \"pagedown\",\n    bindKey: bindKey(null, \"Option-PageDown\"),\n    exec: function(editor) { editor.scrollPageDown(); },\n    readOnly: true\n}, {\n    name: \"gotopagedown\",\n    bindKey: bindKey(\"PageDown\", \"PageDown|Ctrl-V\"),\n    exec: function(editor) { editor.gotoPageDown(); },\n    readOnly: true\n}, {\n    name: \"selectpageup\",\n    bindKey: \"Shift-PageUp\",\n    exec: function(editor) { editor.selectPageUp(); },\n    readOnly: true\n}, {\n    name: \"pageup\",\n    bindKey: bindKey(null, \"Option-PageUp\"),\n    exec: function(editor) { editor.scrollPageUp(); },\n    readOnly: true\n}, {\n    name: \"gotopageup\",\n    bindKey: \"PageUp\",\n    exec: function(editor) { editor.gotoPageUp(); },\n    readOnly: true\n}, {\n    name: \"scrollup\",\n    bindKey: bindKey(\"Ctrl-Up\", null),\n    exec: function(e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"scrolldown\",\n    bindKey: bindKey(\"Ctrl-Down\", null),\n    exec: function(e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"selectlinestart\",\n    bindKey: \"Shift-Home\",\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectlineend\",\n    bindKey: \"Shift-End\",\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"togglerecording\",\n    bindKey: bindKey(\"Ctrl-Alt-E\", \"Command-Option-E\"),\n    exec: function(editor) { editor.commands.toggleRecording(editor); },\n    readOnly: true\n}, {\n    name: \"replaymacro\",\n    bindKey: bindKey(\"Ctrl-Shift-E\", \"Command-Shift-E\"),\n    exec: function(editor) { editor.commands.replay(editor); },\n    readOnly: true\n}, {\n    name: \"jumptomatching\",\n    bindKey: bindKey(\"Ctrl-P\", \"Ctrl-P\"),\n    exec: function(editor) { editor.jumpToMatching(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selecttomatching\",\n    bindKey: bindKey(\"Ctrl-Shift-P\", \"Ctrl-Shift-P\"),\n    exec: function(editor) { editor.jumpToMatching(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"expandToMatching\",\n    bindKey: bindKey(\"Ctrl-Shift-M\", \"Ctrl-Shift-M\"),\n    exec: function(editor) { editor.jumpToMatching(true, true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"passKeysToBrowser\",\n    bindKey: bindKey(null, null),\n    exec: function() {},\n    passEvent: true,\n    readOnly: true\n}, {\n    name: \"copy\",\n    exec: function(editor) {\n    },\n    readOnly: true\n},\n{\n    name: \"cut\",\n    exec: function(editor) {\n        var range = editor.getSelectionRange();\n        editor._emit(\"cut\", range);\n\n        if (!editor.selection.isEmpty()) {\n            editor.session.remove(range);\n            editor.clearSelection();\n        }\n    },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"paste\",\n    exec: function(editor, args) {\n        editor.$handlePaste(args);\n    },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removeline\",\n    bindKey: bindKey(\"Ctrl-D\", \"Command-D\"),\n    exec: function(editor) { editor.removeLines(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"duplicateSelection\",\n    bindKey: bindKey(\"Ctrl-Shift-D\", \"Command-Shift-D\"),\n    exec: function(editor) { editor.duplicateSelection(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"sortlines\",\n    bindKey: bindKey(\"Ctrl-Alt-S\", \"Command-Alt-S\"),\n    exec: function(editor) { editor.sortLines(); },\n    scrollIntoView: \"selection\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"togglecomment\",\n    bindKey: bindKey(\"Ctrl-/\", \"Command-/\"),\n    exec: function(editor) { editor.toggleCommentLines(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"toggleBlockComment\",\n    bindKey: bindKey(\"Ctrl-Shift-/\", \"Command-Shift-/\"),\n    exec: function(editor) { editor.toggleBlockComment(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"modifyNumberUp\",\n    bindKey: bindKey(\"Ctrl-Shift-Up\", \"Alt-Shift-Up\"),\n    exec: function(editor) { editor.modifyNumber(1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"modifyNumberDown\",\n    bindKey: bindKey(\"Ctrl-Shift-Down\", \"Alt-Shift-Down\"),\n    exec: function(editor) { editor.modifyNumber(-1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"replace\",\n    bindKey: bindKey(\"Ctrl-H\", \"Command-Option-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor, true);});\n    }\n}, {\n    name: \"undo\",\n    bindKey: bindKey(\"Ctrl-Z\", \"Command-Z\"),\n    exec: function(editor) { editor.undo(); }\n}, {\n    name: \"redo\",\n    bindKey: bindKey(\"Ctrl-Shift-Z|Ctrl-Y\", \"Command-Shift-Z|Command-Y\"),\n    exec: function(editor) { editor.redo(); }\n}, {\n    name: \"copylinesup\",\n    bindKey: bindKey(\"Alt-Shift-Up\", \"Command-Option-Up\"),\n    exec: function(editor) { editor.copyLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesup\",\n    bindKey: bindKey(\"Alt-Up\", \"Option-Up\"),\n    exec: function(editor) { editor.moveLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"copylinesdown\",\n    bindKey: bindKey(\"Alt-Shift-Down\", \"Command-Option-Down\"),\n    exec: function(editor) { editor.copyLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesdown\",\n    bindKey: bindKey(\"Alt-Down\", \"Option-Down\"),\n    exec: function(editor) { editor.moveLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"del\",\n    bindKey: bindKey(\"Delete\", \"Delete|Ctrl-D|Shift-Delete\"),\n    exec: function(editor) { editor.remove(\"right\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"backspace\",\n    bindKey: bindKey(\n        \"Shift-Backspace|Backspace\",\n        \"Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H\"\n    ),\n    exec: function(editor) { editor.remove(\"left\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"cut_or_delete\",\n    bindKey: bindKey(\"Shift-Delete\", null),\n    exec: function(editor) { \n        if (editor.selection.isEmpty()) {\n            editor.remove(\"left\");\n        } else {\n            return false;\n        }\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestart\",\n    bindKey: bindKey(\"Alt-Backspace\", \"Command-Backspace\"),\n    exec: function(editor) { editor.removeToLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineend\",\n    bindKey: bindKey(\"Alt-Delete\", \"Ctrl-K|Command-Delete\"),\n    exec: function(editor) { editor.removeToLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestarthard\",\n    bindKey: bindKey(\"Ctrl-Shift-Backspace\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.start.column = 0;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineendhard\",\n    bindKey: bindKey(\"Ctrl-Shift-Delete\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.end.column = Number.MAX_VALUE;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordleft\",\n    bindKey: bindKey(\"Ctrl-Backspace\", \"Alt-Backspace|Ctrl-Alt-Backspace\"),\n    exec: function(editor) { editor.removeWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordright\",\n    bindKey: bindKey(\"Ctrl-Delete\", \"Alt-Delete\"),\n    exec: function(editor) { editor.removeWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"outdent\",\n    bindKey: bindKey(\"Shift-Tab\", \"Shift-Tab\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"indent\",\n    bindKey: bindKey(\"Tab\", \"Tab\"),\n    exec: function(editor) { editor.indent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockoutdent\",\n    bindKey: bindKey(\"Ctrl-[\", \"Ctrl-[\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockindent\",\n    bindKey: bindKey(\"Ctrl-]\", \"Ctrl-]\"),\n    exec: function(editor) { editor.blockIndent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"insertstring\",\n    exec: function(editor, str) { editor.insert(str); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"inserttext\",\n    exec: function(editor, args) {\n        editor.insert(lang.stringRepeat(args.text  || \"\", args.times || 1));\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"splitline\",\n    bindKey: bindKey(null, \"Ctrl-O\"),\n    exec: function(editor) { editor.splitLine(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"transposeletters\",\n    bindKey: bindKey(\"Alt-Shift-X\", \"Ctrl-T\"),\n    exec: function(editor) { editor.transposeLetters(); },\n    multiSelectAction: function(editor) {editor.transposeSelections(1); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"touppercase\",\n    bindKey: bindKey(\"Ctrl-U\", \"Ctrl-U\"),\n    exec: function(editor) { editor.toUpperCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"tolowercase\",\n    bindKey: bindKey(\"Ctrl-Shift-U\", \"Ctrl-Shift-U\"),\n    exec: function(editor) { editor.toLowerCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"expandtoline\",\n    bindKey: bindKey(\"Ctrl-Shift-L\", \"Command-Shift-L\"),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n\n        range.start.column = range.end.column = 0;\n        range.end.row++;\n        editor.selection.setRange(range, false);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"joinlines\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var isBackwards = editor.selection.isBackwards();\n        var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();\n        var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();\n        var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;\n        var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());\n        var selectedCount = selectedText.replace(/\\n\\s*/, \" \").length;\n        var insertLine = editor.session.doc.getLine(selectionStart.row);\n\n        for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {\n            var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));\n            if (curLine.length !== 0) {\n                curLine = \" \" + curLine;\n            }\n            insertLine += curLine;\n        }\n\n        if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {\n            insertLine += editor.session.doc.getNewLineCharacter();\n        }\n\n        editor.clearSelection();\n        editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);\n\n        if (selectedCount > 0) {\n            editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);\n            editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);\n        } else {\n            firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;\n            editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);\n        }\n    },\n    multiSelectAction: \"forEach\",\n    readOnly: true\n}, {\n    name: \"invertSelection\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var endRow = editor.session.doc.getLength() - 1;\n        var endCol = editor.session.doc.getLine(endRow).length;\n        var ranges = editor.selection.rangeList.ranges;\n        var newRanges = [];\n        if (ranges.length < 1) {\n            ranges = [editor.selection.getRange()];\n        }\n\n        for (var i = 0; i < ranges.length; i++) {\n            if (i == (ranges.length - 1)) {\n                if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {\n                    newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));\n                }\n            }\n\n            if (i === 0) {\n                if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {\n                    newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));\n                }\n            } else {\n                newRanges.push(new Range(ranges[i-1].end.row, ranges[i-1].end.column, ranges[i].start.row, ranges[i].start.column));\n            }\n        }\n\n        editor.exitMultiSelectMode();\n        editor.clearSelection();\n\n        for(var i = 0; i < newRanges.length; i++) {\n            editor.selection.addRange(newRanges[i], false);\n        }\n    },\n    readOnly: true,\n    scrollIntoView: \"none\"\n}];\n\n});\n\nace.define(\"ace/editor\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/useragent\",\"ace/keyboard/textinput\",\"ace/mouse/mouse_handler\",\"ace/mouse/fold_handler\",\"ace/keyboard/keybinding\",\"ace/edit_session\",\"ace/search\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/commands/command_manager\",\"ace/commands/default_commands\",\"ace/config\",\"ace/token_iterator\"], function(acequire, exports, module) {\n\"use strict\";\n\nacequire(\"./lib/fixoldbrowsers\");\n\nvar oop = acequire(\"./lib/oop\");\nvar dom = acequire(\"./lib/dom\");\nvar lang = acequire(\"./lib/lang\");\nvar useragent = acequire(\"./lib/useragent\");\nvar TextInput = acequire(\"./keyboard/textinput\").TextInput;\nvar MouseHandler = acequire(\"./mouse/mouse_handler\").MouseHandler;\nvar FoldHandler = acequire(\"./mouse/fold_handler\").FoldHandler;\nvar KeyBinding = acequire(\"./keyboard/keybinding\").KeyBinding;\nvar EditSession = acequire(\"./edit_session\").EditSession;\nvar Search = acequire(\"./search\").Search;\nvar Range = acequire(\"./range\").Range;\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\nvar CommandManager = acequire(\"./commands/command_manager\").CommandManager;\nvar defaultCommands = acequire(\"./commands/default_commands\").commands;\nvar config = acequire(\"./config\");\nvar TokenIterator = acequire(\"./token_iterator\").TokenIterator;\nvar Editor = function(renderer, session) {\n    var container = renderer.getContainerElement();\n    this.container = container;\n    this.renderer = renderer;\n    this.id = \"editor\" + (++Editor.$uid);\n\n    this.commands = new CommandManager(useragent.isMac ? \"mac\" : \"win\", defaultCommands);\n    if (typeof document == \"object\") {\n        this.textInput  = new TextInput(renderer.getTextAreaContainer(), this);\n        this.renderer.textarea = this.textInput.getElement();\n        this.$mouseHandler = new MouseHandler(this);\n        new FoldHandler(this);\n    }\n\n    this.keyBinding = new KeyBinding(this);\n\n    this.$blockScrolling = 0;\n    this.$search = new Search().set({\n        wrap: true\n    });\n\n    this.$historyTracker = this.$historyTracker.bind(this);\n    this.commands.on(\"exec\", this.$historyTracker);\n\n    this.$initOperationListeners();\n    \n    this._$emitInputEvent = lang.delayedCall(function() {\n        this._signal(\"input\", {});\n        if (this.session && this.session.bgTokenizer)\n            this.session.bgTokenizer.scheduleStart();\n    }.bind(this));\n    \n    this.on(\"change\", function(_, _self) {\n        _self._$emitInputEvent.schedule(31);\n    });\n\n    this.setSession(session || new EditSession(\"\"));\n    config.resetOptions(this);\n    config._signal(\"editor\", this);\n};\n\nEditor.$uid = 0;\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    this.$initOperationListeners = function() {\n        function last(a) {return a[a.length - 1];}\n\n        this.selections = [];\n        this.commands.on(\"exec\", this.startOperation.bind(this), true);\n        this.commands.on(\"afterExec\", this.endOperation.bind(this), true);\n\n        this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this));\n\n        this.on(\"change\", function() {\n            this.curOp || this.startOperation();\n            this.curOp.docChanged = true;\n        }.bind(this), true);\n\n        this.on(\"changeSelection\", function() {\n            this.curOp || this.startOperation();\n            this.curOp.selectionChanged = true;\n        }.bind(this), true);\n    };\n\n    this.curOp = null;\n    this.prevOp = {};\n    this.startOperation = function(commadEvent) {\n        if (this.curOp) {\n            if (!commadEvent || this.curOp.command)\n                return;\n            this.prevOp = this.curOp;\n        }\n        if (!commadEvent) {\n            this.previousCommand = null;\n            commadEvent = {};\n        }\n\n        this.$opResetTimer.schedule();\n        this.curOp = {\n            command: commadEvent.command || {},\n            args: commadEvent.args,\n            scrollTop: this.renderer.scrollTop\n        };\n        if (this.curOp.command.name && this.curOp.command.scrollIntoView !== undefined)\n            this.$blockScrolling++;\n    };\n\n    this.endOperation = function(e) {\n        if (this.curOp) {\n            if (e && e.returnValue === false)\n                return this.curOp = null;\n            this._signal(\"beforeEndOperation\");\n            var command = this.curOp.command;\n            if (command.name && this.$blockScrolling > 0)\n                this.$blockScrolling--;\n            var scrollIntoView = command && command.scrollIntoView;\n            if (scrollIntoView) {\n                switch (scrollIntoView) {\n                    case \"center-animate\":\n                        scrollIntoView = \"animate\";\n                    case \"center\":\n                        this.renderer.scrollCursorIntoView(null, 0.5);\n                        break;\n                    case \"animate\":\n                    case \"cursor\":\n                        this.renderer.scrollCursorIntoView();\n                        break;\n                    case \"selectionPart\":\n                        var range = this.selection.getRange();\n                        var config = this.renderer.layerConfig;\n                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {\n                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                if (scrollIntoView == \"animate\")\n                    this.renderer.animateScrolling(this.curOp.scrollTop);\n            }\n            \n            this.prevOp = this.curOp;\n            this.curOp = null;\n        }\n    };\n    this.$mergeableCommands = [\"backspace\", \"del\", \"insertstring\"];\n    this.$historyTracker = function(e) {\n        if (!this.$mergeUndoDeltas)\n            return;\n\n        var prev = this.prevOp;\n        var mergeableCommands = this.$mergeableCommands;\n        var shouldMerge = prev.command && (e.command.name == prev.command.name);\n        if (e.command.name == \"insertstring\") {\n            var text = e.args;\n            if (this.mergeNextCommand === undefined)\n                this.mergeNextCommand = true;\n\n            shouldMerge = shouldMerge\n                && this.mergeNextCommand // previous command allows to coalesce with\n                && (!/\\s/.test(text) || /\\s/.test(prev.args)); // previous insertion was of same type\n\n            this.mergeNextCommand = true;\n        } else {\n            shouldMerge = shouldMerge\n                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable\n        }\n\n        if (\n            this.$mergeUndoDeltas != \"always\"\n            && Date.now() - this.sequenceStartTime > 2000\n        ) {\n            shouldMerge = false; // the sequence is too long\n        }\n\n        if (shouldMerge)\n            this.session.mergeUndoDeltas = true;\n        else if (mergeableCommands.indexOf(e.command.name) !== -1)\n            this.sequenceStartTime = Date.now();\n    };\n    this.setKeyboardHandler = function(keyboardHandler, cb) {\n        if (keyboardHandler && typeof keyboardHandler === \"string\") {\n            this.$keybindingId = keyboardHandler;\n            var _self = this;\n            config.loadModule([\"keybinding\", keyboardHandler], function(module) {\n                if (_self.$keybindingId == keyboardHandler)\n                    _self.keyBinding.setKeyboardHandler(module && module.handler);\n                cb && cb();\n            });\n        } else {\n            this.$keybindingId = null;\n            this.keyBinding.setKeyboardHandler(keyboardHandler);\n            cb && cb();\n        }\n    };\n    this.getKeyboardHandler = function() {\n        return this.keyBinding.getKeyboardHandler();\n    };\n    this.setSession = function(session) {\n        if (this.session == session)\n            return;\n        if (this.curOp) this.endOperation();\n        this.curOp = {};\n\n        var oldSession = this.session;\n        if (oldSession) {\n            this.session.off(\"change\", this.$onDocumentChange);\n            this.session.off(\"changeMode\", this.$onChangeMode);\n            this.session.off(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.session.off(\"changeTabSize\", this.$onChangeTabSize);\n            this.session.off(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.session.off(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.session.off(\"changeFold\", this.$onChangeFold);\n            this.session.off(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.session.off(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.session.off(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.session.off(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.session.off(\"changeOverwrite\", this.$onCursorChange);\n            this.session.off(\"changeScrollTop\", this.$onScrollTopChange);\n            this.session.off(\"changeScrollLeft\", this.$onScrollLeftChange);\n\n            var selection = this.session.getSelection();\n            selection.off(\"changeCursor\", this.$onCursorChange);\n            selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n\n        this.session = session;\n        if (session) {\n            this.$onDocumentChange = this.onDocumentChange.bind(this);\n            session.on(\"change\", this.$onDocumentChange);\n            this.renderer.setSession(session);\n    \n            this.$onChangeMode = this.onChangeMode.bind(this);\n            session.on(\"changeMode\", this.$onChangeMode);\n    \n            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);\n            session.on(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n    \n            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);\n            session.on(\"changeTabSize\", this.$onChangeTabSize);\n    \n            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n            session.on(\"changeWrapLimit\", this.$onChangeWrapLimit);\n    \n            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);\n            session.on(\"changeWrapMode\", this.$onChangeWrapMode);\n    \n            this.$onChangeFold = this.onChangeFold.bind(this);\n            session.on(\"changeFold\", this.$onChangeFold);\n    \n            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);\n            this.session.on(\"changeFrontMarker\", this.$onChangeFrontMarker);\n    \n            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);\n            this.session.on(\"changeBackMarker\", this.$onChangeBackMarker);\n    \n            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);\n            this.session.on(\"changeBreakpoint\", this.$onChangeBreakpoint);\n    \n            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);\n            this.session.on(\"changeAnnotation\", this.$onChangeAnnotation);\n    \n            this.$onCursorChange = this.onCursorChange.bind(this);\n            this.session.on(\"changeOverwrite\", this.$onCursorChange);\n    \n            this.$onScrollTopChange = this.onScrollTopChange.bind(this);\n            this.session.on(\"changeScrollTop\", this.$onScrollTopChange);\n    \n            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);\n            this.session.on(\"changeScrollLeft\", this.$onScrollLeftChange);\n    \n            this.selection = session.getSelection();\n            this.selection.on(\"changeCursor\", this.$onCursorChange);\n    \n            this.$onSelectionChange = this.onSelectionChange.bind(this);\n            this.selection.on(\"changeSelection\", this.$onSelectionChange);\n    \n            this.onChangeMode();\n    \n            this.$blockScrolling += 1;\n            this.onCursorChange();\n            this.$blockScrolling -= 1;\n    \n            this.onScrollTopChange();\n            this.onScrollLeftChange();\n            this.onSelectionChange();\n            this.onChangeFrontMarker();\n            this.onChangeBackMarker();\n            this.onChangeBreakpoint();\n            this.onChangeAnnotation();\n            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();\n            this.renderer.updateFull();\n        } else {\n            this.selection = null;\n            this.renderer.setSession(session);\n        }\n\n        this._signal(\"changeSession\", {\n            session: session,\n            oldSession: oldSession\n        });\n        \n        this.curOp = null;\n        \n        oldSession && oldSession._signal(\"changeEditor\", {oldEditor: this});\n        session && session._signal(\"changeEditor\", {editor: this});\n\n        if (session && session.bgTokenizer)\n            session.bgTokenizer.scheduleStart();\n    };\n    this.getSession = function() {\n        return this.session;\n    };\n    this.setValue = function(val, cursorPos) {\n        this.session.doc.setValue(val);\n\n        if (!cursorPos)\n            this.selectAll();\n        else if (cursorPos == 1)\n            this.navigateFileEnd();\n        else if (cursorPos == -1)\n            this.navigateFileStart();\n\n        return val;\n    };\n    this.getValue = function() {\n        return this.session.getValue();\n    };\n    this.getSelection = function() {\n        return this.selection;\n    };\n    this.resize = function(force) {\n        this.renderer.onResize(force);\n    };\n    this.setTheme = function(theme, cb) {\n        this.renderer.setTheme(theme, cb);\n    };\n    this.getTheme = function() {\n        return this.renderer.getTheme();\n    };\n    this.setStyle = function(style) {\n        this.renderer.setStyle(style);\n    };\n    this.unsetStyle = function(style) {\n        this.renderer.unsetStyle(style);\n    };\n    this.getFontSize = function () {\n        return this.getOption(\"fontSize\") ||\n           dom.computedStyle(this.container, \"fontSize\");\n    };\n    this.setFontSize = function(size) {\n        this.setOption(\"fontSize\", size);\n    };\n\n    this.$highlightBrackets = function() {\n        if (this.session.$bracketHighlight) {\n            this.session.removeMarker(this.session.$bracketHighlight);\n            this.session.$bracketHighlight = null;\n        }\n\n        if (this.$highlightPending) {\n            return;\n        }\n        var self = this;\n        this.$highlightPending = true;\n        setTimeout(function() {\n            self.$highlightPending = false;\n            var session = self.session;\n            if (!session || !session.bgTokenizer) return;\n            var pos = session.findMatchingBracket(self.getCursorPosition());\n            if (pos) {\n                var range = new Range(pos.row, pos.column, pos.row, pos.column + 1);\n            } else if (session.$mode.getMatching) {\n                var range = session.$mode.getMatching(self.session);\n            }\n            if (range)\n                session.$bracketHighlight = session.addMarker(range, \"ace_bracket\", \"text\");\n        }, 50);\n    };\n    this.$highlightTags = function() {\n        if (this.$highlightTagPending)\n            return;\n        var self = this;\n        this.$highlightTagPending = true;\n        setTimeout(function() {\n            self.$highlightTagPending = false;\n            \n            var session = self.session;\n            if (!session || !session.bgTokenizer) return;\n            \n            var pos = self.getCursorPosition();\n            var iterator = new TokenIterator(self.session, pos.row, pos.column);\n            var token = iterator.getCurrentToken();\n            \n            if (!token || !/\\b(?:tag-open|tag-name)/.test(token.type)) {\n                session.removeMarker(session.$tagHighlight);\n                session.$tagHighlight = null;\n                return;\n            }\n            \n            if (token.type.indexOf(\"tag-open\") != -1) {\n                token = iterator.stepForward();\n                if (!token)\n                    return;\n            }\n            \n            var tag = token.value;\n            var depth = 0;\n            var prevToken = iterator.stepBackward();\n            \n            if (prevToken.value == '<'){\n                do {\n                    prevToken = token;\n                    token = iterator.stepForward();\n                    \n                    if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {\n                        if (prevToken.value === '<'){\n                            depth++;\n                        } else if (prevToken.value === '</'){\n                            depth--;\n                        }\n                    }\n                    \n                } while (token && depth >= 0);\n            } else {\n                do {\n                    token = prevToken;\n                    prevToken = iterator.stepBackward();\n                    \n                    if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                        } else if (prevToken.value === '</') {\n                            depth--;\n                        }\n                    }\n                } while (prevToken && depth <= 0);\n                iterator.stepForward();\n            }\n            \n            if (!token) {\n                session.removeMarker(session.$tagHighlight);\n                session.$tagHighlight = null;\n                return;\n            }\n            \n            var row = iterator.getCurrentTokenRow();\n            var column = iterator.getCurrentTokenColumn();\n            var range = new Range(row, column, row, column+token.value.length);\n            var sbm = session.$backMarkers[session.$tagHighlight];\n            if (session.$tagHighlight && sbm != undefined && range.compareRange(sbm.range) !== 0) {\n                session.removeMarker(session.$tagHighlight);\n                session.$tagHighlight = null;\n            }\n            \n            if (range && !session.$tagHighlight)\n                session.$tagHighlight = session.addMarker(range, \"ace_bracket\", \"text\");\n        }, 50);\n    };\n    this.focus = function() {\n        var _self = this;\n        setTimeout(function() {\n            _self.textInput.focus();\n        });\n        this.textInput.focus();\n    };\n    this.isFocused = function() {\n        return this.textInput.isFocused();\n    };\n    this.blur = function() {\n        this.textInput.blur();\n    };\n    this.onFocus = function(e) {\n        if (this.$isFocused)\n            return;\n        this.$isFocused = true;\n        this.renderer.showCursor();\n        this.renderer.visualizeFocus();\n        this._emit(\"focus\", e);\n    };\n    this.onBlur = function(e) {\n        if (!this.$isFocused)\n            return;\n        this.$isFocused = false;\n        this.renderer.hideCursor();\n        this.renderer.visualizeBlur();\n        this._emit(\"blur\", e);\n    };\n\n    this.$cursorChange = function() {\n        this.renderer.updateCursor();\n    };\n    this.onDocumentChange = function(delta) {\n        var wrap = this.session.$useWrapMode;\n        var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);\n        this.renderer.updateLines(delta.start.row, lastRow, wrap);\n\n        this._signal(\"change\", delta);\n        this.$cursorChange();\n        this.$updateHighlightActiveLine();\n    };\n\n    this.onTokenizerUpdate = function(e) {\n        var rows = e.data;\n        this.renderer.updateLines(rows.first, rows.last);\n    };\n\n\n    this.onScrollTopChange = function() {\n        this.renderer.scrollToY(this.session.getScrollTop());\n    };\n\n    this.onScrollLeftChange = function() {\n        this.renderer.scrollToX(this.session.getScrollLeft());\n    };\n    this.onCursorChange = function() {\n        this.$cursorChange();\n\n        if (!this.$blockScrolling) {\n            config.warn(\"Automatically scrolling cursor into view after selection change\",\n                \"this will be disabled in the next version\",\n                \"set editor.$blockScrolling = Infinity to disable this message\"\n            );\n            this.renderer.scrollCursorIntoView();\n        }\n\n        this.$highlightBrackets();\n        this.$highlightTags();\n        this.$updateHighlightActiveLine();\n        this._signal(\"changeSelection\");\n    };\n\n    this.$updateHighlightActiveLine = function() {\n        var session = this.getSession();\n\n        var highlight;\n        if (this.$highlightActiveLine) {\n            if ((this.$selectionStyle != \"line\" || !this.selection.isMultiLine()))\n                highlight = this.getCursorPosition();\n            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))\n                highlight = false;\n        }\n\n        if (session.$highlightLineMarker && !highlight) {\n            session.removeMarker(session.$highlightLineMarker.id);\n            session.$highlightLineMarker = null;\n        } else if (!session.$highlightLineMarker && highlight) {\n            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);\n            range.id = session.addMarker(range, \"ace_active-line\", \"screenLine\");\n            session.$highlightLineMarker = range;\n        } else if (highlight) {\n            session.$highlightLineMarker.start.row = highlight.row;\n            session.$highlightLineMarker.end.row = highlight.row;\n            session.$highlightLineMarker.start.column = highlight.column;\n            session._signal(\"changeBackMarker\");\n        }\n    };\n\n    this.onSelectionChange = function(e) {\n        var session = this.session;\n\n        if (session.$selectionMarker) {\n            session.removeMarker(session.$selectionMarker);\n        }\n        session.$selectionMarker = null;\n\n        if (!this.selection.isEmpty()) {\n            var range = this.selection.getRange();\n            var style = this.getSelectionStyle();\n            session.$selectionMarker = session.addMarker(range, \"ace_selection\", style);\n        } else {\n            this.$updateHighlightActiveLine();\n        }\n\n        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();\n        this.session.highlight(re);\n\n        this._signal(\"changeSelection\");\n    };\n\n    this.$getSelectionHighLightRegexp = function() {\n        var session = this.session;\n\n        var selection = this.getSelectionRange();\n        if (selection.isEmpty() || selection.isMultiLine())\n            return;\n\n        var startOuter = selection.start.column - 1;\n        var endOuter = selection.end.column + 1;\n        var line = session.getLine(selection.start.row);\n        var lineCols = line.length;\n        var needle = line.substring(Math.max(startOuter, 0),\n                                    Math.min(endOuter, lineCols));\n        if ((startOuter >= 0 && /^[\\w\\d]/.test(needle)) ||\n            (endOuter <= lineCols && /[\\w\\d]$/.test(needle)))\n            return;\n\n        needle = line.substring(selection.start.column, selection.end.column);\n        if (!/^[\\w\\d]+$/.test(needle))\n            return;\n\n        var re = this.$search.$assembleRegExp({\n            wholeWord: true,\n            caseSensitive: true,\n            needle: needle\n        });\n\n        return re;\n    };\n\n\n    this.onChangeFrontMarker = function() {\n        this.renderer.updateFrontMarkers();\n    };\n\n    this.onChangeBackMarker = function() {\n        this.renderer.updateBackMarkers();\n    };\n\n\n    this.onChangeBreakpoint = function() {\n        this.renderer.updateBreakpoints();\n    };\n\n    this.onChangeAnnotation = function() {\n        this.renderer.setAnnotations(this.session.getAnnotations());\n    };\n\n\n    this.onChangeMode = function(e) {\n        this.renderer.updateText();\n        this._emit(\"changeMode\", e);\n    };\n\n\n    this.onChangeWrapLimit = function() {\n        this.renderer.updateFull();\n    };\n\n    this.onChangeWrapMode = function() {\n        this.renderer.onResize(true);\n    };\n\n\n    this.onChangeFold = function() {\n        this.$updateHighlightActiveLine();\n        this.renderer.updateFull();\n    };\n    this.getSelectedText = function() {\n        return this.session.getTextRange(this.getSelectionRange());\n    };\n    this.getCopyText = function() {\n        var text = this.getSelectedText();\n        this._signal(\"copy\", text);\n        return text;\n    };\n    this.onCopy = function() {\n        this.commands.exec(\"copy\", this);\n    };\n    this.onCut = function() {\n        this.commands.exec(\"cut\", this);\n    };\n    this.onPaste = function(text, event) {\n        var e = {text: text, event: event};\n        this.commands.exec(\"paste\", this, e);\n    };\n    \n    this.$handlePaste = function(e) {\n        if (typeof e == \"string\") \n            e = {text: e};\n        this._signal(\"paste\", e);\n        var text = e.text;\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {\n            this.insert(text);\n        } else {\n            var lines = text.split(/\\r\\n|\\r|\\n/);\n            var ranges = this.selection.rangeList.ranges;\n    \n            if (lines.length > ranges.length || lines.length < 2 || !lines[1])\n                return this.commands.exec(\"insertstring\", this, text);\n    \n            for (var i = ranges.length; i--;) {\n                var range = ranges[i];\n                if (!range.isEmpty())\n                    this.session.remove(range);\n    \n                this.session.insert(range.start, lines[i]);\n            }\n        }\n    };\n\n    this.execCommand = function(command, args) {\n        return this.commands.exec(command, this, args);\n    };\n    this.insert = function(text, pasted) {\n        var session = this.session;\n        var mode = session.getMode();\n        var cursor = this.getCursorPosition();\n\n        if (this.getBehavioursEnabled() && !pasted) {\n            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);\n            if (transform) {\n                if (text !== transform.text) {\n                    this.session.mergeUndoDeltas = false;\n                    this.$mergeNextCommand = false;\n                }\n                text = transform.text;\n\n            }\n        }\n        \n        if (text == \"\\t\")\n            text = this.session.getTabString();\n        if (!this.selection.isEmpty()) {\n            var range = this.getSelectionRange();\n            cursor = this.session.remove(range);\n            this.clearSelection();\n        }\n        else if (this.session.getOverwrite() && text.indexOf(\"\\n\") == -1) {\n            var range = new Range.fromPoints(cursor, cursor);\n            range.end.column += text.length;\n            this.session.remove(range);\n        }\n\n        if (text == \"\\n\" || text == \"\\r\\n\") {\n            var line = session.getLine(cursor.row);\n            if (cursor.column > line.search(/\\S|$/)) {\n                var d = line.substr(cursor.column).search(/\\S|$/);\n                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);\n            }\n        }\n        this.clearSelection();\n\n        var start = cursor.column;\n        var lineState = session.getState(cursor.row);\n        var line = session.getLine(cursor.row);\n        var shouldOutdent = mode.checkOutdent(lineState, line, text);\n        var end = session.insert(cursor, text);\n\n        if (transform && transform.selection) {\n            if (transform.selection.length == 2) { // Transform relative to the current column\n                this.selection.setSelectionRange(\n                    new Range(cursor.row, start + transform.selection[0],\n                              cursor.row, start + transform.selection[1]));\n            } else { // Transform relative to the current row.\n                this.selection.setSelectionRange(\n                    new Range(cursor.row + transform.selection[0],\n                              transform.selection[1],\n                              cursor.row + transform.selection[2],\n                              transform.selection[3]));\n            }\n        }\n\n        if (session.getDocument().isNewLine(text)) {\n            var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());\n\n            session.insert({row: cursor.row+1, column: 0}, lineIndent);\n        }\n        if (shouldOutdent)\n            mode.autoOutdent(lineState, session, cursor.row);\n    };\n\n    this.onTextInput = function(text) {\n        this.keyBinding.onTextInput(text);\n    };\n\n    this.onCommandKey = function(e, hashId, keyCode) {\n        this.keyBinding.onCommandKey(e, hashId, keyCode);\n    };\n    this.setOverwrite = function(overwrite) {\n        this.session.setOverwrite(overwrite);\n    };\n    this.getOverwrite = function() {\n        return this.session.getOverwrite();\n    };\n    this.toggleOverwrite = function() {\n        this.session.toggleOverwrite();\n    };\n    this.setScrollSpeed = function(speed) {\n        this.setOption(\"scrollSpeed\", speed);\n    };\n    this.getScrollSpeed = function() {\n        return this.getOption(\"scrollSpeed\");\n    };\n    this.setDragDelay = function(dragDelay) {\n        this.setOption(\"dragDelay\", dragDelay);\n    };\n    this.getDragDelay = function() {\n        return this.getOption(\"dragDelay\");\n    };\n    this.setSelectionStyle = function(val) {\n        this.setOption(\"selectionStyle\", val);\n    };\n    this.getSelectionStyle = function() {\n        return this.getOption(\"selectionStyle\");\n    };\n    this.setHighlightActiveLine = function(shouldHighlight) {\n        this.setOption(\"highlightActiveLine\", shouldHighlight);\n    };\n    this.getHighlightActiveLine = function() {\n        return this.getOption(\"highlightActiveLine\");\n    };\n    this.setHighlightGutterLine = function(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n\n    this.getHighlightGutterLine = function() {\n        return this.getOption(\"highlightGutterLine\");\n    };\n    this.setHighlightSelectedWord = function(shouldHighlight) {\n        this.setOption(\"highlightSelectedWord\", shouldHighlight);\n    };\n    this.getHighlightSelectedWord = function() {\n        return this.$highlightSelectedWord;\n    };\n\n    this.setAnimatedScroll = function(shouldAnimate){\n        this.renderer.setAnimatedScroll(shouldAnimate);\n    };\n\n    this.getAnimatedScroll = function(){\n        return this.renderer.getAnimatedScroll();\n    };\n    this.setShowInvisibles = function(showInvisibles) {\n        this.renderer.setShowInvisibles(showInvisibles);\n    };\n    this.getShowInvisibles = function() {\n        return this.renderer.getShowInvisibles();\n    };\n\n    this.setDisplayIndentGuides = function(display) {\n        this.renderer.setDisplayIndentGuides(display);\n    };\n\n    this.getDisplayIndentGuides = function() {\n        return this.renderer.getDisplayIndentGuides();\n    };\n    this.setShowPrintMargin = function(showPrintMargin) {\n        this.renderer.setShowPrintMargin(showPrintMargin);\n    };\n    this.getShowPrintMargin = function() {\n        return this.renderer.getShowPrintMargin();\n    };\n    this.setPrintMarginColumn = function(showPrintMargin) {\n        this.renderer.setPrintMarginColumn(showPrintMargin);\n    };\n    this.getPrintMarginColumn = function() {\n        return this.renderer.getPrintMarginColumn();\n    };\n    this.setReadOnly = function(readOnly) {\n        this.setOption(\"readOnly\", readOnly);\n    };\n    this.getReadOnly = function() {\n        return this.getOption(\"readOnly\");\n    };\n    this.setBehavioursEnabled = function (enabled) {\n        this.setOption(\"behavioursEnabled\", enabled);\n    };\n    this.getBehavioursEnabled = function () {\n        return this.getOption(\"behavioursEnabled\");\n    };\n    this.setWrapBehavioursEnabled = function (enabled) {\n        this.setOption(\"wrapBehavioursEnabled\", enabled);\n    };\n    this.getWrapBehavioursEnabled = function () {\n        return this.getOption(\"wrapBehavioursEnabled\");\n    };\n    this.setShowFoldWidgets = function(show) {\n        this.setOption(\"showFoldWidgets\", show);\n\n    };\n    this.getShowFoldWidgets = function() {\n        return this.getOption(\"showFoldWidgets\");\n    };\n\n    this.setFadeFoldWidgets = function(fade) {\n        this.setOption(\"fadeFoldWidgets\", fade);\n    };\n\n    this.getFadeFoldWidgets = function() {\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n    this.remove = function(dir) {\n        if (this.selection.isEmpty()){\n            if (dir == \"left\")\n                this.selection.selectLeft();\n            else\n                this.selection.selectRight();\n        }\n\n        var range = this.getSelectionRange();\n        if (this.getBehavioursEnabled()) {\n            var session = this.session;\n            var state = session.getState(range.start.row);\n            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);\n\n            if (range.end.column === 0) {\n                var text = session.getTextRange(range);\n                if (text[text.length - 1] == \"\\n\") {\n                    var line = session.getLine(range.end.row);\n                    if (/^\\s+$/.test(line)) {\n                        range.end.column = line.length;\n                    }\n                }\n            }\n            if (new_range)\n                range = new_range;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    this.removeWordRight = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordRight();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeWordLeft = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordLeft();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeToLineStart = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineStart();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeToLineEnd = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineEnd();\n\n        var range = this.getSelectionRange();\n        if (range.start.column == range.end.column && range.start.row == range.end.row) {\n            range.end.column = 0;\n            range.end.row++;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    this.splitLine = function() {\n        if (!this.selection.isEmpty()) {\n            this.session.remove(this.getSelectionRange());\n            this.clearSelection();\n        }\n\n        var cursor = this.getCursorPosition();\n        this.insert(\"\\n\");\n        this.moveCursorToPosition(cursor);\n    };\n    this.transposeLetters = function() {\n        if (!this.selection.isEmpty()) {\n            return;\n        }\n\n        var cursor = this.getCursorPosition();\n        var column = cursor.column;\n        if (column === 0)\n            return;\n\n        var line = this.session.getLine(cursor.row);\n        var swap, range;\n        if (column < line.length) {\n            swap = line.charAt(column) + line.charAt(column-1);\n            range = new Range(cursor.row, column-1, cursor.row, column+1);\n        }\n        else {\n            swap = line.charAt(column-1) + line.charAt(column-2);\n            range = new Range(cursor.row, column-2, cursor.row, column);\n        }\n        this.session.replace(range, swap);\n        this.session.selection.moveToPosition(range.end);\n    };\n    this.toLowerCase = function() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toLowerCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    this.toUpperCase = function() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toUpperCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    this.indent = function() {\n        var session = this.session;\n        var range = this.getSelectionRange();\n\n        if (range.start.row < range.end.row) {\n            var rows = this.$getSelectedRows();\n            session.indentRows(rows.first, rows.last, \"\\t\");\n            return;\n        } else if (range.start.column < range.end.column) {\n            var text = session.getTextRange(range);\n            if (!/^\\s+$/.test(text)) {\n                var rows = this.$getSelectedRows();\n                session.indentRows(rows.first, rows.last, \"\\t\");\n                return;\n            }\n        }\n        \n        var line = session.getLine(range.start.row);\n        var position = range.start;\n        var size = session.getTabSize();\n        var column = session.documentToScreenColumn(position.row, position.column);\n\n        if (this.session.getUseSoftTabs()) {\n            var count = (size - column % size);\n            var indentString = lang.stringRepeat(\" \", count);\n        } else {\n            var count = column % size;\n            while (line[range.start.column - 1] == \" \" && count) {\n                range.start.column--;\n                count--;\n            }\n            this.selection.setSelectionRange(range);\n            indentString = \"\\t\";\n        }\n        return this.insert(indentString);\n    };\n    this.blockIndent = function() {\n        var rows = this.$getSelectedRows();\n        this.session.indentRows(rows.first, rows.last, \"\\t\");\n    };\n    this.blockOutdent = function() {\n        var selection = this.session.getSelection();\n        this.session.outdentRows(selection.getRange());\n    };\n    this.sortLines = function() {\n        var rows = this.$getSelectedRows();\n        var session = this.session;\n\n        var lines = [];\n        for (var i = rows.first; i <= rows.last; i++)\n            lines.push(session.getLine(i));\n\n        lines.sort(function(a, b) {\n            if (a.toLowerCase() < b.toLowerCase()) return -1;\n            if (a.toLowerCase() > b.toLowerCase()) return 1;\n            return 0;\n        });\n\n        var deleteRange = new Range(0, 0, 0, 0);\n        for (var i = rows.first; i <= rows.last; i++) {\n            var line = session.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            deleteRange.end.column = line.length;\n            session.replace(deleteRange, lines[i-rows.first]);\n        }\n    };\n    this.toggleCommentLines = function() {\n        var state = this.session.getState(this.getCursorPosition().row);\n        var rows = this.$getSelectedRows();\n        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);\n    };\n\n    this.toggleBlockComment = function() {\n        var cursor = this.getCursorPosition();\n        var state = this.session.getState(cursor.row);\n        var range = this.getSelectionRange();\n        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);\n    };\n    this.getNumberAt = function(row, column) {\n        var _numberRx = /[\\-]?[0-9]+(?:\\.[0-9]+)?/g;\n        _numberRx.lastIndex = 0;\n\n        var s = this.session.getLine(row);\n        while (_numberRx.lastIndex < column) {\n            var m = _numberRx.exec(s);\n            if(m.index <= column && m.index+m[0].length >= column){\n                var number = {\n                    value: m[0],\n                    start: m.index,\n                    end: m.index+m[0].length\n                };\n                return number;\n            }\n        }\n        return null;\n    };\n    this.modifyNumber = function(amount) {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        var charRange = new Range(row, column-1, row, column);\n\n        var c = this.session.getTextRange(charRange);\n        if (!isNaN(parseFloat(c)) && isFinite(c)) {\n            var nr = this.getNumberAt(row, column);\n            if (nr) {\n                var fp = nr.value.indexOf(\".\") >= 0 ? nr.start + nr.value.indexOf(\".\") + 1 : nr.end;\n                var decimals = nr.start + nr.value.length - fp;\n\n                var t = parseFloat(nr.value);\n                t *= Math.pow(10, decimals);\n\n\n                if(fp !== nr.end && column < fp){\n                    amount *= Math.pow(10, nr.end - column - 1);\n                } else {\n                    amount *= Math.pow(10, nr.end - column);\n                }\n\n                t += amount;\n                t /= Math.pow(10, decimals);\n                var nnr = t.toFixed(decimals);\n                var replaceRange = new Range(row, nr.start, row, nr.end);\n                this.session.replace(replaceRange, nnr);\n                this.moveCursorTo(row, Math.max(nr.start +1, column + nnr.length - nr.value.length));\n\n            }\n        }\n    };\n    this.removeLines = function() {\n        var rows = this.$getSelectedRows();\n        this.session.removeFullLines(rows.first, rows.last);\n        this.clearSelection();\n    };\n\n    this.duplicateSelection = function() {\n        var sel = this.selection;\n        var doc = this.session;\n        var range = sel.getRange();\n        var reverse = sel.isBackwards();\n        if (range.isEmpty()) {\n            var row = range.start.row;\n            doc.duplicateLines(row, row);\n        } else {\n            var point = reverse ? range.start : range.end;\n            var endPoint = doc.insert(point, doc.getTextRange(range), false);\n            range.start = point;\n            range.end = endPoint;\n\n            sel.setSelectionRange(range, reverse);\n        }\n    };\n    this.moveLinesDown = function() {\n        this.$moveLines(1, false);\n    };\n    this.moveLinesUp = function() {\n        this.$moveLines(-1, false);\n    };\n    this.moveText = function(range, toPosition, copy) {\n        return this.session.moveText(range, toPosition, copy);\n    };\n    this.copyLinesUp = function() {\n        this.$moveLines(-1, true);\n    };\n    this.copyLinesDown = function() {\n        this.$moveLines(1, true);\n    };\n    this.$moveLines = function(dir, copy) {\n        var rows, moved;\n        var selection = this.selection;\n        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {\n            var range = selection.toOrientedRange();\n            rows = this.$getSelectedRows(range);\n            moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);\n            if (copy && dir == -1) moved = 0;\n            range.moveBy(moved, 0);\n            selection.fromOrientedRange(range);\n        } else {\n            var ranges = selection.rangeList.ranges;\n            selection.rangeList.detach(this.session);\n            this.inVirtualSelectionMode = true;\n            \n            var diff = 0;\n            var totalDiff = 0;\n            var l = ranges.length;\n            for (var i = 0; i < l; i++) {\n                var rangeIndex = i;\n                ranges[i].moveBy(diff, 0);\n                rows = this.$getSelectedRows(ranges[i]);\n                var first = rows.first;\n                var last = rows.last;\n                while (++i < l) {\n                    if (totalDiff) ranges[i].moveBy(totalDiff, 0);\n                    var subRows = this.$getSelectedRows(ranges[i]);\n                    if (copy && subRows.first != last)\n                        break;\n                    else if (!copy && subRows.first > last + 1)\n                        break;\n                    last = subRows.last;\n                }\n                i--;\n                diff = this.session.$moveLines(first, last, copy ? 0 : dir);\n                if (copy && dir == -1) rangeIndex = i + 1;\n                while (rangeIndex <= i) {\n                    ranges[rangeIndex].moveBy(diff, 0);\n                    rangeIndex++;\n                }\n                if (!copy) diff = 0;\n                totalDiff += diff;\n            }\n            \n            selection.fromOrientedRange(selection.ranges[0]);\n            selection.rangeList.attach(this.session);\n            this.inVirtualSelectionMode = false;\n        }\n    };\n    this.$getSelectedRows = function(range) {\n        range = (range || this.getSelectionRange()).collapseRows();\n\n        return {\n            first: this.session.getRowFoldStart(range.start.row),\n            last: this.session.getRowFoldEnd(range.end.row)\n        };\n    };\n\n    this.onCompositionStart = function(text) {\n        this.renderer.showComposition(this.getCursorPosition());\n    };\n\n    this.onCompositionUpdate = function(text) {\n        this.renderer.setCompositionText(text);\n    };\n\n    this.onCompositionEnd = function() {\n        this.renderer.hideComposition();\n    };\n    this.getFirstVisibleRow = function() {\n        return this.renderer.getFirstVisibleRow();\n    };\n    this.getLastVisibleRow = function() {\n        return this.renderer.getLastVisibleRow();\n    };\n    this.isRowVisible = function(row) {\n        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());\n    };\n    this.isRowFullyVisible = function(row) {\n        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());\n    };\n    this.$getVisibleRowCount = function() {\n        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;\n    };\n\n    this.$moveByPage = function(dir, select) {\n        var renderer = this.renderer;\n        var config = this.renderer.layerConfig;\n        var rows = dir * Math.floor(config.height / config.lineHeight);\n\n        this.$blockScrolling++;\n        if (select === true) {\n            this.selection.$moveSelection(function(){\n                this.moveCursorBy(rows, 0);\n            });\n        } else if (select === false) {\n            this.selection.moveCursorBy(rows, 0);\n            this.selection.clearSelection();\n        }\n        this.$blockScrolling--;\n\n        var scrollTop = renderer.scrollTop;\n\n        renderer.scrollBy(0, rows * config.lineHeight);\n        if (select != null)\n            renderer.scrollCursorIntoView(null, 0.5);\n\n        renderer.animateScrolling(scrollTop);\n    };\n    this.selectPageDown = function() {\n        this.$moveByPage(1, true);\n    };\n    this.selectPageUp = function() {\n        this.$moveByPage(-1, true);\n    };\n    this.gotoPageDown = function() {\n       this.$moveByPage(1, false);\n    };\n    this.gotoPageUp = function() {\n        this.$moveByPage(-1, false);\n    };\n    this.scrollPageDown = function() {\n        this.$moveByPage(1);\n    };\n    this.scrollPageUp = function() {\n        this.$moveByPage(-1);\n    };\n    this.scrollToRow = function(row) {\n        this.renderer.scrollToRow(row);\n    };\n    this.scrollToLine = function(line, center, animate, callback) {\n        this.renderer.scrollToLine(line, center, animate, callback);\n    };\n    this.centerSelection = function() {\n        var range = this.getSelectionRange();\n        var pos = {\n            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),\n            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)\n        };\n        this.renderer.alignCursor(pos, 0.5);\n    };\n    this.getCursorPosition = function() {\n        return this.selection.getCursor();\n    };\n    this.getCursorPositionScreen = function() {\n        return this.session.documentToScreenPosition(this.getCursorPosition());\n    };\n    this.getSelectionRange = function() {\n        return this.selection.getRange();\n    };\n    this.selectAll = function() {\n        this.$blockScrolling += 1;\n        this.selection.selectAll();\n        this.$blockScrolling -= 1;\n    };\n    this.clearSelection = function() {\n        this.selection.clearSelection();\n    };\n    this.moveCursorTo = function(row, column) {\n        this.selection.moveCursorTo(row, column);\n    };\n    this.moveCursorToPosition = function(pos) {\n        this.selection.moveCursorToPosition(pos);\n    };\n    this.jumpToMatching = function(select, expand) {\n        var cursor = this.getCursorPosition();\n        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);\n        var prevToken = iterator.getCurrentToken();\n        var token = prevToken || iterator.stepForward();\n\n        if (!token) return;\n        var matchType;\n        var found = false;\n        var depth = {};\n        var i = cursor.column - token.start;\n        var bracketType;\n        var brackets = {\n            \")\": \"(\",\n            \"(\": \"(\",\n            \"]\": \"[\",\n            \"[\": \"[\",\n            \"{\": \"{\",\n            \"}\": \"{\"\n        };\n        \n        do {\n            if (token.value.match(/[{}()\\[\\]]/g)) {\n                for (; i < token.value.length && !found; i++) {\n                    if (!brackets[token.value[i]]) {\n                        continue;\n                    }\n\n                    bracketType = brackets[token.value[i]] + '.' + token.type.replace(\"rparen\", \"lparen\");\n\n                    if (isNaN(depth[bracketType])) {\n                        depth[bracketType] = 0;\n                    }\n\n                    switch (token.value[i]) {\n                        case '(':\n                        case '[':\n                        case '{':\n                            depth[bracketType]++;\n                            break;\n                        case ')':\n                        case ']':\n                        case '}':\n                            depth[bracketType]--;\n\n                            if (depth[bracketType] === -1) {\n                                matchType = 'bracket';\n                                found = true;\n                            }\n                        break;\n                    }\n                }\n            }\n            else if (token && token.type.indexOf('tag-name') !== -1) {\n                if (isNaN(depth[token.value])) {\n                    depth[token.value] = 0;\n                }\n                \n                if (prevToken.value === '<') {\n                    depth[token.value]++;\n                }\n                else if (prevToken.value === '</') {\n                    depth[token.value]--;\n                }\n                \n                if (depth[token.value] === -1) {\n                    matchType = 'tag';\n                    found = true;\n                }\n            }\n\n            if (!found) {\n                prevToken = token;\n                token = iterator.stepForward();\n                i = 0;\n            }\n        } while (token && !found);\n        if (!matchType)\n            return;\n\n        var range, pos;\n        if (matchType === 'bracket') {\n            range = this.session.getBracketRange(cursor);\n            if (!range) {\n                range = new Range(\n                    iterator.getCurrentTokenRow(),\n                    iterator.getCurrentTokenColumn() + i - 1,\n                    iterator.getCurrentTokenRow(),\n                    iterator.getCurrentTokenColumn() + i - 1\n                );\n                pos = range.start;\n                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column) < 2)\n                    range = this.session.getBracketRange(pos);\n            }\n        }\n        else if (matchType === 'tag') {\n            if (token && token.type.indexOf('tag-name') !== -1) \n                var tag = token.value;\n            else\n                return;\n\n            range = new Range(\n                iterator.getCurrentTokenRow(),\n                iterator.getCurrentTokenColumn() - 2,\n                iterator.getCurrentTokenRow(),\n                iterator.getCurrentTokenColumn() - 2\n            );\n            if (range.compare(cursor.row, cursor.column) === 0) {\n                found = false;\n                do {\n                    token = prevToken;\n                    prevToken = iterator.stepBackward();\n                    \n                    if (prevToken) {\n                        if (prevToken.type.indexOf('tag-close') !== -1) {\n                            range.setEnd(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);\n                        }\n\n                        if (token.value === tag && token.type.indexOf('tag-name') !== -1) {\n                            if (prevToken.value === '<') {\n                                depth[tag]++;\n                            }\n                            else if (prevToken.value === '</') {\n                                depth[tag]--;\n                            }\n                            \n                            if (depth[tag] === 0)\n                                found = true;\n                        }\n                    }\n                } while (prevToken && !found);\n            }\n            if (token && token.type.indexOf('tag-name')) {\n                pos = range.start;\n                if (pos.row == cursor.row && Math.abs(pos.column - cursor.column) < 2)\n                    pos = range.end;\n            }\n        }\n\n        pos = range && range.cursor || pos;\n        if (pos) {\n            if (select) {\n                if (range && expand) {\n                    this.selection.setRange(range);\n                } else if (range && range.isEqual(this.getSelectionRange())) {\n                    this.clearSelection();\n                } else {\n                    this.selection.selectTo(pos.row, pos.column);\n                }\n            } else {\n                this.selection.moveTo(pos.row, pos.column);\n            }\n        }\n    };\n    this.gotoLine = function(lineNumber, column, animate) {\n        this.selection.clearSelection();\n        this.session.unfold({row: lineNumber - 1, column: column || 0});\n\n        this.$blockScrolling += 1;\n        this.exitMultiSelectMode && this.exitMultiSelectMode();\n        this.moveCursorTo(lineNumber - 1, column || 0);\n        this.$blockScrolling -= 1;\n\n        if (!this.isRowFullyVisible(lineNumber - 1))\n            this.scrollToLine(lineNumber - 1, true, animate);\n    };\n    this.navigateTo = function(row, column) {\n        this.selection.moveTo(row, column);\n    };\n    this.navigateUp = function(times) {\n        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {\n            var selectionStart = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionStart);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(-times || -1, 0);\n    };\n    this.navigateDown = function(times) {\n        if (this.selection.isMultiLine() && this.selection.isBackwards()) {\n            var selectionEnd = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionEnd);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(times || 1, 0);\n    };\n    this.navigateLeft = function(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionStart = this.getSelectionRange().start;\n            this.moveCursorToPosition(selectionStart);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorLeft();\n            }\n        }\n        this.clearSelection();\n    };\n    this.navigateRight = function(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionEnd = this.getSelectionRange().end;\n            this.moveCursorToPosition(selectionEnd);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorRight();\n            }\n        }\n        this.clearSelection();\n    };\n    this.navigateLineStart = function() {\n        this.selection.moveCursorLineStart();\n        this.clearSelection();\n    };\n    this.navigateLineEnd = function() {\n        this.selection.moveCursorLineEnd();\n        this.clearSelection();\n    };\n    this.navigateFileEnd = function() {\n        this.selection.moveCursorFileEnd();\n        this.clearSelection();\n    };\n    this.navigateFileStart = function() {\n        this.selection.moveCursorFileStart();\n        this.clearSelection();\n    };\n    this.navigateWordRight = function() {\n        this.selection.moveCursorWordRight();\n        this.clearSelection();\n    };\n    this.navigateWordLeft = function() {\n        this.selection.moveCursorWordLeft();\n        this.clearSelection();\n    };\n    this.replace = function(replacement, options) {\n        if (options)\n            this.$search.set(options);\n\n        var range = this.$search.find(this.session);\n        var replaced = 0;\n        if (!range)\n            return replaced;\n\n        if (this.$tryReplace(range, replacement)) {\n            replaced = 1;\n        }\n        if (range !== null) {\n            this.selection.setSelectionRange(range);\n            this.renderer.scrollSelectionIntoView(range.start, range.end);\n        }\n\n        return replaced;\n    };\n    this.replaceAll = function(replacement, options) {\n        if (options) {\n            this.$search.set(options);\n        }\n\n        var ranges = this.$search.findAll(this.session);\n        var replaced = 0;\n        if (!ranges.length)\n            return replaced;\n\n        this.$blockScrolling += 1;\n\n        var selection = this.getSelectionRange();\n        this.selection.moveTo(0, 0);\n\n        for (var i = ranges.length - 1; i >= 0; --i) {\n            if(this.$tryReplace(ranges[i], replacement)) {\n                replaced++;\n            }\n        }\n\n        this.selection.setSelectionRange(selection);\n        this.$blockScrolling -= 1;\n\n        return replaced;\n    };\n\n    this.$tryReplace = function(range, replacement) {\n        var input = this.session.getTextRange(range);\n        replacement = this.$search.replace(input, replacement);\n        if (replacement !== null) {\n            range.end = this.session.replace(range, replacement);\n            return range;\n        } else {\n            return null;\n        }\n    };\n    this.getLastSearchOptions = function() {\n        return this.$search.getOptions();\n    };\n    this.find = function(needle, options, animate) {\n        if (!options)\n            options = {};\n\n        if (typeof needle == \"string\" || needle instanceof RegExp)\n            options.needle = needle;\n        else if (typeof needle == \"object\")\n            oop.mixin(options, needle);\n\n        var range = this.selection.getRange();\n        if (options.needle == null) {\n            needle = this.session.getTextRange(range)\n                || this.$search.$options.needle;\n            if (!needle) {\n                range = this.session.getWordRange(range.start.row, range.start.column);\n                needle = this.session.getTextRange(range);\n            }\n            this.$search.set({needle: needle});\n        }\n\n        this.$search.set(options);\n        if (!options.start)\n            this.$search.set({start: range});\n\n        var newRange = this.$search.find(this.session);\n        if (options.preventScroll)\n            return newRange;\n        if (newRange) {\n            this.revealRange(newRange, animate);\n            return newRange;\n        }\n        if (options.backwards)\n            range.start = range.end;\n        else\n            range.end = range.start;\n        this.selection.setRange(range);\n    };\n    this.findNext = function(options, animate) {\n        this.find({skipCurrent: true, backwards: false}, options, animate);\n    };\n    this.findPrevious = function(options, animate) {\n        this.find(options, {skipCurrent: true, backwards: true}, animate);\n    };\n\n    this.revealRange = function(range, animate) {\n        this.$blockScrolling += 1;\n        this.session.unfold(range);\n        this.selection.setSelectionRange(range);\n        this.$blockScrolling -= 1;\n\n        var scrollTop = this.renderer.scrollTop;\n        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);\n        if (animate !== false)\n            this.renderer.animateScrolling(scrollTop);\n    };\n    this.undo = function() {\n        this.$blockScrolling++;\n        this.session.getUndoManager().undo();\n        this.$blockScrolling--;\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    this.redo = function() {\n        this.$blockScrolling++;\n        this.session.getUndoManager().redo();\n        this.$blockScrolling--;\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    this.destroy = function() {\n        this.renderer.destroy();\n        this._signal(\"destroy\", this);\n        if (this.session) {\n            this.session.destroy();\n        }\n    };\n    this.setAutoScrollEditorIntoView = function(enable) {\n        if (!enable)\n            return;\n        var rect;\n        var self = this;\n        var shouldScroll = false;\n        if (!this.$scrollAnchor)\n            this.$scrollAnchor = document.createElement(\"div\");\n        var scrollAnchor = this.$scrollAnchor;\n        scrollAnchor.style.cssText = \"position:absolute\";\n        this.container.insertBefore(scrollAnchor, this.container.firstChild);\n        var onChangeSelection = this.on(\"changeSelection\", function() {\n            shouldScroll = true;\n        });\n        var onBeforeRender = this.renderer.on(\"beforeRender\", function() {\n            if (shouldScroll)\n                rect = self.renderer.container.getBoundingClientRect();\n        });\n        var onAfterRender = this.renderer.on(\"afterRender\", function() {\n            if (shouldScroll && rect && (self.isFocused()\n                || self.searchBox && self.searchBox.isFocused())\n            ) {\n                var renderer = self.renderer;\n                var pos = renderer.$cursorLayer.$pixelPos;\n                var config = renderer.layerConfig;\n                var top = pos.top - config.offset;\n                if (pos.top >= 0 && top + rect.top < 0) {\n                    shouldScroll = true;\n                } else if (pos.top < config.height &&\n                    pos.top + rect.top + config.lineHeight > window.innerHeight) {\n                    shouldScroll = false;\n                } else {\n                    shouldScroll = null;\n                }\n                if (shouldScroll != null) {\n                    scrollAnchor.style.top = top + \"px\";\n                    scrollAnchor.style.left = pos.left + \"px\";\n                    scrollAnchor.style.height = config.lineHeight + \"px\";\n                    scrollAnchor.scrollIntoView(shouldScroll);\n                }\n                shouldScroll = rect = null;\n            }\n        });\n        this.setAutoScrollEditorIntoView = function(enable) {\n            if (enable)\n                return;\n            delete this.setAutoScrollEditorIntoView;\n            this.off(\"changeSelection\", onChangeSelection);\n            this.renderer.off(\"afterRender\", onAfterRender);\n            this.renderer.off(\"beforeRender\", onBeforeRender);\n        };\n    };\n\n\n    this.$resetCursorStyle = function() {\n        var style = this.$cursorStyle || \"ace\";\n        var cursorLayer = this.renderer.$cursorLayer;\n        if (!cursorLayer)\n            return;\n        cursorLayer.setSmoothBlinking(/smooth/.test(style));\n        cursorLayer.isBlinking = !this.$readOnly && style != \"wide\";\n        dom.setCssClass(cursorLayer.element, \"ace_slim-cursors\", /slim/.test(style));\n    };\n\n}).call(Editor.prototype);\n\n\n\nconfig.defineOptions(Editor.prototype, \"editor\", {\n    selectionStyle: {\n        set: function(style) {\n            this.onSelectionChange();\n            this._signal(\"changeSelectionStyle\", {data: style});\n        },\n        initialValue: \"line\"\n    },\n    highlightActiveLine: {\n        set: function() {this.$updateHighlightActiveLine();},\n        initialValue: true\n    },\n    highlightSelectedWord: {\n        set: function(shouldHighlight) {this.$onSelectionChange();},\n        initialValue: true\n    },\n    readOnly: {\n        set: function(readOnly) {\n            this.$resetCursorStyle(); \n        },\n        initialValue: false\n    },\n    cursorStyle: {\n        set: function(val) { this.$resetCursorStyle(); },\n        values: [\"ace\", \"slim\", \"smooth\", \"wide\"],\n        initialValue: \"ace\"\n    },\n    mergeUndoDeltas: {\n        values: [false, true, \"always\"],\n        initialValue: true\n    },\n    behavioursEnabled: {initialValue: true},\n    wrapBehavioursEnabled: {initialValue: true},\n    autoScrollEditorIntoView: {\n        set: function(val) {this.setAutoScrollEditorIntoView(val);}\n    },\n    keyboardHandler: {\n        set: function(val) { this.setKeyboardHandler(val); },\n        get: function() { return this.keybindingId; },\n        handlesSet: true\n    },\n\n    hScrollBarAlwaysVisible: \"renderer\",\n    vScrollBarAlwaysVisible: \"renderer\",\n    highlightGutterLine: \"renderer\",\n    animatedScroll: \"renderer\",\n    showInvisibles: \"renderer\",\n    showPrintMargin: \"renderer\",\n    printMarginColumn: \"renderer\",\n    printMargin: \"renderer\",\n    fadeFoldWidgets: \"renderer\",\n    showFoldWidgets: \"renderer\",\n    showLineNumbers: \"renderer\",\n    showGutter: \"renderer\",\n    displayIndentGuides: \"renderer\",\n    fontSize: \"renderer\",\n    fontFamily: \"renderer\",\n    maxLines: \"renderer\",\n    minLines: \"renderer\",\n    scrollPastEnd: \"renderer\",\n    fixedWidthGutter: \"renderer\",\n    theme: \"renderer\",\n\n    scrollSpeed: \"$mouseHandler\",\n    dragDelay: \"$mouseHandler\",\n    dragEnabled: \"$mouseHandler\",\n    focusTimout: \"$mouseHandler\",\n    tooltipFollowsMouse: \"$mouseHandler\",\n\n    firstLineNumber: \"session\",\n    overwrite: \"session\",\n    newLineMode: \"session\",\n    useWorker: \"session\",\n    useSoftTabs: \"session\",\n    tabSize: \"session\",\n    wrap: \"session\",\n    indentedSoftWrap: \"session\",\n    foldStyle: \"session\",\n    mode: \"session\"\n});\n\nexports.Editor = Editor;\n});\n\nace.define(\"ace/undomanager\",[\"require\",\"exports\",\"module\"], function(acequire, exports, module) {\n\"use strict\";\nvar UndoManager = function() {\n    this.reset();\n};\n\n(function() {\n    this.execute = function(options) {\n        var deltaSets = options.args[0];\n        this.$doc  = options.args[1];\n        if (options.merge && this.hasUndo()){\n            this.dirtyCounter--;\n            deltaSets = this.$undoStack.pop().concat(deltaSets);\n        }\n        this.$undoStack.push(deltaSets);\n        this.$redoStack = [];\n        if (this.dirtyCounter < 0) {\n            this.dirtyCounter = NaN;\n        }\n        this.dirtyCounter++;\n    };\n    this.undo = function(dontSelect) {\n        var deltaSets = this.$undoStack.pop();\n        var undoSelectionRange = null;\n        if (deltaSets) {\n            undoSelectionRange = this.$doc.undoChanges(deltaSets, dontSelect);\n            this.$redoStack.push(deltaSets);\n            this.dirtyCounter--;\n        }\n\n        return undoSelectionRange;\n    };\n    this.redo = function(dontSelect) {\n        var deltaSets = this.$redoStack.pop();\n        var redoSelectionRange = null;\n        if (deltaSets) {\n            redoSelectionRange =\n                this.$doc.redoChanges(this.$deserializeDeltas(deltaSets), dontSelect);\n            this.$undoStack.push(deltaSets);\n            this.dirtyCounter++;\n        }\n        return redoSelectionRange;\n    };\n    this.reset = function() {\n        this.$undoStack = [];\n        this.$redoStack = [];\n        this.dirtyCounter = 0;\n    };\n    this.hasUndo = function() {\n        return this.$undoStack.length > 0;\n    };\n    this.hasRedo = function() {\n        return this.$redoStack.length > 0;\n    };\n    this.markClean = function() {\n        this.dirtyCounter = 0;\n    };\n    this.isClean = function() {\n        return this.dirtyCounter === 0;\n    };\n    this.$serializeDeltas = function(deltaSets) {\n        return cloneDeltaSetsObj(deltaSets, $serializeDelta);\n    };\n    this.$deserializeDeltas = function(deltaSets) {\n        return cloneDeltaSetsObj(deltaSets, $deserializeDelta);\n    };\n    \n    function $serializeDelta(delta){\n        return {\n            action: delta.action,\n            start: delta.start,\n            end: delta.end,\n            lines: delta.lines.length == 1 ? null : delta.lines,\n            text: delta.lines.length == 1 ? delta.lines[0] : null\n        };\n    }\n        \n    function $deserializeDelta(delta) {\n        return {\n            action: delta.action,\n            start: delta.start,\n            end: delta.end,\n            lines: delta.lines || [delta.text]\n        };\n    }\n    \n    function cloneDeltaSetsObj(deltaSets_old, fnGetModifiedDelta) {\n        var deltaSets_new = new Array(deltaSets_old.length);\n        for (var i = 0; i < deltaSets_old.length; i++) {\n            var deltaSet_old = deltaSets_old[i];\n            var deltaSet_new = { group: deltaSet_old.group, deltas: new Array(deltaSet_old.length)};\n            \n            for (var j = 0; j < deltaSet_old.deltas.length; j++) {\n                var delta_old = deltaSet_old.deltas[j];\n                deltaSet_new.deltas[j] = fnGetModifiedDelta(delta_old);\n            }\n            \n            deltaSets_new[i] = deltaSet_new;\n        }\n        return deltaSets_new;\n    }\n    \n}).call(UndoManager.prototype);\n\nexports.UndoManager = UndoManager;\n});\n\nace.define(\"ace/layer/gutter\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar dom = acequire(\"../lib/dom\");\nvar oop = acequire(\"../lib/oop\");\nvar lang = acequire(\"../lib/lang\");\nvar EventEmitter = acequire(\"../lib/event_emitter\").EventEmitter;\n\nvar Gutter = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_gutter-layer\";\n    parentEl.appendChild(this.element);\n    this.setShowFoldWidgets(this.$showFoldWidgets);\n    \n    this.gutterWidth = 0;\n\n    this.$annotations = [];\n    this.$updateAnnotations = this.$updateAnnotations.bind(this);\n\n    this.$cells = [];\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.setSession = function(session) {\n        if (this.session)\n            this.session.removeEventListener(\"change\", this.$updateAnnotations);\n        this.session = session;\n        if (session)\n            session.on(\"change\", this.$updateAnnotations);\n    };\n\n    this.addGutterDecoration = function(row, className){\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.addGutterDecoration\");\n        this.session.addGutterDecoration(row, className);\n    };\n\n    this.removeGutterDecoration = function(row, className){\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.removeGutterDecoration\");\n        this.session.removeGutterDecoration(row, className);\n    };\n\n    this.setAnnotations = function(annotations) {\n        this.$annotations = [];\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var row = annotation.row;\n            var rowInfo = this.$annotations[row];\n            if (!rowInfo)\n                rowInfo = this.$annotations[row] = {text: []};\n           \n            var annoText = annotation.text;\n            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || \"\";\n\n            if (rowInfo.text.indexOf(annoText) === -1)\n                rowInfo.text.push(annoText);\n\n            var type = annotation.type;\n            if (type == \"error\")\n                rowInfo.className = \" ace_error\";\n            else if (type == \"warning\" && rowInfo.className != \" ace_error\")\n                rowInfo.className = \" ace_warning\";\n            else if (type == \"info\" && (!rowInfo.className))\n                rowInfo.className = \" ace_info\";\n        }\n    };\n\n    this.$updateAnnotations = function (delta) {\n        if (!this.$annotations.length)\n            return;\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n        } else if (delta.action == 'remove') {\n            this.$annotations.splice(firstRow, len + 1, null);\n        } else {\n            var args = new Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.$annotations.splice.apply(this.$annotations, args);\n        }\n    };\n\n    this.update = function(config) {\n        var session = this.session;\n        var firstRow = config.firstRow;\n        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar\n            session.getLength() - 1);\n        var fold = session.getNextFoldLine(firstRow);\n        var foldStart = fold ? fold.start.row : Infinity;\n        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;\n        var breakpoints = session.$breakpoints;\n        var decorations = session.$decorations;\n        var firstLineNumber = session.$firstLineNumber;\n        var lastLineNumber = 0;\n        \n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n\n        var cell = null;\n        var index = -1;\n        var row = firstRow;\n        while (true) {\n            if (row > foldStart) {\n                row = fold.end.row + 1;\n                fold = session.getNextFoldLine(row, fold);\n                foldStart = fold ? fold.start.row : Infinity;\n            }\n            if (row > lastRow) {\n                while (this.$cells.length > index + 1) {\n                    cell = this.$cells.pop();\n                    this.element.removeChild(cell.element);\n                }\n                break;\n            }\n\n            cell = this.$cells[++index];\n            if (!cell) {\n                cell = {element: null, textNode: null, foldWidget: null};\n                cell.element = dom.createElement(\"div\");\n                cell.textNode = document.createTextNode('');\n                cell.element.appendChild(cell.textNode);\n                this.element.appendChild(cell.element);\n                this.$cells[index] = cell;\n            }\n\n            var className = \"ace_gutter-cell \";\n            if (breakpoints[row])\n                className += breakpoints[row];\n            if (decorations[row])\n                className += decorations[row];\n            if (this.$annotations[row])\n                className += this.$annotations[row].className;\n            if (cell.element.className != className)\n                cell.element.className = className;\n\n            var height = session.getRowLength(row) * config.lineHeight + \"px\";\n            if (height != cell.element.style.height)\n                cell.element.style.height = height;\n\n            if (foldWidgets) {\n                var c = foldWidgets[row];\n                if (c == null)\n                    c = foldWidgets[row] = session.getFoldWidget(row);\n            }\n\n            if (c) {\n                if (!cell.foldWidget) {\n                    cell.foldWidget = dom.createElement(\"span\");\n                    cell.element.appendChild(cell.foldWidget);\n                }\n                var className = \"ace_fold-widget ace_\" + c;\n                if (c == \"start\" && row == foldStart && row < fold.end.row)\n                    className += \" ace_closed\";\n                else\n                    className += \" ace_open\";\n                if (cell.foldWidget.className != className)\n                    cell.foldWidget.className = className;\n\n                var height = config.lineHeight + \"px\";\n                if (cell.foldWidget.style.height != height)\n                    cell.foldWidget.style.height = height;\n            } else {\n                if (cell.foldWidget) {\n                    cell.element.removeChild(cell.foldWidget);\n                    cell.foldWidget = null;\n                }\n            }\n            \n            var text = lastLineNumber = gutterRenderer\n                ? gutterRenderer.getText(session, row)\n                : row + firstLineNumber;\n            if (text !== cell.textNode.data)\n                cell.textNode.data = text;\n\n            row++;\n        }\n\n        this.element.style.height = config.minHeight + \"px\";\n\n        if (this.$fixedWidth || session.$useWrapMode)\n            lastLineNumber = session.getLength() + firstLineNumber;\n\n        var gutterWidth = gutterRenderer \n            ? gutterRenderer.getWidth(session, lastLineNumber, config)\n            : lastLineNumber.toString().length * config.characterWidth;\n        \n        var padding = this.$padding || this.$computePadding();\n        gutterWidth += padding.left + padding.right;\n        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {\n            this.gutterWidth = gutterWidth;\n            this.element.style.width = Math.ceil(this.gutterWidth) + \"px\";\n            this._emit(\"changeGutterWidth\", gutterWidth);\n        }\n    };\n\n    this.$fixedWidth = false;\n    \n    this.$showLineNumbers = true;\n    this.$renderer = \"\";\n    this.setShowLineNumbers = function(show) {\n        this.$renderer = !show && {\n            getWidth: function() {return \"\";},\n            getText: function() {return \"\";}\n        };\n    };\n    \n    this.getShowLineNumbers = function() {\n        return this.$showLineNumbers;\n    };\n    \n    this.$showFoldWidgets = true;\n    this.setShowFoldWidgets = function(show) {\n        if (show)\n            dom.addCssClass(this.element, \"ace_folding-enabled\");\n        else\n            dom.removeCssClass(this.element, \"ace_folding-enabled\");\n\n        this.$showFoldWidgets = show;\n        this.$padding = null;\n    };\n    \n    this.getShowFoldWidgets = function() {\n        return this.$showFoldWidgets;\n    };\n\n    this.$computePadding = function() {\n        if (!this.element.firstChild)\n            return {left: 0, right: 0};\n        var style = dom.computedStyle(this.element.firstChild);\n        this.$padding = {};\n        this.$padding.left = parseInt(style.paddingLeft) + 1 || 0;\n        this.$padding.right = parseInt(style.paddingRight) || 0;\n        return this.$padding;\n    };\n\n    this.getRegion = function(point) {\n        var padding = this.$padding || this.$computePadding();\n        var rect = this.element.getBoundingClientRect();\n        if (point.x < padding.left + rect.left)\n            return \"markers\";\n        if (this.$showFoldWidgets && point.x > rect.right - padding.right)\n            return \"foldWidgets\";\n    };\n\n}).call(Gutter.prototype);\n\nexports.Gutter = Gutter;\n\n});\n\nace.define(\"ace/layer/marker\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/dom\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"../range\").Range;\nvar dom = acequire(\"../lib/dom\");\n\nvar Marker = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_marker-layer\";\n    parentEl.appendChild(this.element);\n};\n\n(function() {\n\n    this.$padding = 0;\n\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n    };\n    this.setSession = function(session) {\n        this.session = session;\n    };\n    \n    this.setMarkers = function(markers) {\n        this.markers = markers;\n    };\n\n    this.update = function(config) {\n        if (!config) return;\n\n        this.config = config;\n\n\n        var html = [];\n        for (var key in this.markers) {\n            var marker = this.markers[key];\n\n            if (!marker.range) {\n                marker.update(html, this, this.session, config);\n                continue;\n            }\n\n            var range = marker.range.clipRows(config.firstRow, config.lastRow);\n            if (range.isEmpty()) continue;\n\n            range = range.toScreenRange(this.session);\n            if (marker.renderer) {\n                var top = this.$getTop(range.start.row, config);\n                var left = this.$padding + (this.session.$bidiHandler.isBidiRow(range.start.row)\n                    ? this.session.$bidiHandler.getPosLeft(range.start.column)\n                    : range.start.column * config.characterWidth);\n                marker.renderer(html, range, left, top, config);\n            } else if (marker.type == \"fullLine\") {\n                this.drawFullLineMarker(html, range, marker.clazz, config);\n            } else if (marker.type == \"screenLine\") {\n                this.drawScreenLineMarker(html, range, marker.clazz, config);\n            } else if (range.isMultiLine()) {\n                if (marker.type == \"text\")\n                    this.drawTextMarker(html, range, marker.clazz, config);\n                else\n                    this.drawMultiLineMarker(html, range, marker.clazz, config);\n            } else {\n                if (this.session.$bidiHandler.isBidiRow(range.start.row)) {\n                    this.drawBidiSingleLineMarker(html, range, marker.clazz + \" ace_start\" + \" ace_br15\", config);\n                } else {\n                    this.drawSingleLineMarker(html, range, marker.clazz + \" ace_start\" + \" ace_br15\", config);\n                }\n            }\n        }\n        this.element.innerHTML = html.join(\"\");\n    };\n\n    this.$getTop = function(row, layerConfig) {\n        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;\n    };\n\n    function getBorderClass(tl, tr, br, bl) {\n        return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);\n    }\n    this.drawTextMarker = function(stringBuilder, range, clazz, layerConfig, extraStyle) {\n        var session = this.session;\n        var start = range.start.row;\n        var end = range.end.row;\n        var row = start;\n        var prev = 0; \n        var curr = 0;\n        var next = session.getScreenLastRowColumn(row);\n        var clazzModified = null;\n        var lineRange = new Range(row, range.start.column, row, curr);\n        for (; row <= end; row++) {\n            lineRange.start.row = lineRange.end.row = row;\n            lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);\n            lineRange.end.column = next;\n            prev = curr;\n            curr = next;\n            next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;\n            clazzModified = clazz + (row == start  ? \" ace_start\" : \"\") + \" ace_br\"\n                + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end);\n\n            if (this.session.$bidiHandler.isBidiRow(row)) {\n                this.drawBidiSingleLineMarker(stringBuilder, lineRange, clazzModified,\n                    layerConfig, row == end ? 0 : 1, extraStyle);\n            } else {\n                this.drawSingleLineMarker(stringBuilder, lineRange, clazzModified,\n                    layerConfig, row == end ? 0 : 1, extraStyle);\n            }\n        }\n    };\n    this.drawMultiLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var padding = this.$padding;\n        var height, top, left;\n        extraStyle = extraStyle || \"\";\n       if (this.session.$bidiHandler.isBidiRow(range.start.row)) {\n           var range1 = range.clone();\n           range1.end.row = range1.start.row;\n           range1.end.column = this.session.getLine(range1.start.row).length;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br1 ace_start\", config, null, extraStyle);\n        } else {\n           height = config.lineHeight;\n           top = this.$getTop(range.start.row, config);\n           left = padding + range.start.column * config.characterWidth;\n           stringBuilder.push(\n               \"<div class='\", clazz, \" ace_br1 ace_start' style='\",\n               \"height:\", height, \"px;\",\n               \"right:0;\",\n               \"top:\", top, \"px;\",\n               \"left:\", left, \"px;\", extraStyle, \"'></div>\"\n           );\n        }\n        if (this.session.$bidiHandler.isBidiRow(range.end.row)) {\n           var range1 = range.clone();\n           range1.start.row = range1.end.row;\n           range1.start.column = 0;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br12\", config, null, extraStyle);\n        } else {\n           var width = range.end.column * config.characterWidth;\n           height = config.lineHeight;\n           top = this.$getTop(range.end.row, config);\n           stringBuilder.push(\n               \"<div class='\", clazz, \" ace_br12' style='\",\n               \"height:\", height, \"px;\",\n               \"width:\", width, \"px;\",\n               \"top:\", top, \"px;\",\n               \"left:\", padding, \"px;\", extraStyle, \"'></div>\"\n           );\n        }\n        height = (range.end.row - range.start.row - 1) * config.lineHeight;\n        if (height <= 0)\n            return;\n        top = this.$getTop(range.start.row + 1, config);\n        \n        var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);\n\n        stringBuilder.push(\n            \"<div class='\", clazz, (radiusClass ? \" ace_br\" + radiusClass : \"\"), \"' style='\",\n            \"height:\", height, \"px;\",\n            \"right:0;\",\n            \"top:\", top, \"px;\",\n            \"left:\", padding, \"px;\", extraStyle, \"'></div>\"\n        );\n    };\n    this.drawSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        var height = config.lineHeight;\n        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;\n\n        var top = this.$getTop(range.start.row, config);\n        var left = this.$padding + range.start.column * config.characterWidth;\n\n        stringBuilder.push(\n            \"<div class='\", clazz, \"' style='\",\n            \"height:\", height, \"px;\",\n            \"width:\", width, \"px;\",\n            \"top:\", top, \"px;\",\n            \"left:\", left, \"px;\", extraStyle || \"\", \"'></div>\"\n        );\n    };\n    this.drawBidiSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        var height = config.lineHeight, top = this.$getTop(range.start.row, config), padding = this.$padding;\n        var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);\n\n        selections.forEach(function(selection) {\n            stringBuilder.push(\n                \"<div class='\", clazz, \"' style='\",\n                \"height:\", height, \"px;\",\n                \"width:\", selection.width + (extraLength || 0), \"px;\",\n                \"top:\", top, \"px;\",\n                \"left:\", padding + selection.left, \"px;\", extraStyle || \"\", \"'></div>\"\n            );\n        });\n    };\n\n    this.drawFullLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        if (range.start.row != range.end.row)\n            height += this.$getTop(range.end.row, config) - top;\n\n        stringBuilder.push(\n            \"<div class='\", clazz, \"' style='\",\n            \"height:\", height, \"px;\",\n            \"top:\", top, \"px;\",\n            \"left:0;right:0;\", extraStyle || \"\", \"'></div>\"\n        );\n    };\n    \n    this.drawScreenLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n\n        stringBuilder.push(\n            \"<div class='\", clazz, \"' style='\",\n            \"height:\", height, \"px;\",\n            \"top:\", top, \"px;\",\n            \"left:0;right:0;\", extraStyle || \"\", \"'></div>\"\n        );\n    };\n\n}).call(Marker.prototype);\n\nexports.Marker = Marker;\n\n});\n\nace.define(\"ace/layer/text\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/useragent\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar dom = acequire(\"../lib/dom\");\nvar lang = acequire(\"../lib/lang\");\nvar useragent = acequire(\"../lib/useragent\");\nvar EventEmitter = acequire(\"../lib/event_emitter\").EventEmitter;\n\nvar Text = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_text-layer\";\n    parentEl.appendChild(this.element);\n    this.$updateEolChar = this.$updateEolChar.bind(this);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.EOF_CHAR = \"\\xB6\";\n    this.EOL_CHAR_LF = \"\\xAC\";\n    this.EOL_CHAR_CRLF = \"\\xa4\";\n    this.EOL_CHAR = this.EOL_CHAR_LF;\n    this.TAB_CHAR = \"\\u2014\"; //\"\\u21E5\";\n    this.SPACE_CHAR = \"\\xB7\";\n    this.$padding = 0;\n\n    this.$updateEolChar = function() {\n        var EOL_CHAR = this.session.doc.getNewLineCharacter() == \"\\n\"\n           ? this.EOL_CHAR_LF\n           : this.EOL_CHAR_CRLF;\n        if (this.EOL_CHAR != EOL_CHAR) {\n            this.EOL_CHAR = EOL_CHAR;\n            return true;\n        }\n    };\n\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n        this.element.style.padding = \"0 \" + padding + \"px\";\n    };\n\n    this.getLineHeight = function() {\n        return this.$fontMetrics.$characterSize.height || 0;\n    };\n\n    this.getCharacterWidth = function() {\n        return this.$fontMetrics.$characterSize.width || 0;\n    };\n    \n    this.$setFontMetrics = function(measure) {\n        this.$fontMetrics = measure;\n        this.$fontMetrics.on(\"changeCharacterSize\", function(e) {\n            this._signal(\"changeCharacterSize\", e);\n        }.bind(this));\n        this.$pollSizeChanges();\n    };\n\n    this.checkForSizeChanges = function() {\n        this.$fontMetrics.checkForSizeChanges();\n    };\n    this.$pollSizeChanges = function() {\n        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();\n    };\n    this.setSession = function(session) {\n        this.session = session;\n        if (session)\n            this.$computeTabString();\n    };\n\n    this.showInvisibles = false;\n    this.setShowInvisibles = function(showInvisibles) {\n        if (this.showInvisibles == showInvisibles)\n            return false;\n\n        this.showInvisibles = showInvisibles;\n        this.$computeTabString();\n        return true;\n    };\n\n    this.displayIndentGuides = true;\n    this.setDisplayIndentGuides = function(display) {\n        if (this.displayIndentGuides == display)\n            return false;\n\n        this.displayIndentGuides = display;\n        this.$computeTabString();\n        return true;\n    };\n\n    this.$tabStrings = [];\n    this.onChangeTabSize =\n    this.$computeTabString = function() {\n        var tabSize = this.session.getTabSize();\n        this.tabSize = tabSize;\n        var tabStr = this.$tabStrings = [0];\n        for (var i = 1; i < tabSize + 1; i++) {\n            if (this.showInvisibles) {\n                tabStr.push(\"<span class='ace_invisible ace_invisible_tab'>\"\n                    + lang.stringRepeat(this.TAB_CHAR, i)\n                    + \"</span>\");\n            } else {\n                tabStr.push(lang.stringRepeat(\" \", i));\n            }\n        }\n        if (this.displayIndentGuides) {\n            this.$indentGuideRe =  /\\s\\S| \\t|\\t |\\s$/;\n            var className = \"ace_indent-guide\";\n            var spaceClass = \"\";\n            var tabClass = \"\";\n            if (this.showInvisibles) {\n                className += \" ace_invisible\";\n                spaceClass = \" ace_invisible_space\";\n                tabClass = \" ace_invisible_tab\";\n                var spaceContent = lang.stringRepeat(this.SPACE_CHAR, this.tabSize);\n                var tabContent = lang.stringRepeat(this.TAB_CHAR, this.tabSize);\n            } else{\n                var spaceContent = lang.stringRepeat(\" \", this.tabSize);\n                var tabContent = spaceContent;\n            }\n\n            this.$tabStrings[\" \"] = \"<span class='\" + className + spaceClass + \"'>\" + spaceContent + \"</span>\";\n            this.$tabStrings[\"\\t\"] = \"<span class='\" + className + tabClass + \"'>\" + tabContent + \"</span>\";\n        }\n    };\n\n    this.updateLines = function(config, firstRow, lastRow) {\n        if (this.config.lastRow != config.lastRow ||\n            this.config.firstRow != config.firstRow) {\n            this.scrollLines(config);\n        }\n        this.config = config;\n\n        var first = Math.max(firstRow, config.firstRow);\n        var last = Math.min(lastRow, config.lastRow);\n\n        var lineElements = this.element.childNodes;\n        var lineElementsIdx = 0;\n\n        for (var row = config.firstRow; row < first; row++) {\n            var foldLine = this.session.getFoldLine(row);\n            if (foldLine) {\n                if (foldLine.containsRow(first)) {\n                    first = foldLine.start.row;\n                    break;\n                } else {\n                    row = foldLine.end.row;\n                }\n            }\n            lineElementsIdx ++;\n        }\n\n        var row = first;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row :Infinity;\n            }\n            if (row > last)\n                break;\n\n            var lineElement = lineElements[lineElementsIdx++];\n            if (lineElement) {\n                var html = [];\n                this.$renderLine(\n                    html, row, !this.$useLineGroups(), row == foldStart ? foldLine : false\n                );\n                lineElement.style.height = config.lineHeight * this.session.getRowLength(row) + \"px\";\n                lineElement.innerHTML = html.join(\"\");\n            }\n            row++;\n        }\n    };\n\n    this.scrollLines = function(config) {\n        var oldConfig = this.config;\n        this.config = config;\n\n        if (!oldConfig || oldConfig.lastRow < config.firstRow)\n            return this.update(config);\n\n        if (config.lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        var el = this.element;\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)\n                el.removeChild(el.firstChild);\n\n        if (oldConfig.lastRow > config.lastRow)\n            for (var row=this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row>0; row--)\n                el.removeChild(el.lastChild);\n\n        if (config.firstRow < oldConfig.firstRow) {\n            var fragment = this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1);\n            if (el.firstChild)\n                el.insertBefore(fragment, el.firstChild);\n            else\n                el.appendChild(fragment);\n        }\n\n        if (config.lastRow > oldConfig.lastRow) {\n            var fragment = this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow);\n            el.appendChild(fragment);\n        }\n    };\n\n    this.$renderLinesFragment = function(config, firstRow, lastRow) {\n        var fragment = this.element.ownerDocument.createDocumentFragment();\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            var container = dom.createElement(\"div\");\n\n            var html = [];\n            this.$renderLine(html, row, false, row == foldStart ? foldLine : false);\n            container.innerHTML = html.join(\"\");\n            if (this.$useLineGroups()) {\n                container.className = 'ace_line_group';\n                fragment.appendChild(container);\n                container.style.height = config.lineHeight * this.session.getRowLength(row) + \"px\";\n\n            } else {\n                while(container.firstChild)\n                    fragment.appendChild(container.firstChild);\n            }\n\n            row++;\n        }\n        return fragment;\n    };\n\n    this.update = function(config) {\n        this.config = config;\n\n        var html = [];\n        var firstRow = config.firstRow, lastRow = config.lastRow;\n\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row :Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            if (this.$useLineGroups())\n                html.push(\"<div class='ace_line_group' style='height:\", config.lineHeight*this.session.getRowLength(row), \"px'>\");\n\n            this.$renderLine(html, row, false, row == foldStart ? foldLine : false);\n\n            if (this.$useLineGroups())\n                html.push(\"</div>\"); // end the line group\n\n            row++;\n        }\n        this.element.innerHTML = html.join(\"\");\n    };\n\n    this.$textToken = {\n        \"text\": true,\n        \"rparen\": true,\n        \"lparen\": true\n    };\n\n    this.$renderToken = function(stringBuilder, screenColumn, token, value) {\n        var self = this;\n        var replaceReg = /\\t|&|<|>|( +)|([\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF\\uFFF9-\\uFFFC])|[\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3000-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n        var replaceFunc = function(c, a, b, tabIdx, idx4) {\n            if (a) {\n                return self.showInvisibles\n                    ? \"<span class='ace_invisible ace_invisible_space'>\" + lang.stringRepeat(self.SPACE_CHAR, c.length) + \"</span>\"\n                    : c;\n            } else if (c == \"&\") {\n                return \"&#38;\";\n            } else if (c == \"<\") {\n                return \"&#60;\";\n            } else if (c == \">\") {\n                return \"&#62;\";\n            } else if (c == \"\\t\") {\n                var tabSize = self.session.getScreenTabSize(screenColumn + tabIdx);\n                screenColumn += tabSize - 1;\n                return self.$tabStrings[tabSize];\n            } else if (c == \"\\u3000\") {\n                var classToUse = self.showInvisibles ? \"ace_cjk ace_invisible ace_invisible_space\" : \"ace_cjk\";\n                var space = self.showInvisibles ? self.SPACE_CHAR : \"\";\n                screenColumn += 1;\n                return \"<span class='\" + classToUse + \"' style='width:\" +\n                    (self.config.characterWidth * 2) +\n                    \"px'>\" + space + \"</span>\";\n            } else if (b) {\n                return \"<span class='ace_invisible ace_invisible_space ace_invalid'>\" + self.SPACE_CHAR + \"</span>\";\n            } else {\n                screenColumn += 1;\n                return \"<span class='ace_cjk' style='width:\" +\n                    (self.config.characterWidth * 2) +\n                    \"px'>\" + c + \"</span>\";\n            }\n        };\n\n        var output = value.replace(replaceReg, replaceFunc);\n\n        if (!this.$textToken[token.type]) {\n            var classes = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n            var style = \"\";\n            if (token.type == \"fold\")\n                style = \" style='width:\" + (token.value.length * this.config.characterWidth) + \"px;' \";\n            stringBuilder.push(\"<span class='\", classes, \"'\", style, \">\", output, \"</span>\");\n        }\n        else {\n            stringBuilder.push(output);\n        }\n        return screenColumn + value.length;\n    };\n\n    this.renderIndentGuide = function(stringBuilder, value, max) {\n        var cols = value.search(this.$indentGuideRe);\n        if (cols <= 0 || cols >= max)\n            return value;\n        if (value[0] == \" \") {\n            cols -= cols % this.tabSize;\n            stringBuilder.push(lang.stringRepeat(this.$tabStrings[\" \"], cols/this.tabSize));\n            return value.substr(cols);\n        } else if (value[0] == \"\\t\") {\n            stringBuilder.push(lang.stringRepeat(this.$tabStrings[\"\\t\"], cols));\n            return value.substr(cols);\n        }\n        return value;\n    };\n\n    this.$renderWrappedLine = function(stringBuilder, tokens, splits, onlyContents) {\n        var chars = 0;\n        var split = 0;\n        var splitChars = splits[0];\n        var screenColumn = 0;\n\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                chars = value.length;\n                value = this.renderIndentGuide(stringBuilder, value, splitChars);\n                if (!value)\n                    continue;\n                chars -= value.length;\n            }\n\n            if (chars + value.length < splitChars) {\n                screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);\n                chars += value.length;\n            } else {\n                while (chars + value.length >= splitChars) {\n                    screenColumn = this.$renderToken(\n                        stringBuilder, screenColumn,\n                        token, value.substring(0, splitChars - chars)\n                    );\n                    value = value.substring(splitChars - chars);\n                    chars = splitChars;\n\n                    if (!onlyContents) {\n                        stringBuilder.push(\"</div>\",\n                            \"<div class='ace_line' style='height:\",\n                            this.config.lineHeight, \"px'>\"\n                        );\n                    }\n\n                    stringBuilder.push(lang.stringRepeat(\"\\xa0\", splits.indent));\n\n                    split ++;\n                    screenColumn = 0;\n                    splitChars = splits[split] || Number.MAX_VALUE;\n                }\n                if (value.length != 0) {\n                    chars += value.length;\n                    screenColumn = this.$renderToken(\n                        stringBuilder, screenColumn, token, value\n                    );\n                }\n            }\n        }\n    };\n\n    this.$renderSimpleLine = function(stringBuilder, tokens) {\n        var screenColumn = 0;\n        var token = tokens[0];\n        var value = token.value;\n        if (this.displayIndentGuides)\n            value = this.renderIndentGuide(stringBuilder, value);\n        if (value)\n            screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);\n        for (var i = 1; i < tokens.length; i++) {\n            token = tokens[i];\n            value = token.value;\n            screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);\n        }\n    };\n    this.$renderLine = function(stringBuilder, row, onlyContents, foldLine) {\n        if (!foldLine && foldLine != false)\n            foldLine = this.session.getFoldLine(row);\n\n        if (foldLine)\n            var tokens = this.$getFoldLineTokens(row, foldLine);\n        else\n            var tokens = this.session.getTokens(row);\n\n\n        if (!onlyContents) {\n            stringBuilder.push(\n                \"<div class='ace_line' style='height:\", \n                    this.config.lineHeight * (\n                        this.$useLineGroups() ? 1 :this.session.getRowLength(row)\n                    ), \"px'>\"\n            );\n        }\n\n        if (tokens.length) {\n            var splits = this.session.getRowSplitData(row);\n            if (splits && splits.length)\n                this.$renderWrappedLine(stringBuilder, tokens, splits, onlyContents);\n            else\n                this.$renderSimpleLine(stringBuilder, tokens);\n        }\n\n        if (this.showInvisibles) {\n            if (foldLine)\n                row = foldLine.end.row;\n\n            stringBuilder.push(\n                \"<span class='ace_invisible ace_invisible_eol'>\",\n                row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR,\n                \"</span>\"\n            );\n        }\n        if (!onlyContents)\n            stringBuilder.push(\"</div>\");\n    };\n\n    this.$getFoldLineTokens = function(row, foldLine) {\n        var session = this.session;\n        var renderTokens = [];\n\n        function addTokens(tokens, from, to) {\n            var idx = 0, col = 0;\n            while ((col + tokens[idx].value.length) < from) {\n                col += tokens[idx].value.length;\n                idx++;\n\n                if (idx == tokens.length)\n                    return;\n            }\n            if (col != from) {\n                var value = tokens[idx].value.substring(from - col);\n                if (value.length > (to - from))\n                    value = value.substring(0, to - from);\n\n                renderTokens.push({\n                    type: tokens[idx].type,\n                    value: value\n                });\n\n                col = from + value.length;\n                idx += 1;\n            }\n\n            while (col < to && idx < tokens.length) {\n                var value = tokens[idx].value;\n                if (value.length + col > to) {\n                    renderTokens.push({\n                        type: tokens[idx].type,\n                        value: value.substring(0, to - col)\n                    });\n                } else\n                    renderTokens.push(tokens[idx]);\n                col += value.length;\n                idx += 1;\n            }\n        }\n\n        var tokens = session.getTokens(row);\n        foldLine.walk(function(placeholder, row, column, lastColumn, isNewRow) {\n            if (placeholder != null) {\n                renderTokens.push({\n                    type: \"fold\",\n                    value: placeholder\n                });\n            } else {\n                if (isNewRow)\n                    tokens = session.getTokens(row);\n\n                if (tokens.length)\n                    addTokens(tokens, lastColumn, column);\n            }\n        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);\n\n        return renderTokens;\n    };\n\n    this.$useLineGroups = function() {\n        return this.session.getUseWrapMode();\n    };\n\n    this.destroy = function() {\n        clearInterval(this.$pollSizeChangesTimer);\n        if (this.$measureNode)\n            this.$measureNode.parentNode.removeChild(this.$measureNode);\n        delete this.$measureNode;\n    };\n\n}).call(Text.prototype);\n\nexports.Text = Text;\n\n});\n\nace.define(\"ace/layer/cursor\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar dom = acequire(\"../lib/dom\");\nvar isIE8;\n\nvar Cursor = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_cursor-layer\";\n    parentEl.appendChild(this.element);\n    \n    if (isIE8 === undefined)\n        isIE8 = !(\"opacity\" in this.element.style);\n\n    this.isVisible = false;\n    this.isBlinking = true;\n    this.blinkInterval = 1000;\n    this.smoothBlinking = false;\n\n    this.cursors = [];\n    this.cursor = this.addCursor();\n    dom.addCssClass(this.element, \"ace_hidden-cursors\");\n    this.$updateCursors = (isIE8\n        ? this.$updateVisibility\n        : this.$updateOpacity).bind(this);\n};\n\n(function() {\n    \n    this.$updateVisibility = function(val) {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            cursors[i].style.visibility = val ? \"\" : \"hidden\";\n    };\n    this.$updateOpacity = function(val) {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            cursors[i].style.opacity = val ? \"\" : \"0\";\n    };\n    \n\n    this.$padding = 0;\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n    };\n\n    this.setSession = function(session) {\n        this.session = session;\n    };\n\n    this.setBlinking = function(blinking) {\n        if (blinking != this.isBlinking){\n            this.isBlinking = blinking;\n            this.restartTimer();\n        }\n    };\n\n    this.setBlinkInterval = function(blinkInterval) {\n        if (blinkInterval != this.blinkInterval){\n            this.blinkInterval = blinkInterval;\n            this.restartTimer();\n        }\n    };\n\n    this.setSmoothBlinking = function(smoothBlinking) {\n        if (smoothBlinking != this.smoothBlinking && !isIE8) {\n            this.smoothBlinking = smoothBlinking;\n            dom.setCssClass(this.element, \"ace_smooth-blinking\", smoothBlinking);\n            this.$updateCursors(true);\n            this.$updateCursors = (this.$updateOpacity).bind(this);\n            this.restartTimer();\n        }\n    };\n\n    this.addCursor = function() {\n        var el = dom.createElement(\"div\");\n        el.className = \"ace_cursor\";\n        this.element.appendChild(el);\n        this.cursors.push(el);\n        return el;\n    };\n\n    this.removeCursor = function() {\n        if (this.cursors.length > 1) {\n            var el = this.cursors.pop();\n            el.parentNode.removeChild(el);\n            return el;\n        }\n    };\n\n    this.hideCursor = function() {\n        this.isVisible = false;\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n\n    this.showCursor = function() {\n        this.isVisible = true;\n        dom.removeCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n\n    this.restartTimer = function() {\n        var update = this.$updateCursors;\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n        if (this.smoothBlinking) {\n            dom.removeCssClass(this.element, \"ace_smooth-blinking\");\n        }\n        \n        update(true);\n\n        if (!this.isBlinking || !this.blinkInterval || !this.isVisible)\n            return;\n\n        if (this.smoothBlinking) {\n            setTimeout(function(){\n                dom.addCssClass(this.element, \"ace_smooth-blinking\");\n            }.bind(this));\n        }\n        \n        var blink = function(){\n            this.timeoutId = setTimeout(function() {\n                update(false);\n            }, 0.6 * this.blinkInterval);\n        }.bind(this);\n\n        this.intervalId = setInterval(function() {\n            update(true);\n            blink();\n        }, this.blinkInterval);\n\n        blink();\n    };\n\n    this.getPixelPosition = function(position, onScreen) {\n        if (!this.config || !this.session)\n            return {left : 0, top : 0};\n\n        if (!position)\n            position = this.session.selection.getCursor();\n        var pos = this.session.documentToScreenPosition(position);\n        var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : pos.column * this.config.characterWidth);\n\n        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *\n            this.config.lineHeight;\n\n        return {left : cursorLeft, top : cursorTop};\n    };\n\n    this.update = function(config) {\n        this.config = config;\n\n        var selections = this.session.$selectionMarkers;\n        var i = 0, cursorIndex = 0;\n\n        if (selections === undefined || selections.length === 0){\n            selections = [{cursor: null}];\n        }\n\n        for (var i = 0, n = selections.length; i < n; i++) {\n            var pixelPos = this.getPixelPosition(selections[i].cursor, true);\n            if ((pixelPos.top > config.height + config.offset ||\n                 pixelPos.top < 0) && i > 1) {\n                continue;\n            }\n\n            var style = (this.cursors[cursorIndex++] || this.addCursor()).style;\n            \n            if (!this.drawCursor) {\n                style.left = pixelPos.left + \"px\";\n                style.top = pixelPos.top + \"px\";\n                style.width = config.characterWidth + \"px\";\n                style.height = config.lineHeight + \"px\";\n            } else {\n                this.drawCursor(style, pixelPos, config, selections[i], this.session);\n            }\n        }\n        while (this.cursors.length > cursorIndex)\n            this.removeCursor();\n\n        var overwrite = this.session.getOverwrite();\n        this.$setOverwrite(overwrite);\n        this.$pixelPos = pixelPos;\n        this.restartTimer();\n    };\n    \n    this.drawCursor = null;\n\n    this.$setOverwrite = function(overwrite) {\n        if (overwrite != this.overwrite) {\n            this.overwrite = overwrite;\n            if (overwrite)\n                dom.addCssClass(this.element, \"ace_overwrite-cursors\");\n            else\n                dom.removeCssClass(this.element, \"ace_overwrite-cursors\");\n        }\n    };\n\n    this.destroy = function() {\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n    };\n\n}).call(Cursor.prototype);\n\nexports.Cursor = Cursor;\n\n});\n\nace.define(\"ace/scrollbar\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar dom = acequire(\"./lib/dom\");\nvar event = acequire(\"./lib/event\");\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\nvar MAX_SCROLL_H = 0x8000;\nvar ScrollBar = function(parent) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_scrollbar ace_scrollbar\" + this.classSuffix;\n\n    this.inner = dom.createElement(\"div\");\n    this.inner.className = \"ace_scrollbar-inner\";\n    this.element.appendChild(this.inner);\n\n    parent.appendChild(this.element);\n\n    this.setVisible(false);\n    this.skipEvent = false;\n\n    event.addListener(this.element, \"scroll\", this.onScroll.bind(this));\n    event.addListener(this.element, \"mousedown\", event.preventDefault);\n};\n\n(function() {\n    oop.implement(this, EventEmitter);\n\n    this.setVisible = function(isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n}).call(ScrollBar.prototype);\nvar VScrollBar = function(parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollTop = 0;\n    this.scrollHeight = 0;\n    renderer.$scrollbarWidth = \n    this.width = dom.scrollbarWidth(parent.ownerDocument);\n    this.inner.style.width =\n    this.element.style.width = (this.width || 15) + 5 + \"px\";\n    this.$minWidth = 0;\n};\n\noop.inherits(VScrollBar, ScrollBar);\n\n(function() {\n\n    this.classSuffix = '-v';\n    this.onScroll = function() {\n        if (!this.skipEvent) {\n            this.scrollTop = this.element.scrollTop;\n            if (this.coeff != 1) {\n                var h = this.element.clientHeight / this.scrollHeight;\n                this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);\n            }\n            this._emit(\"scroll\", {data: this.scrollTop});\n        }\n        this.skipEvent = false;\n    };\n    this.getWidth = function() {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n    this.setHeight = function(height) {\n        this.element.style.height = height + \"px\";\n    };\n    this.setInnerHeight =\n    this.setScrollHeight = function(height) {\n        this.scrollHeight = height;\n        if (height > MAX_SCROLL_H) {\n            this.coeff = MAX_SCROLL_H / height;\n            height = MAX_SCROLL_H;\n        } else if (this.coeff != 1) {\n            this.coeff = 1;\n        }\n        this.inner.style.height = height + \"px\";\n    };\n    this.setScrollTop = function(scrollTop) {\n        if (this.scrollTop != scrollTop) {\n            this.skipEvent = true;\n            this.scrollTop = scrollTop;\n            this.element.scrollTop = scrollTop * this.coeff;\n        }\n    };\n\n}).call(VScrollBar.prototype);\nvar HScrollBar = function(parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollLeft = 0;\n    this.height = renderer.$scrollbarWidth;\n    this.inner.style.height =\n    this.element.style.height = (this.height || 15) + 5 + \"px\";\n};\n\noop.inherits(HScrollBar, ScrollBar);\n\n(function() {\n\n    this.classSuffix = '-h';\n    this.onScroll = function() {\n        if (!this.skipEvent) {\n            this.scrollLeft = this.element.scrollLeft;\n            this._emit(\"scroll\", {data: this.scrollLeft});\n        }\n        this.skipEvent = false;\n    };\n    this.getHeight = function() {\n        return this.isVisible ? this.height : 0;\n    };\n    this.setWidth = function(width) {\n        this.element.style.width = width + \"px\";\n    };\n    this.setInnerWidth = function(width) {\n        this.inner.style.width = width + \"px\";\n    };\n    this.setScrollWidth = function(width) {\n        this.inner.style.width = width + \"px\";\n    };\n    this.setScrollLeft = function(scrollLeft) {\n        if (this.scrollLeft != scrollLeft) {\n            this.skipEvent = true;\n            this.scrollLeft = this.element.scrollLeft = scrollLeft;\n        }\n    };\n\n}).call(HScrollBar.prototype);\n\n\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\n\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n});\n\nace.define(\"ace/renderloop\",[\"require\",\"exports\",\"module\",\"ace/lib/event\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar event = acequire(\"./lib/event\");\n\n\nvar RenderLoop = function(onRender, win) {\n    this.onRender = onRender;\n    this.pending = false;\n    this.changes = 0;\n    this.window = win || window;\n};\n\n(function() {\n\n\n    this.schedule = function(change) {\n        this.changes = this.changes | change;\n        if (!this.pending && this.changes) {\n            this.pending = true;\n            var _self = this;\n            event.nextFrame(function() {\n                _self.pending = false;\n                var changes;\n                while (changes = _self.changes) {\n                    _self.changes = 0;\n                    _self.onRender(changes);\n                }\n            }, this.window);\n        }\n    };\n\n}).call(RenderLoop.prototype);\n\nexports.RenderLoop = RenderLoop;\n});\n\nace.define(\"ace/layer/font_metrics\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/useragent\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\nvar oop = acequire(\"../lib/oop\");\nvar dom = acequire(\"../lib/dom\");\nvar lang = acequire(\"../lib/lang\");\nvar useragent = acequire(\"../lib/useragent\");\nvar EventEmitter = acequire(\"../lib/event_emitter\").EventEmitter;\n\nvar CHAR_COUNT = 0;\n\nvar FontMetrics = exports.FontMetrics = function(parentEl) {\n    this.el = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.el.style, true);\n    \n    this.$main = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$main.style);\n    \n    this.$measureNode = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$measureNode.style);\n    \n    \n    this.el.appendChild(this.$main);\n    this.el.appendChild(this.$measureNode);\n    parentEl.appendChild(this.el);\n    \n    if (!CHAR_COUNT)\n        this.$testFractionalRect();\n    this.$measureNode.innerHTML = lang.stringRepeat(\"X\", CHAR_COUNT);\n    \n    this.$characterSize = {width: 0, height: 0};\n    this.checkForSizeChanges();\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n        \n    this.$characterSize = {width: 0, height: 0};\n    \n    this.$testFractionalRect = function() {\n        var el = dom.createElement(\"div\");\n        this.$setMeasureNodeStyles(el.style);\n        el.style.width = \"0.2px\";\n        document.documentElement.appendChild(el);\n        var w = el.getBoundingClientRect().width;\n        if (w > 0 && w < 1)\n            CHAR_COUNT = 50;\n        else\n            CHAR_COUNT = 100;\n        el.parentNode.removeChild(el);\n    };\n    \n    this.$setMeasureNodeStyles = function(style, isRoot) {\n        style.width = style.height = \"auto\";\n        style.left = style.top = \"0px\";\n        style.visibility = \"hidden\";\n        style.position = \"absolute\";\n        style.whiteSpace = \"pre\";\n\n        if (useragent.isIE < 8) {\n            style[\"font-family\"] = \"inherit\";\n        } else {\n            style.font = \"inherit\";\n        }\n        style.overflow = isRoot ? \"hidden\" : \"visible\";\n    };\n\n    this.checkForSizeChanges = function() {\n        var size = this.$measureSizes();\n        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {\n            this.$measureNode.style.fontWeight = \"bold\";\n            var boldSize = this.$measureSizes();\n            this.$measureNode.style.fontWeight = \"\";\n            this.$characterSize = size;\n            this.charSizes = Object.create(null);\n            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;\n            this._emit(\"changeCharacterSize\", {data: size});\n        }\n    };\n\n    this.$pollSizeChanges = function() {\n        if (this.$pollSizeChangesTimer)\n            return this.$pollSizeChangesTimer;\n        var self = this;\n        return this.$pollSizeChangesTimer = setInterval(function() {\n            self.checkForSizeChanges();\n        }, 500);\n    };\n    \n    this.setPolling = function(val) {\n        if (val) {\n            this.$pollSizeChanges();\n        } else if (this.$pollSizeChangesTimer) {\n            clearInterval(this.$pollSizeChangesTimer);\n            this.$pollSizeChangesTimer = 0;\n        }\n    };\n\n    this.$measureSizes = function() {\n        if (CHAR_COUNT === 50) {\n            var rect = null;\n            try { \n               rect = this.$measureNode.getBoundingClientRect();\n            } catch(e) {\n               rect = {width: 0, height:0 };\n            }\n            var size = {\n                height: rect.height,\n                width: rect.width / CHAR_COUNT\n            };\n        } else {\n            var size = {\n                height: this.$measureNode.clientHeight,\n                width: this.$measureNode.clientWidth / CHAR_COUNT\n            };\n        }\n        if (size.width === 0 || size.height === 0)\n            return null;\n        return size;\n    };\n\n    this.$measureCharWidth = function(ch) {\n        this.$main.innerHTML = lang.stringRepeat(ch, CHAR_COUNT);\n        var rect = this.$main.getBoundingClientRect();\n        return rect.width / CHAR_COUNT;\n    };\n    \n    this.getCharacterWidth = function(ch) {\n        var w = this.charSizes[ch];\n        if (w === undefined) {\n            w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;\n        }\n        return w;\n    };\n\n    this.destroy = function() {\n        clearInterval(this.$pollSizeChangesTimer);\n        if (this.el && this.el.parentNode)\n            this.el.parentNode.removeChild(this.el);\n    };\n\n}).call(FontMetrics.prototype);\n\n});\n\nace.define(\"ace/virtual_renderer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/config\",\"ace/lib/useragent\",\"ace/layer/gutter\",\"ace/layer/marker\",\"ace/layer/text\",\"ace/layer/cursor\",\"ace/scrollbar\",\"ace/scrollbar\",\"ace/renderloop\",\"ace/layer/font_metrics\",\"ace/lib/event_emitter\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar dom = acequire(\"./lib/dom\");\nvar config = acequire(\"./config\");\nvar useragent = acequire(\"./lib/useragent\");\nvar GutterLayer = acequire(\"./layer/gutter\").Gutter;\nvar MarkerLayer = acequire(\"./layer/marker\").Marker;\nvar TextLayer = acequire(\"./layer/text\").Text;\nvar CursorLayer = acequire(\"./layer/cursor\").Cursor;\nvar HScrollBar = acequire(\"./scrollbar\").HScrollBar;\nvar VScrollBar = acequire(\"./scrollbar\").VScrollBar;\nvar RenderLoop = acequire(\"./renderloop\").RenderLoop;\nvar FontMetrics = acequire(\"./layer/font_metrics\").FontMetrics;\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\nvar editorCss = \".ace_editor {\\\nposition: relative;\\\noverflow: hidden;\\\nfont: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\\\ndirection: ltr;\\\ntext-align: left;\\\n-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\\n}\\\n.ace_scroller {\\\nposition: absolute;\\\noverflow: hidden;\\\ntop: 0;\\\nbottom: 0;\\\nbackground-color: inherit;\\\n-ms-user-select: none;\\\n-moz-user-select: none;\\\n-webkit-user-select: none;\\\nuser-select: none;\\\ncursor: text;\\\n}\\\n.ace_content {\\\nposition: absolute;\\\n-moz-box-sizing: border-box;\\\n-webkit-box-sizing: border-box;\\\nbox-sizing: border-box;\\\nmin-width: 100%;\\\n}\\\n.ace_dragging .ace_scroller:before{\\\nposition: absolute;\\\ntop: 0;\\\nleft: 0;\\\nright: 0;\\\nbottom: 0;\\\ncontent: '';\\\nbackground: rgba(250, 250, 250, 0.01);\\\nz-index: 1000;\\\n}\\\n.ace_dragging.ace_dark .ace_scroller:before{\\\nbackground: rgba(0, 0, 0, 0.01);\\\n}\\\n.ace_selecting, .ace_selecting * {\\\ncursor: text !important;\\\n}\\\n.ace_gutter {\\\nposition: absolute;\\\noverflow : hidden;\\\nwidth: auto;\\\ntop: 0;\\\nbottom: 0;\\\nleft: 0;\\\ncursor: default;\\\nz-index: 4;\\\n-ms-user-select: none;\\\n-moz-user-select: none;\\\n-webkit-user-select: none;\\\nuser-select: none;\\\n}\\\n.ace_gutter-active-line {\\\nposition: absolute;\\\nleft: 0;\\\nright: 0;\\\n}\\\n.ace_scroller.ace_scroll-left {\\\nbox-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\\\n}\\\n.ace_gutter-cell {\\\npadding-left: 19px;\\\npadding-right: 6px;\\\nbackground-repeat: no-repeat;\\\n}\\\n.ace_gutter-cell.ace_error {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\\\");\\\nbackground-repeat: no-repeat;\\\nbackground-position: 2px center;\\\n}\\\n.ace_gutter-cell.ace_warning {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\\\");\\\nbackground-position: 2px center;\\\n}\\\n.ace_gutter-cell.ace_info {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\\\");\\\nbackground-position: 2px center;\\\n}\\\n.ace_dark .ace_gutter-cell.ace_info {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\\\");\\\n}\\\n.ace_scrollbar {\\\nposition: absolute;\\\nright: 0;\\\nbottom: 0;\\\nz-index: 6;\\\n}\\\n.ace_scrollbar-inner {\\\nposition: absolute;\\\ncursor: text;\\\nleft: 0;\\\ntop: 0;\\\n}\\\n.ace_scrollbar-v{\\\noverflow-x: hidden;\\\noverflow-y: scroll;\\\ntop: 0;\\\n}\\\n.ace_scrollbar-h {\\\noverflow-x: scroll;\\\noverflow-y: hidden;\\\nleft: 0;\\\n}\\\n.ace_print-margin {\\\nposition: absolute;\\\nheight: 100%;\\\n}\\\n.ace_text-input {\\\nposition: absolute;\\\nz-index: 0;\\\nwidth: 0.5em;\\\nheight: 1em;\\\nopacity: 0;\\\nbackground: transparent;\\\n-moz-appearance: none;\\\nappearance: none;\\\nborder: none;\\\nresize: none;\\\noutline: none;\\\noverflow: hidden;\\\nfont: inherit;\\\npadding: 0 1px;\\\nmargin: 0 -1px;\\\ntext-indent: -1em;\\\n-ms-user-select: text;\\\n-moz-user-select: text;\\\n-webkit-user-select: text;\\\nuser-select: text;\\\nwhite-space: pre!important;\\\n}\\\n.ace_text-input.ace_composition {\\\nbackground: inherit;\\\ncolor: inherit;\\\nz-index: 1000;\\\nopacity: 1;\\\ntext-indent: 0;\\\n}\\\n.ace_layer {\\\nz-index: 1;\\\nposition: absolute;\\\noverflow: hidden;\\\nword-wrap: normal;\\\nwhite-space: pre;\\\nheight: 100%;\\\nwidth: 100%;\\\n-moz-box-sizing: border-box;\\\n-webkit-box-sizing: border-box;\\\nbox-sizing: border-box;\\\npointer-events: none;\\\n}\\\n.ace_gutter-layer {\\\nposition: relative;\\\nwidth: auto;\\\ntext-align: right;\\\npointer-events: auto;\\\n}\\\n.ace_text-layer {\\\nfont: inherit !important;\\\n}\\\n.ace_cjk {\\\ndisplay: inline-block;\\\ntext-align: center;\\\n}\\\n.ace_cursor-layer {\\\nz-index: 4;\\\n}\\\n.ace_cursor {\\\nz-index: 4;\\\nposition: absolute;\\\n-moz-box-sizing: border-box;\\\n-webkit-box-sizing: border-box;\\\nbox-sizing: border-box;\\\nborder-left: 2px solid;\\\ntransform: translatez(0);\\\n}\\\n.ace_multiselect .ace_cursor {\\\nborder-left-width: 1px;\\\n}\\\n.ace_slim-cursors .ace_cursor {\\\nborder-left-width: 1px;\\\n}\\\n.ace_overwrite-cursors .ace_cursor {\\\nborder-left-width: 0;\\\nborder-bottom: 1px solid;\\\n}\\\n.ace_hidden-cursors .ace_cursor {\\\nopacity: 0.2;\\\n}\\\n.ace_smooth-blinking .ace_cursor {\\\n-webkit-transition: opacity 0.18s;\\\ntransition: opacity 0.18s;\\\n}\\\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\\\nposition: absolute;\\\nz-index: 3;\\\n}\\\n.ace_marker-layer .ace_selection {\\\nposition: absolute;\\\nz-index: 5;\\\n}\\\n.ace_marker-layer .ace_bracket {\\\nposition: absolute;\\\nz-index: 6;\\\n}\\\n.ace_marker-layer .ace_active-line {\\\nposition: absolute;\\\nz-index: 2;\\\n}\\\n.ace_marker-layer .ace_selected-word {\\\nposition: absolute;\\\nz-index: 4;\\\n-moz-box-sizing: border-box;\\\n-webkit-box-sizing: border-box;\\\nbox-sizing: border-box;\\\n}\\\n.ace_line .ace_fold {\\\n-moz-box-sizing: border-box;\\\n-webkit-box-sizing: border-box;\\\nbox-sizing: border-box;\\\ndisplay: inline-block;\\\nheight: 11px;\\\nmargin-top: -2px;\\\nvertical-align: middle;\\\nbackground-image:\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\\\");\\\nbackground-repeat: no-repeat, repeat-x;\\\nbackground-position: center center, top left;\\\ncolor: transparent;\\\nborder: 1px solid black;\\\nborder-radius: 2px;\\\ncursor: pointer;\\\npointer-events: auto;\\\n}\\\n.ace_dark .ace_fold {\\\n}\\\n.ace_fold:hover{\\\nbackground-image:\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\\\");\\\n}\\\n.ace_tooltip {\\\nbackground-color: #FFF;\\\nbackground-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));\\\nbackground-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\\\nborder: 1px solid gray;\\\nborder-radius: 1px;\\\nbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\\\ncolor: black;\\\nmax-width: 100%;\\\npadding: 3px 4px;\\\nposition: fixed;\\\nz-index: 999999;\\\n-moz-box-sizing: border-box;\\\n-webkit-box-sizing: border-box;\\\nbox-sizing: border-box;\\\ncursor: default;\\\nwhite-space: pre;\\\nword-wrap: break-word;\\\nline-height: normal;\\\nfont-style: normal;\\\nfont-weight: normal;\\\nletter-spacing: normal;\\\npointer-events: none;\\\n}\\\n.ace_folding-enabled > .ace_gutter-cell {\\\npadding-right: 13px;\\\n}\\\n.ace_fold-widget {\\\n-moz-box-sizing: border-box;\\\n-webkit-box-sizing: border-box;\\\nbox-sizing: border-box;\\\nmargin: 0 -12px 0 1px;\\\ndisplay: none;\\\nwidth: 11px;\\\nvertical-align: top;\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\\\");\\\nbackground-repeat: no-repeat;\\\nbackground-position: center;\\\nborder-radius: 3px;\\\nborder: 1px solid transparent;\\\ncursor: pointer;\\\n}\\\n.ace_folding-enabled .ace_fold-widget {\\\ndisplay: inline-block;   \\\n}\\\n.ace_fold-widget.ace_end {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\\\");\\\n}\\\n.ace_fold-widget.ace_closed {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\\\");\\\n}\\\n.ace_fold-widget:hover {\\\nborder: 1px solid rgba(0, 0, 0, 0.3);\\\nbackground-color: rgba(255, 255, 255, 0.2);\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\\\n}\\\n.ace_fold-widget:active {\\\nborder: 1px solid rgba(0, 0, 0, 0.4);\\\nbackground-color: rgba(0, 0, 0, 0.05);\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\\\n}\\\n.ace_dark .ace_fold-widget {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\\\");\\\n}\\\n.ace_dark .ace_fold-widget.ace_end {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\\\");\\\n}\\\n.ace_dark .ace_fold-widget.ace_closed {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\\\");\\\n}\\\n.ace_dark .ace_fold-widget:hover {\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\\nbackground-color: rgba(255, 255, 255, 0.1);\\\n}\\\n.ace_dark .ace_fold-widget:active {\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\\n}\\\n.ace_fold-widget.ace_invalid {\\\nbackground-color: #FFB4B4;\\\nborder-color: #DE5555;\\\n}\\\n.ace_fade-fold-widgets .ace_fold-widget {\\\n-webkit-transition: opacity 0.4s ease 0.05s;\\\ntransition: opacity 0.4s ease 0.05s;\\\nopacity: 0;\\\n}\\\n.ace_fade-fold-widgets:hover .ace_fold-widget {\\\n-webkit-transition: opacity 0.05s ease 0.05s;\\\ntransition: opacity 0.05s ease 0.05s;\\\nopacity:1;\\\n}\\\n.ace_underline {\\\ntext-decoration: underline;\\\n}\\\n.ace_bold {\\\nfont-weight: bold;\\\n}\\\n.ace_nobold .ace_bold {\\\nfont-weight: normal;\\\n}\\\n.ace_italic {\\\nfont-style: italic;\\\n}\\\n.ace_error-marker {\\\nbackground-color: rgba(255, 0, 0,0.2);\\\nposition: absolute;\\\nz-index: 9;\\\n}\\\n.ace_highlight-marker {\\\nbackground-color: rgba(255, 255, 0,0.2);\\\nposition: absolute;\\\nz-index: 8;\\\n}\\\n.ace_br1 {border-top-left-radius    : 3px;}\\\n.ace_br2 {border-top-right-radius   : 3px;}\\\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\\\n.ace_br4 {border-bottom-right-radius: 3px;}\\\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\\\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\\\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\\\n.ace_br8 {border-bottom-left-radius : 3px;}\\\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\\\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\\\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\\\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\\\n.ace_text-input-ios {\\\nposition: absolute !important;\\\ntop: -100000px !important;\\\nleft: -100000px !important;\\\n}\\\n\";\n\ndom.importCssString(editorCss, \"ace_editor.css\");\n\nvar VirtualRenderer = function(container, theme) {\n    var _self = this;\n\n    this.container = container || dom.createElement(\"div\");\n    this.$keepTextAreaAtCursor = !useragent.isOldIE;\n\n    dom.addCssClass(this.container, \"ace_editor\");\n\n    this.setTheme(theme);\n\n    this.$gutter = dom.createElement(\"div\");\n    this.$gutter.className = \"ace_gutter\";\n    this.container.appendChild(this.$gutter);\n    this.$gutter.setAttribute(\"aria-hidden\", true);\n\n    this.scroller = dom.createElement(\"div\");\n    this.scroller.className = \"ace_scroller\";\n    this.container.appendChild(this.scroller);\n\n    this.content = dom.createElement(\"div\");\n    this.content.className = \"ace_content\";\n    this.scroller.appendChild(this.content);\n\n    this.$gutterLayer = new GutterLayer(this.$gutter);\n    this.$gutterLayer.on(\"changeGutterWidth\", this.onGutterResize.bind(this));\n\n    this.$markerBack = new MarkerLayer(this.content);\n\n    var textLayer = this.$textLayer = new TextLayer(this.content);\n    this.canvas = textLayer.element;\n\n    this.$markerFront = new MarkerLayer(this.content);\n\n    this.$cursorLayer = new CursorLayer(this.content);\n    this.$horizScroll = false;\n    this.$vScroll = false;\n\n    this.scrollBar = \n    this.scrollBarV = new VScrollBar(this.container, this);\n    this.scrollBarH = new HScrollBar(this.container, this);\n    this.scrollBarV.addEventListener(\"scroll\", function(e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n    });\n    this.scrollBarH.addEventListener(\"scroll\", function(e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n    });\n\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n\n    this.cursorPos = {\n        row : 0,\n        column : 0\n    };\n\n    this.$fontMetrics = new FontMetrics(this.container);\n    this.$textLayer.$setFontMetrics(this.$fontMetrics);\n    this.$textLayer.addEventListener(\"changeCharacterSize\", function(e) {\n        _self.updateCharacterSize();\n        _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);\n        _self._signal(\"changeCharacterSize\", e);\n    });\n\n    this.$size = {\n        width: 0,\n        height: 0,\n        scrollerHeight: 0,\n        scrollerWidth: 0,\n        $dirty: true\n    };\n\n    this.layerConfig = {\n        width : 1,\n        padding : 0,\n        firstRow : 0,\n        firstRowScreen: 0,\n        lastRow : 0,\n        lineHeight : 0,\n        characterWidth : 0,\n        minHeight : 1,\n        maxHeight : 1,\n        offset : 0,\n        height : 1,\n        gutterOffset: 1\n    };\n    \n    this.scrollMargin = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        v: 0,\n        h: 0\n    };\n\n    this.$loop = new RenderLoop(\n        this.$renderChanges.bind(this),\n        this.container.ownerDocument.defaultView\n    );\n    this.$loop.schedule(this.CHANGE_FULL);\n\n    this.updateCharacterSize();\n    this.setPadding(4);\n    config.resetOptions(this);\n    config._emit(\"renderer\", this);\n};\n\n(function() {\n\n    this.CHANGE_CURSOR = 1;\n    this.CHANGE_MARKER = 2;\n    this.CHANGE_GUTTER = 4;\n    this.CHANGE_SCROLL = 8;\n    this.CHANGE_LINES = 16;\n    this.CHANGE_TEXT = 32;\n    this.CHANGE_SIZE = 64;\n    this.CHANGE_MARKER_BACK = 128;\n    this.CHANGE_MARKER_FRONT = 256;\n    this.CHANGE_FULL = 512;\n    this.CHANGE_H_SCROLL = 1024;\n\n    oop.implement(this, EventEmitter);\n\n    this.updateCharacterSize = function() {\n        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {\n            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;\n            this.setStyle(\"ace_nobold\", !this.$allowBoldFonts);\n        }\n\n        this.layerConfig.characterWidth =\n        this.characterWidth = this.$textLayer.getCharacterWidth();\n        this.layerConfig.lineHeight =\n        this.lineHeight = this.$textLayer.getLineHeight();\n        this.$updatePrintMargin();\n    };\n    this.setSession = function(session) {\n        if (this.session)\n            this.session.doc.off(\"changeNewLineMode\", this.onChangeNewLineMode);\n            \n        this.session = session;\n        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)\n            session.setScrollTop(-this.scrollMargin.top);\n\n        this.$cursorLayer.setSession(session);\n        this.$markerBack.setSession(session);\n        this.$markerFront.setSession(session);\n        this.$gutterLayer.setSession(session);\n        this.$textLayer.setSession(session);\n        if (!session)\n            return;\n        \n        this.$loop.schedule(this.CHANGE_FULL);\n        this.session.$setFontMetrics(this.$fontMetrics);\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        \n        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);\n        this.onChangeNewLineMode();\n        this.session.doc.on(\"changeNewLineMode\", this.onChangeNewLineMode);\n    };\n    this.updateLines = function(firstRow, lastRow, force) {\n        if (lastRow === undefined)\n            lastRow = Infinity;\n\n        if (!this.$changedLines) {\n            this.$changedLines = {\n                firstRow: firstRow,\n                lastRow: lastRow\n            };\n        }\n        else {\n            if (this.$changedLines.firstRow > firstRow)\n                this.$changedLines.firstRow = firstRow;\n\n            if (this.$changedLines.lastRow < lastRow)\n                this.$changedLines.lastRow = lastRow;\n        }\n        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {\n            if (force)\n                this.$changedLines.lastRow = this.layerConfig.lastRow;\n            else\n                return;\n        }\n        if (this.$changedLines.firstRow > this.layerConfig.lastRow)\n            return;\n        this.$loop.schedule(this.CHANGE_LINES);\n    };\n\n    this.onChangeNewLineMode = function() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n        this.$textLayer.$updateEolChar();\n        this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);\n    };\n    \n    this.onChangeTabSize = function() {\n        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);\n        this.$textLayer.onChangeTabSize();\n    };\n    this.updateText = function() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n    };\n    this.updateFull = function(force) {\n        if (force)\n            this.$renderChanges(this.CHANGE_FULL, true);\n        else\n            this.$loop.schedule(this.CHANGE_FULL);\n    };\n    this.updateFontSize = function() {\n        this.$textLayer.checkForSizeChanges();\n    };\n\n    this.$changes = 0;\n    this.$updateSizeAsync = function() {\n        if (this.$loop.pending)\n            this.$size.$dirty = true;\n        else\n            this.onResize();\n    };\n    this.onResize = function(force, gutterWidth, width, height) {\n        if (this.resizing > 2)\n            return;\n        else if (this.resizing > 0)\n            this.resizing++;\n        else\n            this.resizing = force ? 1 : 0;\n        var el = this.container;\n        if (!height)\n            height = el.clientHeight || el.scrollHeight;\n        if (!width)\n            width = el.clientWidth || el.scrollWidth;\n        var changes = this.$updateCachedSize(force, gutterWidth, width, height);\n\n        \n        if (!this.$size.scrollerHeight || (!width && !height))\n            return this.resizing = 0;\n\n        if (force)\n            this.$gutterLayer.$padding = null;\n\n        if (force)\n            this.$renderChanges(changes | this.$changes, true);\n        else\n            this.$loop.schedule(changes | this.$changes);\n\n        if (this.resizing)\n            this.resizing = 0;\n        this.scrollBarV.scrollLeft = this.scrollBarV.scrollTop = null;\n    };\n    \n    this.$updateCachedSize = function(force, gutterWidth, width, height) {\n        height -= (this.$extraHeight || 0);\n        var changes = 0;\n        var size = this.$size;\n        var oldSize = {\n            width: size.width,\n            height: size.height,\n            scrollerHeight: size.scrollerHeight,\n            scrollerWidth: size.scrollerWidth\n        };\n        if (height && (force || size.height != height)) {\n            size.height = height;\n            changes |= this.CHANGE_SIZE;\n\n            size.scrollerHeight = size.height;\n            if (this.$horizScroll)\n                size.scrollerHeight -= this.scrollBarH.getHeight();\n            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + \"px\";\n\n            changes = changes | this.CHANGE_SCROLL;\n        }\n\n        if (width && (force || size.width != width)) {\n            changes |= this.CHANGE_SIZE;\n            size.width = width;\n            \n            if (gutterWidth == null)\n                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;\n            \n            this.gutterWidth = gutterWidth;\n            \n            this.scrollBarH.element.style.left = \n            this.scroller.style.left = gutterWidth + \"px\";\n            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth());           \n            \n            this.scrollBarH.element.style.right = \n            this.scroller.style.right = this.scrollBarV.getWidth() + \"px\";\n            this.scroller.style.bottom = this.scrollBarH.getHeight() + \"px\";\n\n            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force)\n                changes |= this.CHANGE_FULL;\n        }\n        \n        size.$dirty = !width || !height;\n\n        if (changes)\n            this._signal(\"resize\", oldSize);\n\n        return changes;\n    };\n\n    this.onGutterResize = function() {\n        var gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;\n        if (gutterWidth != this.gutterWidth)\n            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);\n\n        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else if (this.$size.$dirty) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else {\n            this.$computeLayerConfig();\n            this.$loop.schedule(this.CHANGE_MARKER);\n        }\n    };\n    this.adjustWrapLimit = function() {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth);\n        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);\n    };\n    this.setAnimatedScroll = function(shouldAnimate){\n        this.setOption(\"animatedScroll\", shouldAnimate);\n    };\n    this.getAnimatedScroll = function() {\n        return this.$animatedScroll;\n    };\n    this.setShowInvisibles = function(showInvisibles) {\n        this.setOption(\"showInvisibles\", showInvisibles);\n        this.session.$bidiHandler.setShowInvisibles(showInvisibles);\n    };\n    this.getShowInvisibles = function() {\n        return this.getOption(\"showInvisibles\");\n    };\n    this.getDisplayIndentGuides = function() {\n        return this.getOption(\"displayIndentGuides\");\n    };\n\n    this.setDisplayIndentGuides = function(display) {\n        this.setOption(\"displayIndentGuides\", display);\n    };\n    this.setShowPrintMargin = function(showPrintMargin) {\n        this.setOption(\"showPrintMargin\", showPrintMargin);\n    };\n    this.getShowPrintMargin = function() {\n        return this.getOption(\"showPrintMargin\");\n    };\n    this.setPrintMarginColumn = function(showPrintMargin) {\n        this.setOption(\"printMarginColumn\", showPrintMargin);\n    };\n    this.getPrintMarginColumn = function() {\n        return this.getOption(\"printMarginColumn\");\n    };\n    this.getShowGutter = function(){\n        return this.getOption(\"showGutter\");\n    };\n    this.setShowGutter = function(show){\n        return this.setOption(\"showGutter\", show);\n    };\n\n    this.getFadeFoldWidgets = function(){\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n\n    this.setFadeFoldWidgets = function(show) {\n        this.setOption(\"fadeFoldWidgets\", show);\n    };\n\n    this.setHighlightGutterLine = function(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n\n    this.getHighlightGutterLine = function() {\n        return this.getOption(\"highlightGutterLine\");\n    };\n\n    this.$updateGutterLineHighlight = function() {\n        var pos = this.$cursorLayer.$pixelPos;\n        var height = this.layerConfig.lineHeight;\n        if (this.session.getUseWrapMode()) {\n            var cursor = this.session.selection.getCursor();\n            cursor.column = 0;\n            pos = this.$cursorLayer.getPixelPosition(cursor, true);\n            height *= this.session.getRowLength(cursor.row);\n        }\n        this.$gutterLineHighlight.style.top = pos.top - this.layerConfig.offset + \"px\";\n        this.$gutterLineHighlight.style.height = height + \"px\";\n    };\n\n    this.$updatePrintMargin = function() {\n        if (!this.$showPrintMargin && !this.$printMarginEl)\n            return;\n\n        if (!this.$printMarginEl) {\n            var containerEl = dom.createElement(\"div\");\n            containerEl.className = \"ace_layer ace_print-margin-layer\";\n            this.$printMarginEl = dom.createElement(\"div\");\n            this.$printMarginEl.className = \"ace_print-margin\";\n            containerEl.appendChild(this.$printMarginEl);\n            this.content.insertBefore(containerEl, this.content.firstChild);\n        }\n\n        var style = this.$printMarginEl.style;\n        style.left = ((this.characterWidth * this.$printMarginColumn) + this.$padding) + \"px\";\n        style.visibility = this.$showPrintMargin ? \"visible\" : \"hidden\";\n        \n        if (this.session && this.session.$wrap == -1)\n            this.adjustWrapLimit();\n    };\n    this.getContainerElement = function() {\n        return this.container;\n    };\n    this.getMouseEventTarget = function() {\n        return this.scroller;\n    };\n    this.getTextAreaContainer = function() {\n        return this.container;\n    };\n    this.$moveTextAreaToCursor = function() {\n        if (!this.$keepTextAreaAtCursor)\n            return;\n        var config = this.layerConfig;\n        var posTop = this.$cursorLayer.$pixelPos.top;\n        var posLeft = this.$cursorLayer.$pixelPos.left;\n        posTop -= config.offset;\n\n        var style = this.textarea.style;\n        var h = this.lineHeight;\n        if (posTop < 0 || posTop > config.height - h) {\n            style.top = style.left = \"0\";\n            return;\n        }\n\n        var w = this.characterWidth;\n        if (this.$composition) {\n            var val = this.textarea.value.replace(/^\\x01+/, \"\");\n            w *= (this.session.$getStringScreenWidth(val)[0]+2);\n            h += 2;\n        }\n        posLeft -= this.scrollLeft;\n        if (posLeft > this.$size.scrollerWidth - w)\n            posLeft = this.$size.scrollerWidth - w;\n\n        posLeft += this.gutterWidth;\n        style.height = h + \"px\";\n        style.width = w + \"px\";\n        style.left = Math.min(posLeft, this.$size.scrollerWidth - w) + \"px\";\n        style.top = Math.min(posTop, this.$size.height - h) + \"px\";\n    };\n    this.getFirstVisibleRow = function() {\n        return this.layerConfig.firstRow;\n    };\n    this.getFirstFullyVisibleRow = function() {\n        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);\n    };\n    this.getLastFullyVisibleRow = function() {\n        var config = this.layerConfig;\n        var lastRow = config.lastRow;\n        var top = this.session.documentToScreenRow(lastRow, 0) * config.lineHeight;\n        if (top - this.session.getScrollTop() > config.height - config.lineHeight)\n            return lastRow - 1;\n        return lastRow;\n    };\n    this.getLastVisibleRow = function() {\n        return this.layerConfig.lastRow;\n    };\n\n    this.$padding = null;\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n        this.$textLayer.setPadding(padding);\n        this.$cursorLayer.setPadding(padding);\n        this.$markerFront.setPadding(padding);\n        this.$markerBack.setPadding(padding);\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.$updatePrintMargin();\n    };\n    \n    this.setScrollMargin = function(top, bottom, left, right) {\n        var sm = this.scrollMargin;\n        sm.top = top|0;\n        sm.bottom = bottom|0;\n        sm.right = right|0;\n        sm.left = left|0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        if (sm.top && this.scrollTop <= 0 && this.session)\n            this.session.setScrollTop(-sm.top);\n        this.updateFull();\n    };\n    this.getHScrollBarAlwaysVisible = function() {\n        return this.$hScrollBarAlwaysVisible;\n    };\n    this.setHScrollBarAlwaysVisible = function(alwaysVisible) {\n        this.setOption(\"hScrollBarAlwaysVisible\", alwaysVisible);\n    };\n    this.getVScrollBarAlwaysVisible = function() {\n        return this.$vScrollBarAlwaysVisible;\n    };\n    this.setVScrollBarAlwaysVisible = function(alwaysVisible) {\n        this.setOption(\"vScrollBarAlwaysVisible\", alwaysVisible);\n    };\n\n    this.$updateScrollBarV = function() {\n        var scrollHeight = this.layerConfig.maxHeight;\n        var scrollerHeight = this.$size.scrollerHeight;\n        if (!this.$maxLines && this.$scrollPastEnd) {\n            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;\n            if (this.scrollTop > scrollHeight - scrollerHeight) {\n                scrollHeight = this.scrollTop + scrollerHeight;\n                this.scrollBarV.scrollTop = null;\n            }\n        }\n        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);\n        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);\n    };\n    this.$updateScrollBarH = function() {\n        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);\n        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);\n    };\n    \n    this.$frozen = false;\n    this.freeze = function() {\n        this.$frozen = true;\n    };\n    \n    this.unfreeze = function() {\n        this.$frozen = false;\n    };\n\n    this.$renderChanges = function(changes, force) {\n        if (this.$changes) {\n            changes |= this.$changes;\n            this.$changes = 0;\n        }\n        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {\n            this.$changes |= changes;\n            return; \n        } \n        if (this.$size.$dirty) {\n            this.$changes |= changes;\n            return this.onResize(true);\n        }\n        if (!this.lineHeight) {\n            this.$textLayer.checkForSizeChanges();\n        }\n        \n        this._signal(\"beforeRender\");\n\n        if (this.session && this.session.$bidiHandler)\n            this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);\n\n        var config = this.layerConfig;\n        if (changes & this.CHANGE_FULL ||\n            changes & this.CHANGE_SIZE ||\n            changes & this.CHANGE_TEXT ||\n            changes & this.CHANGE_LINES ||\n            changes & this.CHANGE_SCROLL ||\n            changes & this.CHANGE_H_SCROLL\n        ) {\n            changes |= this.$computeLayerConfig();\n            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {\n                var st = this.scrollTop + (config.firstRow - this.layerConfig.firstRow) * this.lineHeight;\n                if (st > 0) {\n                    this.scrollTop = st;\n                    changes = changes | this.CHANGE_SCROLL;\n                    changes |= this.$computeLayerConfig();\n                }\n            }\n            config = this.layerConfig;\n            this.$updateScrollBarV();\n            if (changes & this.CHANGE_H_SCROLL)\n                this.$updateScrollBarH();\n            this.$gutterLayer.element.style.marginTop = (-config.offset) + \"px\";\n            this.content.style.marginTop = (-config.offset) + \"px\";\n            this.content.style.width = config.width + 2 * this.$padding + \"px\";\n            this.content.style.height = config.minHeight + \"px\";\n        }\n        if (changes & this.CHANGE_H_SCROLL) {\n            this.content.style.marginLeft = -this.scrollLeft + \"px\";\n            this.scroller.className = this.scrollLeft <= 0 ? \"ace_scroller\" : \"ace_scroller ace_scroll-left\";\n        }\n        if (changes & this.CHANGE_FULL) {\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this.$highlightGutterLine && this.$updateGutterLineHighlight();\n            this._signal(\"afterRender\");\n            return;\n        }\n        if (changes & this.CHANGE_SCROLL) {\n            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)\n                this.$textLayer.update(config);\n            else\n                this.$textLayer.scrollLines(config);\n\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$highlightGutterLine && this.$updateGutterLineHighlight();\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\");\n            return;\n        }\n\n        if (changes & this.CHANGE_TEXT) {\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n        }\n        else if (changes & this.CHANGE_LINES) {\n            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)\n                this.$gutterLayer.update(config);\n        }\n        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n        }\n\n        if (changes & this.CHANGE_CURSOR) {\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this.$highlightGutterLine && this.$updateGutterLineHighlight();\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {\n            this.$markerFront.update(config);\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {\n            this.$markerBack.update(config);\n        }\n\n        this._signal(\"afterRender\");\n    };\n\n    \n    this.$autosize = function() {\n        var height = this.session.getScreenLength() * this.lineHeight;\n        var maxHeight = this.$maxLines * this.lineHeight;\n        var desiredHeight = Math.min(maxHeight,\n            Math.max((this.$minLines || 1) * this.lineHeight, height)\n        ) + this.scrollMargin.v + (this.$extraHeight || 0);\n        if (this.$horizScroll)\n            desiredHeight += this.scrollBarH.getHeight();\n        if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight)\n            desiredHeight = this.$maxPixelHeight;\n        var vScroll = height > maxHeight;\n        \n        if (desiredHeight != this.desiredHeight ||\n            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {\n            if (vScroll != this.$vScroll) {\n                this.$vScroll = vScroll;\n                this.scrollBarV.setVisible(vScroll);\n            }\n            \n            var w = this.container.clientWidth;\n            this.container.style.height = desiredHeight + \"px\";\n            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);\n            this.desiredHeight = desiredHeight;\n            \n            this._signal(\"autosize\");\n        }\n    };\n    \n    this.$computeLayerConfig = function() {\n        var session = this.session;\n        var size = this.$size;\n        \n        var hideScrollbars = size.height <= 2 * this.lineHeight;\n        var screenLines = this.session.getScreenLength();\n        var maxHeight = screenLines * this.lineHeight;\n\n        var longestLine = this.$getLongestLine();\n        \n        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||\n            size.scrollerWidth - longestLine - 2 * this.$padding < 0);\n\n        var hScrollChanged = this.$horizScroll !== horizScroll;\n        if (hScrollChanged) {\n            this.$horizScroll = horizScroll;\n            this.scrollBarH.setVisible(horizScroll);\n        }\n        var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine\n        if (this.$maxLines && this.lineHeight > 1)\n            this.$autosize();\n\n        var offset = this.scrollTop % this.lineHeight;\n        var minHeight = size.scrollerHeight + this.lineHeight;\n        \n        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd\n            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd\n            : 0;\n        maxHeight += scrollPastEnd;\n        \n        var sm = this.scrollMargin;\n        this.session.setScrollTop(Math.max(-sm.top,\n            Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));\n\n        this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft, \n            longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));\n        \n        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||\n            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);\n        var vScrollChanged = vScrollBefore !== vScroll;\n        if (vScrollChanged) {\n            this.$vScroll = vScroll;\n            this.scrollBarV.setVisible(vScroll);\n        }\n\n        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;\n        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));\n        var lastRow = firstRow + lineCount;\n        var firstRowScreen, firstRowHeight;\n        var lineHeight = this.lineHeight;\n        firstRow = session.screenToDocumentRow(firstRow, 0);\n        var foldLine = session.getFoldLine(firstRow);\n        if (foldLine) {\n            firstRow = foldLine.start.row;\n        }\n\n        firstRowScreen = session.documentToScreenRow(firstRow, 0);\n        firstRowHeight = session.getRowLength(firstRow) * lineHeight;\n\n        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);\n        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +\n                                                firstRowHeight;\n\n        offset = this.scrollTop - firstRowScreen * lineHeight;\n\n        var changes = 0;\n        if (this.layerConfig.width != longestLine) \n            changes = this.CHANGE_H_SCROLL;\n        if (hScrollChanged || vScrollChanged) {\n            changes = this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);\n            this._signal(\"scrollbarVisibilityChanged\");\n            if (vScrollChanged)\n                longestLine = this.$getLongestLine();\n        }\n        \n        this.layerConfig = {\n            width : longestLine,\n            padding : this.$padding,\n            firstRow : firstRow,\n            firstRowScreen: firstRowScreen,\n            lastRow : lastRow,\n            lineHeight : lineHeight,\n            characterWidth : this.characterWidth,\n            minHeight : minHeight,\n            maxHeight : maxHeight,\n            offset : offset,\n            gutterOffset : lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,\n            height : this.$size.scrollerHeight\n        };\n\n        return changes;\n    };\n\n    this.$updateLines = function() {\n        if (!this.$changedLines) return;\n        var firstRow = this.$changedLines.firstRow;\n        var lastRow = this.$changedLines.lastRow;\n        this.$changedLines = null;\n\n        var layerConfig = this.layerConfig;\n\n        if (firstRow > layerConfig.lastRow + 1) { return; }\n        if (lastRow < layerConfig.firstRow) { return; }\n        if (lastRow === Infinity) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(layerConfig);\n            this.$textLayer.update(layerConfig);\n            return;\n        }\n        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);\n        return true;\n    };\n\n    this.$getLongestLine = function() {\n        var charCount = this.session.getScreenWidth();\n        if (this.showInvisibles && !this.session.$useWrapMode)\n            charCount += 1;\n\n        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));\n    };\n    this.updateFrontMarkers = function() {\n        this.$markerFront.setMarkers(this.session.getMarkers(true));\n        this.$loop.schedule(this.CHANGE_MARKER_FRONT);\n    };\n    this.updateBackMarkers = function() {\n        this.$markerBack.setMarkers(this.session.getMarkers());\n        this.$loop.schedule(this.CHANGE_MARKER_BACK);\n    };\n    this.addGutterDecoration = function(row, className){\n        this.$gutterLayer.addGutterDecoration(row, className);\n    };\n    this.removeGutterDecoration = function(row, className){\n        this.$gutterLayer.removeGutterDecoration(row, className);\n    };\n    this.updateBreakpoints = function(rows) {\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    this.setAnnotations = function(annotations) {\n        this.$gutterLayer.setAnnotations(annotations);\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    this.updateCursor = function() {\n        this.$loop.schedule(this.CHANGE_CURSOR);\n    };\n    this.hideCursor = function() {\n        this.$cursorLayer.hideCursor();\n    };\n    this.showCursor = function() {\n        this.$cursorLayer.showCursor();\n    };\n\n    this.scrollSelectionIntoView = function(anchor, lead, offset) {\n        this.scrollCursorIntoView(anchor, offset);\n        this.scrollCursorIntoView(lead, offset);\n    };\n    this.scrollCursorIntoView = function(cursor, offset, $viewMargin) {\n        if (this.$size.scrollerHeight === 0)\n            return;\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n\n        var left = pos.left;\n        var top = pos.top;\n        \n        var topMargin = $viewMargin && $viewMargin.top || 0;\n        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;\n        \n        var scrollTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;\n        \n        if (scrollTop + topMargin > top) {\n            if (offset && scrollTop + topMargin > top + this.lineHeight)\n                top -= offset * this.$size.scrollerHeight;\n            if (top === 0)\n                top = -this.scrollMargin.top;\n            this.session.setScrollTop(top);\n        } else if (scrollTop + this.$size.scrollerHeight - bottomMargin < top + this.lineHeight) {\n            if (offset && scrollTop + this.$size.scrollerHeight - bottomMargin < top -  this.lineHeight)\n                top += offset * this.$size.scrollerHeight;\n            this.session.setScrollTop(top + this.lineHeight - this.$size.scrollerHeight);\n        }\n\n        var scrollLeft = this.scrollLeft;\n\n        if (scrollLeft > left) {\n            if (left < this.$padding + 2 * this.layerConfig.characterWidth)\n                left = -this.scrollMargin.left;\n            this.session.setScrollLeft(left);\n        } else if (scrollLeft + this.$size.scrollerWidth < left + this.characterWidth) {\n            this.session.setScrollLeft(Math.round(left + this.characterWidth - this.$size.scrollerWidth));\n        } else if (scrollLeft <= this.$padding && left - scrollLeft < this.characterWidth) {\n            this.session.setScrollLeft(0);\n        }\n    };\n    this.getScrollTop = function() {\n        return this.session.getScrollTop();\n    };\n    this.getScrollLeft = function() {\n        return this.session.getScrollLeft();\n    };\n    this.getScrollTopRow = function() {\n        return this.scrollTop / this.lineHeight;\n    };\n    this.getScrollBottomRow = function() {\n        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);\n    };\n    this.scrollToRow = function(row) {\n        this.session.setScrollTop(row * this.lineHeight);\n    };\n\n    this.alignCursor = function(cursor, alignment) {\n        if (typeof cursor == \"number\")\n            cursor = {row: cursor, column: 0};\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var h = this.$size.scrollerHeight - this.lineHeight;\n        var offset = pos.top - h * (alignment || 0);\n\n        this.session.setScrollTop(offset);\n        return offset;\n    };\n\n    this.STEPS = 8;\n    this.$calcSteps = function(fromValue, toValue){\n        var i = 0;\n        var l = this.STEPS;\n        var steps = [];\n\n        var func  = function(t, x_min, dx) {\n            return dx * (Math.pow(t - 1, 3) + 1) + x_min;\n        };\n\n        for (i = 0; i < l; ++i)\n            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));\n\n        return steps;\n    };\n    this.scrollToLine = function(line, center, animate, callback) {\n        var pos = this.$cursorLayer.getPixelPosition({row: line, column: 0});\n        var offset = pos.top;\n        if (center)\n            offset -= this.$size.scrollerHeight / 2;\n\n        var initialScroll = this.scrollTop;\n        this.session.setScrollTop(offset);\n        if (animate !== false)\n            this.animateScrolling(initialScroll, callback);\n    };\n\n    this.animateScrolling = function(fromValue, callback) {\n        var toValue = this.scrollTop;\n        if (!this.$animatedScroll)\n            return;\n        var _self = this;\n        \n        if (fromValue == toValue)\n            return;\n        \n        if (this.$scrollAnimation) {\n            var oldSteps = this.$scrollAnimation.steps;\n            if (oldSteps.length) {\n                fromValue = oldSteps[0];\n                if (fromValue == toValue)\n                    return;\n            }\n        }\n        \n        var steps = _self.$calcSteps(fromValue, toValue);\n        this.$scrollAnimation = {from: fromValue, to: toValue, steps: steps};\n\n        clearInterval(this.$timer);\n\n        _self.session.setScrollTop(steps.shift());\n        _self.session.$scrollTop = toValue;\n        this.$timer = setInterval(function() {\n            if (steps.length) {\n                _self.session.setScrollTop(steps.shift());\n                _self.session.$scrollTop = toValue;\n            } else if (toValue != null) {\n                _self.session.$scrollTop = -1;\n                _self.session.setScrollTop(toValue);\n                toValue = null;\n            } else {\n                _self.$timer = clearInterval(_self.$timer);\n                _self.$scrollAnimation = null;\n                callback && callback();\n            }\n        }, 10);\n    };\n    this.scrollToY = function(scrollTop) {\n        if (this.scrollTop !== scrollTop) {\n            this.$loop.schedule(this.CHANGE_SCROLL);\n            this.scrollTop = scrollTop;\n        }\n    };\n    this.scrollToX = function(scrollLeft) {\n        if (this.scrollLeft !== scrollLeft)\n            this.scrollLeft = scrollLeft;\n        this.$loop.schedule(this.CHANGE_H_SCROLL);\n    };\n    this.scrollTo = function(x, y) {\n        this.session.setScrollTop(y);\n        this.session.setScrollLeft(y);\n    };\n    this.scrollBy = function(deltaX, deltaY) {\n        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);\n        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);\n    };\n    this.isScrollableBy = function(deltaX, deltaY) {\n        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)\n           return true;\n        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight\n            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)\n           return true;\n        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)\n            return true;\n        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth\n            - this.layerConfig.width < -1 + this.scrollMargin.right)\n           return true;\n    };\n\n    this.pixelToScreenCoordinates = function(x, y) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        var col = Math.round(offset);\n\n        return {row: row, column: col, side: offset - col > 0 ? 1 : -1, offsetX:  offsetX};\n    };\n\n    this.screenToTextCoordinates = function(x, y) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n\n        var col = Math.round(offsetX / this.characterWidth);\n\n        var row = (y + this.scrollTop - canvasPos.top) / this.lineHeight;\n\n        return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);\n    };\n    this.textToScreenCoordinates = function(row, column) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n        var pos = this.session.documentToScreenPosition(row, column);\n\n        var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row)\n             ? this.session.$bidiHandler.getPosLeft(pos.column)\n             : Math.round(pos.column * this.characterWidth));\n\n        var y = pos.row * this.lineHeight;\n\n        return {\n            pageX: canvasPos.left + x - this.scrollLeft,\n            pageY: canvasPos.top + y - this.scrollTop\n        };\n    };\n    this.visualizeFocus = function() {\n        dom.addCssClass(this.container, \"ace_focus\");\n    };\n    this.visualizeBlur = function() {\n        dom.removeCssClass(this.container, \"ace_focus\");\n    };\n    this.showComposition = function(position) {\n        if (!this.$composition)\n            this.$composition = {\n                keepTextAreaAtCursor: this.$keepTextAreaAtCursor,\n                cssText: this.textarea.style.cssText\n            };\n\n        this.$keepTextAreaAtCursor = true;\n        dom.addCssClass(this.textarea, \"ace_composition\");\n        this.textarea.style.cssText = \"\";\n        this.$moveTextAreaToCursor();\n    };\n    this.setCompositionText = function(text) {\n        this.$moveTextAreaToCursor();\n    };\n    this.hideComposition = function() {\n        if (!this.$composition)\n            return;\n\n        dom.removeCssClass(this.textarea, \"ace_composition\");\n        this.$keepTextAreaAtCursor = this.$composition.keepTextAreaAtCursor;\n        this.textarea.style.cssText = this.$composition.cssText;\n        this.$composition = null;\n    };\n    this.setTheme = function(theme, cb) {\n        var _self = this;\n        this.$themeId = theme;\n        _self._dispatchEvent('themeChange',{theme:theme});\n\n        if (!theme || typeof theme == \"string\") {\n            var moduleName = theme || this.$options.theme.initialValue;\n            config.loadModule([\"theme\", moduleName], afterLoad);\n        } else {\n            afterLoad(theme);\n        }\n\n        function afterLoad(module) {\n            if (_self.$themeId != theme)\n                return cb && cb();\n            if (!module || !module.cssClass)\n                throw new Error(\"couldn't load module \" + theme + \" or it didn't call define\");\n            dom.importCssString(\n                module.cssText,\n                module.cssClass,\n                _self.container.ownerDocument\n            );\n\n            if (_self.theme)\n                dom.removeCssClass(_self.container, _self.theme.cssClass);\n\n            var padding = \"padding\" in module ? module.padding \n                : \"padding\" in (_self.theme || {}) ? 4 : _self.$padding;\n            if (_self.$padding && padding != _self.$padding)\n                _self.setPadding(padding);\n            _self.$theme = module.cssClass;\n\n            _self.theme = module;\n            dom.addCssClass(_self.container, module.cssClass);\n            dom.setCssClass(_self.container, \"ace_dark\", module.isDark);\n            if (_self.$size) {\n                _self.$size.width = 0;\n                _self.$updateSizeAsync();\n            }\n\n            _self._dispatchEvent('themeLoaded', {theme:module});\n            cb && cb();\n        }\n    };\n    this.getTheme = function() {\n        return this.$themeId;\n    };\n    this.setStyle = function(style, include) {\n        dom.setCssClass(this.container, style, include !== false);\n    };\n    this.unsetStyle = function(style) {\n        dom.removeCssClass(this.container, style);\n    };\n    \n    this.setCursorStyle = function(style) {\n        if (this.scroller.style.cursor != style)\n            this.scroller.style.cursor = style;\n    };\n    this.setMouseCursor = function(cursorStyle) {\n        this.scroller.style.cursor = cursorStyle;\n    };\n    this.destroy = function() {\n        this.$textLayer.destroy();\n        this.$cursorLayer.destroy();\n    };\n\n}).call(VirtualRenderer.prototype);\n\n\nconfig.defineOptions(VirtualRenderer.prototype, \"renderer\", {\n    animatedScroll: {initialValue: false},\n    showInvisibles: {\n        set: function(value) {\n            if (this.$textLayer.setShowInvisibles(value))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: false\n    },\n    showPrintMargin: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: true\n    },\n    printMarginColumn: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: 80\n    },\n    printMargin: {\n        set: function(val) {\n            if (typeof val == \"number\")\n                this.$printMarginColumn = val;\n            this.$showPrintMargin = !!val;\n            this.$updatePrintMargin();\n        },\n        get: function() {\n            return this.$showPrintMargin && this.$printMarginColumn; \n        }\n    },\n    showGutter: {\n        set: function(show){\n            this.$gutter.style.display = show ? \"block\" : \"none\";\n            this.$loop.schedule(this.CHANGE_FULL);\n            this.onGutterResize();\n        },\n        initialValue: true\n    },\n    fadeFoldWidgets: {\n        set: function(show) {\n            dom.setCssClass(this.$gutter, \"ace_fade-fold-widgets\", show);\n        },\n        initialValue: false\n    },\n    showFoldWidgets: {\n        set: function(show) {this.$gutterLayer.setShowFoldWidgets(show);},\n        initialValue: true\n    },\n    showLineNumbers: {\n        set: function(show) {\n            this.$gutterLayer.setShowLineNumbers(show);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    displayIndentGuides: {\n        set: function(show) {\n            if (this.$textLayer.setDisplayIndentGuides(show))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: true\n    },\n    highlightGutterLine: {\n        set: function(shouldHighlight) {\n            if (!this.$gutterLineHighlight) {\n                this.$gutterLineHighlight = dom.createElement(\"div\");\n                this.$gutterLineHighlight.className = \"ace_gutter-active-line\";\n                this.$gutter.appendChild(this.$gutterLineHighlight);\n                return;\n            }\n\n            this.$gutterLineHighlight.style.display = shouldHighlight ? \"\" : \"none\";\n            if (this.$cursorLayer.$pixelPos)\n                this.$updateGutterLineHighlight();\n        },\n        initialValue: false,\n        value: true\n    },\n    hScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    vScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    fontSize:  {\n        set: function(size) {\n            if (typeof size == \"number\")\n                size = size + \"px\";\n            this.container.style.fontSize = size;\n            this.updateFontSize();\n        },\n        initialValue: 12\n    },\n    fontFamily: {\n        set: function(name) {\n            this.container.style.fontFamily = name;\n            this.updateFontSize();\n        }\n    },\n    maxLines: {\n        set: function(val) {\n            this.updateFull();\n        }\n    },\n    minLines: {\n        set: function(val) {\n            this.updateFull();\n        }\n    },\n    maxPixelHeight: {\n        set: function(val) {\n            this.updateFull();\n        },\n        initialValue: 0\n    },\n    scrollPastEnd: {\n        set: function(val) {\n            val = +val || 0;\n            if (this.$scrollPastEnd == val)\n                return;\n            this.$scrollPastEnd = val;\n            this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: 0,\n        handlesSet: true\n    },\n    fixedWidthGutter: {\n        set: function(val) {\n            this.$gutterLayer.$fixedWidth = !!val;\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        }\n    },\n    theme: {\n        set: function(val) { this.setTheme(val); },\n        get: function() { return this.$themeId || this.theme; },\n        initialValue: \"./theme/textmate\",\n        handlesSet: true\n    }\n});\n\nexports.VirtualRenderer = VirtualRenderer;\n});\n\nace.define(\"ace/worker/worker_client\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/event_emitter\",\"ace/config\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar net = acequire(\"../lib/net\");\nvar EventEmitter = acequire(\"../lib/event_emitter\").EventEmitter;\nvar config = acequire(\"../config\");\n\nfunction $workerBlob(workerUrl, mod) {\n    var script = mod.src;\"importScripts('\" + net.qualifyURL(workerUrl) + \"');\";\n    try {\n        return new Blob([script], {\"type\": \"application/javascript\"});\n    } catch (e) { // Backwards-compatibility\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n        var blobBuilder = new BlobBuilder();\n        blobBuilder.append(script);\n        return blobBuilder.getBlob(\"application/javascript\");\n    }\n}\n\nfunction createWorker(workerUrl, mod) {\n    var blob = $workerBlob(workerUrl, mod);\n    var URL = window.URL || window.webkitURL;\n    var blobURL = URL.createObjectURL(blob);\n    return new Worker(blobURL);\n}\n\nvar WorkerClient = function(topLevelNamespaces, mod, classname, workerUrl, importScripts) {\n    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n    if (acequire.nameToUrl && !acequire.toUrl)\n        acequire.toUrl = acequire.nameToUrl;\n    \n    if (config.get(\"packaged\") || !acequire.toUrl) {\n        workerUrl = workerUrl || config.moduleUrl(mod.id, \"worker\");\n    } else {\n        var normalizePath = this.$normalizePath;\n        workerUrl = workerUrl || normalizePath(acequire.toUrl(\"ace/worker/worker.js\", null, \"_\"));\n\n        var tlns = {};\n        topLevelNamespaces.forEach(function(ns) {\n            tlns[ns] = normalizePath(acequire.toUrl(ns, null, \"_\").replace(/(\\.js)?(\\?.*)?$/, \"\"));\n        });\n    }\n\n    this.$worker = createWorker(workerUrl, mod);\n    if (importScripts) {\n        this.send(\"importScripts\", importScripts);\n    }\n    this.$worker.postMessage({\n        init : true,\n        tlns : tlns,\n        module : mod.id,\n        classname : classname\n    });\n\n    this.callbackId = 1;\n    this.callbacks = {};\n\n    this.$worker.onmessage = this.onMessage;\n};\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    this.onMessage = function(e) {\n        var msg = e.data;\n        switch (msg.type) {\n            case \"event\":\n                this._signal(msg.name, {data: msg.data});\n                break;\n            case \"call\":\n                var callback = this.callbacks[msg.id];\n                if (callback) {\n                    callback(msg.data);\n                    delete this.callbacks[msg.id];\n                }\n                break;\n            case \"error\":\n                this.reportError(msg.data);\n                break;\n            case \"log\":\n                window.console && console.log && console.log.apply(console, msg.data);\n                break;\n        }\n    };\n    \n    this.reportError = function(err) {\n        window.console && console.error && console.error(err);\n    };\n\n    this.$normalizePath = function(path) {\n        return net.qualifyURL(path);\n    };\n\n    this.terminate = function() {\n        this._signal(\"terminate\", {});\n        this.deltaQueue = null;\n        this.$worker.terminate();\n        this.$worker = null;\n        if (this.$doc)\n            this.$doc.off(\"change\", this.changeListener);\n        this.$doc = null;\n    };\n\n    this.send = function(cmd, args) {\n        this.$worker.postMessage({command: cmd, args: args});\n    };\n\n    this.call = function(cmd, args, callback) {\n        if (callback) {\n            var id = this.callbackId++;\n            this.callbacks[id] = callback;\n            args.push(id);\n        }\n        this.send(cmd, args);\n    };\n\n    this.emit = function(event, data) {\n        try {\n            this.$worker.postMessage({event: event, data: {data: data.data}});\n        }\n        catch(ex) {\n            console.error(ex.stack);\n        }\n    };\n\n    this.attachToDocument = function(doc) {\n        if (this.$doc)\n            this.terminate();\n\n        this.$doc = doc;\n        this.call(\"setValue\", [doc.getValue()]);\n        doc.on(\"change\", this.changeListener);\n    };\n\n    this.changeListener = function(delta) {\n        if (!this.deltaQueue) {\n            this.deltaQueue = [];\n            setTimeout(this.$sendDeltaQueue, 0);\n        }\n        if (delta.action == \"insert\")\n            this.deltaQueue.push(delta.start, delta.lines);\n        else\n            this.deltaQueue.push(delta.start, delta.end);\n    };\n\n    this.$sendDeltaQueue = function() {\n        var q = this.deltaQueue;\n        if (!q) return;\n        this.deltaQueue = null;\n        if (q.length > 50 && q.length > this.$doc.getLength() >> 1) {\n            this.call(\"setValue\", [this.$doc.getValue()]);\n        } else\n            this.emit(\"change\", {data: q});\n    };\n\n}).call(WorkerClient.prototype);\n\n\nvar UIWorkerClient = function(topLevelNamespaces, mod, classname) {\n    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.callbackId = 1;\n    this.callbacks = {};\n    this.messageBuffer = [];\n\n    var main = null;\n    var emitSync = false;\n    var sender = Object.create(EventEmitter);\n    var _self = this;\n\n    this.$worker = {};\n    this.$worker.terminate = function() {};\n    this.$worker.postMessage = function(e) {\n        _self.messageBuffer.push(e);\n        if (main) {\n            if (emitSync)\n                setTimeout(processNext);\n            else\n                processNext();\n        }\n    };\n    this.setEmitSync = function(val) { emitSync = val; };\n\n    var processNext = function() {\n        var msg = _self.messageBuffer.shift();\n        if (msg.command)\n            main[msg.command].apply(main, msg.args);\n        else if (msg.event)\n            sender._signal(msg.event, msg.data);\n    };\n\n    sender.postMessage = function(msg) {\n        _self.onMessage({data: msg});\n    };\n    sender.callback = function(data, callbackId) {\n        this.postMessage({type: \"call\", id: callbackId, data: data});\n    };\n    sender.emit = function(name, data) {\n        this.postMessage({type: \"event\", name: name, data: data});\n    };\n\n    config.loadModule([\"worker\", mod], function(Main) {\n        main = new Main[classname](sender);\n        while (_self.messageBuffer.length)\n            processNext();\n    });\n};\n\nUIWorkerClient.prototype = WorkerClient.prototype;\n\nexports.UIWorkerClient = UIWorkerClient;\nexports.WorkerClient = WorkerClient;\nexports.createWorker = createWorker;\n\n\n});\n\nace.define(\"ace/placeholder\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/lib/oop\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"./range\").Range;\nvar EventEmitter = acequire(\"./lib/event_emitter\").EventEmitter;\nvar oop = acequire(\"./lib/oop\");\n\nvar PlaceHolder = function(session, length, pos, others, mainClass, othersClass) {\n    var _self = this;\n    this.length = length;\n    this.session = session;\n    this.doc = session.getDocument();\n    this.mainClass = mainClass;\n    this.othersClass = othersClass;\n    this.$onUpdate = this.onUpdate.bind(this);\n    this.doc.on(\"change\", this.$onUpdate);\n    this.$others = others;\n    \n    this.$onCursorChange = function() {\n        setTimeout(function() {\n            _self.onCursorChange();\n        });\n    };\n    \n    this.$pos = pos;\n    var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || {length: -1};\n    this.$undoStackDepth = undoStack.length;\n    this.setup();\n\n    session.selection.on(\"changeCursor\", this.$onCursorChange);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.setup = function() {\n        var _self = this;\n        var doc = this.doc;\n        var session = this.session;\n        \n        this.selectionBefore = session.selection.toJSON();\n        if (session.selection.inMultiSelectMode)\n            session.selection.toSingleRange();\n\n        this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);\n        var pos = this.pos;\n        pos.$insertRight = true;\n        pos.detach();\n        pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);\n        this.others = [];\n        this.$others.forEach(function(other) {\n            var anchor = doc.createAnchor(other.row, other.column);\n            anchor.$insertRight = true;\n            anchor.detach();\n            _self.others.push(anchor);\n        });\n        session.setUndoSelect(false);\n    };\n    this.showOtherMarkers = function() {\n        if (this.othersActive) return;\n        var session = this.session;\n        var _self = this;\n        this.othersActive = true;\n        this.others.forEach(function(anchor) {\n            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column+_self.length), _self.othersClass, null, false);\n        });\n    };\n    this.hideOtherMarkers = function() {\n        if (!this.othersActive) return;\n        this.othersActive = false;\n        for (var i = 0; i < this.others.length; i++) {\n            this.session.removeMarker(this.others[i].markerId);\n        }\n    };\n    this.onUpdate = function(delta) {\n        if (this.$updating)\n            return this.updateAnchors(delta);\n            \n        var range = delta;\n        if (range.start.row !== range.end.row) return;\n        if (range.start.row !== this.pos.row) return;\n        this.$updating = true;\n        var lengthDiff = delta.action === \"insert\" ? range.end.column - range.start.column : range.start.column - range.end.column;\n        var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;\n        var distanceFromStart = range.start.column - this.pos.column;\n        \n        this.updateAnchors(delta);\n        \n        if (inMainRange)\n            this.length += lengthDiff;\n\n        if (inMainRange && !this.session.$fromUndo) {\n            if (delta.action === 'insert') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.insertMergedLines(newPos, delta.lines);\n                }\n            } else if (delta.action === 'remove') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));\n                }\n            }\n        }\n        \n        this.$updating = false;\n        this.updateMarkers();\n    };\n    \n    this.updateAnchors = function(delta) {\n        this.pos.onChange(delta);\n        for (var i = this.others.length; i--;)\n            this.others[i].onChange(delta);\n        this.updateMarkers();\n    };\n    \n    this.updateMarkers = function() {\n        if (this.$updating)\n            return;\n        var _self = this;\n        var session = this.session;\n        var updateMarker = function(pos, className) {\n            session.removeMarker(pos.markerId);\n            pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column+_self.length), className, null, false);\n        };\n        updateMarker(this.pos, this.mainClass);\n        for (var i = this.others.length; i--;)\n            updateMarker(this.others[i], this.othersClass);\n    };\n\n    this.onCursorChange = function(event) {\n        if (this.$updating || !this.session) return;\n        var pos = this.session.selection.getCursor();\n        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {\n            this.showOtherMarkers();\n            this._emit(\"cursorEnter\", event);\n        } else {\n            this.hideOtherMarkers();\n            this._emit(\"cursorLeave\", event);\n        }\n    };    \n    this.detach = function() {\n        this.session.removeMarker(this.pos && this.pos.markerId);\n        this.hideOtherMarkers();\n        this.doc.removeEventListener(\"change\", this.$onUpdate);\n        this.session.selection.removeEventListener(\"changeCursor\", this.$onCursorChange);\n        this.session.setUndoSelect(true);\n        this.session = null;\n    };\n    this.cancel = function() {\n        if (this.$undoStackDepth === -1)\n            return;\n        var undoManager = this.session.getUndoManager();\n        var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;\n        for (var i = 0; i < undosRequired; i++) {\n            undoManager.undo(true);\n        }\n        if (this.selectionBefore)\n            this.session.selection.fromJSON(this.selectionBefore);\n    };\n}).call(PlaceHolder.prototype);\n\n\nexports.PlaceHolder = PlaceHolder;\n});\n\nace.define(\"ace/mouse/multi_select_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(acequire, exports, module) {\n\nvar event = acequire(\"../lib/event\");\nvar useragent = acequire(\"../lib/useragent\");\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\n\nfunction onMouseDown(e) {\n    var ev = e.domEvent;\n    var alt = ev.altKey;\n    var shift = ev.shiftKey;\n    var ctrl = ev.ctrlKey;\n    var accel = e.getAccelKey();\n    var button = e.getButton();\n    \n    if (ctrl && useragent.isMac)\n        button = ev.button;\n\n    if (e.editor.inMultiSelectMode && button == 2) {\n        e.editor.textInput.onContextMenu(e.domEvent);\n        return;\n    }\n    \n    if (!ctrl && !alt && !accel) {\n        if (button === 0 && e.editor.inMultiSelectMode)\n            e.editor.exitMultiSelectMode();\n        return;\n    }\n    \n    if (button !== 0)\n        return;\n\n    var editor = e.editor;\n    var selection = editor.selection;\n    var isMultiSelect = editor.inMultiSelectMode;\n    var pos = e.getDocumentPosition();\n    var cursor = selection.getCursor();\n    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));\n\n    var mouseX = e.x, mouseY = e.y;\n    var onMouseSelection = function(e) {\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    };\n    \n    var session = editor.session;\n    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n    var screenCursor = screenAnchor;\n    \n    var selectionMode;\n    if (editor.$mouseHandler.$enableJumpToDef) {\n        if (ctrl && alt || accel && alt)\n            selectionMode = shift ? \"block\" : \"add\";\n        else if (alt && editor.$blockSelectEnabled)\n            selectionMode = \"block\";\n    } else {\n        if (accel && !alt) {\n            selectionMode = \"add\";\n            if (!isMultiSelect && shift)\n                return;\n        } else if (alt && editor.$blockSelectEnabled) {\n            selectionMode = \"block\";\n        }\n    }\n    \n    if (selectionMode && useragent.isMac && ev.ctrlKey) {\n        editor.$mouseHandler.cancelContextMenu();\n    }\n\n    if (selectionMode == \"add\") {\n        if (!isMultiSelect && inSelection)\n            return; // dragging\n\n        if (!isMultiSelect) {\n            var range = selection.toOrientedRange();\n            editor.addSelectionMarker(range);\n        }\n\n        var oldRange = selection.rangeList.rangeAtPoint(pos);\n        \n        \n        editor.$blockScrolling++;\n        editor.inVirtualSelectionMode = true;\n        \n        if (shift) {\n            oldRange = null;\n            range = selection.ranges[0] || range;\n            editor.removeSelectionMarker(range);\n        }\n        editor.once(\"mouseup\", function() {\n            var tmpSel = selection.toOrientedRange();\n\n            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))\n                selection.substractPoint(tmpSel.cursor);\n            else {\n                if (shift) {\n                    selection.substractPoint(range.cursor);\n                } else if (range) {\n                    editor.removeSelectionMarker(range);\n                    selection.addRange(range);\n                }\n                selection.addRange(tmpSel);\n            }\n            editor.$blockScrolling--;\n            editor.inVirtualSelectionMode = false;\n        });\n\n    } else if (selectionMode == \"block\") {\n        e.stop();\n        editor.inVirtualSelectionMode = true;        \n        var initialRange;\n        var rectSel = [];\n        var blockSelect = function() {\n            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);\n\n            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))\n                return;\n            screenCursor = newCursor;\n            \n            editor.$blockScrolling++;\n            editor.selection.moveToPosition(cursor);\n            editor.renderer.scrollCursorIntoView();\n\n            editor.removeSelectionMarkers(rectSel);\n            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);\n            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())\n                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();\n            rectSel.forEach(editor.addSelectionMarker, editor);\n            editor.updateSelectionMarkers();\n            editor.$blockScrolling--;\n        };\n        editor.$blockScrolling++;\n        if (isMultiSelect && !accel) {\n            selection.toSingleRange();\n        } else if (!isMultiSelect && accel) {\n            initialRange = selection.toOrientedRange();\n            editor.addSelectionMarker(initialRange);\n        }\n        \n        if (shift)\n            screenAnchor = session.documentToScreenPosition(selection.lead);            \n        else\n            selection.moveToPosition(pos);\n        editor.$blockScrolling--;\n        \n        screenCursor = {row: -1, column: -1};\n\n        var onMouseSelectionEnd = function(e) {\n            clearInterval(timerId);\n            editor.removeSelectionMarkers(rectSel);\n            if (!rectSel.length)\n                rectSel = [selection.toOrientedRange()];\n            editor.$blockScrolling++;\n            if (initialRange) {\n                editor.removeSelectionMarker(initialRange);\n                selection.toSingleRange(initialRange);\n            }\n            for (var i = 0; i < rectSel.length; i++)\n                selection.addRange(rectSel[i]);\n            editor.inVirtualSelectionMode = false;\n            editor.$mouseHandler.$clickSelection = null;\n            editor.$blockScrolling--;\n        };\n\n        var onSelectionInterval = blockSelect;\n\n        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);\n        var timerId = setInterval(function() {onSelectionInterval();}, 20);\n\n        return e.preventDefault();\n    }\n}\n\n\nexports.onMouseDown = onMouseDown;\n\n});\n\nace.define(\"ace/commands/multi_select_commands\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\"], function(acequire, exports, module) {\nexports.defaultCommands = [{\n    name: \"addCursorAbove\",\n    exec: function(editor) { editor.selectMoreLines(-1); },\n    bindKey: {win: \"Ctrl-Alt-Up\", mac: \"Ctrl-Alt-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelow\",\n    exec: function(editor) { editor.selectMoreLines(1); },\n    bindKey: {win: \"Ctrl-Alt-Down\", mac: \"Ctrl-Alt-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorAboveSkipCurrent\",\n    exec: function(editor) { editor.selectMoreLines(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Up\", mac: \"Ctrl-Alt-Shift-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelowSkipCurrent\",\n    exec: function(editor) { editor.selectMoreLines(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Down\", mac: \"Ctrl-Alt-Shift-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreBefore\",\n    exec: function(editor) { editor.selectMore(-1); },\n    bindKey: {win: \"Ctrl-Alt-Left\", mac: \"Ctrl-Alt-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreAfter\",\n    exec: function(editor) { editor.selectMore(1); },\n    bindKey: {win: \"Ctrl-Alt-Right\", mac: \"Ctrl-Alt-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextBefore\",\n    exec: function(editor) { editor.selectMore(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Left\", mac: \"Ctrl-Alt-Shift-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextAfter\",\n    exec: function(editor) { editor.selectMore(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Right\", mac: \"Ctrl-Alt-Shift-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"splitIntoLines\",\n    exec: function(editor) { editor.multiSelect.splitIntoLines(); },\n    bindKey: {win: \"Ctrl-Alt-L\", mac: \"Ctrl-Alt-L\"},\n    readOnly: true\n}, {\n    name: \"alignCursors\",\n    exec: function(editor) { editor.alignCursors(); },\n    bindKey: {win: \"Ctrl-Alt-A\", mac: \"Ctrl-Alt-A\"},\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"findAll\",\n    exec: function(editor) { editor.findAll(); },\n    bindKey: {win: \"Ctrl-Alt-K\", mac: \"Ctrl-Alt-G\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}];\nexports.multiSelectCommands = [{\n    name: \"singleSelection\",\n    bindKey: \"esc\",\n    exec: function(editor) { editor.exitMultiSelectMode(); },\n    scrollIntoView: \"cursor\",\n    readOnly: true,\n    isAvailable: function(editor) {return editor && editor.inMultiSelectMode;}\n}];\n\nvar HashHandler = acequire(\"../keyboard/hash_handler\").HashHandler;\nexports.keyboardHandler = new HashHandler(exports.multiSelectCommands);\n\n});\n\nace.define(\"ace/multi_select\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/range\",\"ace/selection\",\"ace/mouse/multi_select_handler\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/commands/multi_select_commands\",\"ace/search\",\"ace/edit_session\",\"ace/editor\",\"ace/config\"], function(acequire, exports, module) {\n\nvar RangeList = acequire(\"./range_list\").RangeList;\nvar Range = acequire(\"./range\").Range;\nvar Selection = acequire(\"./selection\").Selection;\nvar onMouseDown = acequire(\"./mouse/multi_select_handler\").onMouseDown;\nvar event = acequire(\"./lib/event\");\nvar lang = acequire(\"./lib/lang\");\nvar commands = acequire(\"./commands/multi_select_commands\");\nexports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);\nvar Search = acequire(\"./search\").Search;\nvar search = new Search();\n\nfunction find(session, needle, dir) {\n    search.$options.wrap = true;\n    search.$options.needle = needle;\n    search.$options.backwards = dir == -1;\n    return search.find(session);\n}\nvar EditSession = acequire(\"./edit_session\").EditSession;\n(function() {\n    this.getSelectionMarkers = function() {\n        return this.$selectionMarkers;\n    };\n}).call(EditSession.prototype);\n(function() {\n    this.ranges = null;\n    this.rangeList = null;\n    this.addRange = function(range, $blockChangeEvents) {\n        if (!range)\n            return;\n\n        if (!this.inMultiSelectMode && this.rangeCount === 0) {\n            var oldRange = this.toOrientedRange();\n            this.rangeList.add(oldRange);\n            this.rangeList.add(range);\n            if (this.rangeList.ranges.length != 2) {\n                this.rangeList.removeAll();\n                return $blockChangeEvents || this.fromOrientedRange(range);\n            }\n            this.rangeList.removeAll();\n            this.rangeList.add(oldRange);\n            this.$onAddRange(oldRange);\n        }\n\n        if (!range.cursor)\n            range.cursor = range.end;\n\n        var removed = this.rangeList.add(range);\n\n        this.$onAddRange(range);\n\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        if (this.rangeCount > 1 && !this.inMultiSelectMode) {\n            this._signal(\"multiSelect\");\n            this.inMultiSelectMode = true;\n            this.session.$undoSelect = false;\n            this.rangeList.attach(this.session);\n        }\n\n        return $blockChangeEvents || this.fromOrientedRange(range);\n    };\n\n    this.toSingleRange = function(range) {\n        range = range || this.ranges[0];\n        var removed = this.rangeList.removeAll();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        range && this.fromOrientedRange(range);\n    };\n    this.substractPoint = function(pos) {\n        var removed = this.rangeList.substractPoint(pos);\n        if (removed) {\n            this.$onRemoveRange(removed);\n            return removed[0];\n        }\n    };\n    this.mergeOverlappingRanges = function() {\n        var removed = this.rangeList.merge();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n        else if(this.ranges[0])\n            this.fromOrientedRange(this.ranges[0]);\n    };\n\n    this.$onAddRange = function(range) {\n        this.rangeCount = this.rangeList.ranges.length;\n        this.ranges.unshift(range);\n        this._signal(\"addRange\", {range: range});\n    };\n\n    this.$onRemoveRange = function(removed) {\n        this.rangeCount = this.rangeList.ranges.length;\n        if (this.rangeCount == 1 && this.inMultiSelectMode) {\n            var lastRange = this.rangeList.ranges.pop();\n            removed.push(lastRange);\n            this.rangeCount = 0;\n        }\n\n        for (var i = removed.length; i--; ) {\n            var index = this.ranges.indexOf(removed[i]);\n            this.ranges.splice(index, 1);\n        }\n\n        this._signal(\"removeRange\", {ranges: removed});\n\n        if (this.rangeCount === 0 && this.inMultiSelectMode) {\n            this.inMultiSelectMode = false;\n            this._signal(\"singleSelect\");\n            this.session.$undoSelect = true;\n            this.rangeList.detach(this.session);\n        }\n\n        lastRange = lastRange || this.ranges[0];\n        if (lastRange && !lastRange.isEqual(this.getRange()))\n            this.fromOrientedRange(lastRange);\n    };\n    this.$initRangeList = function() {\n        if (this.rangeList)\n            return;\n\n        this.rangeList = new RangeList();\n        this.ranges = [];\n        this.rangeCount = 0;\n    };\n    this.getAllRanges = function() {\n        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];\n    };\n\n    this.splitIntoLines = function () {\n        if (this.rangeCount > 1) {\n            var ranges = this.rangeList.ranges;\n            var lastRange = ranges[ranges.length - 1];\n            var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n            this.toSingleRange();\n            this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n        } else {\n            var range = this.getRange();\n            var isBackwards = this.isBackwards();\n            var startRow = range.start.row;\n            var endRow = range.end.row;\n            if (startRow == endRow) {\n                if (isBackwards)\n                    var start = range.end, end = range.start;\n                else\n                    var start = range.start, end = range.end;\n                \n                this.addRange(Range.fromPoints(end, end));\n                this.addRange(Range.fromPoints(start, start));\n                return;\n            }\n\n            var rectSel = [];\n            var r = this.getLineRange(startRow, true);\n            r.start.column = range.start.column;\n            rectSel.push(r);\n\n            for (var i = startRow + 1; i < endRow; i++)\n                rectSel.push(this.getLineRange(i, true));\n\n            r = this.getLineRange(endRow, true);\n            r.end.column = range.end.column;\n            rectSel.push(r);\n\n            rectSel.forEach(this.addRange, this);\n        }\n    };\n    this.toggleBlockSelection = function () {\n        if (this.rangeCount > 1) {\n            var ranges = this.rangeList.ranges;\n            var lastRange = ranges[ranges.length - 1];\n            var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n            this.toSingleRange();\n            this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n        } else {\n            var cursor = this.session.documentToScreenPosition(this.selectionLead);\n            var anchor = this.session.documentToScreenPosition(this.selectionAnchor);\n\n            var rectSel = this.rectangularRangeBlock(cursor, anchor);\n            rectSel.forEach(this.addRange, this);\n        }\n    };\n    this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {\n        var rectSel = [];\n\n        var xBackwards = screenCursor.column < screenAnchor.column;\n        if (xBackwards) {\n            var startColumn = screenCursor.column;\n            var endColumn = screenAnchor.column;\n            var startOffsetX = screenCursor.offsetX;\n            var endOffsetX = screenAnchor.offsetX;\n        } else {\n            var startColumn = screenAnchor.column;\n            var endColumn = screenCursor.column;\n            var startOffsetX = screenAnchor.offsetX;\n            var endOffsetX = screenCursor.offsetX;\n        }\n\n        var yBackwards = screenCursor.row < screenAnchor.row;\n        if (yBackwards) {\n            var startRow = screenCursor.row;\n            var endRow = screenAnchor.row;\n        } else {\n            var startRow = screenAnchor.row;\n            var endRow = screenCursor.row;\n        }\n\n        if (startColumn < 0)\n            startColumn = 0;\n        if (startRow < 0)\n            startRow = 0;\n\n        if (startRow == endRow)\n            includeEmptyLines = true;\n\n        for (var row = startRow; row <= endRow; row++) {\n            var range = Range.fromPoints(\n                this.session.screenToDocumentPosition(row, startColumn, startOffsetX),\n                this.session.screenToDocumentPosition(row, endColumn, endOffsetX)\n            );\n            if (range.isEmpty()) {\n                if (docEnd && isSamePoint(range.end, docEnd))\n                    break;\n                var docEnd = range.end;\n            }\n            range.cursor = xBackwards ? range.start : range.end;\n            rectSel.push(range);\n        }\n\n        if (yBackwards)\n            rectSel.reverse();\n\n        if (!includeEmptyLines) {\n            var end = rectSel.length - 1;\n            while (rectSel[end].isEmpty() && end > 0)\n                end--;\n            if (end > 0) {\n                var start = 0;\n                while (rectSel[start].isEmpty())\n                    start++;\n            }\n            for (var i = end; i >= start; i--) {\n                if (rectSel[i].isEmpty())\n                    rectSel.splice(i, 1);\n            }\n        }\n\n        return rectSel;\n    };\n}).call(Selection.prototype);\nvar Editor = acequire(\"./editor\").Editor;\n(function() {\n    this.updateSelectionMarkers = function() {\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.addSelectionMarker = function(orientedRange) {\n        if (!orientedRange.cursor)\n            orientedRange.cursor = orientedRange.end;\n\n        var style = this.getSelectionStyle();\n        orientedRange.marker = this.session.addMarker(orientedRange, \"ace_selection\", style);\n\n        this.session.$selectionMarkers.push(orientedRange);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n        return orientedRange;\n    };\n    this.removeSelectionMarker = function(range) {\n        if (!range.marker)\n            return;\n        this.session.removeMarker(range.marker);\n        var index = this.session.$selectionMarkers.indexOf(range);\n        if (index != -1)\n            this.session.$selectionMarkers.splice(index, 1);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n    };\n\n    this.removeSelectionMarkers = function(ranges) {\n        var markerList = this.session.$selectionMarkers;\n        for (var i = ranges.length; i--; ) {\n            var range = ranges[i];\n            if (!range.marker)\n                continue;\n            this.session.removeMarker(range.marker);\n            var index = markerList.indexOf(range);\n            if (index != -1)\n                markerList.splice(index, 1);\n        }\n        this.session.selectionMarkerCount = markerList.length;\n    };\n\n    this.$onAddRange = function(e) {\n        this.addSelectionMarker(e.range);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onRemoveRange = function(e) {\n        this.removeSelectionMarkers(e.ranges);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onMultiSelect = function(e) {\n        if (this.inMultiSelectMode)\n            return;\n        this.inMultiSelectMode = true;\n\n        this.setStyle(\"ace_multiselect\");\n        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);\n        this.commands.setDefaultHandler(\"exec\", this.$onMultiSelectExec);\n\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onSingleSelect = function(e) {\n        if (this.session.multiSelect.inVirtualMode)\n            return;\n        this.inMultiSelectMode = false;\n\n        this.unsetStyle(\"ace_multiselect\");\n        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);\n\n        this.commands.removeDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n        this._emit(\"changeSelection\");\n    };\n\n    this.$onMultiSelectExec = function(e) {\n        var command = e.command;\n        var editor = e.editor;\n        if (!editor.multiSelect)\n            return;\n        if (!command.multiSelectAction) {\n            var result = command.exec(editor, e.args || {});\n            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());\n            editor.multiSelect.mergeOverlappingRanges();\n        } else if (command.multiSelectAction == \"forEach\") {\n            result = editor.forEachSelection(command, e.args);\n        } else if (command.multiSelectAction == \"forEachLine\") {\n            result = editor.forEachSelection(command, e.args, true);\n        } else if (command.multiSelectAction == \"single\") {\n            editor.exitMultiSelectMode();\n            result = command.exec(editor, e.args || {});\n        } else {\n            result = command.multiSelectAction(editor, e.args || {});\n        }\n        return result;\n    }; \n    this.forEachSelection = function(cmd, args, options) {\n        if (this.inVirtualSelectionMode)\n            return;\n        var keepOrder = options && options.keepOrder;\n        var $byLines = options == true || options && options.$byLines;\n        var session = this.session;\n        var selection = this.selection;\n        var rangeList = selection.rangeList;\n        var ranges = (keepOrder ? selection : rangeList).ranges;\n        var result;\n        \n        if (!ranges.length)\n            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n        \n        var reg = selection._eventRegistry;\n        selection._eventRegistry = {};\n\n        var tmpSel = new Selection(session);\n        this.inVirtualSelectionMode = true;\n        for (var i = ranges.length; i--;) {\n            if ($byLines) {\n                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)\n                    i--;\n            }\n            tmpSel.fromOrientedRange(ranges[i]);\n            tmpSel.index = i;\n            this.selection = session.selection = tmpSel;\n            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n            if (!result && cmdResult !== undefined)\n                result = cmdResult;\n            tmpSel.toOrientedRange(ranges[i]);\n        }\n        tmpSel.detach();\n\n        this.selection = session.selection = selection;\n        this.inVirtualSelectionMode = false;\n        selection._eventRegistry = reg;\n        selection.mergeOverlappingRanges();\n        \n        var anim = this.renderer.$scrollAnimation;\n        this.onCursorChange();\n        this.onSelectionChange();\n        if (anim && anim.from == anim.to)\n            this.renderer.animateScrolling(anim.from);\n        \n        return result;\n    };\n    this.exitMultiSelectMode = function() {\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)\n            return;\n        this.multiSelect.toSingleRange();\n    };\n\n    this.getSelectedText = function() {\n        var text = \"\";\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var ranges = this.multiSelect.rangeList.ranges;\n            var buf = [];\n            for (var i = 0; i < ranges.length; i++) {\n                buf.push(this.session.getTextRange(ranges[i]));\n            }\n            var nl = this.session.getDocument().getNewLineCharacter();\n            text = buf.join(nl);\n            if (text.length == (buf.length - 1) * nl.length)\n                text = \"\";\n        } else if (!this.selection.isEmpty()) {\n            text = this.session.getTextRange(this.getSelectionRange());\n        }\n        return text;\n    };\n    \n    this.$checkMultiselectChange = function(e, anchor) {\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var range = this.multiSelect.ranges[0];\n            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)\n                return;\n            var pos = anchor == this.multiSelect.anchor\n                ? range.cursor == range.start ? range.end : range.start\n                : range.cursor;\n            if (pos.row != anchor.row \n                || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)\n                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());\n        }\n    };\n    this.findAll = function(needle, options, additive) {\n        options = options || {};\n        options.needle = needle || options.needle;\n        if (options.needle == undefined) {\n            var range = this.selection.isEmpty()\n                ? this.selection.getWordRange()\n                : this.selection.getRange();\n            options.needle = this.session.getTextRange(range);\n        }    \n        this.$search.set(options);\n        \n        var ranges = this.$search.findAll(this.session);\n        if (!ranges.length)\n            return 0;\n\n        this.$blockScrolling += 1;\n        var selection = this.multiSelect;\n\n        if (!additive)\n            selection.toSingleRange(ranges[0]);\n\n        for (var i = ranges.length; i--; )\n            selection.addRange(ranges[i], true);\n        if (range && selection.rangeList.rangeAtPoint(range.start))\n            selection.addRange(range, true);\n        \n        this.$blockScrolling -= 1;\n\n        return ranges.length;\n    };\n    this.selectMoreLines = function(dir, skip) {\n        var range = this.selection.toOrientedRange();\n        var isBackwards = range.cursor == range.end;\n\n        var screenLead = this.session.documentToScreenPosition(range.cursor);\n        if (this.selection.$desiredColumn)\n            screenLead.column = this.selection.$desiredColumn;\n\n        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);\n\n        if (!range.isEmpty()) {\n            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);\n            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);\n        } else {\n            var anchor = lead;\n        }\n\n        if (isBackwards) {\n            var newRange = Range.fromPoints(lead, anchor);\n            newRange.cursor = newRange.start;\n        } else {\n            var newRange = Range.fromPoints(anchor, lead);\n            newRange.cursor = newRange.end;\n        }\n\n        newRange.desiredColumn = screenLead.column;\n        if (!this.selection.inMultiSelectMode) {\n            this.selection.addRange(range);\n        } else {\n            if (skip)\n                var toRemove = range.cursor;\n        }\n\n        this.selection.addRange(newRange);\n        if (toRemove)\n            this.selection.substractPoint(toRemove);\n    };\n    this.transposeSelections = function(dir) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var all = sel.ranges;\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            if (range.isEmpty()) {\n                var tmp = session.getWordRange(range.start.row, range.start.column);\n                range.start.row = tmp.start.row;\n                range.start.column = tmp.start.column;\n                range.end.row = tmp.end.row;\n                range.end.column = tmp.end.column;\n            }\n        }\n        sel.mergeOverlappingRanges();\n\n        var words = [];\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            words.unshift(session.getTextRange(range));\n        }\n\n        if (dir < 0)\n            words.unshift(words.pop());\n        else\n            words.push(words.shift());\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            var tmp = range.clone();\n            session.replace(range, words[i]);\n            range.start.row = tmp.start.row;\n            range.start.column = tmp.start.column;\n        }\n    };\n    this.selectMore = function(dir, skip, stopAtFirst) {\n        var session = this.session;\n        var sel = session.multiSelect;\n\n        var range = sel.toOrientedRange();\n        if (range.isEmpty()) {\n            range = session.getWordRange(range.start.row, range.start.column);\n            range.cursor = dir == -1 ? range.start : range.end;\n            this.multiSelect.addRange(range);\n            if (stopAtFirst)\n                return;\n        }\n        var needle = session.getTextRange(range);\n\n        var newRange = find(session, needle, dir);\n        if (newRange) {\n            newRange.cursor = dir == -1 ? newRange.start : newRange.end;\n            this.$blockScrolling += 1;\n            this.session.unfold(newRange);\n            this.multiSelect.addRange(newRange);\n            this.$blockScrolling -= 1;\n            this.renderer.scrollCursorIntoView(null, 0.5);\n        }\n        if (skip)\n            this.multiSelect.substractPoint(range.cursor);\n    };\n    this.alignCursors = function() {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var ranges = sel.ranges;\n        var row = -1;\n        var sameRowRanges = ranges.filter(function(r) {\n            if (r.cursor.row == row)\n                return true;\n            row = r.cursor.row;\n        });\n        \n        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {\n            var range = this.selection.getRange();\n            var fr = range.start.row, lr = range.end.row;\n            var guessRange = fr == lr;\n            if (guessRange) {\n                var max = this.session.getLength();\n                var line;\n                do {\n                    line = this.session.getLine(lr);\n                } while (/[=:]/.test(line) && ++lr < max);\n                do {\n                    line = this.session.getLine(fr);\n                } while (/[=:]/.test(line) && --fr > 0);\n                \n                if (fr < 0) fr = 0;\n                if (lr >= max) lr = max - 1;\n            }\n            var lines = this.session.removeFullLines(fr, lr);\n            lines = this.$reAlignText(lines, guessRange);\n            this.session.insert({row: fr, column: 0}, lines.join(\"\\n\") + \"\\n\");\n            if (!guessRange) {\n                range.start.column = 0;\n                range.end.column = lines[lines.length - 1].length;\n            }\n            this.selection.setRange(range);\n        } else {\n            sameRowRanges.forEach(function(r) {\n                sel.substractPoint(r.cursor);\n            });\n\n            var maxCol = 0;\n            var minSpace = Infinity;\n            var spaceOffsets = ranges.map(function(r) {\n                var p = r.cursor;\n                var line = session.getLine(p.row);\n                var spaceOffset = line.substr(p.column).search(/\\S/g);\n                if (spaceOffset == -1)\n                    spaceOffset = 0;\n\n                if (p.column > maxCol)\n                    maxCol = p.column;\n                if (spaceOffset < minSpace)\n                    minSpace = spaceOffset;\n                return spaceOffset;\n            });\n            ranges.forEach(function(r, i) {\n                var p = r.cursor;\n                var l = maxCol - p.column;\n                var d = spaceOffsets[i] - minSpace;\n                if (l > d)\n                    session.insert(p, lang.stringRepeat(\" \", l - d));\n                else\n                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));\n\n                r.start.column = r.end.column = maxCol;\n                r.start.row = r.end.row = p.row;\n                r.cursor = r.end;\n            });\n            sel.fromOrientedRange(ranges[0]);\n            this.renderer.updateCursor();\n            this.renderer.updateBackMarkers();\n        }\n    };\n\n    this.$reAlignText = function(lines, forceLeft) {\n        var isLeftAligned = true, isRightAligned = true;\n        var startW, textW, endW;\n\n        return lines.map(function(line) {\n            var m = line.match(/(\\s*)(.*?)(\\s*)([=:].*)/);\n            if (!m)\n                return [line];\n\n            if (startW == null) {\n                startW = m[1].length;\n                textW = m[2].length;\n                endW = m[3].length;\n                return m;\n            }\n\n            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)\n                isRightAligned = false;\n            if (startW != m[1].length)\n                isLeftAligned = false;\n\n            if (startW > m[1].length)\n                startW = m[1].length;\n            if (textW < m[2].length)\n                textW = m[2].length;\n            if (endW > m[3].length)\n                endW = m[3].length;\n\n            return m;\n        }).map(forceLeft ? alignLeft :\n            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);\n\n        function spaces(n) {\n            return lang.stringRepeat(\" \", n);\n        }\n\n        function alignLeft(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(textW - m[2].length + endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function alignRight(m) {\n            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]\n                + spaces(endW, \" \")\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function unAlign(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n    };\n}).call(Editor.prototype);\n\n\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\nexports.onSessionChange = function(e) {\n    var session = e.session;\n    if (session && !session.multiSelect) {\n        session.$selectionMarkers = [];\n        session.selection.$initRangeList();\n        session.multiSelect = session.selection;\n    }\n    this.multiSelect = session && session.multiSelect;\n\n    var oldSession = e.oldSession;\n    if (oldSession) {\n        oldSession.multiSelect.off(\"addRange\", this.$onAddRange);\n        oldSession.multiSelect.off(\"removeRange\", this.$onRemoveRange);\n        oldSession.multiSelect.off(\"multiSelect\", this.$onMultiSelect);\n        oldSession.multiSelect.off(\"singleSelect\", this.$onSingleSelect);\n        oldSession.multiSelect.lead.off(\"change\", this.$checkMultiselectChange);\n        oldSession.multiSelect.anchor.off(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session) {\n        session.multiSelect.on(\"addRange\", this.$onAddRange);\n        session.multiSelect.on(\"removeRange\", this.$onRemoveRange);\n        session.multiSelect.on(\"multiSelect\", this.$onMultiSelect);\n        session.multiSelect.on(\"singleSelect\", this.$onSingleSelect);\n        session.multiSelect.lead.on(\"change\", this.$checkMultiselectChange);\n        session.multiSelect.anchor.on(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {\n        if (session.selection.inMultiSelectMode)\n            this.$onMultiSelect();\n        else\n            this.$onSingleSelect();\n    }\n};\nfunction MultiSelect(editor) {\n    if (editor.$multiselectOnSessionChange)\n        return;\n    editor.$onAddRange = editor.$onAddRange.bind(editor);\n    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);\n    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);\n    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);\n    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);\n    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);\n\n    editor.$multiselectOnSessionChange(editor);\n    editor.on(\"changeSession\", editor.$multiselectOnSessionChange);\n\n    editor.on(\"mousedown\", onMouseDown);\n    editor.commands.addCommands(commands.defaultCommands);\n\n    addAltCursorListeners(editor);\n}\n\nfunction addAltCursorListeners(editor){\n    var el = editor.textInput.getElement();\n    var altCursor = false;\n    event.addListener(el, \"keydown\", function(e) {\n        var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);\n        if (editor.$blockSelectEnabled && altDown) {\n            if (!altCursor) {\n                editor.renderer.setMouseCursor(\"crosshair\");\n                altCursor = true;\n            }\n        } else if (altCursor) {\n            reset();\n        }\n    });\n\n    event.addListener(el, \"keyup\", reset);\n    event.addListener(el, \"blur\", reset);\n    function reset(e) {\n        if (altCursor) {\n            editor.renderer.setMouseCursor(\"\");\n            altCursor = false;\n        }\n    }\n}\n\nexports.MultiSelect = MultiSelect;\n\n\nacequire(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    enableMultiselect: {\n        set: function(val) {\n            MultiSelect(this);\n            if (val) {\n                this.on(\"changeSession\", this.$multiselectOnSessionChange);\n                this.on(\"mousedown\", onMouseDown);\n            } else {\n                this.off(\"changeSession\", this.$multiselectOnSessionChange);\n                this.off(\"mousedown\", onMouseDown);\n            }\n        },\n        value: true\n    },\n    enableBlockSelect: {\n        set: function(val) {\n            this.$blockSelectEnabled = val;\n        },\n        value: true\n    }\n});\n\n\n\n});\n\nace.define(\"ace/mode/folding/fold_mode\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"../../range\").Range;\n\nvar FoldMode = exports.FoldMode = function() {};\n\n(function() {\n\n    this.foldingStartMarker = null;\n    this.foldingStopMarker = null;\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (this.foldingStartMarker.test(line))\n            return \"start\";\n        if (foldStyle == \"markbeginend\"\n                && this.foldingStopMarker\n                && this.foldingStopMarker.test(line))\n            return \"end\";\n        return \"\";\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        return null;\n    };\n\n    this.indentationBlock = function(session, row, column) {\n        var re = /\\S/;\n        var line = session.getLine(row);\n        var startLevel = line.search(re);\n        if (startLevel == -1)\n            return;\n\n        var startColumn = column || line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n\n        while (++row < maxRow) {\n            var level = session.getLine(row).search(re);\n\n            if (level == -1)\n                continue;\n\n            if (level <= startLevel)\n                break;\n\n            endRow = row;\n        }\n\n        if (endRow > startRow) {\n            var endColumn = session.getLine(endRow).length;\n            return new Range(startRow, startColumn, endRow, endColumn);\n        }\n    };\n\n    this.openingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var start = {row: row, column: column + 1};\n        var end = session.$findClosingBracket(bracket, start, typeRe);\n        if (!end)\n            return;\n\n        var fw = session.foldWidgets[end.row];\n        if (fw == null)\n            fw = session.getFoldWidget(end.row);\n\n        if (fw == \"start\" && end.row > start.row) {\n            end.row --;\n            end.column = session.getLine(end.row).length;\n        }\n        return Range.fromPoints(start, end);\n    };\n\n    this.closingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var end = {row: row, column: column};\n        var start = session.$findOpeningBracket(bracket, end);\n\n        if (!start)\n            return;\n\n        start.column++;\n        end.column--;\n\n        return  Range.fromPoints(start, end);\n    };\n}).call(FoldMode.prototype);\n\n});\n\nace.define(\"ace/theme/textmate\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(acequire, exports, module) {\n\"use strict\";\n\nexports.isDark = false;\nexports.cssClass = \"ace-tm\";\nexports.cssText = \".ace-tm .ace_gutter {\\\nbackground: #f0f0f0;\\\ncolor: #333;\\\n}\\\n.ace-tm .ace_print-margin {\\\nwidth: 1px;\\\nbackground: #e8e8e8;\\\n}\\\n.ace-tm .ace_fold {\\\nbackground-color: #6B72E6;\\\n}\\\n.ace-tm {\\\nbackground-color: #FFFFFF;\\\ncolor: black;\\\n}\\\n.ace-tm .ace_cursor {\\\ncolor: black;\\\n}\\\n.ace-tm .ace_invisible {\\\ncolor: rgb(191, 191, 191);\\\n}\\\n.ace-tm .ace_storage,\\\n.ace-tm .ace_keyword {\\\ncolor: blue;\\\n}\\\n.ace-tm .ace_constant {\\\ncolor: rgb(197, 6, 11);\\\n}\\\n.ace-tm .ace_constant.ace_buildin {\\\ncolor: rgb(88, 72, 246);\\\n}\\\n.ace-tm .ace_constant.ace_language {\\\ncolor: rgb(88, 92, 246);\\\n}\\\n.ace-tm .ace_constant.ace_library {\\\ncolor: rgb(6, 150, 14);\\\n}\\\n.ace-tm .ace_invalid {\\\nbackground-color: rgba(255, 0, 0, 0.1);\\\ncolor: red;\\\n}\\\n.ace-tm .ace_support.ace_function {\\\ncolor: rgb(60, 76, 114);\\\n}\\\n.ace-tm .ace_support.ace_constant {\\\ncolor: rgb(6, 150, 14);\\\n}\\\n.ace-tm .ace_support.ace_type,\\\n.ace-tm .ace_support.ace_class {\\\ncolor: rgb(109, 121, 222);\\\n}\\\n.ace-tm .ace_keyword.ace_operator {\\\ncolor: rgb(104, 118, 135);\\\n}\\\n.ace-tm .ace_string {\\\ncolor: rgb(3, 106, 7);\\\n}\\\n.ace-tm .ace_comment {\\\ncolor: rgb(76, 136, 107);\\\n}\\\n.ace-tm .ace_comment.ace_doc {\\\ncolor: rgb(0, 102, 255);\\\n}\\\n.ace-tm .ace_comment.ace_doc.ace_tag {\\\ncolor: rgb(128, 159, 191);\\\n}\\\n.ace-tm .ace_constant.ace_numeric {\\\ncolor: rgb(0, 0, 205);\\\n}\\\n.ace-tm .ace_variable {\\\ncolor: rgb(49, 132, 149);\\\n}\\\n.ace-tm .ace_xml-pe {\\\ncolor: rgb(104, 104, 91);\\\n}\\\n.ace-tm .ace_entity.ace_name.ace_function {\\\ncolor: #0000A2;\\\n}\\\n.ace-tm .ace_heading {\\\ncolor: rgb(12, 7, 255);\\\n}\\\n.ace-tm .ace_list {\\\ncolor:rgb(185, 6, 144);\\\n}\\\n.ace-tm .ace_meta.ace_tag {\\\ncolor:rgb(0, 22, 142);\\\n}\\\n.ace-tm .ace_string.ace_regex {\\\ncolor: rgb(255, 0, 0)\\\n}\\\n.ace-tm .ace_marker-layer .ace_selection {\\\nbackground: rgb(181, 213, 255);\\\n}\\\n.ace-tm.ace_multiselect .ace_selection.ace_start {\\\nbox-shadow: 0 0 3px 0px white;\\\n}\\\n.ace-tm .ace_marker-layer .ace_step {\\\nbackground: rgb(252, 255, 0);\\\n}\\\n.ace-tm .ace_marker-layer .ace_stack {\\\nbackground: rgb(164, 229, 101);\\\n}\\\n.ace-tm .ace_marker-layer .ace_bracket {\\\nmargin: -1px 0 0 -1px;\\\nborder: 1px solid rgb(192, 192, 192);\\\n}\\\n.ace-tm .ace_marker-layer .ace_active-line {\\\nbackground: rgba(0, 0, 0, 0.07);\\\n}\\\n.ace-tm .ace_gutter-active-line {\\\nbackground-color : #dcdcdc;\\\n}\\\n.ace-tm .ace_marker-layer .ace_selected-word {\\\nbackground: rgb(250, 250, 255);\\\nborder: 1px solid rgb(200, 200, 250);\\\n}\\\n.ace-tm .ace_indent-guide {\\\nbackground: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y;\\\n}\\\n\";\n\nvar dom = acequire(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass);\n});\n\nace.define(\"ace/line_widgets\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"./lib/oop\");\nvar dom = acequire(\"./lib/dom\");\nvar Range = acequire(\"./range\").Range;\n\n\nfunction LineWidgets(session) {\n    this.session = session;\n    this.session.widgetManager = this;\n    this.session.getRowLength = this.getRowLength;\n    this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;\n    this.updateOnChange = this.updateOnChange.bind(this);\n    this.renderWidgets = this.renderWidgets.bind(this);\n    this.measureWidgets = this.measureWidgets.bind(this);\n    this.session._changedWidgets = [];\n    this.$onChangeEditor = this.$onChangeEditor.bind(this);\n    \n    this.session.on(\"change\", this.updateOnChange);\n    this.session.on(\"changeFold\", this.updateOnFold);\n    this.session.on(\"changeEditor\", this.$onChangeEditor);\n}\n\n(function() {\n    this.getRowLength = function(row) {\n        var h;\n        if (this.lineWidgets)\n            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        else \n            h = 0;\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1 + h;\n        } else {\n            return this.$wrapData[row].length + 1 + h;\n        }\n    };\n\n    this.$getWidgetScreenLength = function() {\n        var screenRows = 0;\n        this.lineWidgets.forEach(function(w){\n            if (w && w.rowCount && !w.hidden)\n                screenRows += w.rowCount;\n        });\n        return screenRows;\n    };    \n    \n    this.$onChangeEditor = function(e) {\n        this.attach(e.editor);\n    };\n    \n    this.attach = function(editor) {\n        if (editor  && editor.widgetManager && editor.widgetManager != this)\n            editor.widgetManager.detach();\n\n        if (this.editor == editor)\n            return;\n\n        this.detach();\n        this.editor = editor;\n        \n        if (editor) {\n            editor.widgetManager = this;\n            editor.renderer.on(\"beforeRender\", this.measureWidgets);\n            editor.renderer.on(\"afterRender\", this.renderWidgets);\n        }\n    };\n    this.detach = function(e) {\n        var editor = this.editor;\n        if (!editor)\n            return;\n        \n        this.editor = null;\n        editor.widgetManager = null;\n        \n        editor.renderer.off(\"beforeRender\", this.measureWidgets);\n        editor.renderer.off(\"afterRender\", this.renderWidgets);\n        var lineWidgets = this.session.lineWidgets;\n        lineWidgets && lineWidgets.forEach(function(w) {\n            if (w && w.el && w.el.parentNode) {\n                w._inDocument = false;\n                w.el.parentNode.removeChild(w.el);\n            }\n        });\n    };\n\n    this.updateOnFold = function(e, session) {\n        var lineWidgets = session.lineWidgets;\n        if (!lineWidgets || !e.action)\n            return;\n        var fold = e.data;\n        var start = fold.start.row;\n        var end = fold.end.row;\n        var hide = e.action == \"add\";\n        for (var i = start + 1; i < end; i++) {\n            if (lineWidgets[i])\n                lineWidgets[i].hidden = hide;\n        }\n        if (lineWidgets[end]) {\n            if (hide) {\n                if (!lineWidgets[start])\n                    lineWidgets[start] = lineWidgets[end];\n                else\n                    lineWidgets[end].hidden = hide;\n            } else {\n                if (lineWidgets[start] == lineWidgets[end])\n                    lineWidgets[start] = undefined;\n                lineWidgets[end].hidden = hide;\n            }\n        }\n    };\n    \n    this.updateOnChange = function(delta) {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n        \n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n        } else if (delta.action == 'remove') {\n            var removed = lineWidgets.splice(startRow + 1, len);\n            removed.forEach(function(w) {\n                w && this.removeLineWidget(w);\n            }, this);\n            this.$updateRows();\n        } else {\n            var args = new Array(len);\n            args.unshift(startRow, 0);\n            lineWidgets.splice.apply(lineWidgets, args);\n            this.$updateRows();\n        }\n    };\n    \n    this.$updateRows = function() {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n        var noWidgets = true;\n        lineWidgets.forEach(function(w, i) {\n            if (w) {\n                noWidgets = false;\n                w.row = i;\n                while (w.$oldWidget) {\n                    w.$oldWidget.row = i;\n                    w = w.$oldWidget;\n                }\n            }\n        });\n        if (noWidgets)\n            this.session.lineWidgets = null;\n    };\n\n    this.addLineWidget = function(w) {\n        if (!this.session.lineWidgets)\n            this.session.lineWidgets = new Array(this.session.getLength());\n        \n        var old = this.session.lineWidgets[w.row];\n        if (old) {\n            w.$oldWidget = old;\n            if (old.el && old.el.parentNode) {\n                old.el.parentNode.removeChild(old.el);\n                old._inDocument = false;\n            }\n        }\n            \n        this.session.lineWidgets[w.row] = w;\n        \n        w.session = this.session;\n        \n        var renderer = this.editor.renderer;\n        if (w.html && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.innerHTML = w.html;\n        }\n        if (w.el) {\n            dom.addCssClass(w.el, \"ace_lineWidgetContainer\");\n            w.el.style.position = \"absolute\";\n            w.el.style.zIndex = 5;\n            renderer.container.appendChild(w.el);\n            w._inDocument = true;\n        }\n        \n        if (!w.coverGutter) {\n            w.el.style.zIndex = 3;\n        }\n        if (w.pixelHeight == null) {\n            w.pixelHeight = w.el.offsetHeight;\n        }\n        if (w.rowCount == null) {\n            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;\n        }\n        \n        var fold = this.session.getFoldAt(w.row, 0);\n        w.$fold = fold;\n        if (fold) {\n            var lineWidgets = this.session.lineWidgets;\n            if (w.row == fold.end.row && !lineWidgets[fold.start.row])\n                lineWidgets[fold.start.row] = w;\n            else\n                w.hidden = true;\n        }\n            \n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n        \n        this.$updateRows();\n        this.renderWidgets(null, renderer);\n        this.onWidgetChanged(w);\n        return w;\n    };\n    \n    this.removeLineWidget = function(w) {\n        w._inDocument = false;\n        w.session = null;\n        if (w.el && w.el.parentNode)\n            w.el.parentNode.removeChild(w.el);\n        if (w.editor && w.editor.destroy) try {\n            w.editor.destroy();\n        } catch(e){}\n        if (this.session.lineWidgets) {\n            var w1 = this.session.lineWidgets[w.row];\n            if (w1 == w) {\n                this.session.lineWidgets[w.row] = w.$oldWidget;\n                if (w.$oldWidget)\n                    this.onWidgetChanged(w.$oldWidget);\n            } else {\n                while (w1) {\n                    if (w1.$oldWidget == w) {\n                        w1.$oldWidget = w.$oldWidget;\n                        break;\n                    }\n                    w1 = w1.$oldWidget;\n                }\n            }\n        }\n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n        this.$updateRows();\n    };\n    \n    this.getWidgetsAtRow = function(row) {\n        var lineWidgets = this.session.lineWidgets;\n        var w = lineWidgets && lineWidgets[row];\n        var list = [];\n        while (w) {\n            list.push(w);\n            w = w.$oldWidget;\n        }\n        return list;\n    };\n    \n    this.onWidgetChanged = function(w) {\n        this.session._changedWidgets.push(w);\n        this.editor && this.editor.renderer.updateFull();\n    };\n    \n    this.measureWidgets = function(e, renderer) {\n        var changedWidgets = this.session._changedWidgets;\n        var config = renderer.layerConfig;\n        \n        if (!changedWidgets || !changedWidgets.length) return;\n        var min = Infinity;\n        for (var i = 0; i < changedWidgets.length; i++) {\n            var w = changedWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.session != this.session) continue;\n            if (!w._inDocument) {\n                if (this.session.lineWidgets[w.row] != w)\n                    continue;\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            \n            w.h = w.el.offsetHeight;\n            \n            if (!w.fixedWidth) {\n                w.w = w.el.offsetWidth;\n                w.screenWidth = Math.ceil(w.w / config.characterWidth);\n            }\n            \n            var rowCount = w.h / config.lineHeight;\n            if (w.coverLine) {\n                rowCount -= this.session.getRowLineCount(w.row);\n                if (rowCount < 0)\n                    rowCount = 0;\n            }\n            if (w.rowCount != rowCount) {\n                w.rowCount = rowCount;\n                if (w.row < min)\n                    min = w.row;\n            }\n        }\n        if (min != Infinity) {\n            this.session._emit(\"changeFold\", {data:{start:{row: min}}});\n            this.session.lineWidgetWidth = null;\n        }\n        this.session._changedWidgets = [];\n    };\n    \n    this.renderWidgets = function(e, renderer) {\n        var config = renderer.layerConfig;\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var first = Math.min(this.firstRow, config.firstRow);\n        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);\n        \n        while (first > 0 && !lineWidgets[first])\n            first--;\n        \n        this.firstRow = config.firstRow;\n        this.lastRow = config.lastRow;\n\n        renderer.$cursorLayer.config = config;\n        for (var i = first; i <= last; i++) {\n            var w = lineWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.hidden) {\n                w.el.style.top = -100 - (w.pixelHeight || 0) + \"px\";\n                continue;\n            }\n            if (!w._inDocument) {\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            var top = renderer.$cursorLayer.getPixelPosition({row: i, column:0}, true).top;\n            if (!w.coverLine)\n                top += config.lineHeight * this.session.getRowLineCount(w.row);\n            w.el.style.top = top - config.offset + \"px\";\n            \n            var left = w.coverGutter ? 0 : renderer.gutterWidth;\n            if (!w.fixedWidth)\n                left -= renderer.scrollLeft;\n            w.el.style.left = left + \"px\";\n            \n            if (w.fullWidth && w.screenWidth) {\n                w.el.style.minWidth = config.width + 2 * config.padding + \"px\";\n            }\n            \n            if (w.fixedWidth) {\n                w.el.style.right = renderer.scrollBar.getWidth() + \"px\";\n            } else {\n                w.el.style.right = \"\";\n            }\n        }\n    };\n    \n}).call(LineWidgets.prototype);\n\n\nexports.LineWidgets = LineWidgets;\n\n});\n\nace.define(\"ace/ext/error_marker\",[\"require\",\"exports\",\"module\",\"ace/line_widgets\",\"ace/lib/dom\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\nvar LineWidgets = acequire(\"../line_widgets\").LineWidgets;\nvar dom = acequire(\"../lib/dom\");\nvar Range = acequire(\"../range\").Range;\n\nfunction binarySearch(array, needle, comparator) {\n    var first = 0;\n    var last = array.length - 1;\n\n    while (first <= last) {\n        var mid = (first + last) >> 1;\n        var c = comparator(needle, array[mid]);\n        if (c > 0)\n            first = mid + 1;\n        else if (c < 0)\n            last = mid - 1;\n        else\n            return mid;\n    }\n    return -(first + 1);\n}\n\nfunction findAnnotations(session, row, dir) {\n    var annotations = session.getAnnotations().sort(Range.comparePoints);\n    if (!annotations.length)\n        return;\n    \n    var i = binarySearch(annotations, {row: row, column: -1}, Range.comparePoints);\n    if (i < 0)\n        i = -i - 1;\n    \n    if (i >= annotations.length)\n        i = dir > 0 ? 0 : annotations.length - 1;\n    else if (i === 0 && dir < 0)\n        i = annotations.length - 1;\n    \n    var annotation = annotations[i];\n    if (!annotation || !dir)\n        return;\n\n    if (annotation.row === row) {\n        do {\n            annotation = annotations[i += dir];\n        } while (annotation && annotation.row === row);\n        if (!annotation)\n            return annotations.slice();\n    }\n    \n    \n    var matched = [];\n    row = annotation.row;\n    do {\n        matched[dir < 0 ? \"unshift\" : \"push\"](annotation);\n        annotation = annotations[i += dir];\n    } while (annotation && annotation.row == row);\n    return matched.length && matched;\n}\n\nexports.showErrorMarker = function(editor, dir) {\n    var session = editor.session;\n    if (!session.widgetManager) {\n        session.widgetManager = new LineWidgets(session);\n        session.widgetManager.attach(editor);\n    }\n    \n    var pos = editor.getCursorPosition();\n    var row = pos.row;\n    var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function(w) {\n        return w.type == \"errorMarker\";\n    })[0];\n    if (oldWidget) {\n        oldWidget.destroy();\n    } else {\n        row -= dir;\n    }\n    var annotations = findAnnotations(session, row, dir);\n    var gutterAnno;\n    if (annotations) {\n        var annotation = annotations[0];\n        pos.column = (annotation.pos && typeof annotation.column != \"number\"\n            ? annotation.pos.sc\n            : annotation.column) || 0;\n        pos.row = annotation.row;\n        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];\n    } else if (oldWidget) {\n        return;\n    } else {\n        gutterAnno = {\n            text: [\"Looks good!\"],\n            className: \"ace_ok\"\n        };\n    }\n    editor.session.unfold(pos.row);\n    editor.selection.moveToPosition(pos);\n    \n    var w = {\n        row: pos.row, \n        fixedWidth: true,\n        coverGutter: true,\n        el: dom.createElement(\"div\"),\n        type: \"errorMarker\"\n    };\n    var el = w.el.appendChild(dom.createElement(\"div\"));\n    var arrow = w.el.appendChild(dom.createElement(\"div\"));\n    arrow.className = \"error_widget_arrow \" + gutterAnno.className;\n    \n    var left = editor.renderer.$cursorLayer\n        .getPixelPosition(pos).left;\n    arrow.style.left = left + editor.renderer.gutterWidth - 5 + \"px\";\n    \n    w.el.className = \"error_widget_wrapper\";\n    el.className = \"error_widget \" + gutterAnno.className;\n    el.innerHTML = gutterAnno.text.join(\"<br>\");\n    \n    el.appendChild(dom.createElement(\"div\"));\n    \n    var kb = function(_, hashId, keyString) {\n        if (hashId === 0 && (keyString === \"esc\" || keyString === \"return\")) {\n            w.destroy();\n            return {command: \"null\"};\n        }\n    };\n    \n    w.destroy = function() {\n        if (editor.$mouseHandler.isMousePressed)\n            return;\n        editor.keyBinding.removeKeyboardHandler(kb);\n        session.widgetManager.removeLineWidget(w);\n        editor.off(\"changeSelection\", w.destroy);\n        editor.off(\"changeSession\", w.destroy);\n        editor.off(\"mouseup\", w.destroy);\n        editor.off(\"change\", w.destroy);\n    };\n    \n    editor.keyBinding.addKeyboardHandler(kb);\n    editor.on(\"changeSelection\", w.destroy);\n    editor.on(\"changeSession\", w.destroy);\n    editor.on(\"mouseup\", w.destroy);\n    editor.on(\"change\", w.destroy);\n    \n    editor.session.widgetManager.addLineWidget(w);\n    \n    w.el.onmousedown = editor.focus.bind(editor);\n    \n    editor.renderer.scrollCursorIntoView(null, 0.5, {bottom: w.el.offsetHeight});\n};\n\n\ndom.importCssString(\"\\\n    .error_widget_wrapper {\\\n        background: inherit;\\\n        color: inherit;\\\n        border:none\\\n    }\\\n    .error_widget {\\\n        border-top: solid 2px;\\\n        border-bottom: solid 2px;\\\n        margin: 5px 0;\\\n        padding: 10px 40px;\\\n        white-space: pre-wrap;\\\n    }\\\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\\\n        border-color: #ff5a5a\\\n    }\\\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\\\n        border-color: #F1D817\\\n    }\\\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\\\n        border-color: #5a5a5a\\\n    }\\\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\\\n        border-color: #5aaa5a\\\n    }\\\n    .error_widget_arrow {\\\n        position: absolute;\\\n        border: solid 5px;\\\n        border-top-color: transparent!important;\\\n        border-right-color: transparent!important;\\\n        border-left-color: transparent!important;\\\n        top: -5px;\\\n    }\\\n\", \"\");\n\n});\n\nace.define(\"ace/ace\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/editor\",\"ace/edit_session\",\"ace/undomanager\",\"ace/virtual_renderer\",\"ace/worker/worker_client\",\"ace/keyboard/hash_handler\",\"ace/placeholder\",\"ace/multi_select\",\"ace/mode/folding/fold_mode\",\"ace/theme/textmate\",\"ace/ext/error_marker\",\"ace/config\"], function(acequire, exports, module) {\n\"use strict\";\n\nacequire(\"./lib/fixoldbrowsers\");\n\nvar dom = acequire(\"./lib/dom\");\nvar event = acequire(\"./lib/event\");\n\nvar Editor = acequire(\"./editor\").Editor;\nvar EditSession = acequire(\"./edit_session\").EditSession;\nvar UndoManager = acequire(\"./undomanager\").UndoManager;\nvar Renderer = acequire(\"./virtual_renderer\").VirtualRenderer;\nacequire(\"./worker/worker_client\");\nacequire(\"./keyboard/hash_handler\");\nacequire(\"./placeholder\");\nacequire(\"./multi_select\");\nacequire(\"./mode/folding/fold_mode\");\nacequire(\"./theme/textmate\");\nacequire(\"./ext/error_marker\");\n\nexports.config = acequire(\"./config\");\nexports.acequire = acequire;\n\nif (typeof define === \"function\")\n    exports.define = define;\nexports.edit = function(el) {\n    if (typeof el == \"string\") {\n        var _id = el;\n        el = document.getElementById(_id);\n        if (!el)\n            throw new Error(\"ace.edit can't find div #\" + _id);\n    }\n\n    if (el && el.env && el.env.editor instanceof Editor)\n        return el.env.editor;\n\n    var value = \"\";\n    if (el && /input|textarea/i.test(el.tagName)) {\n        var oldNode = el;\n        value = oldNode.value;\n        el = dom.createElement(\"pre\");\n        oldNode.parentNode.replaceChild(el, oldNode);\n    } else if (el) {\n        value = dom.getInnerText(el);\n        el.innerHTML = \"\";\n    }\n\n    var doc = exports.createEditSession(value);\n\n    var editor = new Editor(new Renderer(el));\n    editor.setSession(doc);\n\n    var env = {\n        document: doc,\n        editor: editor,\n        onResize: editor.resize.bind(editor, null)\n    };\n    if (oldNode) env.textarea = oldNode;\n    event.addListener(window, \"resize\", env.onResize);\n    editor.on(\"destroy\", function() {\n        event.removeListener(window, \"resize\", env.onResize);\n        env.editor.container.env = null; // prevent memory leak on old ie\n    });\n    editor.container.env = editor.env = env;\n    return editor;\n};\nexports.createEditSession = function(text, mode) {\n    var doc = new EditSession(text, mode);\n    doc.setUndoManager(new UndoManager());\n    return doc;\n};\nexports.EditSession = EditSession;\nexports.UndoManager = UndoManager;\nexports.version = \"1.2.9\";\n});\n            (function() {\n                ace.acequire([\"ace/ace\"], function(a) {\n                    if (a) {\n                        a.config.init(true);\n                        a.define = ace.define;\n                    }\n                    if (!window.ace)\n                        window.ace = a;\n                    for (var key in a) if (a.hasOwnProperty(key))\n                        window.ace[key] = a[key];\n                });\n            })();\n        \nmodule.exports = window.ace.acequire(\"ace/ace\");","module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n","'use strict';\n\nvar createAbsoluteAnchor = require('./createAbsoluteAnchor').createAbsoluteAnchor;\nvar util = require('./util');\nvar translate = require('./i18n').translate;\n\n/**\n * A context menu\n * @param {Object[]} items    Array containing the menu structure\n *                            TODO: describe structure\n * @param {Object} [options]  Object with options. Available options:\n *                            {function} close    Callback called when the\n *                                                context menu is being closed.\n * @constructor\n */\nfunction ContextMenu (items, options) {\n  this.dom = {};\n\n  var me = this;\n  var dom = this.dom;\n  this.anchor = undefined;\n  this.items = items;\n  this.eventListeners = {};\n  this.selection = undefined; // holds the selection before the menu was opened\n  this.onClose = options ? options.close : undefined;\n\n  // create root element\n  var root = document.createElement('div');\n  root.className = 'jsoneditor-contextmenu-root';\n  dom.root = root;\n\n  // create a container element\n  var menu = document.createElement('div');\n  menu.className = 'jsoneditor-contextmenu';\n  dom.menu = menu;\n  root.appendChild(menu);\n\n  // create a list to hold the menu items\n  var list = document.createElement('ul');\n  list.className = 'jsoneditor-menu';\n  menu.appendChild(list);\n  dom.list = list;\n  dom.items = []; // list with all buttons\n\n  // create a (non-visible) button to set the focus to the menu\n  var focusButton = document.createElement('button');\n  focusButton.type = 'button';\n  dom.focusButton = focusButton;\n  var li = document.createElement('li');\n  li.style.overflow = 'hidden';\n  li.style.height = '0';\n  li.appendChild(focusButton);\n  list.appendChild(li);\n\n  function createMenuItems (list, domItems, items) {\n    items.forEach(function (item) {\n      if (item.type == 'separator') {\n        // create a separator\n        var separator = document.createElement('div');\n        separator.className = 'jsoneditor-separator';\n        li = document.createElement('li');\n        li.appendChild(separator);\n        list.appendChild(li);\n      }\n      else {\n        var domItem = {};\n\n        // create a menu item\n        var li = document.createElement('li');\n        list.appendChild(li);\n\n        // create a button in the menu item\n        var button = document.createElement('button');\n        button.type = 'button';\n        button.className = item.className;\n        domItem.button = button;\n        if (item.title) {\n          button.title = item.title;\n        }\n        if (item.click) {\n          button.onclick = function (event) {\n            event.preventDefault();\n            me.hide();\n            item.click();\n          };\n        }\n        li.appendChild(button);\n\n        // create the contents of the button\n        if (item.submenu) {\n          // add the icon to the button\n          var divIcon = document.createElement('div');\n          divIcon.className = 'jsoneditor-icon';\n          button.appendChild(divIcon);\n          var divText = document.createElement('div');\n          divText.className = 'jsoneditor-text' +\n              (item.click ? '' : ' jsoneditor-right-margin');\n          divText.appendChild(document.createTextNode(item.text));\n          button.appendChild(divText);\n\n          var buttonSubmenu;\n          if (item.click) {\n            // submenu and a button with a click handler\n            button.className += ' jsoneditor-default';\n\n            var buttonExpand = document.createElement('button');\n            buttonExpand.type = 'button';\n            domItem.buttonExpand = buttonExpand;\n            buttonExpand.className = 'jsoneditor-expand';\n            buttonExpand.innerHTML = '<div class=\"jsoneditor-expand\"></div>';\n            li.appendChild(buttonExpand);\n            if (item.submenuTitle) {\n              buttonExpand.title = item.submenuTitle;\n            }\n\n            buttonSubmenu = buttonExpand;\n          }\n          else {\n            // submenu and a button without a click handler\n            var divExpand = document.createElement('div');\n            divExpand.className = 'jsoneditor-expand';\n            button.appendChild(divExpand);\n\n            buttonSubmenu = button;\n          }\n\n          // attach a handler to expand/collapse the submenu\n          buttonSubmenu.onclick = function (event) {\n            event.preventDefault();\n            me._onExpandItem(domItem);\n            buttonSubmenu.focus();\n          };\n\n          // create the submenu\n          var domSubItems = [];\n          domItem.subItems = domSubItems;\n          var ul = document.createElement('ul');\n          domItem.ul = ul;\n          ul.className = 'jsoneditor-menu';\n          ul.style.height = '0';\n          li.appendChild(ul);\n          createMenuItems(ul, domSubItems, item.submenu);\n        }\n        else {\n          // no submenu, just a button with clickhandler\n          button.innerHTML = '<div class=\"jsoneditor-icon\"></div>' +\n              '<div class=\"jsoneditor-text\">' + translate(item.text) + '</div>';\n        }\n\n        domItems.push(domItem);\n      }\n    });\n  }\n  createMenuItems(list, this.dom.items, items);\n\n  // TODO: when the editor is small, show the submenu on the right instead of inline?\n\n  // calculate the max height of the menu with one submenu expanded\n  this.maxHeight = 0; // height in pixels\n  items.forEach(function (item) {\n    var height = (items.length + (item.submenu ? item.submenu.length : 0)) * 24;\n    me.maxHeight = Math.max(me.maxHeight, height);\n  });\n}\n\n/**\n * Get the currently visible buttons\n * @return {Array.<HTMLElement>} buttons\n * @private\n */\nContextMenu.prototype._getVisibleButtons = function () {\n  var buttons = [];\n  var me = this;\n  this.dom.items.forEach(function (item) {\n    buttons.push(item.button);\n    if (item.buttonExpand) {\n      buttons.push(item.buttonExpand);\n    }\n    if (item.subItems && item == me.expandedItem) {\n      item.subItems.forEach(function (subItem) {\n        buttons.push(subItem.button);\n        if (subItem.buttonExpand) {\n          buttons.push(subItem.buttonExpand);\n        }\n        // TODO: change to fully recursive method\n      });\n    }\n  });\n\n  return buttons;\n};\n\n// currently displayed context menu, a singleton. We may only have one visible context menu\nContextMenu.visibleMenu = undefined;\n\n/**\n * Attach the menu to an anchor\n * @param {HTMLElement} anchor    Anchor where the menu will be attached as sibling.\n * @param {HTMLElement} frame     The root of the JSONEditor window\n * @param {Boolean=} ignoreParent ignore anchor parent in regard to the calculation of the position, needed when the parent position is absolute\n */\nContextMenu.prototype.show = function (anchor, frame, ignoreParent) {\n  this.hide();\n\n  // determine whether to display the menu below or above the anchor\n  var showBelow = true;\n  var parent = anchor.parentNode;\n  var anchorRect = anchor.getBoundingClientRect();\n  var parentRect = parent.getBoundingClientRect();\n  var frameRect = frame.getBoundingClientRect();\n\n  var me = this;\n  this.dom.absoluteAnchor = createAbsoluteAnchor(anchor, frame, function () {\n    me.hide()\n  });\n\n  if (anchorRect.bottom + this.maxHeight < frameRect.bottom) {\n    // fits below -> show below\n  }\n  else if (anchorRect.top - this.maxHeight > frameRect.top) {\n    // fits above -> show above\n    showBelow = false;\n  }\n  else {\n    // doesn't fit above nor below -> show below\n  }\n\n  var topGap = ignoreParent ? 0 : (anchorRect.top - parentRect.top);\n\n  // position the menu\n  if (showBelow) {\n    // display the menu below the anchor\n    var anchorHeight = anchor.offsetHeight;\n    this.dom.menu.style.left = '0';\n    this.dom.menu.style.top = topGap + anchorHeight + 'px';\n    this.dom.menu.style.bottom = '';\n  }\n  else {\n    // display the menu above the anchor\n    this.dom.menu.style.left = '0';\n    this.dom.menu.style.top = '';\n    this.dom.menu.style.bottom = '0px';\n  }\n\n  // attach the menu to the temporary, absolute anchor\n  // parent.insertBefore(this.dom.root, anchor);\n  this.dom.absoluteAnchor.appendChild(this.dom.root);\n\n  // move focus to the first button in the context menu\n  this.selection = util.getSelection();\n  this.anchor = anchor;\n  setTimeout(function () {\n    me.dom.focusButton.focus();\n  }, 0);\n\n  if (ContextMenu.visibleMenu) {\n    ContextMenu.visibleMenu.hide();\n  }\n  ContextMenu.visibleMenu = this;\n};\n\n/**\n * Hide the context menu if visible\n */\nContextMenu.prototype.hide = function () {\n  // remove temporary absolutely positioned anchor\n  if (this.dom.absoluteAnchor) {\n    this.dom.absoluteAnchor.destroy();\n    delete this.dom.absoluteAnchor;\n  }\n\n  // remove the menu from the DOM\n  if (this.dom.root.parentNode) {\n    this.dom.root.parentNode.removeChild(this.dom.root);\n    if (this.onClose) {\n      this.onClose();\n    }\n  }\n\n  if (ContextMenu.visibleMenu == this) {\n    ContextMenu.visibleMenu = undefined;\n  }\n};\n\n/**\n * Expand a submenu\n * Any currently expanded submenu will be hided.\n * @param {Object} domItem\n * @private\n */\nContextMenu.prototype._onExpandItem = function (domItem) {\n  var me = this;\n  var alreadyVisible = (domItem == this.expandedItem);\n\n  // hide the currently visible submenu\n  var expandedItem = this.expandedItem;\n  if (expandedItem) {\n    //var ul = expandedItem.ul;\n    expandedItem.ul.style.height = '0';\n    expandedItem.ul.style.padding = '';\n    setTimeout(function () {\n      if (me.expandedItem != expandedItem) {\n        expandedItem.ul.style.display = '';\n        util.removeClassName(expandedItem.ul.parentNode, 'jsoneditor-selected');\n      }\n    }, 300); // timeout duration must match the css transition duration\n    this.expandedItem = undefined;\n  }\n\n  if (!alreadyVisible) {\n    var ul = domItem.ul;\n    ul.style.display = 'block';\n    var height = ul.clientHeight; // force a reflow in Firefox\n    setTimeout(function () {\n      if (me.expandedItem == domItem) {\n        var childsHeight = 0;\n        for (var i = 0; i < ul.childNodes.length; i++) {\n          childsHeight += ul.childNodes[i].clientHeight;\n        }\n        ul.style.height = childsHeight + 'px';\n        ul.style.padding = '5px 10px';\n      }\n    }, 0);\n    util.addClassName(ul.parentNode, 'jsoneditor-selected');\n    this.expandedItem = domItem;\n  }\n};\n\n/**\n * Handle onkeydown event\n * @param {Event} event\n * @private\n */\nContextMenu.prototype._onKeyDown = function (event) {\n  var target = event.target;\n  var keynum = event.which;\n  var handled = false;\n  var buttons, targetIndex, prevButton, nextButton;\n\n  if (keynum == 27) { // ESC\n    // hide the menu on ESC key\n\n    // restore previous selection and focus\n    if (this.selection) {\n      util.setSelection(this.selection);\n    }\n    if (this.anchor) {\n      this.anchor.focus();\n    }\n\n    this.hide();\n\n    handled = true;\n  }\n  else if (keynum == 9) { // Tab\n    if (!event.shiftKey) { // Tab\n      buttons = this._getVisibleButtons();\n      targetIndex = buttons.indexOf(target);\n      if (targetIndex == buttons.length - 1) {\n        // move to first button\n        buttons[0].focus();\n        handled = true;\n      }\n    }\n    else { // Shift+Tab\n      buttons = this._getVisibleButtons();\n      targetIndex = buttons.indexOf(target);\n      if (targetIndex == 0) {\n        // move to last button\n        buttons[buttons.length - 1].focus();\n        handled = true;\n      }\n    }\n  }\n  else if (keynum == 37) { // Arrow Left\n    if (target.className == 'jsoneditor-expand') {\n      buttons = this._getVisibleButtons();\n      targetIndex = buttons.indexOf(target);\n      prevButton = buttons[targetIndex - 1];\n      if (prevButton) {\n        prevButton.focus();\n      }\n    }\n    handled = true;\n  }\n  else if (keynum == 38) { // Arrow Up\n    buttons = this._getVisibleButtons();\n    targetIndex = buttons.indexOf(target);\n    prevButton = buttons[targetIndex - 1];\n    if (prevButton && prevButton.className == 'jsoneditor-expand') {\n      // skip expand button\n      prevButton = buttons[targetIndex - 2];\n    }\n    if (!prevButton) {\n      // move to last button\n      prevButton = buttons[buttons.length - 1];\n    }\n    if (prevButton) {\n      prevButton.focus();\n    }\n    handled = true;\n  }\n  else if (keynum == 39) { // Arrow Right\n    buttons = this._getVisibleButtons();\n    targetIndex = buttons.indexOf(target);\n    nextButton = buttons[targetIndex + 1];\n    if (nextButton && nextButton.className == 'jsoneditor-expand') {\n      nextButton.focus();\n    }\n    handled = true;\n  }\n  else if (keynum == 40) { // Arrow Down\n    buttons = this._getVisibleButtons();\n    targetIndex = buttons.indexOf(target);\n    nextButton = buttons[targetIndex + 1];\n    if (nextButton && nextButton.className == 'jsoneditor-expand') {\n      // skip expand button\n      nextButton = buttons[targetIndex + 2];\n    }\n    if (!nextButton) {\n      // move to first button\n      nextButton = buttons[0];\n    }\n    if (nextButton) {\n      nextButton.focus();\n      handled = true;\n    }\n    handled = true;\n  }\n  // TODO: arrow left and right\n\n  if (handled) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n};\n\nmodule.exports = ContextMenu;\n","(function(exports) {\n  \"use strict\";\n\n  function isArray(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    } else {\n      return false;\n    }\n  }\n\n  function isObject(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Object]\";\n    } else {\n      return false;\n    }\n  }\n\n  function strictDeepEqual(first, second) {\n    // Check the scalar case first.\n    if (first === second) {\n      return true;\n    }\n\n    // Check if they are the same type.\n    var firstType = Object.prototype.toString.call(first);\n    if (firstType !== Object.prototype.toString.call(second)) {\n      return false;\n    }\n    // We know that first and second have the same type so we can just check the\n    // first type from now on.\n    if (isArray(first) === true) {\n      // Short circuit if they're not the same length;\n      if (first.length !== second.length) {\n        return false;\n      }\n      for (var i = 0; i < first.length; i++) {\n        if (strictDeepEqual(first[i], second[i]) === false) {\n          return false;\n        }\n      }\n      return true;\n    }\n    if (isObject(first) === true) {\n      // An object is equal if it has the same key/value pairs.\n      var keysSeen = {};\n      for (var key in first) {\n        if (hasOwnProperty.call(first, key)) {\n          if (strictDeepEqual(first[key], second[key]) === false) {\n            return false;\n          }\n          keysSeen[key] = true;\n        }\n      }\n      // Now check that there aren't any keys in second that weren't\n      // in first.\n      for (var key2 in second) {\n        if (hasOwnProperty.call(second, key2)) {\n          if (keysSeen[key2] !== true) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function isFalse(obj) {\n    // From the spec:\n    // A false value corresponds to the following values:\n    // Empty list\n    // Empty object\n    // Empty string\n    // False boolean\n    // null value\n\n    // First check the scalar values.\n    if (obj === \"\" || obj === false || obj === null) {\n        return true;\n    } else if (isArray(obj) && obj.length === 0) {\n        // Check for an empty array.\n        return true;\n    } else if (isObject(obj)) {\n        // Check for an empty object.\n        for (var key in obj) {\n            // If there are any keys, then\n            // the object is not empty so the object\n            // is not false.\n            if (obj.hasOwnProperty(key)) {\n              return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n  }\n\n  function objValues(obj) {\n    var keys = Object.keys(obj);\n    var values = [];\n    for (var i = 0; i < keys.length; i++) {\n      values.push(obj[keys[i]]);\n    }\n    return values;\n  }\n\n  function merge(a, b) {\n      var merged = {};\n      for (var key in a) {\n          merged[key] = a[key];\n      }\n      for (var key2 in b) {\n          merged[key2] = b[key2];\n      }\n      return merged;\n  }\n\n  var trimLeft;\n  if (typeof String.prototype.trimLeft === \"function\") {\n    trimLeft = function(str) {\n      return str.trimLeft();\n    };\n  } else {\n    trimLeft = function(str) {\n      return str.match(/^\\s*(.*)/)[1];\n    };\n  }\n\n  // Type constants used to define functions.\n  var TYPE_NUMBER = 0;\n  var TYPE_ANY = 1;\n  var TYPE_STRING = 2;\n  var TYPE_ARRAY = 3;\n  var TYPE_OBJECT = 4;\n  var TYPE_BOOLEAN = 5;\n  var TYPE_EXPREF = 6;\n  var TYPE_NULL = 7;\n  var TYPE_ARRAY_NUMBER = 8;\n  var TYPE_ARRAY_STRING = 9;\n\n  var TOK_EOF = \"EOF\";\n  var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n  var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n  var TOK_RBRACKET = \"Rbracket\";\n  var TOK_RPAREN = \"Rparen\";\n  var TOK_COMMA = \"Comma\";\n  var TOK_COLON = \"Colon\";\n  var TOK_RBRACE = \"Rbrace\";\n  var TOK_NUMBER = \"Number\";\n  var TOK_CURRENT = \"Current\";\n  var TOK_EXPREF = \"Expref\";\n  var TOK_PIPE = \"Pipe\";\n  var TOK_OR = \"Or\";\n  var TOK_AND = \"And\";\n  var TOK_EQ = \"EQ\";\n  var TOK_GT = \"GT\";\n  var TOK_LT = \"LT\";\n  var TOK_GTE = \"GTE\";\n  var TOK_LTE = \"LTE\";\n  var TOK_NE = \"NE\";\n  var TOK_FLATTEN = \"Flatten\";\n  var TOK_STAR = \"Star\";\n  var TOK_FILTER = \"Filter\";\n  var TOK_DOT = \"Dot\";\n  var TOK_NOT = \"Not\";\n  var TOK_LBRACE = \"Lbrace\";\n  var TOK_LBRACKET = \"Lbracket\";\n  var TOK_LPAREN= \"Lparen\";\n  var TOK_LITERAL= \"Literal\";\n\n  // The \"&\", \"[\", \"<\", \">\" tokens\n  // are not in basicToken because\n  // there are two token variants\n  // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n  // below.\n\n  var basicTokens = {\n    \".\": TOK_DOT,\n    \"*\": TOK_STAR,\n    \",\": TOK_COMMA,\n    \":\": TOK_COLON,\n    \"{\": TOK_LBRACE,\n    \"}\": TOK_RBRACE,\n    \"]\": TOK_RBRACKET,\n    \"(\": TOK_LPAREN,\n    \")\": TOK_RPAREN,\n    \"@\": TOK_CURRENT\n  };\n\n  var operatorStartToken = {\n      \"<\": true,\n      \">\": true,\n      \"=\": true,\n      \"!\": true\n  };\n\n  var skipChars = {\n      \" \": true,\n      \"\\t\": true,\n      \"\\n\": true\n  };\n\n\n  function isAlpha(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             ch === \"_\";\n  }\n\n  function isNum(ch) {\n      return (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"-\";\n  }\n  function isAlphaNum(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"_\";\n  }\n\n  function Lexer() {\n  }\n  Lexer.prototype = {\n      tokenize: function(stream) {\n          var tokens = [];\n          this._current = 0;\n          var start;\n          var identifier;\n          var token;\n          while (this._current < stream.length) {\n              if (isAlpha(stream[this._current])) {\n                  start = this._current;\n                  identifier = this._consumeUnquotedIdentifier(stream);\n                  tokens.push({type: TOK_UNQUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (basicTokens[stream[this._current]] !== undefined) {\n                  tokens.push({type: basicTokens[stream[this._current]],\n                              value: stream[this._current],\n                              start: this._current});\n                  this._current++;\n              } else if (isNum(stream[this._current])) {\n                  token = this._consumeNumber(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"[\") {\n                  // No need to increment this._current.  This happens\n                  // in _consumeLBracket\n                  token = this._consumeLBracket(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"\\\"\") {\n                  start = this._current;\n                  identifier = this._consumeQuotedIdentifier(stream);\n                  tokens.push({type: TOK_QUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"'\") {\n                  start = this._current;\n                  identifier = this._consumeRawStringLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"`\") {\n                  start = this._current;\n                  var literal = this._consumeLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: literal,\n                               start: start});\n              } else if (operatorStartToken[stream[this._current]] !== undefined) {\n                  tokens.push(this._consumeOperator(stream));\n              } else if (skipChars[stream[this._current]] !== undefined) {\n                  // Ignore whitespace.\n                  this._current++;\n              } else if (stream[this._current] === \"&\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"&\") {\n                      this._current++;\n                      tokens.push({type: TOK_AND, value: \"&&\", start: start});\n                  } else {\n                      tokens.push({type: TOK_EXPREF, value: \"&\", start: start});\n                  }\n              } else if (stream[this._current] === \"|\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"|\") {\n                      this._current++;\n                      tokens.push({type: TOK_OR, value: \"||\", start: start});\n                  } else {\n                      tokens.push({type: TOK_PIPE, value: \"|\", start: start});\n                  }\n              } else {\n                  var error = new Error(\"Unknown character:\" + stream[this._current]);\n                  error.name = \"LexerError\";\n                  throw error;\n              }\n          }\n          return tokens;\n      },\n\n      _consumeUnquotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n              this._current++;\n          }\n          return stream.slice(start, this._current);\n      },\n\n      _consumeQuotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n              // You can escape a double quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"\\\"\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          return JSON.parse(stream.slice(start, this._current));\n      },\n\n      _consumeRawStringLiteral: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"'\" && this._current < maxLength) {\n              // You can escape a single quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"'\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          var literal = stream.slice(start + 1, this._current - 1);\n          return literal.replace(\"\\\\'\", \"'\");\n      },\n\n      _consumeNumber: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (isNum(stream[this._current]) && this._current < maxLength) {\n              this._current++;\n          }\n          var value = parseInt(stream.slice(start, this._current));\n          return {type: TOK_NUMBER, value: value, start: start};\n      },\n\n      _consumeLBracket: function(stream) {\n          var start = this._current;\n          this._current++;\n          if (stream[this._current] === \"?\") {\n              this._current++;\n              return {type: TOK_FILTER, value: \"[?\", start: start};\n          } else if (stream[this._current] === \"]\") {\n              this._current++;\n              return {type: TOK_FLATTEN, value: \"[]\", start: start};\n          } else {\n              return {type: TOK_LBRACKET, value: \"[\", start: start};\n          }\n      },\n\n      _consumeOperator: function(stream) {\n          var start = this._current;\n          var startingChar = stream[start];\n          this._current++;\n          if (startingChar === \"!\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_NE, value: \"!=\", start: start};\n              } else {\n                return {type: TOK_NOT, value: \"!\", start: start};\n              }\n          } else if (startingChar === \"<\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_LTE, value: \"<=\", start: start};\n              } else {\n                  return {type: TOK_LT, value: \"<\", start: start};\n              }\n          } else if (startingChar === \">\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_GTE, value: \">=\", start: start};\n              } else {\n                  return {type: TOK_GT, value: \">\", start: start};\n              }\n          } else if (startingChar === \"=\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_EQ, value: \"==\", start: start};\n              }\n          }\n      },\n\n      _consumeLiteral: function(stream) {\n          this._current++;\n          var start = this._current;\n          var maxLength = stream.length;\n          var literal;\n          while(stream[this._current] !== \"`\" && this._current < maxLength) {\n              // You can escape a literal char or you can escape the escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"`\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          var literalString = trimLeft(stream.slice(start, this._current));\n          literalString = literalString.replace(\"\\\\`\", \"`\");\n          if (this._looksLikeJSON(literalString)) {\n              literal = JSON.parse(literalString);\n          } else {\n              // Try to JSON parse it as \"<literal>\"\n              literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n          }\n          // +1 gets us to the ending \"`\", +1 to move on to the next char.\n          this._current++;\n          return literal;\n      },\n\n      _looksLikeJSON: function(literalString) {\n          var startingChars = \"[{\\\"\";\n          var jsonLiterals = [\"true\", \"false\", \"null\"];\n          var numberLooking = \"-0123456789\";\n\n          if (literalString === \"\") {\n              return false;\n          } else if (startingChars.indexOf(literalString[0]) >= 0) {\n              return true;\n          } else if (jsonLiterals.indexOf(literalString) >= 0) {\n              return true;\n          } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n              try {\n                  JSON.parse(literalString);\n                  return true;\n              } catch (ex) {\n                  return false;\n              }\n          } else {\n              return false;\n          }\n      }\n  };\n\n      var bindingPower = {};\n      bindingPower[TOK_EOF] = 0;\n      bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_RBRACKET] = 0;\n      bindingPower[TOK_RPAREN] = 0;\n      bindingPower[TOK_COMMA] = 0;\n      bindingPower[TOK_RBRACE] = 0;\n      bindingPower[TOK_NUMBER] = 0;\n      bindingPower[TOK_CURRENT] = 0;\n      bindingPower[TOK_EXPREF] = 0;\n      bindingPower[TOK_PIPE] = 1;\n      bindingPower[TOK_OR] = 2;\n      bindingPower[TOK_AND] = 3;\n      bindingPower[TOK_EQ] = 5;\n      bindingPower[TOK_GT] = 5;\n      bindingPower[TOK_LT] = 5;\n      bindingPower[TOK_GTE] = 5;\n      bindingPower[TOK_LTE] = 5;\n      bindingPower[TOK_NE] = 5;\n      bindingPower[TOK_FLATTEN] = 9;\n      bindingPower[TOK_STAR] = 20;\n      bindingPower[TOK_FILTER] = 21;\n      bindingPower[TOK_DOT] = 40;\n      bindingPower[TOK_NOT] = 45;\n      bindingPower[TOK_LBRACE] = 50;\n      bindingPower[TOK_LBRACKET] = 55;\n      bindingPower[TOK_LPAREN] = 60;\n\n  function Parser() {\n  }\n\n  Parser.prototype = {\n      parse: function(expression) {\n          this._loadTokens(expression);\n          this.index = 0;\n          var ast = this.expression(0);\n          if (this._lookahead(0) !== TOK_EOF) {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\n                  \"Unexpected token type: \" + t.type + \", value: \" + t.value);\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return ast;\n      },\n\n      _loadTokens: function(expression) {\n          var lexer = new Lexer();\n          var tokens = lexer.tokenize(expression);\n          tokens.push({type: TOK_EOF, value: \"\", start: expression.length});\n          this.tokens = tokens;\n      },\n\n      expression: function(rbp) {\n          var leftToken = this._lookaheadToken(0);\n          this._advance();\n          var left = this.nud(leftToken);\n          var currentToken = this._lookahead(0);\n          while (rbp < bindingPower[currentToken]) {\n              this._advance();\n              left = this.led(currentToken, left);\n              currentToken = this._lookahead(0);\n          }\n          return left;\n      },\n\n      _lookahead: function(number) {\n          return this.tokens[this.index + number].type;\n      },\n\n      _lookaheadToken: function(number) {\n          return this.tokens[this.index + number];\n      },\n\n      _advance: function() {\n          this.index++;\n      },\n\n      nud: function(token) {\n        var left;\n        var right;\n        var expression;\n        switch (token.type) {\n          case TOK_LITERAL:\n            return {type: \"Literal\", value: token.value};\n          case TOK_UNQUOTEDIDENTIFIER:\n            return {type: \"Field\", name: token.value};\n          case TOK_QUOTEDIDENTIFIER:\n            var node = {type: \"Field\", name: token.value};\n            if (this._lookahead(0) === TOK_LPAREN) {\n                throw new Error(\"Quoted identifier not allowed for function names.\");\n            } else {\n                return node;\n            }\n            break;\n          case TOK_NOT:\n            right = this.expression(bindingPower.Not);\n            return {type: \"NotExpression\", children: [right]};\n          case TOK_STAR:\n            left = {type: \"Identity\"};\n            right = null;\n            if (this._lookahead(0) === TOK_RBRACKET) {\n                // This can happen in a multiselect,\n                // [a, b, *]\n                right = {type: \"Identity\"};\n            } else {\n                right = this._parseProjectionRHS(bindingPower.Star);\n            }\n            return {type: \"ValueProjection\", children: [left, right]};\n          case TOK_FILTER:\n            return this.led(token.type, {type: \"Identity\"});\n          case TOK_LBRACE:\n            return this._parseMultiselectHash();\n          case TOK_FLATTEN:\n            left = {type: TOK_FLATTEN, children: [{type: \"Identity\"}]};\n            right = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [left, right]};\n          case TOK_LBRACKET:\n            if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice({type: \"Identity\"}, right);\n            } else if (this._lookahead(0) === TOK_STAR &&\n                       this._lookahead(1) === TOK_RBRACKET) {\n                this._advance();\n                this._advance();\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\",\n                        children: [{type: \"Identity\"}, right]};\n            } else {\n                return this._parseMultiselectList();\n            }\n            break;\n          case TOK_CURRENT:\n            return {type: TOK_CURRENT};\n          case TOK_EXPREF:\n            expression = this.expression(bindingPower.Expref);\n            return {type: \"ExpressionReference\", children: [expression]};\n          case TOK_LPAREN:\n            var args = [];\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            return args[0];\n          default:\n            this._errorToken(token);\n        }\n      },\n\n      led: function(tokenName, left) {\n        var right;\n        switch(tokenName) {\n          case TOK_DOT:\n            var rbp = bindingPower.Dot;\n            if (this._lookahead(0) !== TOK_STAR) {\n                right = this._parseDotRHS(rbp);\n                return {type: \"Subexpression\", children: [left, right]};\n            } else {\n                // Creating a projection.\n                this._advance();\n                right = this._parseProjectionRHS(rbp);\n                return {type: \"ValueProjection\", children: [left, right]};\n            }\n            break;\n          case TOK_PIPE:\n            right = this.expression(bindingPower.Pipe);\n            return {type: TOK_PIPE, children: [left, right]};\n          case TOK_OR:\n            right = this.expression(bindingPower.Or);\n            return {type: \"OrExpression\", children: [left, right]};\n          case TOK_AND:\n            right = this.expression(bindingPower.And);\n            return {type: \"AndExpression\", children: [left, right]};\n          case TOK_LPAREN:\n            var name = left.name;\n            var args = [];\n            var expression, node;\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              if (this._lookahead(0) === TOK_COMMA) {\n                this._match(TOK_COMMA);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            node = {type: \"Function\", name: name, children: args};\n            return node;\n          case TOK_FILTER:\n            var condition = this.expression(0);\n            this._match(TOK_RBRACKET);\n            if (this._lookahead(0) === TOK_FLATTEN) {\n              right = {type: \"Identity\"};\n            } else {\n              right = this._parseProjectionRHS(bindingPower.Filter);\n            }\n            return {type: \"FilterProjection\", children: [left, right, condition]};\n          case TOK_FLATTEN:\n            var leftNode = {type: TOK_FLATTEN, children: [left]};\n            var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [leftNode, rightNode]};\n          case TOK_EQ:\n          case TOK_NE:\n          case TOK_GT:\n          case TOK_GTE:\n          case TOK_LT:\n          case TOK_LTE:\n            return this._parseComparator(left, tokenName);\n          case TOK_LBRACKET:\n            var token = this._lookaheadToken(0);\n            if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice(left, right);\n            } else {\n                this._match(TOK_STAR);\n                this._match(TOK_RBRACKET);\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\", children: [left, right]};\n            }\n            break;\n          default:\n            this._errorToken(this._lookaheadToken(0));\n        }\n      },\n\n      _match: function(tokenType) {\n          if (this._lookahead(0) === tokenType) {\n              this._advance();\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n              error.name = \"ParserError\";\n              throw error;\n          }\n      },\n\n      _errorToken: function(token) {\n          var error = new Error(\"Invalid token (\" +\n                                token.type + \"): \\\"\" +\n                                token.value + \"\\\"\");\n          error.name = \"ParserError\";\n          throw error;\n      },\n\n\n      _parseIndexExpression: function() {\n          if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n              return this._parseSliceExpression();\n          } else {\n              var node = {\n                  type: \"Index\",\n                  value: this._lookaheadToken(0).value};\n              this._advance();\n              this._match(TOK_RBRACKET);\n              return node;\n          }\n      },\n\n      _projectIfSlice: function(left, right) {\n          var indexExpr = {type: \"IndexExpression\", children: [left, right]};\n          if (right.type === \"Slice\") {\n              return {\n                  type: \"Projection\",\n                  children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n              };\n          } else {\n              return indexExpr;\n          }\n      },\n\n      _parseSliceExpression: function() {\n          // [start:end:step] where each part is optional, as well as the last\n          // colon.\n          var parts = [null, null, null];\n          var index = 0;\n          var currentToken = this._lookahead(0);\n          while (currentToken !== TOK_RBRACKET && index < 3) {\n              if (currentToken === TOK_COLON) {\n                  index++;\n                  this._advance();\n              } else if (currentToken === TOK_NUMBER) {\n                  parts[index] = this._lookaheadToken(0).value;\n                  this._advance();\n              } else {\n                  var t = this._lookahead(0);\n                  var error = new Error(\"Syntax error, unexpected token: \" +\n                                        t.value + \"(\" + t.type + \")\");\n                  error.name = \"Parsererror\";\n                  throw error;\n              }\n              currentToken = this._lookahead(0);\n          }\n          this._match(TOK_RBRACKET);\n          return {\n              type: \"Slice\",\n              children: parts\n          };\n      },\n\n      _parseComparator: function(left, comparator) {\n        var right = this.expression(bindingPower[comparator]);\n        return {type: \"Comparator\", name: comparator, children: [left, right]};\n      },\n\n      _parseDotRHS: function(rbp) {\n          var lookahead = this._lookahead(0);\n          var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n          if (exprTokens.indexOf(lookahead) >= 0) {\n              return this.expression(rbp);\n          } else if (lookahead === TOK_LBRACKET) {\n              this._match(TOK_LBRACKET);\n              return this._parseMultiselectList();\n          } else if (lookahead === TOK_LBRACE) {\n              this._match(TOK_LBRACE);\n              return this._parseMultiselectHash();\n          }\n      },\n\n      _parseProjectionRHS: function(rbp) {\n          var right;\n          if (bindingPower[this._lookahead(0)] < 10) {\n              right = {type: \"Identity\"};\n          } else if (this._lookahead(0) === TOK_LBRACKET) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_FILTER) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_DOT) {\n              this._match(TOK_DOT);\n              right = this._parseDotRHS(rbp);\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Sytanx error, unexpected token: \" +\n                                    t.value + \"(\" + t.type + \")\");\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return right;\n      },\n\n      _parseMultiselectList: function() {\n          var expressions = [];\n          while (this._lookahead(0) !== TOK_RBRACKET) {\n              var expression = this.expression(0);\n              expressions.push(expression);\n              if (this._lookahead(0) === TOK_COMMA) {\n                  this._match(TOK_COMMA);\n                  if (this._lookahead(0) === TOK_RBRACKET) {\n                    throw new Error(\"Unexpected token Rbracket\");\n                  }\n              }\n          }\n          this._match(TOK_RBRACKET);\n          return {type: \"MultiSelectList\", children: expressions};\n      },\n\n      _parseMultiselectHash: function() {\n        var pairs = [];\n        var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n        var keyToken, keyName, value, node;\n        for (;;) {\n          keyToken = this._lookaheadToken(0);\n          if (identifierTypes.indexOf(keyToken.type) < 0) {\n            throw new Error(\"Expecting an identifier token, got: \" +\n                            keyToken.type);\n          }\n          keyName = keyToken.value;\n          this._advance();\n          this._match(TOK_COLON);\n          value = this.expression(0);\n          node = {type: \"KeyValuePair\", name: keyName, value: value};\n          pairs.push(node);\n          if (this._lookahead(0) === TOK_COMMA) {\n            this._match(TOK_COMMA);\n          } else if (this._lookahead(0) === TOK_RBRACE) {\n            this._match(TOK_RBRACE);\n            break;\n          }\n        }\n        return {type: \"MultiSelectHash\", children: pairs};\n      }\n  };\n\n\n  function TreeInterpreter(runtime) {\n    this.runtime = runtime;\n  }\n\n  TreeInterpreter.prototype = {\n      search: function(node, value) {\n          return this.visit(node, value);\n      },\n\n      visit: function(node, value) {\n          var matched, current, result, first, second, field, left, right, collected, i;\n          switch (node.type) {\n            case \"Field\":\n              if (value === null ) {\n                  return null;\n              } else if (isObject(value)) {\n                  field = value[node.name];\n                  if (field === undefined) {\n                      return null;\n                  } else {\n                      return field;\n                  }\n              } else {\n                return null;\n              }\n              break;\n            case \"Subexpression\":\n              result = this.visit(node.children[0], value);\n              for (i = 1; i < node.children.length; i++) {\n                  result = this.visit(node.children[1], result);\n                  if (result === null) {\n                      return null;\n                  }\n              }\n              return result;\n            case \"IndexExpression\":\n              left = this.visit(node.children[0], value);\n              right = this.visit(node.children[1], left);\n              return right;\n            case \"Index\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var index = node.value;\n              if (index < 0) {\n                index = value.length + index;\n              }\n              result = value[index];\n              if (result === undefined) {\n                result = null;\n              }\n              return result;\n            case \"Slice\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var sliceParams = node.children.slice(0);\n              var computed = this.computeSliceParams(value.length, sliceParams);\n              var start = computed[0];\n              var stop = computed[1];\n              var step = computed[2];\n              result = [];\n              if (step > 0) {\n                  for (i = start; i < stop; i += step) {\n                      result.push(value[i]);\n                  }\n              } else {\n                  for (i = start; i > stop; i += step) {\n                      result.push(value[i]);\n                  }\n              }\n              return result;\n            case \"Projection\":\n              // Evaluate left child.\n              var base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < base.length; i++) {\n                current = this.visit(node.children[1], base[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"ValueProjection\":\n              // Evaluate left child.\n              base = this.visit(node.children[0], value);\n              if (!isObject(base)) {\n                return null;\n              }\n              collected = [];\n              var values = objValues(base);\n              for (i = 0; i < values.length; i++) {\n                current = this.visit(node.children[1], values[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"FilterProjection\":\n              base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              var filtered = [];\n              var finalResults = [];\n              for (i = 0; i < base.length; i++) {\n                matched = this.visit(node.children[2], base[i]);\n                if (!isFalse(matched)) {\n                  filtered.push(base[i]);\n                }\n              }\n              for (var j = 0; j < filtered.length; j++) {\n                current = this.visit(node.children[1], filtered[j]);\n                if (current !== null) {\n                  finalResults.push(current);\n                }\n              }\n              return finalResults;\n            case \"Comparator\":\n              first = this.visit(node.children[0], value);\n              second = this.visit(node.children[1], value);\n              switch(node.name) {\n                case TOK_EQ:\n                  result = strictDeepEqual(first, second);\n                  break;\n                case TOK_NE:\n                  result = !strictDeepEqual(first, second);\n                  break;\n                case TOK_GT:\n                  result = first > second;\n                  break;\n                case TOK_GTE:\n                  result = first >= second;\n                  break;\n                case TOK_LT:\n                  result = first < second;\n                  break;\n                case TOK_LTE:\n                  result = first <= second;\n                  break;\n                default:\n                  throw new Error(\"Unknown comparator: \" + node.name);\n              }\n              return result;\n            case TOK_FLATTEN:\n              var original = this.visit(node.children[0], value);\n              if (!isArray(original)) {\n                return null;\n              }\n              var merged = [];\n              for (i = 0; i < original.length; i++) {\n                current = original[i];\n                if (isArray(current)) {\n                  merged.push.apply(merged, current);\n                } else {\n                  merged.push(current);\n                }\n              }\n              return merged;\n            case \"Identity\":\n              return value;\n            case \"MultiSelectList\":\n              if (value === null) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < node.children.length; i++) {\n                  collected.push(this.visit(node.children[i], value));\n              }\n              return collected;\n            case \"MultiSelectHash\":\n              if (value === null) {\n                return null;\n              }\n              collected = {};\n              var child;\n              for (i = 0; i < node.children.length; i++) {\n                child = node.children[i];\n                collected[child.name] = this.visit(child.value, value);\n              }\n              return collected;\n            case \"OrExpression\":\n              matched = this.visit(node.children[0], value);\n              if (isFalse(matched)) {\n                  matched = this.visit(node.children[1], value);\n              }\n              return matched;\n            case \"AndExpression\":\n              first = this.visit(node.children[0], value);\n\n              if (isFalse(first) === true) {\n                return first;\n              }\n              return this.visit(node.children[1], value);\n            case \"NotExpression\":\n              first = this.visit(node.children[0], value);\n              return isFalse(first);\n            case \"Literal\":\n              return node.value;\n            case TOK_PIPE:\n              left = this.visit(node.children[0], value);\n              return this.visit(node.children[1], left);\n            case TOK_CURRENT:\n              return value;\n            case \"Function\":\n              var resolvedArgs = [];\n              for (i = 0; i < node.children.length; i++) {\n                  resolvedArgs.push(this.visit(node.children[i], value));\n              }\n              return this.runtime.callFunction(node.name, resolvedArgs);\n            case \"ExpressionReference\":\n              var refNode = node.children[0];\n              // Tag the node with a specific attribute so the type\n              // checker verify the type.\n              refNode.jmespathType = TOK_EXPREF;\n              return refNode;\n            default:\n              throw new Error(\"Unknown node type: \" + node.type);\n          }\n      },\n\n      computeSliceParams: function(arrayLength, sliceParams) {\n        var start = sliceParams[0];\n        var stop = sliceParams[1];\n        var step = sliceParams[2];\n        var computed = [null, null, null];\n        if (step === null) {\n          step = 1;\n        } else if (step === 0) {\n          var error = new Error(\"Invalid slice, step cannot be 0\");\n          error.name = \"RuntimeError\";\n          throw error;\n        }\n        var stepValueNegative = step < 0 ? true : false;\n\n        if (start === null) {\n            start = stepValueNegative ? arrayLength - 1 : 0;\n        } else {\n            start = this.capSliceRange(arrayLength, start, step);\n        }\n\n        if (stop === null) {\n            stop = stepValueNegative ? -1 : arrayLength;\n        } else {\n            stop = this.capSliceRange(arrayLength, stop, step);\n        }\n        computed[0] = start;\n        computed[1] = stop;\n        computed[2] = step;\n        return computed;\n      },\n\n      capSliceRange: function(arrayLength, actualValue, step) {\n          if (actualValue < 0) {\n              actualValue += arrayLength;\n              if (actualValue < 0) {\n                  actualValue = step < 0 ? -1 : 0;\n              }\n          } else if (actualValue >= arrayLength) {\n              actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n          }\n          return actualValue;\n      }\n\n  };\n\n  function Runtime(interpreter) {\n    this._interpreter = interpreter;\n    this.functionTable = {\n        // name: [function, <signature>]\n        // The <signature> can be:\n        //\n        // {\n        //   args: [[type1, type2], [type1, type2]],\n        //   variadic: true|false\n        // }\n        //\n        // Each arg in the arg list is a list of valid types\n        // (if the function is overloaded and supports multiple\n        // types.  If the type is \"any\" then no type checking\n        // occurs on the argument.  Variadic is optional\n        // and if not provided is assumed to be false.\n        abs: {_func: this._functionAbs, _signature: [{types: [TYPE_NUMBER]}]},\n        avg: {_func: this._functionAvg, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        ceil: {_func: this._functionCeil, _signature: [{types: [TYPE_NUMBER]}]},\n        contains: {\n            _func: this._functionContains,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]},\n                        {types: [TYPE_ANY]}]},\n        \"ends_with\": {\n            _func: this._functionEndsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        floor: {_func: this._functionFloor, _signature: [{types: [TYPE_NUMBER]}]},\n        length: {\n            _func: this._functionLength,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]}]},\n        map: {\n            _func: this._functionMap,\n            _signature: [{types: [TYPE_EXPREF]}, {types: [TYPE_ARRAY]}]},\n        max: {\n            _func: this._functionMax,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"merge\": {\n            _func: this._functionMerge,\n            _signature: [{types: [TYPE_OBJECT], variadic: true}]\n        },\n        \"max_by\": {\n          _func: this._functionMaxBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        sum: {_func: this._functionSum, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        \"starts_with\": {\n            _func: this._functionStartsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        min: {\n            _func: this._functionMin,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"min_by\": {\n          _func: this._functionMinBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        type: {_func: this._functionType, _signature: [{types: [TYPE_ANY]}]},\n        keys: {_func: this._functionKeys, _signature: [{types: [TYPE_OBJECT]}]},\n        values: {_func: this._functionValues, _signature: [{types: [TYPE_OBJECT]}]},\n        sort: {_func: this._functionSort, _signature: [{types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]}]},\n        \"sort_by\": {\n          _func: this._functionSortBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        join: {\n            _func: this._functionJoin,\n            _signature: [\n                {types: [TYPE_STRING]},\n                {types: [TYPE_ARRAY_STRING]}\n            ]\n        },\n        reverse: {\n            _func: this._functionReverse,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]}]},\n        \"to_array\": {_func: this._functionToArray, _signature: [{types: [TYPE_ANY]}]},\n        \"to_string\": {_func: this._functionToString, _signature: [{types: [TYPE_ANY]}]},\n        \"to_number\": {_func: this._functionToNumber, _signature: [{types: [TYPE_ANY]}]},\n        \"not_null\": {\n            _func: this._functionNotNull,\n            _signature: [{types: [TYPE_ANY], variadic: true}]\n        }\n    };\n  }\n\n  Runtime.prototype = {\n    callFunction: function(name, resolvedArgs) {\n      var functionEntry = this.functionTable[name];\n      if (functionEntry === undefined) {\n          throw new Error(\"Unknown function: \" + name + \"()\");\n      }\n      this._validateArgs(name, resolvedArgs, functionEntry._signature);\n      return functionEntry._func.call(this, resolvedArgs);\n    },\n\n    _validateArgs: function(name, args, signature) {\n        // Validating the args requires validating\n        // the correct arity and the correct type of each arg.\n        // If the last argument is declared as variadic, then we need\n        // a minimum number of args to be required.  Otherwise it has to\n        // be an exact amount.\n        var pluralized;\n        if (signature[signature.length - 1].variadic) {\n            if (args.length < signature.length) {\n                pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n                throw new Error(\"ArgumentError: \" + name + \"() \" +\n                                \"takes at least\" + signature.length + pluralized +\n                                \" but received \" + args.length);\n            }\n        } else if (args.length !== signature.length) {\n            pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n            throw new Error(\"ArgumentError: \" + name + \"() \" +\n                            \"takes \" + signature.length + pluralized +\n                            \" but received \" + args.length);\n        }\n        var currentSpec;\n        var actualType;\n        var typeMatched;\n        for (var i = 0; i < signature.length; i++) {\n            typeMatched = false;\n            currentSpec = signature[i].types;\n            actualType = this._getTypeName(args[i]);\n            for (var j = 0; j < currentSpec.length; j++) {\n                if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n                    typeMatched = true;\n                    break;\n                }\n            }\n            if (!typeMatched) {\n                throw new Error(\"TypeError: \" + name + \"() \" +\n                                \"expected argument \" + (i + 1) +\n                                \" to be type \" + currentSpec +\n                                \" but received type \" + actualType +\n                                \" instead.\");\n            }\n        }\n    },\n\n    _typeMatches: function(actual, expected, argValue) {\n        if (expected === TYPE_ANY) {\n            return true;\n        }\n        if (expected === TYPE_ARRAY_STRING ||\n            expected === TYPE_ARRAY_NUMBER ||\n            expected === TYPE_ARRAY) {\n            // The expected type can either just be array,\n            // or it can require a specific subtype (array of numbers).\n            //\n            // The simplest case is if \"array\" with no subtype is specified.\n            if (expected === TYPE_ARRAY) {\n                return actual === TYPE_ARRAY;\n            } else if (actual === TYPE_ARRAY) {\n                // Otherwise we need to check subtypes.\n                // I think this has potential to be improved.\n                var subtype;\n                if (expected === TYPE_ARRAY_NUMBER) {\n                  subtype = TYPE_NUMBER;\n                } else if (expected === TYPE_ARRAY_STRING) {\n                  subtype = TYPE_STRING;\n                }\n                for (var i = 0; i < argValue.length; i++) {\n                    if (!this._typeMatches(\n                            this._getTypeName(argValue[i]), subtype,\n                                             argValue[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        } else {\n            return actual === expected;\n        }\n    },\n    _getTypeName: function(obj) {\n        switch (Object.prototype.toString.call(obj)) {\n            case \"[object String]\":\n              return TYPE_STRING;\n            case \"[object Number]\":\n              return TYPE_NUMBER;\n            case \"[object Array]\":\n              return TYPE_ARRAY;\n            case \"[object Boolean]\":\n              return TYPE_BOOLEAN;\n            case \"[object Null]\":\n              return TYPE_NULL;\n            case \"[object Object]\":\n              // Check if it's an expref.  If it has, it's been\n              // tagged with a jmespathType attr of 'Expref';\n              if (obj.jmespathType === TOK_EXPREF) {\n                return TYPE_EXPREF;\n              } else {\n                return TYPE_OBJECT;\n              }\n        }\n    },\n\n    _functionStartsWith: function(resolvedArgs) {\n        return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n    },\n\n    _functionEndsWith: function(resolvedArgs) {\n        var searchStr = resolvedArgs[0];\n        var suffix = resolvedArgs[1];\n        return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n    },\n\n    _functionReverse: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        if (typeName === TYPE_STRING) {\n          var originalStr = resolvedArgs[0];\n          var reversedStr = \"\";\n          for (var i = originalStr.length - 1; i >= 0; i--) {\n              reversedStr += originalStr[i];\n          }\n          return reversedStr;\n        } else {\n          var reversedArray = resolvedArgs[0].slice(0);\n          reversedArray.reverse();\n          return reversedArray;\n        }\n    },\n\n    _functionAbs: function(resolvedArgs) {\n      return Math.abs(resolvedArgs[0]);\n    },\n\n    _functionCeil: function(resolvedArgs) {\n        return Math.ceil(resolvedArgs[0]);\n    },\n\n    _functionAvg: function(resolvedArgs) {\n        var sum = 0;\n        var inputArray = resolvedArgs[0];\n        for (var i = 0; i < inputArray.length; i++) {\n            sum += inputArray[i];\n        }\n        return sum / inputArray.length;\n    },\n\n    _functionContains: function(resolvedArgs) {\n        return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n    },\n\n    _functionFloor: function(resolvedArgs) {\n        return Math.floor(resolvedArgs[0]);\n    },\n\n    _functionLength: function(resolvedArgs) {\n       if (!isObject(resolvedArgs[0])) {\n         return resolvedArgs[0].length;\n       } else {\n         // As far as I can tell, there's no way to get the length\n         // of an object without O(n) iteration through the object.\n         return Object.keys(resolvedArgs[0]).length;\n       }\n    },\n\n    _functionMap: function(resolvedArgs) {\n      var mapped = [];\n      var interpreter = this._interpreter;\n      var exprefNode = resolvedArgs[0];\n      var elements = resolvedArgs[1];\n      for (var i = 0; i < elements.length; i++) {\n          mapped.push(interpreter.visit(exprefNode, elements[i]));\n      }\n      return mapped;\n    },\n\n    _functionMerge: function(resolvedArgs) {\n      var merged = {};\n      for (var i = 0; i < resolvedArgs.length; i++) {\n        var current = resolvedArgs[i];\n        for (var key in current) {\n          merged[key] = current[key];\n        }\n      }\n      return merged;\n    },\n\n    _functionMax: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.max.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var maxElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (maxElement.localeCompare(elements[i]) < 0) {\n                  maxElement = elements[i];\n              }\n          }\n          return maxElement;\n        }\n      } else {\n          return null;\n      }\n    },\n\n    _functionMin: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.min.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var minElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (elements[i].localeCompare(minElement) < 0) {\n                  minElement = elements[i];\n              }\n          }\n          return minElement;\n        }\n      } else {\n        return null;\n      }\n    },\n\n    _functionSum: function(resolvedArgs) {\n      var sum = 0;\n      var listToSum = resolvedArgs[0];\n      for (var i = 0; i < listToSum.length; i++) {\n        sum += listToSum[i];\n      }\n      return sum;\n    },\n\n    _functionType: function(resolvedArgs) {\n        switch (this._getTypeName(resolvedArgs[0])) {\n          case TYPE_NUMBER:\n            return \"number\";\n          case TYPE_STRING:\n            return \"string\";\n          case TYPE_ARRAY:\n            return \"array\";\n          case TYPE_OBJECT:\n            return \"object\";\n          case TYPE_BOOLEAN:\n            return \"boolean\";\n          case TYPE_EXPREF:\n            return \"expref\";\n          case TYPE_NULL:\n            return \"null\";\n        }\n    },\n\n    _functionKeys: function(resolvedArgs) {\n        return Object.keys(resolvedArgs[0]);\n    },\n\n    _functionValues: function(resolvedArgs) {\n        var obj = resolvedArgs[0];\n        var keys = Object.keys(obj);\n        var values = [];\n        for (var i = 0; i < keys.length; i++) {\n            values.push(obj[keys[i]]);\n        }\n        return values;\n    },\n\n    _functionJoin: function(resolvedArgs) {\n        var joinChar = resolvedArgs[0];\n        var listJoin = resolvedArgs[1];\n        return listJoin.join(joinChar);\n    },\n\n    _functionToArray: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n            return resolvedArgs[0];\n        } else {\n            return [resolvedArgs[0]];\n        }\n    },\n\n    _functionToString: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n            return resolvedArgs[0];\n        } else {\n            return JSON.stringify(resolvedArgs[0]);\n        }\n    },\n\n    _functionToNumber: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        var convertedValue;\n        if (typeName === TYPE_NUMBER) {\n            return resolvedArgs[0];\n        } else if (typeName === TYPE_STRING) {\n            convertedValue = +resolvedArgs[0];\n            if (!isNaN(convertedValue)) {\n                return convertedValue;\n            }\n        }\n        return null;\n    },\n\n    _functionNotNull: function(resolvedArgs) {\n        for (var i = 0; i < resolvedArgs.length; i++) {\n            if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n                return resolvedArgs[i];\n            }\n        }\n        return null;\n    },\n\n    _functionSort: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        sortedArray.sort();\n        return sortedArray;\n    },\n\n    _functionSortBy: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        if (sortedArray.length === 0) {\n            return sortedArray;\n        }\n        var interpreter = this._interpreter;\n        var exprefNode = resolvedArgs[1];\n        var requiredType = this._getTypeName(\n            interpreter.visit(exprefNode, sortedArray[0]));\n        if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n            throw new Error(\"TypeError\");\n        }\n        var that = this;\n        // In order to get a stable sort out of an unstable\n        // sort algorithm, we decorate/sort/undecorate (DSU)\n        // by creating a new list of [index, element] pairs.\n        // In the cmp function, if the evaluated elements are\n        // equal, then the index will be used as the tiebreaker.\n        // After the decorated list has been sorted, it will be\n        // undecorated to extract the original elements.\n        var decorated = [];\n        for (var i = 0; i < sortedArray.length; i++) {\n          decorated.push([i, sortedArray[i]]);\n        }\n        decorated.sort(function(a, b) {\n          var exprA = interpreter.visit(exprefNode, a[1]);\n          var exprB = interpreter.visit(exprefNode, b[1]);\n          if (that._getTypeName(exprA) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprA));\n          } else if (that._getTypeName(exprB) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprB));\n          }\n          if (exprA > exprB) {\n            return 1;\n          } else if (exprA < exprB) {\n            return -1;\n          } else {\n            // If they're equal compare the items by their\n            // order to maintain relative order of equal keys\n            // (i.e. to get a stable sort).\n            return a[0] - b[0];\n          }\n        });\n        // Undecorate: extract out the original list elements.\n        for (var j = 0; j < decorated.length; j++) {\n          sortedArray[j] = decorated[j][1];\n        }\n        return sortedArray;\n    },\n\n    _functionMaxBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var maxNumber = -Infinity;\n      var maxRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current > maxNumber) {\n          maxNumber = current;\n          maxRecord = resolvedArray[i];\n        }\n      }\n      return maxRecord;\n    },\n\n    _functionMinBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var minNumber = Infinity;\n      var minRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current < minNumber) {\n          minNumber = current;\n          minRecord = resolvedArray[i];\n        }\n      }\n      return minRecord;\n    },\n\n    createKeyFunction: function(exprefNode, allowedTypes) {\n      var that = this;\n      var interpreter = this._interpreter;\n      var keyFunc = function(x) {\n        var current = interpreter.visit(exprefNode, x);\n        if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n          var msg = \"TypeError: expected one of \" + allowedTypes +\n                    \", received \" + that._getTypeName(current);\n          throw new Error(msg);\n        }\n        return current;\n      };\n      return keyFunc;\n    }\n\n  };\n\n  function compile(stream) {\n    var parser = new Parser();\n    var ast = parser.parse(stream);\n    return ast;\n  }\n\n  function tokenize(stream) {\n      var lexer = new Lexer();\n      return lexer.tokenize(stream);\n  }\n\n  function search(data, expression) {\n      var parser = new Parser();\n      // This needs to be improved.  Both the interpreter and runtime depend on\n      // each other.  The runtime needs the interpreter to support exprefs.\n      // There's likely a clean way to avoid the cyclic dependency.\n      var runtime = new Runtime();\n      var interpreter = new TreeInterpreter(runtime);\n      runtime._interpreter = interpreter;\n      var node = parser.parse(expression);\n      return interpreter.search(node, data);\n  }\n\n  exports.tokenize = tokenize;\n  exports.compile = compile;\n  exports.search = search;\n  exports.strictDeepEqual = strictDeepEqual;\n})(typeof exports === \"undefined\" ? this.jmespath = {} : exports);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","/*!\n * drag-tracker v1.0.0\n * https://github.com/Sphinxxxx/drag-tracker#readme\n *\n * Copyright 2017-2018 Andreas Borgen\n * Released under the MIT license.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.dragTracker = factory());\n}(this, (function () { 'use strict';\n\nvar root = window;\n\nfunction dragTracker(options) {\n\n\n    var ep = Element.prototype;\n    if (!ep.matches) ep.matches = ep.msMatchesSelector || ep.webkitMatchesSelector;\n    if (!ep.closest) ep.closest = function (s) {\n        var node = this;\n        do {\n            if (node.matches(s)) return node;\n            node = node.tagName === 'svg' ? node.parentNode : node.parentElement;\n        } while (node);\n\n        return null;\n    };\n\n    options = options || {};\n    var container = options.container || document.documentElement,\n        selector = options.selector,\n        callback = options.callback || console.log,\n        callbackStart = options.callbackDragStart,\n        callbackEnd = options.callbackDragEnd,\n\n    callbackClick = options.callbackClick,\n        propagate = options.propagateEvents,\n        roundCoords = options.roundCoords !== false,\n        dragOutside = options.dragOutside !== false,\n\n    handleOffset = options.handleOffset || options.handleOffset !== false;\n    var offsetToCenter = null;\n    switch (handleOffset) {\n        case 'center':\n            offsetToCenter = true;break;\n        case 'topleft':\n        case 'top-left':\n            offsetToCenter = false;break;\n    }\n\n    var dragState = void 0;\n\n    function getMousePos(e, elm, offset, stayWithin) {\n        var x = e.clientX,\n            y = e.clientY;\n\n        function respectBounds(value, min, max) {\n            return Math.max(min, Math.min(value, max));\n        }\n\n        if (elm) {\n            var bounds = elm.getBoundingClientRect();\n            x -= bounds.left;\n            y -= bounds.top;\n\n            if (offset) {\n                x -= offset[0];\n                y -= offset[1];\n            }\n            if (stayWithin) {\n                x = respectBounds(x, 0, bounds.width);\n                y = respectBounds(y, 0, bounds.height);\n            }\n\n            if (elm !== container) {\n                var center = offsetToCenter !== null ? offsetToCenter\n                : elm.nodeName === 'circle' || elm.nodeName === 'ellipse';\n\n                if (center) {\n                    x -= bounds.width / 2;\n                    y -= bounds.height / 2;\n                }\n            }\n        }\n        return roundCoords ? [Math.round(x), Math.round(y)] : [x, y];\n    }\n\n    function stopEvent(e) {\n        e.preventDefault();\n        if (!propagate) {\n            e.stopPropagation();\n        }\n    }\n\n    function onDown(e) {\n        var target = void 0;\n        if (selector) {\n            target = selector instanceof Element ? selector.contains(e.target) ? selector : null : e.target.closest(selector);\n        } else {\n            target = {};\n        }\n\n        if (target) {\n            stopEvent(e);\n\n            var mouseOffset = selector && handleOffset ? getMousePos(e, target) : [0, 0],\n                startPos = getMousePos(e, container, mouseOffset);\n            dragState = {\n                target: target,\n                mouseOffset: mouseOffset,\n                startPos: startPos,\n                actuallyDragged: false\n            };\n\n            if (callbackStart) {\n                callbackStart(target, startPos);\n            }\n        }\n    }\n\n    function onMove(e) {\n        if (!dragState) {\n            return;\n        }\n        stopEvent(e);\n\n        var start = dragState.startPos,\n            pos = getMousePos(e, container, dragState.mouseOffset, !dragOutside);\n\n        dragState.actuallyDragged = dragState.actuallyDragged || start[0] !== pos[0] || start[1] !== pos[1];\n\n        callback(dragState.target, pos, start);\n    }\n\n    function onEnd(e, cancelled) {\n        if (!dragState) {\n            return;\n        }\n\n        if (callbackEnd || callbackClick) {\n            var isClick = !dragState.actuallyDragged,\n                pos = isClick ? dragState.startPos : getMousePos(e, container, dragState.mouseOffset, !dragOutside);\n\n            if (callbackClick && isClick && !cancelled) {\n                callbackClick(dragState.target, pos);\n            }\n            if (callbackEnd) {\n                callbackEnd(dragState.target, pos, dragState.startPos, cancelled || isClick && callbackClick);\n            }\n        }\n        dragState = null;\n    }\n\n\n    addEvent(container, 'mousedown', function (e) {\n        if (isLeftButton(e)) {\n            onDown(e);\n        } else {\n            onEnd(e, true);\n        }\n    });\n    addEvent(container, 'touchstart', function (e) {\n        return relayTouch(e, onDown);\n    });\n\n    addEvent(root, 'mousemove', function (e) {\n        if (!dragState) {\n            return;\n        }\n\n        if (isLeftButton(e)) {\n            onMove(e);\n        }\n        else {\n                onEnd(e);\n            }\n    });\n    addEvent(root, 'touchmove', function (e) {\n        return relayTouch(e, onMove);\n    });\n\n    addEvent(container, 'mouseup', function (e) {\n        if (dragState && !isLeftButton(e)) {\n            onEnd(e);\n        }\n    });\n    function onTouchEnd(e, cancelled) {\n        onEnd(tweakTouch(e), cancelled);\n    }\n    addEvent(container, 'touchend', function (e) {\n        return onTouchEnd(e);\n    });\n    addEvent(container, 'touchcancel', function (e) {\n        return onTouchEnd(e, true);\n    });\n\n    function addEvent(target, type, handler) {\n        target.addEventListener(type, handler);\n    }\n    function isLeftButton(e) {\n        return e.buttons !== undefined ? e.buttons === 1 :\n        e.which === 1;\n    }\n    function relayTouch(e, handler) {\n        if (e.touches.length !== 1) {\n            onEnd(e, true);return;\n        }\n\n        handler(tweakTouch(e));\n    }\n    function tweakTouch(e) {\n        var touch = e.targetTouches[0];\n        if (!touch) {\n            touch = e.changedTouches[0];\n        }\n\n        touch.preventDefault = e.preventDefault.bind(e);\n        touch.stopPropagation = e.stopPropagation.bind(e);\n        return touch;\n    }\n}\n\nreturn dragTracker;\n\n})));\n","\n/**\n * slice() reference.\n */\n\nvar slice = Array.prototype.slice;\n\n/**\n * Expose `co`.\n */\n\nmodule.exports = co['default'] = co.co = co;\n\n/**\n * Wrap the given generator `fn` into a\n * function that returns a promise.\n * This is a separate function so that\n * every `co()` call doesn't create a new,\n * unnecessary closure.\n *\n * @param {GeneratorFunction} fn\n * @return {Function}\n * @api public\n */\n\nco.wrap = function (fn) {\n  createPromise.__generatorFunction__ = fn;\n  return createPromise;\n  function createPromise() {\n    return co.call(this, fn.apply(this, arguments));\n  }\n};\n\n/**\n * Execute the generator function or a generator\n * and return a promise.\n *\n * @param {Function} fn\n * @return {Promise}\n * @api public\n */\n\nfunction co(gen) {\n  var ctx = this;\n  var args = slice.call(arguments, 1)\n\n  // we wrap everything in a promise to avoid promise chaining,\n  // which leads to memory leak errors.\n  // see https://github.com/tj/co/issues/180\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.apply(ctx, args);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n\n    onFulfilled();\n\n    /**\n     * @param {Mixed} res\n     * @return {Promise}\n     * @api private\n     */\n\n    function onFulfilled(res) {\n      var ret;\n      try {\n        ret = gen.next(res);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n\n    /**\n     * @param {Error} err\n     * @return {Promise}\n     * @api private\n     */\n\n    function onRejected(err) {\n      var ret;\n      try {\n        ret = gen.throw(err);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n\n    /**\n     * Get the next value in the generator,\n     * return a promise.\n     *\n     * @param {Object} ret\n     * @return {Promise}\n     * @api private\n     */\n\n    function next(ret) {\n      if (ret.done) return resolve(ret.value);\n      var value = toPromise.call(ctx, ret.value);\n      if (value && isPromise(value)) return value.then(onFulfilled, onRejected);\n      return onRejected(new TypeError('You may only yield a function, promise, generator, array, or object, '\n        + 'but the following object was passed: \"' + String(ret.value) + '\"'));\n    }\n  });\n}\n\n/**\n * Convert a `yield`ed value into a promise.\n *\n * @param {Mixed} obj\n * @return {Promise}\n * @api private\n */\n\nfunction toPromise(obj) {\n  if (!obj) return obj;\n  if (isPromise(obj)) return obj;\n  if (isGeneratorFunction(obj) || isGenerator(obj)) return co.call(this, obj);\n  if ('function' == typeof obj) return thunkToPromise.call(this, obj);\n  if (Array.isArray(obj)) return arrayToPromise.call(this, obj);\n  if (isObject(obj)) return objectToPromise.call(this, obj);\n  return obj;\n}\n\n/**\n * Convert a thunk to a promise.\n *\n * @param {Function}\n * @return {Promise}\n * @api private\n */\n\nfunction thunkToPromise(fn) {\n  var ctx = this;\n  return new Promise(function (resolve, reject) {\n    fn.call(ctx, function (err, res) {\n      if (err) return reject(err);\n      if (arguments.length > 2) res = slice.call(arguments, 1);\n      resolve(res);\n    });\n  });\n}\n\n/**\n * Convert an array of \"yieldables\" to a promise.\n * Uses `Promise.all()` internally.\n *\n * @param {Array} obj\n * @return {Promise}\n * @api private\n */\n\nfunction arrayToPromise(obj) {\n  return Promise.all(obj.map(toPromise, this));\n}\n\n/**\n * Convert an object of \"yieldables\" to a promise.\n * Uses `Promise.all()` internally.\n *\n * @param {Object} obj\n * @return {Promise}\n * @api private\n */\n\nfunction objectToPromise(obj){\n  var results = new obj.constructor();\n  var keys = Object.keys(obj);\n  var promises = [];\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var promise = toPromise.call(this, obj[key]);\n    if (promise && isPromise(promise)) defer(promise, key);\n    else results[key] = obj[key];\n  }\n  return Promise.all(promises).then(function () {\n    return results;\n  });\n\n  function defer(promise, key) {\n    // predefine the key in the result\n    results[key] = undefined;\n    promises.push(promise.then(function (res) {\n      results[key] = res;\n    }));\n  }\n}\n\n/**\n * Check if `obj` is a promise.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isPromise(obj) {\n  return 'function' == typeof obj.then;\n}\n\n/**\n * Check if `obj` is a generator.\n *\n * @param {Mixed} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isGenerator(obj) {\n  return 'function' == typeof obj.next && 'function' == typeof obj.throw;\n}\n\n/**\n * Check if `obj` is a generator function.\n *\n * @param {Mixed} obj\n * @return {Boolean}\n * @api private\n */\nfunction isGeneratorFunction(obj) {\n  var constructor = obj.constructor;\n  if (!constructor) return false;\n  if ('GeneratorFunction' === constructor.name || 'GeneratorFunction' === constructor.displayName) return true;\n  return isGenerator(constructor.prototype);\n}\n\n/**\n * Check for plain object.\n *\n * @param {Mixed} val\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(val) {\n  return Object == val.constructor;\n}\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","/*global HTMLElement*/\n\nimport Color from '@sphinxxxx/color-conversion';\nimport dragTracker from 'drag-tracker';\n\n\nconst BG_TRANSP = `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")`;\nconst HUES = 360;\n//We need to use keydown instead of keypress to handle Esc from the editor textbox:\nconst EVENT_KEY = 'keydown', //'keypress'\n      EVENT_CLICK_OUTSIDE = 'mousedown',\n      EVENT_TAB_MOVE = 'focusin';\n\n\nfunction parseHTML(htmlString) {\n    //https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro\n    const div = document.createElement('div');\n    div.innerHTML = htmlString;\n    return div.firstElementChild;\n}\n\nfunction $(selector, context) {\n    return (context || document).querySelector(selector);\n}\n\nfunction addEvent(target, type, handler) {\n    target.addEventListener(type, handler, false);\n}\nfunction stopEvent(e) {\n    //Stop an event from bubbling up to the parent:\n    e.preventDefault();\n    e.stopPropagation();\n}\nfunction onKey(target, keys, handler, stop) {\n    addEvent(target, EVENT_KEY, function(e) {\n        if(keys.indexOf(e.key) >= 0) {\n            if(stop) { stopEvent(e); }\n            handler(e);\n        }\n    });\n}\n\n\n/* Inlined Picker CSS */\nconst _style = document.createElement('style');\n_style.textContent = `.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.layout_default.picker_wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1;width:6rem}.layout_default .picker_editor input{width:calc(100% + 2px);height:calc(100% + 2px)}.layout_default .picker_sample{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.layout_default .picker_done{-webkit-box-ordinal-group:2;-ms-flex-order:1;order:1}.picker_wrapper{-webkit-box-sizing:border-box;box-sizing:border-box;background:#f2f2f2;-webkit-box-shadow:0 0 0 1px silver;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{margin:-1px}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;-webkit-box-shadow:0 0 3px 1px #67b9ff;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);-webkit-box-shadow:0 0 0 1px silver;box-shadow:0 0 0 1px silver}.picker_sl{position:relative;-webkit-box-shadow:0 0 0 1px silver;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;-webkit-box-shadow:0 0 0 1px silver;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{-webkit-box-sizing:border-box;box-sizing:border-box;font-family:monospace;padding:.1em .2em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_done button{-webkit-box-sizing:border-box;box-sizing:border-box;padding:.2em .5em;cursor:pointer}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;-webkit-box-shadow:0 0 10px 1px rgba(0,0,0,0.4);box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;-webkit-box-shadow:none;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}`;\ndocument.documentElement.firstElementChild //<head>, or <body> if there is no <head>\n    .appendChild(_style);\n\n\nclass Picker {\n\n    //https://stackoverflow.com/questions/24214962/whats-the-proper-way-to-document-callbacks-with-jsdoc\n    /**\n     * A callback that gets the picker's current color value.\n     * \n     * @callback Picker~colorCallback\n     * @param {Object} color\n     * @param {number[]} color.rgba       - RGBA color components.\n     * @param {number[]} color.hsla       - HSLA color components (all values between 0 and 1, inclusive).\n     * @param {string}   color.rgbString  - RGB CSS value (e.g. `rgb(255,215,0)`).\n     * @param {string}   color.rgbaString - RGBA CSS value (e.g. `rgba(255,215,0, .5)`).\n     * @param {string}   color.hslString  - HSL CSS value (e.g. `hsl(50.6,100%,50%)`).\n     * @param {string}   color.hslaString - HSLA CSS value (e.g. `hsla(50.6,100%,50%, .5)`).\n     * @param {string}   color.hex        - 8 digit #RRGGBBAA (not supported in all browsers).\n     */\n\n    /**\n     * Create a color picker.\n     * \n     * @example\n     * var picker = new Picker(myParentElement);\n     * picker.onDone = function(color) {\n     *     myParentElement.style.backgroundColor = color.rgbaString;\n     * };\n     * \n     * @example\n     * var picker = new Picker({\n     *     parent: myParentElement,\n     *     color: 'gold',\n     *     onChange: function(color) {\n     *                   myParentElement.style.backgroundColor = color.rgbaString;\n     *               },\n     * });\n     * \n     * @param {Object} options - @see {@linkcode Picker#setOptions|setOptions()}\n     */\n    constructor(options) {\n\n        //Default settings\n        this.settings = {\n            //Allow creating a popup without putting it on screen yet.\n            //  parent: document.body,\n            popup: 'right',\n            layout: 'default',\n            alpha:  true,\n            editor: true,\n            editorFormat: 'hex',\n        };\n\n        //Keep openHandler() pluggable, but call it in the right context:\n        //https://stackoverflow.com/questions/46014034/es6-removeeventlistener-from-arrow-function-oop\n        this._openProxy  = (e) => this.openHandler(e);\n\n        /**\n         * Callback whenever the color changes.\n         * @member {Picker~colorCallback}\n         */\n        this.onChange = null;\n        /**\n         * Callback when the user clicks \"Ok\".\n         * @member {Picker~colorCallback}\n         */\n        this.onDone = null;\n        /**\n         * Callback when the popup opens.\n         * @member {Picker~colorCallback}\n         */\n        this.onOpen = null;\n        /**\n         * Callback when the popup closes.\n         * @member {Picker~colorCallback}\n         */\n        this.onClose = null;\n        \n        this.setOptions(options);\n    }\n\n\n    /**\n     * Set the picker options.\n     * \n     * @param {Object}       options\n     * @param {HTMLElement}  options.parent           - Which element the picker should be attached to.\n     * @param {('top'|'bottom'|'left'|'right'|false)}\n     *                       [options.popup=right]    - If the picker is used as a popup, where to place it relative to the parent. `false` to add the picker as a normal child element of the parent.\n     * @param {string}       [options.template]       - Custom HTML string from which to build the picker. See /src/picker.pug for required elements and class names.\n     * @param {string}       [options.layout=default] - Suffix of a custom \"layout_...\" CSS class to handle the overall arrangement of the picker elements.\n     * @param {boolean}      [options.alpha=true]     - Whether to enable adjusting the alpha channel.\n     * @param {boolean}      [options.editor=true]    - Whether to show a text field for color value editing.\n     * @param {('hex'|'hsl'|'rgb')}\n     *                       [options.editorFormat=hex] - How to display the selected color in the text field (the text field still supports *input* in any format).\n     * @param {string}       [options.color]          - Initial color for the picker.\n     * @param {function}     [options.onChange]       - @see {@linkcode Picker#onChange|onChange}\n     * @param {function}     [options.onDone]         - @see {@linkcode Picker#onDone|onDone}\n     * @param {function}     [options.onOpen]         - @see {@linkcode Picker#onOpen|onOpen}\n     * @param {function}     [options.onClose]        - @see {@linkcode Picker#onClose|onClose}\n     */\n    setOptions(options) {\n        if(!options) { return; }\n        const settings = this.settings;\n\n        function transfer(source, target, skipKeys) {\n            for (const key in source) {\n                if(skipKeys && (skipKeys.indexOf(key) >= 0)) { continue; }\n\n                target[key] = source[key];\n            }\n        }\n\n        if(options instanceof HTMLElement) {\n            settings.parent = options;\n        }\n        else {\n            //const skipKeys = [];\n            //\n            //if(options.popup instanceof Object) {\n            //    transfer(options.popup, settings.popup);\n            //    skipKeys.push('popup');\n            //}\n            \n            /* //TODO: options.layout -> Object\n            {\n                mode: 'hsla',       //'hsla', 'hasl', 'hsl'. Deprecate options.alpha\n                verticalHue: false,\n                verticalAlpha: true,\n                alphaOnSL: false,\n                editor: true,       //Deprecate options.editor\n                css: undefined,     //Same as old options.layout. Default from mode\n                //.template as well?\n            }\n            //*/\n            \n            //New parent?\n            if(settings.parent && options.parent && (settings.parent !== options.parent)) {\n                settings.parent.removeEventListener('click', this._openProxy, false);\n                this._popupInited = false;\n            }\n\n            transfer(options, settings/*, skipKeys*/);\n        \n            //Event callbacks. Hook these up before setColor() below,\n            //because we'll need to fire onChange() if there is a color in the options\n            if(options.onChange) { this.onChange = options.onChange; }\n            if(options.onDone)   { this.onDone   = options.onDone; }\n            if(options.onOpen)   { this.onOpen   = options.onOpen; }\n            if(options.onClose)  { this.onClose  = options.onClose; }\n        \n            //Note: Look for color in 'options', as a color value in 'settings' may be an old one we don't want to revert to.\n            const col = options.color || options.colour;\n            if(col) { this._setColor(col); }\n        }\n        \n        //Init popup behavior once we have all the parts we need:\n        const parent = settings.parent;\n        if(parent && settings.popup && !this._popupInited) {\n\n            addEvent(parent, 'click', this._openProxy);\n\n            //Keyboard navigation: Open on [Space] or [Enter] (but stop the event to avoid typing a \" \" in the editor textbox).\n            //No, don't stop the event, as that would disable normal input behavior (typing a \" \" or clicking the Ok button with [Enter]).\n            //Fix: setTimeout() in openHandler()..\n            //\n            //https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values#Whitespace_keys\n            onKey(parent, [' ', 'Spacebar', 'Enter'], this._openProxy/*, true*/);\n            \n            //This must wait until we have created our DOM..\n            //  addEvent(window, 'mousedown', (e) => this.closeHandler(e));\n            //  addEvent(this._domOkay, 'click', (e) => this.closeHandler(e));\n\n            this._popupInited = true;\n        }\n        else if(options.parent && !settings.popup) {\n            this.show();\n        }\n    }\n\n\n    /**\n     * Default behavior for opening the popup\n     */\n    openHandler(e) {\n        if(this.show()) {\n            //If the parent is an <a href=\"#\"> element, avoid scrolling to the top:\n            e && e.preventDefault();\n            \n            //A trick to avoid re-opening the dialog if you click the parent element while the dialog is open:\n            this.settings.parent.style.pointerEvents = 'none';\n\n            //Recommended popup behavior with keyboard navigation from http://whatsock.com/tsg/Coding%20Arena/Popups/Popup%20(Internal%20Content)/demo.htm\n            //Wait a little before focusing the textbox, in case the dialog was just opened with [Space] (would overwrite the color value with a \" \"):\n            const toFocus = (e && (e.type === EVENT_KEY)) ? this._domEdit : this.domElement;\n            setTimeout(() => toFocus.focus(), 100);\n\n            if(this.onOpen) { this.onOpen(this.colour); }\n        }\n    }\n\n\n    /**\n     * Default behavior for closing the popup\n     */\n    closeHandler(e) {\n        const event = e && e.type;\n        let doHide = false;\n\n        //Close programmatically:\n        if(!e) {\n            doHide = true;\n        }\n        /*\n        //Close by clicking/tabbing outside the popup:\n        else if((event === EVENT_CLICK_OUTSIDE) || (event === EVENT_TAB_MOVE)) {\n        \n            //Note: Now that we have added the 'focusin' event,\n            //this trick requires the picker wrapper to be focusable (via `tabindex` - see /src/picker.pug),\n            //or else the popup loses focus if you click anywhere on the picker's background.\n            if(!this.domElement.contains(e.target)) {\n                doHide = true;\n            }\n        }\n        /**/\n        //Close by mouse/touch or key events:\n        else {\n            //Don't bubble [Ok] clicks or [Enter] keys up to the parent, because that's the trigger to re-open the popup.\n            //However, we do need to propagate the other individual mouse events, or else the editor text box can't be clicked(!)\n            if((event === 'click') || (event === EVENT_KEY)) {\n                stopEvent(e);\n            }\n\n            doHide = true;\n        }\n\n        if(doHide && this.hide()) {\n            this.settings.parent.style.pointerEvents = '';\n\n            //Recommended popup behavior from http://whatsock.com/tsg/Coding%20Arena/Popups/Popup%20(Internal%20Content)/demo.htm\n            //However, we don't re-focus the parent if the user closes the popup by clicking somewhere else on the screen,\n            //because they may have scrolled to a different part of the page by then, and focusing would then inadvertently scroll the parent back into view:\n            if(event !== EVENT_CLICK_OUTSIDE) {\n                this.settings.parent.focus();\n            }\n\n            if(this.onClose) { this.onClose(this.colour); }\n        }\n    }\n\n\n    /**\n     * Move the popup to a different parent, optionally opening it at the same time.\n     *\n     * @param {Object}  options - @see {@linkcode Picker#setOptions|setOptions()} (Usually a new `.parent` and `.color`).\n     * @param {boolean} open    - Whether to open the popup immediately.\n     */\n    movePopup(options, open) {\n        //Cleanup if the popup is currently open (at least revert the current parent's .pointerEvents);\n        this.closeHandler();\n        \n        this.setOptions(options);\n        if(open) {\n            this.openHandler();\n        }\n    }\n\n\n    /**\n     * Set/initialize the picker's color.\n     * \n     * @param {string}  color  - Color name, RGBA/HSLA/HEX string, or RGBA array.\n     * @param {boolean} silent - If true, won't trigger onChange.\n     */\n    setColor(color, silent) {\n        this._setColor(color, { silent: silent });\n    }\n    _setColor(color, flags) {\n        if(typeof color === 'string') { color = color.trim(); }\n        if (!color) { return; }\n\n        flags = flags || {};\n        let c;\n        try {\n            //Will throw on unknown colors:\n            c = new Color(color);\n        }\n        catch (ex) {\n            if(flags.failSilently) { return; }\n            throw ex;\n        }\n\n        if(!this.settings.alpha) {\n            const hsla = c.hsla;\n            hsla[3] = 1;\n            c.hsla = hsla;\n        }\n        this.colour = this.color = c;\n        this._setHSLA(null, null, null, null, flags);\n    }\n    /**\n     * @see {@linkcode Picker#setColor|setColor()}\n     */\n    setColour(colour, silent) {\n        this.setColor(colour, silent);\n    }\n\n\n    /**\n     * Show/open the picker.\n     */\n    show() {\n        const parent = this.settings.parent;\n        if(!parent) { return false; }\n        \n        //Unhide html if it exists\n        if(this.domElement) {\n            const toggled = this._toggleDOM(true);\n\n            //Things could have changed through setOptions():\n            this._setPosition();\n\n            return toggled;\n        }\n\n        const html = this.settings.template || `<div class=\"picker_wrapper\" tabindex=\"-1\"><div class=\"picker_arrow\"></div><div class=\"picker_hue picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_sl\"><div class=\"picker_selector\"></div></div><div class=\"picker_alpha picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_editor\"><input aria-label=\"Type a color name or hex value\"/></div><div class=\"picker_sample\"></div><div class=\"picker_done\"><button>Ok</button></div></div>`;\n        const wrapper = parseHTML(html);\n        \n        this.domElement = wrapper;\n        this._domH      = $('.picker_hue', wrapper);\n        this._domSL     = $('.picker_sl', wrapper);\n        this._domA      = $('.picker_alpha', wrapper);\n        this._domEdit   = $('.picker_editor input', wrapper);\n        this._domSample = $('.picker_sample', wrapper);\n        this._domOkay   = $('.picker_done button', wrapper);\n\n        wrapper.classList.add('layout_' + this.settings.layout);\n        if(!this.settings.alpha) { wrapper.classList.add('no_alpha'); }\n        if(!this.settings.editor) { wrapper.classList.add('no_editor'); }\n        this._ifPopup(() => wrapper.classList.add('popup'));\n        \n        this._setPosition();\n\n\n        if(this.colour) {\n            this._updateUI();\n        }\n        else {\n            this._setColor('#0cf');\n        }\n        this._bindEvents();\n        \n        return true;\n    }\n\n\n    /**\n     * Hide the picker.\n     */\n    hide() {\n        return this._toggleDOM(false);\n    }\n\n\n    /*\n     * Handle user input.\n     * \n     * @private\n     */\n    _bindEvents() {\n        const that = this,\n              dom = this.domElement;\n        \n        //Prevent clicks while dragging from bubbling up to the parent:\n        addEvent(dom, 'click', e => e.preventDefault());\n\n\n        /* Draggable color selection */\n\n        function createDragConfig(container, callbackRelative) {\n\n            //Convert the px coordinates to relative coordinates (0-1) before invoking the callback:\n            function relayDrag(_, pos) {\n                const relX = pos[0]/container.clientWidth,\n                      relY = pos[1]/container.clientHeight;\n                callbackRelative(relX, relY);\n            }\n\n            const config = {\n                container:     container,\n                dragOutside:   false,\n                callback:      relayDrag,\n                //Respond at once (mousedown), don't wait for click or drag:\n                callbackDragStart: relayDrag,\n                //When interacting with a picker, this allows other open picker popups to close:\n                propagateEvents: true,\n            };\n            return config;\n        }\n\n        //Select hue\n        dragTracker(createDragConfig(this._domH,  (x, y) => that._setHSLA(x)));\n\n        //Select saturation/lightness\n        dragTracker(createDragConfig(this._domSL, (x, y) => that._setHSLA(null, x, 1 - y)));\n\n        //Select alpha\n        if(this.settings.alpha) {\n            dragTracker(createDragConfig(this._domA,  (x, y) => that._setHSLA(null, null, null, 1 - y)));\n        }\n        \n        \n        /* Direct color value editing */\n\n        //Always init the editor, for accessibility and screen readers (we'll hide it with CSS if `!settings.editor`)\n        const editInput = this._domEdit;\n        /*if(this.settings.editor)*/ {\n            addEvent(editInput, 'input', function(e) {\n                that._setColor(this.value, { fromEditor: true, failSilently: true });\n            });\n            //Select all text on focus:\n            addEvent(editInput, 'focus', function(e) {\n                const input = this;\n                //If no current selection:\n                if(input.selectionStart === input.selectionEnd) {\n                    input.select();\n                }\n            });\n        }\n\n\n        /* Close the dialog */\n\n        const onDoneProxy = (e) => {\n            this._ifPopup(() => this.closeHandler(e));\n            if(this.onDone) { this.onDone(this.colour); }\n        };\n\n        this._ifPopup(() => {\n            //Keep closeHandler() pluggable, but call it in the right context:\n            const popupCloseProxy = (e) => this.closeHandler(e);\n            \n            addEvent(window, EVENT_CLICK_OUTSIDE, popupCloseProxy);\n            addEvent(window, EVENT_TAB_MOVE,      popupCloseProxy);\n            onKey(   dom,    ['Esc', 'Escape'],   popupCloseProxy);\n\n\n            //Above, we added events on `window` to close the popup.\n            //Now, we must make sure that events from within the picker don't reach the window and cause the popup to close.\n            //We do it this way instead of checking `e.target` in `closeHandler()` for two reasons:\n            //  * If used in a shadow DOM, the original `target` isn't available once the event reaches `window` (issue #15)\n            //  * Events bubble differently in different browsers. E.g. in Firefox, the parent gets a `focusin` event if you click the editor or Ok button (issue #17).\n            //\n            addEvent(dom, EVENT_CLICK_OUTSIDE, stopEvent);\n            //Note: Now that we have added the 'focusin' event, this trick requires the picker wrapper to be focusable (via `tabindex` - see /src/picker.pug),\n            //or else the popup loses focus if you click anywhere on the picker's background.\n            addEvent(dom, EVENT_TAB_MOVE,      stopEvent);\n\n\n            //Just one thing.. The stopEvent() on clicks above makes the editor text box unresponsive to mouse clicks.\n            //So here's a hack to get around that:\n            addEvent(this._domEdit, EVENT_CLICK_OUTSIDE, e => this._domEdit.focus());\n        });\n\n        addEvent(this._domOkay, 'click',   onDoneProxy);\n        onKey(   dom,           ['Enter'], onDoneProxy);\n    }\n\n\n    /*\n     * Position the picker on screen.\n     * \n     * @private\n     */\n    _setPosition() {\n        const parent = this.settings.parent,\n              elm = this.domElement;\n\n        if(parent !== elm.parentNode) { parent.appendChild(elm); }\n\n        this._ifPopup((popup) => {\n\n            //Allow for absolute positioning of the picker popup:\n            if(getComputedStyle(parent).position === 'static') {\n                parent.style.position = 'relative';\n            }\n\n            const cssClass = (popup === true) ? 'popup_right' : 'popup_' + popup;\n\n            ['popup_top', 'popup_bottom', 'popup_left', 'popup_right'].forEach(c => {\n                //Because IE doesn't support .classList.toggle()'s second argument...\n                if(c === cssClass) {\n                    elm.classList.add(c);\n                }\n                else {\n                    elm.classList.remove(c);\n                }\n            });\n\n            //Allow for custom placement via CSS:\n            elm.classList.add(cssClass);\n        });\n    }\n\n\n    /*\n     * \"Hub\" for all color changes\n     * \n     * @private\n     */\n    _setHSLA(h, s, l, a,  flags) {\n        flags = flags || {};\n\n        const col = this.colour,\n              hsla = col.hsla;\n\n        [h, s, l, a].forEach((x, i) => {\n            if(x || (x === 0)) { hsla[i] = x; }\n        });\n        col.hsla = hsla;\n\n        this._updateUI(flags);\n\n        if(this.onChange && !flags.silent) { this.onChange(col); }\n    }\n\n    _updateUI(flags) {\n        if(!this.domElement) { return; }\n        flags = flags || {};\n\n        const col = this.colour,\n              hsl = col.hsla,\n              cssHue  = `hsl(${hsl[0] * HUES}, 100%, 50%)`,\n              cssHSL  = col.hslString,\n              cssHSLA = col.hslaString;\n\n        const uiH  = this._domH,\n              uiSL = this._domSL,\n              uiA  = this._domA,\n              thumbH  = $('.picker_selector', uiH),\n              thumbSL = $('.picker_selector', uiSL),\n              thumbA  = $('.picker_selector', uiA);\n        \n        function posX(parent, child, relX) {\n            child.style.left = (relX * 100) + '%'; //(parent.clientWidth * relX) + 'px';\n        }\n        function posY(parent, child, relY) {\n            child.style.top  = (relY * 100) + '%'; //(parent.clientHeight * relY) + 'px';\n        }\n\n\n        /* Hue */\n        \n        posX(uiH, thumbH, hsl[0]);\n        \n        //Use the fully saturated hue on the SL panel and Hue thumb:\n        this._domSL.style.backgroundColor = this._domH.style.color = cssHue;\n\n\n        /* S/L */\n        \n        posX(uiSL, thumbSL, hsl[1]);\n        posY(uiSL, thumbSL, 1 - hsl[2]);\n        \n        //Use the opaque HSL on the SL thumb:\n        uiSL.style.color = cssHSL;\n\n\n        /* Alpha */\n        \n        posY(uiA,  thumbA,  1 - hsl[3]);\n\n        const opaque = cssHSL,\n              transp = opaque.replace('hsl', 'hsla').replace(')', ', 0)'),\n              bg = `linear-gradient(${[opaque, transp]})`;\n\n        //Let the Alpha slider fade from opaque to transparent:\n        this._domA.style.backgroundImage = bg + ', ' + BG_TRANSP;\n\n\n        /* Editable value */\n        \n        //Don't update the editor if the user is typing.\n        //That creates too much noise because of our auto-expansion of 3/4/6 -> 8 digit hex codes.\n        if(!flags.fromEditor) {\n            const format = this.settings.editorFormat,\n                  alpha = this.settings.alpha;\n\n            let value;\n            switch (format) {\n                case 'rgb': value = col.printRGB(alpha); break;\n                case 'hsl': value = col.printHSL(alpha); break;\n                default:    value = col.printHex(alpha);\n            }\n            this._domEdit.value = value;\n        }\n\n\n        /* Sample swatch */\n        \n        this._domSample.style.color = cssHSLA;\n    }\n    \n    \n    _ifPopup(actionIf, actionElse) {\n        if(this.settings.parent && this.settings.popup) {\n            actionIf && actionIf(this.settings.popup);\n        }\n        else {\n            actionElse && actionElse();\n        }\n    }\n\n\n    _toggleDOM(toVisible) {\n        const dom = this.domElement;\n        if(!dom) { return false; }\n\n        const displayStyle = toVisible ? '' : 'none',\n              toggle = (dom.style.display !== displayStyle);\n        \n        if(toggle) { dom.style.display = displayStyle; }\n        return toggle;\n    }\n\n\n/*\n    //Feature: settings to flip hue & alpha 90deg (i.e. vertical or horizontal mode)\n    \n    \n        function createDragConfig(container, callbackRelative) {\nconst flipped = true;\n\n            function capRel(val) {\n                return (val < 0) ? 0\n                                 : (val > 1) ? 1 : val;\n            }\n\n            //Convert the px coordinates to relative coordinates (0-1) before invoking the callback:\n            function relayDrag(_, pos) {\n                const w = container.clientWidth,\n                      h = container.clientHeight;\n                      \n                const relX = pos[0]/(flipped ? h : w),\n                      relY = pos[1]/(flipped ? w : h);\n                      \n                callbackRelative(capRel(relX), capRel(relY));\n            }\n\n            const config = {\n                container:     container,\n                //dragOutside:   false,\n                callback:      relayDrag,\n                //Respond at once (mousedown), don't wait for click or drag:\n                callbackDragStart: relayDrag,\n            };\n            return config;\n        }\n*/\n\n    /**\n     * The inlined `<style>` element for picker CSS.\n     */\n    static get StyleElement() {\n        return _style;\n    }\n}\n\n\nexport default Picker;\n","var jmespath = require('jmespath');\nvar picoModal = require('picomodal');\nvar Selectr = require('./assets/selectr/selectr');\nvar translate = require('./i18n').translate;\nvar util = require('./util');\nvar debounce = util.debounce;\n\nvar MAX_PREVIEW_LINES = 100;\n\n/**\n * Show advanced filter and transform modal using JMESPath\n * @param {Node} node the node to be transformed\n * @param {HTMLElement} container   The container where to center\n *                                  the modal and create an overlay\n */\nfunction showTransformModal (node, container) {\n  var value = node.getValue();\n\n  var content = '<label class=\"pico-modal-contents\">' +\n      '<div class=\"pico-modal-header\">' + translate('transform') + '</div>' +\n      '<p>' +\n      'Enter a <a href=\"http://jmespath.org\" target=\"_blank\">JMESPath</a> query to filter, sort, or transform the JSON data.<br/>' +\n      'To learn JMESPath, go to <a href=\"http://jmespath.org/tutorial.html\" target=\"_blank\">the interactive tutorial</a>.' +\n      '</p>' +\n      '<div class=\"jsoneditor-jmespath-label\">' + translate('transformWizardLabel') + ' </div>' +\n      '<div id=\"wizard\" class=\"jsoneditor-jmespath-block jsoneditor-jmespath-wizard\">' +\n      '  <table class=\"jsoneditor-jmespath-wizard-table\">' +\n      '    <tbody>' +\n      '      <tr>' +\n      '        <th>' + translate('transformWizardFilter') + '</th>' +\n      '        <td class=\"jsoneditor-jmespath-filter\">' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-field\" >' +\n      '            <select id=\"filterField\">' +\n      '            </select>' +\n      '          </div>' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-relation\" >' +\n      '            <select id=\"filterRelation\">' +\n      '              <option value=\"==\">==</option>' +\n      '              <option value=\"!=\">!=</option>' +\n      '              <option value=\"<\">&lt;</option>' +\n      '              <option value=\"<=\">&lt;=</option>' +\n      '              <option value=\">\">&gt;</option>' +\n      '              <option value=\">=\">&gt;=</option>' +\n      '            </select>' +\n      '          </div>' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-filter-value\" >' +\n      '            <input placeholder=\"value...\" id=\"filterValue\" />' +\n      '          </div>' +\n      '        </td>' +\n      '      </tr>' +\n      '      <tr>' +\n      '        <th>' + translate('transformWizardSortBy') + '</th>' +\n      '        <td class=\"jsoneditor-jmespath-filter\">' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-sort-field\">' +\n      '            <select id=\"sortField\">' +\n      '            </select>' +\n      '          </div>' +\n      '          <div class=\"jsoneditor-inline jsoneditor-jmespath-sort-order\" >' +\n      '            <select id=\"sortOrder\">' +\n      '              <option value=\"asc\">Ascending</option>' +\n      '              <option value=\"desc\">Descending</option>' +\n      '            </select>' +\n      '          </div>' +\n      '        </td>' +\n      '      </tr>' +\n      '      <tr id=\"selectFieldsPart\">' +\n      '        <th>' + translate('transformWizardSelectFields') + '</th>' +\n      '        <td class=\"jsoneditor-jmespath-filter\">' +\n      '          <select class=\"jsoneditor-jmespath-select-fields\" id=\"selectFields\" multiple></select>' +\n      '        </td>' +\n      '      </tr>' +\n      '    </tbody>' +\n      '  </table>' +\n      '</div>' +\n      '<div class=\"jsoneditor-jmespath-label\">' + translate('transformQueryLabel') + ' </div>' +\n      '<div class=\"jsoneditor-jmespath-block\">' +\n      '  <textarea id=\"query\" ' +\n      '            rows=\"4\" ' +\n      '            autocomplete=\"off\" ' +\n      '            autocorrect=\"off\" ' +\n      '            autocapitalize=\"off\" ' +\n      '            spellcheck=\"false\"' +\n      '            title=\"' + translate('transformQueryTitle') + '\">[*]</textarea>' +\n      '</div>' +\n      '<div class=\"jsoneditor-jmespath-label\">' + translate('transformPreviewLabel') + ' </div>' +\n      '<div class=\"jsoneditor-jmespath-block\">' +\n      '  <textarea id=\"preview\" ' +\n      '      class=\"jsoneditor-transform-preview\"' +\n      '      readonly> </textarea>' +\n      '</div>' +\n      '<div class=\"jsoneditor-jmespath-block jsoneditor-modal-actions\">' +\n      '  <input type=\"submit\" id=\"ok\" value=\"' + translate('ok') + '\" autofocus />' +\n      '</div>' +\n      '</div>';\n\n  picoModal({\n    parent: container,\n    content: content,\n    overlayClass: 'jsoneditor-modal-overlay',\n    modalClass: 'jsoneditor-modal jsoneditor-modal-transform',\n    focus: false\n  })\n      .afterCreate(function (modal) {\n        var elem = modal.modalElem();\n\n        var wizard = elem.querySelector('#wizard');\n        var ok = elem.querySelector('#ok');\n        var filterField = elem.querySelector('#filterField');\n        var filterRelation = elem.querySelector('#filterRelation');\n        var filterValue = elem.querySelector('#filterValue');\n        var sortField = elem.querySelector('#sortField');\n        var sortOrder = elem.querySelector('#sortOrder');\n        var selectFields = elem.querySelector('#selectFields');\n        var query = elem.querySelector('#query');\n        var preview = elem.querySelector('#preview');\n\n        if (!Array.isArray(value)) {\n          wizard.style.fontStyle = 'italic';\n          wizard.innerHTML = '(wizard not available for objects, only for arrays)'\n        }\n\n        var paths = node.getChildPaths();\n        paths.forEach(function (path) {\n          var formattedPath = preprocessPath(path);\n          var filterOption = document.createElement('option');\n          filterOption.text = formattedPath;\n          filterOption.value = formattedPath;\n          filterField.appendChild(filterOption);\n\n          var sortOption = document.createElement('option');\n          sortOption.text = formattedPath;\n          sortOption.value = formattedPath;\n          sortField.appendChild(sortOption);\n        });\n\n        var allPaths = node.getChildPaths(true).filter(function(path) {\n          return path !== '.';\n        });\n\n        if (allPaths.length > 0) {\n          allPaths.forEach(function (path) {\n            var formattedPath = preprocessPath(path);\n            var option = document.createElement('option');\n            option.text = formattedPath;\n            option.value = formattedPath;\n            selectFields.appendChild(option);\n          });\n        }\n        else {\n          var selectFieldsPart = elem.querySelector('#selectFieldsPart');\n          if (selectFieldsPart) {\n            selectFieldsPart.style.display = 'none';\n          }\n        }\n\n        var selectrFilterField = new Selectr(filterField, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'field...' });\n        var selectrFilterRelation = new Selectr(filterRelation, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'compare...' });\n        var selectrSortField = new Selectr(sortField, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'field...' });\n        var selectrSortOrder = new Selectr(sortOrder, { defaultSelected: false, clearable: true, allowDeselect: true, placeholder: 'order...' });\n        var selectrSelectFields = new Selectr(selectFields, {multiple: true, clearable: true, defaultSelected: false, placeholder: 'select fields...'});\n\n        selectrFilterField.on('selectr.change', generateQueryFromWizard);\n        selectrFilterRelation.on('selectr.change', generateQueryFromWizard);\n        filterValue.oninput = generateQueryFromWizard;\n        selectrSortField.on('selectr.change', generateQueryFromWizard);\n        selectrSortOrder.on('selectr.change', generateQueryFromWizard);\n        selectrSelectFields.on('selectr.change', generateQueryFromWizard);\n\n        elem.querySelector('.pico-modal-contents').onclick = function (event) {\n          // prevent the first clear button (in any select box) from getting\n          // focus when clicking anywhere in the modal. Only allow clicking links.\n          if (event.target.nodeName !== 'A') {\n            event.preventDefault();\n          }\n        };\n\n        query.value = Array.isArray(value) ? '[*]' : '@';\n\n        function preprocessPath(path) {\n          if (path[0] === '.') {\n            return (path === '.')\n                ? '@'\n                : path.slice(1);\n          }\n          else {\n            return path;\n          }\n        }\n\n        function generateQueryFromWizard () {\n          if (filterField.value && filterRelation.value && filterValue.value) {\n            var field1 = filterField.value;\n            var examplePath = field1 !== '@'\n                ? ['0'].concat(util.parsePath('.' + field1))\n                : ['0']\n            var exampleValue = util.get(value, examplePath)\n            // TODO: move _stringCast into a static util function\n            var value1 = typeof exampleValue === 'string'\n                ? filterValue.value\n                : node._stringCast(filterValue.value);\n\n            query.value = '[? ' +\n                field1 + ' ' +\n                filterRelation.value + ' ' +\n                '`' + JSON.stringify(value1) + '`' +\n                ']';\n          }\n          else {\n            query.value = '[*]';\n          }\n\n          if (sortField.value && sortOrder.value) {\n            var field2 = sortField.value;\n            if (sortOrder.value === 'desc') {\n              query.value += ' | reverse(sort_by(@, &' + field2 + '))';\n            }\n            else {\n              query.value += ' | sort_by(@, &' + field2 + ')';\n            }\n          }\n\n          if (selectFields.value) {\n            var values = [];\n            for (var i=0; i < selectFields.options.length; i++) {\n              if (selectFields.options[i].selected) {\n                var selectedValue = selectFields.options[i].value;\n                values.push(selectedValue);\n              }\n            }\n\n            if (query.value[query.value.length - 1] !== ']') {\n              query.value += ' | [*]';\n            }\n\n            if (values.length === 1) {\n              query.value += '.' + values[0];\n            }\n            else if (values.length > 1) {\n              query.value += '.{' +\n                  values.map(function (value) {\n                    var parts = value.split('.');\n                    var last = parts[parts.length - 1];\n                    return last + ': ' + value;\n                  }).join(', ') +\n                  '}';\n            }\n            else { // values.length === 0\n              // ignore\n            }\n          }\n\n          debouncedUpdatePreview();\n        }\n\n        function updatePreview() {\n          try {\n            var transformed = jmespath.search(value, query.value);\n            var lines =  JSON.stringify(transformed, null, 2).split('\\n');\n\n            if (lines.length > MAX_PREVIEW_LINES) {\n              lines = lines.slice(0, MAX_PREVIEW_LINES).concat(['...'])\n            }\n\n\n            preview.className = 'jsoneditor-transform-preview';\n            preview.value = lines.join('\\n');\n            ok.disabled = false;\n          }\n          catch (err) {\n            preview.className = 'jsoneditor-transform-preview jsoneditor-error';\n            preview.value = err.toString();\n            ok.disabled = true;\n          }\n        }\n\n        var debouncedUpdatePreview = debounce(updatePreview, 300);\n\n        query.oninput = debouncedUpdatePreview;\n        debouncedUpdatePreview();\n\n        ok.onclick = function (event) {\n          event.preventDefault();\n          event.stopPropagation();\n\n          modal.close();\n\n          node.transform(query.value)\n        };\n\n        setTimeout(function () {\n          query.select();\n          query.focus();\n          query.selectionStart = 3;\n          query.selectionEnd = 3;\n        });\n      })\n      .afterClose(function (modal) {\n        modal.destroy();\n      })\n      .show();\n}\n\nmodule.exports = showTransformModal;\n","'use strict';\n\nvar defaultFilterFunction = {\n  start: function (token, match, config) {\n    return match.indexOf(token) === 0;\n  },\n  contain: function (token, match, config) {\n    return match.indexOf(token) > -1;\n  }\n};\n\nfunction completely(config) {\n    config = config || {};\n    config.filter = config.filter || 'start';\n    config.trigger = config.trigger || 'keydown';\n    config.confirmKeys = config.confirmKeys || [39, 35, 9] // right, end, tab\n    config.caseSensitive = config.caseSensitive || false    // autocomplete case sensitive\n\n    var fontSize = '';\n    var fontFamily = '';    \n\n    var wrapper = document.createElement('div');\n    wrapper.style.position = 'relative';\n    wrapper.style.outline = '0';\n    wrapper.style.border = '0';\n    wrapper.style.margin = '0';\n    wrapper.style.padding = '0';\n\n    var dropDown = document.createElement('div');\n    dropDown.className = 'autocomplete dropdown';\n    dropDown.style.position = 'absolute';\n    dropDown.style.visibility = 'hidden';\n\n    var spacer;\n    var leftSide; // <-- it will contain the leftSide part of the textfield (the bit that was already autocompleted)\n    var createDropDownController = function (elem, rs) {\n        var rows = [];\n        var ix = 0;\n        var oldIndex = -1;\n\n        var onMouseOver = function () { this.style.outline = '1px solid #ddd'; }\n        var onMouseOut = function () { this.style.outline = '0'; }\n        var onMouseDown = function () { p.hide(); p.onmouseselection(this.__hint, p.rs); }\n\n        var p = {\n            rs: rs,\n            hide: function () {\n                elem.style.visibility = 'hidden';\n                //rs.hideDropDown();\n            },\n            refresh: function (token, array) {\n                elem.style.visibility = 'hidden';\n                ix = 0;\n                elem.innerHTML = '';\n                var vph = (window.innerHeight || document.documentElement.clientHeight);\n                var rect = elem.parentNode.getBoundingClientRect();\n                var distanceToTop = rect.top - 6;                        // heuristic give 6px \n                var distanceToBottom = vph - rect.bottom - 6;  // distance from the browser border.\n\n                rows = [];\n                var filterFn = typeof config.filter === 'function' ? config.filter : defaultFilterFunction[config.filter];\n\n                var filtered = !filterFn ? [] : array.filter(function (match) {\n                  return filterFn(config.caseSensitive ? token : token.toLowerCase(), config.caseSensitive ? match : match.toLowerCase(), config);\n                });\n\n                rows = filtered.map(function (row) {\n                  var divRow = document.createElement('div');\n                  divRow.className = 'item';\n                  //divRow.style.color = config.color;\n                  divRow.onmouseover = onMouseOver;\n                  divRow.onmouseout = onMouseOut;\n                  divRow.onmousedown = onMouseDown;\n                  divRow.__hint = row;\n                  divRow.innerHTML = row.substring(0, token.length) + '<b>' + row.substring(token.length) + '</b>';\n                  elem.appendChild(divRow);\n                  return divRow;\n                });\n\n                if (rows.length === 0) {\n                    return; // nothing to show.\n                }\n                if (rows.length === 1 && (   (token.toLowerCase() === rows[0].__hint.toLowerCase() && !config.caseSensitive) \n                                           ||(token === rows[0].__hint && config.caseSensitive))){\n                    return; // do not show the dropDown if it has only one element which matches what we have just displayed.\n                }\n\n                if (rows.length < 2) return;\n                p.highlight(0);\n\n                if (distanceToTop > distanceToBottom * 3) {        // Heuristic (only when the distance to the to top is 4 times more than distance to the bottom\n                    elem.style.maxHeight = distanceToTop + 'px';  // we display the dropDown on the top of the input text\n                    elem.style.top = '';\n                    elem.style.bottom = '100%';\n                } else {\n                    elem.style.top = '100%';\n                    elem.style.bottom = '';\n                    elem.style.maxHeight = distanceToBottom + 'px';\n                }\n                elem.style.visibility = 'visible';\n            },\n            highlight: function (index) {\n                if (oldIndex != -1 && rows[oldIndex]) {\n                    rows[oldIndex].className = \"item\";\n                }\n                rows[index].className = \"item hover\"; \n                oldIndex = index;\n            },\n            move: function (step) { // moves the selection either up or down (unless it's not possible) step is either +1 or -1.\n                if (elem.style.visibility === 'hidden') return ''; // nothing to move if there is no dropDown. (this happens if the user hits escape and then down or up)\n                if (ix + step === -1 || ix + step === rows.length) return rows[ix].__hint; // NO CIRCULAR SCROLLING. \n                ix += step;\n                p.highlight(ix);\n                return rows[ix].__hint;//txtShadow.value = uRows[uIndex].__hint ;\n            },\n            onmouseselection: function () { } // it will be overwritten. \n        };\n        return p;\n    }\n\n    function setEndOfContenteditable(contentEditableElement) {\n        var range, selection;\n        if (document.createRange)//Firefox, Chrome, Opera, Safari, IE 9+\n        {\n            range = document.createRange();//Create a range (a range is a like the selection but invisible)\n            range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range\n            range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n            selection = window.getSelection();//get the selection object (allows you to change selection)\n            selection.removeAllRanges();//remove any selections already made\n            selection.addRange(range);//make the range you have just created the visible selection\n        }\n        else if (document.selection)//IE 8 and lower\n        {\n            range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)\n            range.moveToElementText(contentEditableElement);//Select the entire contents of the element with the range\n            range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n            range.select();//Select the range (make it the visible selection\n        }\n    }\n\n    function calculateWidthForText(text) {\n        if (spacer === undefined) { // on first call only.\n            spacer = document.createElement('span');\n            spacer.style.visibility = 'hidden';\n            spacer.style.position = 'fixed';\n            spacer.style.outline = '0';\n            spacer.style.margin = '0';\n            spacer.style.padding = '0';\n            spacer.style.border = '0';\n            spacer.style.left = '0';\n            spacer.style.whiteSpace = 'pre';\n            spacer.style.fontSize = fontSize;\n            spacer.style.fontFamily = fontFamily;\n            spacer.style.fontWeight = 'normal';\n            document.body.appendChild(spacer);\n        }\n\n        // Used to encode an HTML string into a plain text.\n        // taken from http://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding\n        spacer.innerHTML = String(text).replace(/&/g, '&amp;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;');\n        return spacer.getBoundingClientRect().right;\n    }\n\n    var rs = {\n        onArrowDown: function () { }, // defaults to no action.\n        onArrowUp: function () { },   // defaults to no action.\n        onEnter: function () { },     // defaults to no action.\n        onTab: function () { },       // defaults to no action.\n        startFrom: 0,\n        options: [],\n        element: null,\n        elementHint: null,\n        elementStyle: null,\n        wrapper: wrapper,      // Only to allow  easy access to the HTML elements to the final user (possibly for minor customizations)\n        show: function (element, startPos, options) {\n            this.startFrom = startPos;\n            this.wrapper.remove();\n            if (this.elementHint) {\n                this.elementHint.remove();\n                this.elementHint = null;\n            }\n            \n            if (fontSize == '') {\n                fontSize = window.getComputedStyle(element).getPropertyValue('font-size');\n            }\n            if (fontFamily == '') {\n                fontFamily = window.getComputedStyle(element).getPropertyValue('font-family');\n            }\n            \n            var w = element.getBoundingClientRect().right - element.getBoundingClientRect().left;\n            dropDown.style.marginLeft = '0';\n            dropDown.style.marginTop = element.getBoundingClientRect().height + 'px';\n            this.options = options;\n\n            if (this.element != element) {\n                this.element = element;\n                this.elementStyle = {\n                    zIndex: this.element.style.zIndex,\n                    position: this.element.style.position,\n                    backgroundColor: this.element.style.backgroundColor,\n                    borderColor: this.element.style.borderColor\n                }\n            }\n\n            this.element.style.zIndex = 3;\n            this.element.style.position = 'relative';\n            this.element.style.backgroundColor = 'transparent';\n            this.element.style.borderColor = 'transparent';\n\n            this.elementHint = element.cloneNode();\n            this.elementHint.className = 'autocomplete hint';\n            this.elementHint.style.zIndex = 2;\n            this.elementHint.style.position = 'absolute';\n            this.elementHint.onfocus = function () { this.element.focus(); }.bind(this);\n\n\n\n            if (this.element.addEventListener) {\n                this.element.removeEventListener(\"keydown\", keyDownHandler);\n                this.element.addEventListener(\"keydown\", keyDownHandler, false);\n                this.element.removeEventListener(\"blur\", onBlurHandler);\n                this.element.addEventListener(\"blur\", onBlurHandler, false);                \n            } \n\n            wrapper.appendChild(this.elementHint);\n            wrapper.appendChild(dropDown);\n            element.parentElement.appendChild(wrapper);\n\n\n            this.repaint(element);\n        },\n        setText: function (text) {\n            this.element.innerText = text;\n        },\n        getText: function () {\n            return this.element.innerText;\n        },\n        hideDropDown: function () {\n            this.wrapper.remove();\n            if (this.elementHint) {\n                this.elementHint.remove();\n                this.elementHint = null;\n                dropDownController.hide();\n                this.element.style.zIndex = this.elementStyle.zIndex;\n                this.element.style.position = this.elementStyle.position;\n                this.element.style.backgroundColor = this.elementStyle.backgroundColor;\n                this.element.style.borderColor = this.elementStyle.borderColor;\n            }\n            \n        },\n        repaint: function (element) {\n            var text = element.innerText;\n            text = text.replace('\\n', '');\n\n            var startFrom = this.startFrom;\n            var options = this.options;\n            var optionsLength = this.options.length;\n\n            // breaking text in leftSide and token.\n            \n            var token = text.substring(this.startFrom);\n            leftSide = text.substring(0, this.startFrom);\n            \n            for (var i = 0; i < optionsLength; i++) {\n                var opt = this.options[i];\n                if (   (!config.caseSensitive && opt.toLowerCase().indexOf(token.toLowerCase()) === 0)\n                    || (config.caseSensitive && opt.indexOf(token) === 0)) {   // <-- how about upperCase vs. lowercase\n                    this.elementHint.innerText = leftSide + token + opt.substring(token.length);\n                    this.elementHint.realInnerText = leftSide + opt;\n                    break;\n                }\n            }\n            // moving the dropDown and refreshing it.\n            dropDown.style.left = calculateWidthForText(leftSide) + 'px';\n            dropDownController.refresh(token, this.options);\n            this.elementHint.style.width = calculateWidthForText(this.elementHint.innerText) + 10 + 'px'\n            var wasDropDownHidden = (dropDown.style.visibility == 'hidden');\n            if (!wasDropDownHidden)\n                this.elementHint.style.width = calculateWidthForText(this.elementHint.innerText) + dropDown.clientWidth + 'px';\n        }\n    };\n\n    var dropDownController = createDropDownController(dropDown, rs);\n\n    var keyDownHandler = function (e) {\n        //console.log(\"Keydown:\" + e.keyCode);\n        e = e || window.event;\n        var keyCode = e.keyCode;\n\n        if (this.elementHint == null) return;\n\n        if (keyCode == 33) { return; } // page up (do nothing)\n        if (keyCode == 34) { return; } // page down (do nothing);\n\n        if (keyCode == 27) { //escape\n            rs.hideDropDown();\n            rs.element.focus();\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n\n        var text = this.element.innerText;\n        text = text.replace('\\n', '');\n        var startFrom = this.startFrom;\n\n        if (config.confirmKeys.indexOf(keyCode) >= 0) { //  (autocomplete triggered)\n            if (keyCode == 9) {                 \n                if (this.elementHint.innerText.length == 0) {\n                    rs.onTab(); \n                }\n            }\n            if (this.elementHint.innerText.length > 0) { // if there is a hint               \n                if (this.element.innerText != this.elementHint.realInnerText) {\n                    this.element.innerText = this.elementHint.realInnerText;\n                    rs.hideDropDown();\n                    setEndOfContenteditable(this.element);\n                    if (keyCode == 9) {                \n                        rs.element.focus();\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }\n                }                \n            }\n            return;\n        }\n\n        if (keyCode == 13) {       // enter  (autocomplete triggered)\n            if (this.elementHint.innerText.length == 0) { // if there is a hint\n                rs.onEnter();\n            } else {\n                var wasDropDownHidden = (dropDown.style.visibility == 'hidden');\n                dropDownController.hide();\n\n                if (wasDropDownHidden) {\n                    rs.hideDropDown();\n                    rs.element.focus();\n                    rs.onEnter();\n                    return;\n                }\n\n                this.element.innerText = this.elementHint.realInnerText;\n                rs.hideDropDown();\n                setEndOfContenteditable(this.element);\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            return;\n        }\n\n        if (keyCode == 40) {     // down\n            var token = text.substring(this.startFrom);\n            var m = dropDownController.move(+1);\n            if (m == '') { rs.onArrowDown(); }\n            this.elementHint.innerText = leftSide + token + m.substring(token.length);\n            this.elementHint.realInnerText = leftSide + m;\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n\n        if (keyCode == 38) {    // up\n            var token = text.substring(this.startFrom);\n            var m = dropDownController.move(-1);\n            if (m == '') { rs.onArrowUp(); }\n            this.elementHint.innerText = leftSide + token + m.substring(token.length);\n            this.elementHint.realInnerText = leftSide + m;\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n\n    }.bind(rs);\n\n    var onBlurHandler = function (e) {\n        rs.hideDropDown();\n        //console.log(\"Lost focus.\");\n    }.bind(rs);\n\n    dropDownController.onmouseselection = function (text, rs) {\n        rs.element.innerText = rs.elementHint.innerText = leftSide + text;        \n        rs.hideDropDown();   \n        window.setTimeout(function () {\n            rs.element.focus();\n            setEndOfContenteditable(rs.element);  \n        }, 1);              \n    };\n\n    return rs;\n}\n\nmodule.exports = completely;","'use strict';\n\n/**\n * The highlighter can highlight/unhighlight a node, and\n * animate the visibility of a context menu.\n * @constructor Highlighter\n */\nfunction Highlighter () {\n  this.locked = false;\n}\n\n/**\n * Hightlight given node and its childs\n * @param {Node} node\n */\nHighlighter.prototype.highlight = function (node) {\n  if (this.locked) {\n    return;\n  }\n\n  if (this.node != node) {\n    // unhighlight current node\n    if (this.node) {\n      this.node.setHighlight(false);\n    }\n\n    // highlight new node\n    this.node = node;\n    this.node.setHighlight(true);\n  }\n\n  // cancel any current timeout\n  this._cancelUnhighlight();\n};\n\n/**\n * Unhighlight currently highlighted node.\n * Will be done after a delay\n */\nHighlighter.prototype.unhighlight = function () {\n  if (this.locked) {\n    return;\n  }\n\n  var me = this;\n  if (this.node) {\n    this._cancelUnhighlight();\n\n    // do the unhighlighting after a small delay, to prevent re-highlighting\n    // the same node when moving from the drag-icon to the contextmenu-icon\n    // or vice versa.\n    this.unhighlightTimer = setTimeout(function () {\n      me.node.setHighlight(false);\n      me.node = undefined;\n      me.unhighlightTimer = undefined;\n    }, 0);\n  }\n};\n\n/**\n * Cancel an unhighlight action (if before the timeout of the unhighlight action)\n * @private\n */\nHighlighter.prototype._cancelUnhighlight = function () {\n  if (this.unhighlightTimer) {\n    clearTimeout(this.unhighlightTimer);\n    this.unhighlightTimer = undefined;\n  }\n};\n\n/**\n * Lock highlighting or unhighlighting nodes.\n * methods highlight and unhighlight do not work while locked.\n */\nHighlighter.prototype.lock = function () {\n  this.locked = true;\n};\n\n/**\n * Unlock highlighting or unhighlighting nodes\n */\nHighlighter.prototype.unlock = function () {\n  this.locked = false;\n};\n\nmodule.exports = Highlighter;\n","var VanillaPicker;\n\nif (window.Picker) {\n  // use the already loaded instance of VanillaPicker\n  VanillaPicker = window.Picker;\n}\nelse {\n  try {\n    // load color picker\n    // Note that we load the ES5 distribution bundle\n    // instead of the \"default\" as the default currently\n    // points to `src/picker.js` which is ES6 code (v2.3.0).\n    VanillaPicker = require('vanilla-picker/dist/vanilla-picker');\n  }\n  catch (err) {\n    // probably running the minimalist bundle\n  }\n}\n\nmodule.exports = VanillaPicker;\n","'use strict';\n\nvar VanillaPicker = require('./vanilla-picker');\nvar Highlighter = require('./Highlighter');\nvar History = require('./History');\nvar SearchBox = require('./SearchBox');\nvar ContextMenu = require('./ContextMenu');\nvar TreePath = require('./TreePath');\nvar Node = require('./Node');\nvar ModeSwitcher = require('./ModeSwitcher');\nvar util = require('./util');\nvar autocomplete = require('./autocomplete');\nvar showSortModal = require('./showSortModal');\nvar showTransformModal = require('./showTransformModal');\nvar translate = require('./i18n').translate;\nvar setLanguages = require('./i18n').setLanguages;\nvar setLanguage = require('./i18n').setLanguage;\n\nvar DEFAULT_MODAL_ANCHOR = document.body; // TODO: this constant is defined twice\n\n// create a mixin with the functions for tree mode\nvar treemode = {};\n\n/**\n * Create a tree editor\n * @param {Element} container    Container element\n * @param {Object}  [options]    Object with options. available options:\n *                               {String} mode            Editor mode. Available values:\n *                                                        'tree' (default), 'view',\n *                                                        and 'form'.\n *                               {Boolean} search         Enable search box.\n *                                                        True by default\n *                               {Boolean} history        Enable history (undo/redo).\n *                                                        True by default\n *                               {function} onChange      Callback method, triggered\n *                                                        on change of contents.\n *                                                        Does not pass the changed contents.\n *                               {function} onChangeJSON  Callback method, triggered\n *                                                        in modes on change of contents,\n *                                                        passing the changed contents\n *                                                        as JSON.\n *                                                        Only applicable for modes\n *                                                        'tree', 'view', and 'form'.\n *                               {function} onChangeText  Callback method, triggered\n *                                                        in modes on change of contents,\n *                                                        passing the changed contents\n *                                                        as stringified JSON.\n *                               {String} name            Field name for the root node.\n *                               {boolean} escapeUnicode  If true, unicode\n *                                                        characters are escaped.\n *                                                        false by default.\n *                               {Object} schema          A JSON Schema for validation\n *                               {function} onEvent       Function triggered\n *                                                        when an event occurs\n *                                                        in a field or value.\n * @private\n */\ntreemode.create = function (container, options) {\n  if (!container) {\n    throw new Error('No container element provided.');\n  }\n  this.container = container;\n  this.dom = {};\n  this.highlighter = new Highlighter();\n  this.selection = undefined; // will hold the last input selection\n  this.multiselection = {\n    nodes: []\n  };\n  this.validateSchema = null; // will be set in .setSchema(schema)\n  this.validationSequence = 0;\n  this.errorNodes = [];\n\n  this.node = null;\n  this.focusTarget = null;\n\n  this._setOptions(options);\n\n  if (options.autocomplete)\n      this.autocomplete = new autocomplete(options.autocomplete);\n\n  if (this.options.history && this.options.mode !== 'view') {\n    this.history = new History(this);\n  }\n\n  this._createFrame();\n  this._createTable();\n};\n\n/**\n * Destroy the editor. Clean up DOM, event listeners, and web workers.\n */\ntreemode.destroy = function () {\n  if (this.frame && this.container && this.frame.parentNode == this.container) {\n    this.container.removeChild(this.frame);\n    this.frame = null;\n  }\n  this.container = null;\n\n  this.dom = null;\n\n  this.clear();\n  this.node = null;\n  this.focusTarget = null;\n  this.selection = null;\n  this.multiselection = null;\n  this.errorNodes = null;\n  this.validateSchema = null;\n  this._debouncedValidate = null;\n\n  if (this.history) {\n    this.history.destroy();\n    this.history = null;\n  }\n\n  if (this.searchBox) {\n    this.searchBox.destroy();\n    this.searchBox = null;\n  }\n\n  if (this.modeSwitcher) {\n    this.modeSwitcher.destroy();\n    this.modeSwitcher = null;\n  }\n};\n\n/**\n * Initialize and set default options\n * @param {Object}  [options]    See description in constructor\n * @private\n */\ntreemode._setOptions = function (options) {\n  this.options = {\n    search: true,\n    history: true,\n    mode: 'tree',\n    name: undefined,   // field name of root node\n    schema: null,\n    schemaRefs: null,\n    autocomplete: null,\n    navigationBar : true,\n    mainMenuBar: true,\n    onSelectionChange: null,\n    colorPicker: true,\n    onColorPicker: function (parent, color, onChange) {\n      if (VanillaPicker) {\n        new VanillaPicker({\n          parent: parent,\n          color: color,\n          popup: 'bottom',\n          onDone: function (color) {\n            var alpha = color.rgba[3];\n            var hex = (alpha === 1)\n                ? color.hex.substr(0, 7)  // return #RRGGBB\n                : color.hex;               // return #RRGGBBAA\n            onChange(hex);\n          }\n        }).show();\n      }\n      else {\n        console.warn('Cannot open color picker: the `vanilla-picker` library is not included in the bundle. ' +\n            'Either use the full bundle or implement your own color picker using `onColorPicker`.')\n      }\n    },\n    timestampTag: true,\n    onEvent: null,\n    enableSort: true,\n    enableTransform: true\n  };\n\n  // copy all options\n  if (options) {\n    for (var prop in options) {\n      if (options.hasOwnProperty(prop)) {\n        this.options[prop] = options[prop];\n      }\n    }\n  }\n\n  // compile a JSON schema validator if a JSON schema is provided\n  this.setSchema(this.options.schema, this.options.schemaRefs);\n\n  // create a debounced validate function\n  this._debouncedValidate = util.debounce(this.validate.bind(this), this.DEBOUNCE_INTERVAL);\n\n  if (options.onSelectionChange) {\n    this.onSelectionChange(options.onSelectionChange);\n  }\n\n  setLanguages(this.options.languages);\n  setLanguage(this.options.language)\n};\n\n/**\n * Set new JSON object in editor.\n * Resets the state of the editor (expanded nodes, search, selection).\n *\n * @param {*} json\n */\ntreemode.set = function (json) {\n  // verify if json is valid JSON, ignore when a function\n  if (json instanceof Function || (json === undefined)) {\n    this.clear();\n  }\n  else {\n    this.content.removeChild(this.table);  // Take the table offline\n\n    // replace the root node\n    var params = {\n      field: this.options.name,\n      value: json\n    };\n    var node = new Node(this, params);\n    this._setRoot(node);\n\n    // validate JSON schema (if configured)\n    this.validate();\n\n    // expand\n    var recurse = false;\n    this.node.expand(recurse);\n\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n\n  // TODO: maintain history, store last state and previous document\n  if (this.history) {\n    this.history.clear();\n  }\n\n  // clear search\n  if (this.searchBox) {\n    this.searchBox.clear();\n  }\n};\n\n/**\n * Update JSON object in editor.\n * Maintains the state of the editor (expanded nodes, search, selection).\n *\n * @param {*} json\n */\ntreemode.update = function (json) {\n  // don't update if there are no changes\n  if (this.node.deepEqual(json)) {\n    return;\n  }\n\n  var selection = this.getSelection();\n\n  // apply the changed json\n  this.onChangeDisabled = true; // don't fire an onChange event\n  this.node.update(json);\n  this.onChangeDisabled = false;\n\n  // validate JSON schema\n  this.validate();\n\n  // update search result if any\n  if (this.searchBox && !this.searchBox.isEmpty()) {\n    this.searchBox.forceSearch();\n  }\n\n  // update selection if any\n  if (selection && selection.start && selection.end) {\n    // only keep/update the selection if both start and end node still exists,\n    // else we clear the selection\n    var startNode = this.node.findNodeByPath(selection.start.path);\n    var endNode = this.node.findNodeByPath(selection.end.path);\n    if (startNode && endNode) {\n      this.setSelection(selection.start, selection.end);\n    }\n    else {\n      this.setSelection({}, {}); // clear selection\n    }\n  }\n  else {\n    this.setSelection({}, {}); // clear selection\n  }\n};\n\n/**\n * Get JSON object from editor\n * @return {Object | undefined} json\n */\ntreemode.get = function () {\n  // TODO: resolve pending debounced input changes if any, but do not resolve invalid inputs\n\n  if (this.node) {\n    return this.node.getValue();\n  }\n  else {\n    return undefined;\n  }\n};\n\n/**\n * Get the text contents of the editor\n * @return {String} jsonText\n */\ntreemode.getText = function() {\n  return JSON.stringify(this.get());\n};\n\n/**\n * Set the text contents of the editor.\n * Resets the state of the editor (expanded nodes, search, selection).\n * @param {String} jsonText\n */\ntreemode.setText = function(jsonText) {\n  try {\n    this.set(util.parse(jsonText)); // this can throw an error\n  }\n  catch (err) {\n    // try to sanitize json, replace JavaScript notation with JSON notation\n    var sanitizedJsonText = util.sanitize(jsonText);\n\n    // try to parse again\n    this.set(util.parse(sanitizedJsonText)); // this can throw an error\n  }\n};\n\n/**\n * Update the text contents of the editor.\n * Maintains the state of the editor (expanded nodes, search, selection).\n * @param {String} jsonText\n */\ntreemode.updateText = function(jsonText) {\n  try {\n    this.update(util.parse(jsonText)); // this can throw an error\n  }\n  catch (err) {\n    // try to sanitize json, replace JavaScript notation with JSON notation\n    var sanitizedJsonText = util.sanitize(jsonText);\n\n    // try to parse again\n    this.update(util.parse(sanitizedJsonText)); // this can throw an error\n  }\n};\n\n/**\n * Set a field name for the root node.\n * @param {String | undefined} name\n */\ntreemode.setName = function (name) {\n  this.options.name = name;\n  if (this.node) {\n    this.node.updateField(this.options.name);\n  }\n};\n\n/**\n * Get the field name for the root node.\n * @return {String | undefined} name\n */\ntreemode.getName = function () {\n  return this.options.name;\n};\n\n/**\n * Set focus to the editor. Focus will be set to:\n * - the first editable field or value, or else\n * - to the expand button of the root node, or else\n * - to the context menu button of the root node, or else\n * - to the first button in the top menu\n */\ntreemode.focus = function () {\n  var input = this.scrollableContent.querySelector('[contenteditable=true]');\n  if (input) {\n    input.focus();\n  }\n  else if (this.node.dom.expand) {\n    this.node.dom.expand.focus();\n  }\n  else if (this.node.dom.menu) {\n    this.node.dom.menu.focus();\n  }\n  else {\n    // focus to the first button in the menu\n    input = this.frame.querySelector('button');\n    if (input) {\n      input.focus();\n    }\n  }\n};\n\n/**\n * Remove the root node from the editor\n */\ntreemode.clear = function () {\n  if (this.node) {\n    this.node.hide();\n    delete this.node;\n  }\n\n  if (this.treePath) {\n    this.treePath.reset();\n  }\n};\n\n/**\n * Set the root node for the json editor\n * @param {Node} node\n * @private\n */\ntreemode._setRoot = function (node) {\n  this.clear();\n\n  this.node = node;\n\n  // append to the dom\n  this.tbody.appendChild(node.getDom());\n};\n\n/**\n * Search text in all nodes\n * The nodes will be expanded when the text is found one of its childs,\n * else it will be collapsed. Searches are case insensitive.\n * @param {String} text\n * @return {Object[]} results  Array with nodes containing the search results\n *                             The result objects contains fields:\n *                             - {Node} node,\n *                             - {String} elem  the dom element name where\n *                                              the result is found ('field' or\n *                                              'value')\n */\ntreemode.search = function (text) {\n  var results;\n  if (this.node) {\n    this.content.removeChild(this.table);  // Take the table offline\n    results = this.node.search(text);\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n  else {\n    results = [];\n  }\n\n  return results;\n};\n\n/**\n * Expand all nodes\n */\ntreemode.expandAll = function () {\n  if (this.node) {\n    this.content.removeChild(this.table);  // Take the table offline\n    this.node.expand();\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n};\n\n/**\n * Collapse all nodes\n */\ntreemode.collapseAll = function () {\n  if (this.node) {\n    this.content.removeChild(this.table);  // Take the table offline\n    this.node.collapse();\n    this.content.appendChild(this.table);  // Put the table online again\n  }\n};\n\n/**\n * The method onChange is called whenever a field or value is changed, created,\n * deleted, duplicated, etc.\n * @param {String} action  Change action. Available values: \"editField\",\n *                         \"editValue\", \"changeType\", \"appendNode\",\n *                         \"removeNode\", \"duplicateNode\", \"moveNode\", \"expand\",\n *                         \"collapse\".\n * @param {Object} params  Object containing parameters describing the change.\n *                         The parameters in params depend on the action (for\n *                         example for \"editValue\" the Node, old value, and new\n *                         value are provided). params contains all information\n *                         needed to undo or redo the action.\n * @private\n */\ntreemode._onAction = function (action, params) {\n  // add an action to the history\n  if (this.history) {\n    this.history.add(action, params);\n  }\n\n  this._onChange();\n};\n\n/**\n * Handle a change:\n * - Validate JSON schema\n * - Send a callback to the onChange listener if provided\n * @private\n */\ntreemode._onChange = function () {\n  if (this.onChangeDisabled) {\n    return;\n  }\n\n  // selection can be changed after undo/redo\n  this.selection = this.getDomSelection();\n\n  // validate JSON schema (if configured)\n  this._debouncedValidate();\n\n  if (this.treePath) {\n    var selectedNode = this.selection\n        ?  this.node.findNodeByInternalPath(this.selection.path)\n        : this.multiselection\n            ? this.multiselection.nodes[0]\n            : undefined;\n\n    if (selectedNode) {\n      this._updateTreePath(selectedNode.getNodePath())\n    }\n    else {\n      this.treePath.reset()\n    }\n  }\n\n  // trigger the onChange callback\n  if (this.options.onChange) {\n    try {\n      this.options.onChange();\n    }\n    catch (err) {\n      console.error('Error in onChange callback: ', err);\n    }\n  }\n\n  // trigger the onChangeJSON callback\n  if (this.options.onChangeJSON) {\n    try {\n      this.options.onChangeJSON(this.get());\n    }\n    catch (err) {\n      console.error('Error in onChangeJSON callback: ', err);\n    }\n  }\n\n  // trigger the onChangeText callback\n  if (this.options.onChangeText) {\n    try {\n      this.options.onChangeText(this.getText());\n    }\n    catch (err) {\n      console.error('Error in onChangeText callback: ', err);\n    }\n  }\n\n  // trigger the onClassName callback\n  if(this.options.onClassName) {\n    this.node.recursivelyUpdateCssClassesOnNodes();\n  }\n\n  // trigger the onNodeName callback\n  if (this.options.onNodeName && this.node.childs) {\n    try {\n      this.node.recursivelyUpdateNodeName();\n    } catch (err) {\n      console.error(\"Error in onNodeName callback: \", err);\n    }  \n  }\n};\n\n/**\n * Validate current JSON object against the configured JSON schema\n * Throws an exception when no JSON schema is configured\n */\ntreemode.validate = function () {\n  var root = this.node;\n  if (!root) { // TODO: this should be redundant but is needed on mode switch\n    return;\n  }\n\n  var json = root.getValue();\n\n  // execute JSON schema validation\n  var schemaErrors = [];\n  if (this.validateSchema) {\n    var valid = this.validateSchema(json);\n    if (!valid) {\n      // apply all new errors\n      schemaErrors = this.validateSchema.errors\n          .map(function (error) {\n            return util.improveSchemaError(error);\n          })\n          .map(function findNode (error) {\n            return {\n              node: root.findNode(error.dataPath),\n              error: error\n            }\n          })\n          .filter(function hasNode (entry) {\n            return entry.node != null\n          });\n    }\n  }\n\n  // execute custom validation and after than merge and render all errors\n  try {\n    this.validationSequence++;\n    var me = this;\n    var seq = this.validationSequence;\n    this._validateCustom(json)\n        .then(function (customValidationErrors) {\n          // only apply when there was no other validation started whilst resolving async results\n          if (seq === me.validationSequence) {\n            var errorNodes = [].concat(schemaErrors, customValidationErrors || []);\n            me._renderValidationErrors(errorNodes);\n          }\n        })\n        .catch(function (err) {\n          console.error(err);\n        });\n  }\n  catch (err) {\n    console.error(err);\n  }\n};\n\ntreemode._renderValidationErrors = function (errorNodes) {\n  // clear all current errors\n  if (this.errorNodes) {\n    this.errorNodes.forEach(function (node) {\n      node.setError(null);\n    });\n  }\n\n  // render the new errors\n  var parentPairs = errorNodes\n      .reduce(function (all, entry) {\n        return entry.node\n            .findParents()\n            .filter(function (parent) {\n              return !all.some(function (pair) {\n                return pair[0] === parent;\n              });\n            })\n            .map(function (parent) {\n              return [parent, entry.node];\n            })\n            .concat(all);\n      }, []);\n\n  this.errorNodes = parentPairs\n      .map(function (pair) {\n        return {\n          node: pair[0],\n          child: pair[1],\n          error: {\n            message: pair[0].type === 'object'\n                ? 'Contains invalid properties' // object\n                : 'Contains invalid items'      // array\n          }\n        };\n      })\n      .concat(errorNodes)\n      .map(function setError (entry) {\n        entry.node.setError(entry.error, entry.child);\n        return entry.node;\n      });\n};\n\n/**\n * Execute custom validation if configured.\n *\n * Returns a promise resolving with the custom errors (or nothing).\n */\ntreemode._validateCustom = function (json) {\n  try {\n    if (this.options.onValidate) {\n      var root = this.node;\n      var customValidateResults = this.options.onValidate(json);\n\n      var resultPromise = util.isPromise(customValidateResults)\n          ? customValidateResults\n          : Promise.resolve(customValidateResults);\n\n      return resultPromise.then(function (customValidationPathErrors) {\n        if (Array.isArray(customValidationPathErrors)) {\n          return customValidationPathErrors\n              .filter(function (error) {\n                var valid = util.isValidValidationError(error);\n\n                if (!valid) {\n                  console.warn('Ignoring a custom validation error with invalid structure. ' +\n                      'Expected structure: {path: [...], message: \"...\"}. ' +\n                      'Actual error:', error);\n                }\n\n                return valid;\n              })\n              .map(function (error) {\n                var node;\n                try {\n                  node = (error && error.path) ? root.findNodeByPath(error.path) : null\n                }\n                catch (err) {\n                  // stay silent here, we throw a generic warning if no node is found\n                }\n                if (!node) {\n                  console.warn('Ignoring validation error: node not found. Path:', error.path, 'Error:', error);\n                }\n\n                return {\n                  node: node,\n                  error: error\n                }\n              })\n              .filter(function (entry) {\n                return entry && entry.node && entry.error && entry.error.message\n              });\n        }\n        else {\n          return null;\n        }\n      });\n    }\n  }\n  catch (err) {\n    return Promise.reject(err);\n  }\n\n  return Promise.resolve(null);\n};\n\n/**\n * Refresh the rendered contents\n */\ntreemode.refresh = function () {\n  if (this.node) {\n    this.node.updateDom({recurse: true});\n  }\n};\n\n/**\n * Start autoscrolling when given mouse position is above the top of the\n * editor contents, or below the bottom.\n * @param {Number} mouseY  Absolute mouse position in pixels\n */\ntreemode.startAutoScroll = function (mouseY) {\n  var me = this;\n  var content = this.scrollableContent;\n  var top = util.getAbsoluteTop(content);\n  var height = content.clientHeight;\n  var bottom = top + height;\n  var margin = 24;\n  var interval = 50; // ms\n\n  if ((mouseY < top + margin) && content.scrollTop > 0) {\n    this.autoScrollStep = ((top + margin) - mouseY) / 3;\n  }\n  else if (mouseY > bottom - margin &&\n      height + content.scrollTop < content.scrollHeight) {\n    this.autoScrollStep = ((bottom - margin) - mouseY) / 3;\n  }\n  else {\n    this.autoScrollStep = undefined;\n  }\n\n  if (this.autoScrollStep) {\n    if (!this.autoScrollTimer) {\n      this.autoScrollTimer = setInterval(function () {\n        if (me.autoScrollStep) {\n          content.scrollTop -= me.autoScrollStep;\n        }\n        else {\n          me.stopAutoScroll();\n        }\n      }, interval);\n    }\n  }\n  else {\n    this.stopAutoScroll();\n  }\n};\n\n/**\n * Stop auto scrolling. Only applicable when scrolling\n */\ntreemode.stopAutoScroll = function () {\n  if (this.autoScrollTimer) {\n    clearTimeout(this.autoScrollTimer);\n    delete this.autoScrollTimer;\n  }\n  if (this.autoScrollStep) {\n    delete this.autoScrollStep;\n  }\n};\n\n\n/**\n * Set the focus to an element in the editor, set text selection, and\n * set scroll position.\n * @param {Object} selection  An object containing fields:\n *                            {Element | undefined} dom     The dom element\n *                                                          which has focus\n *                            {Range | TextRange} range     A text selection\n *                            {Node[]} nodes                Nodes in case of multi selection\n *                            {Number} scrollTop            Scroll position\n */\ntreemode.setDomSelection = function (selection) {\n  if (!selection) {\n    return;\n  }\n\n  if ('scrollTop' in selection && this.scrollableContent) {\n    // TODO: animated scroll\n    this.scrollableContent.scrollTop = selection.scrollTop;\n  }\n  if (selection.paths) {\n    // multi-select\n    var me = this;\n    var nodes = selection.paths.map(function (path) {\n      return me.node.findNodeByInternalPath(path);\n    });\n\n    this.select(nodes);\n  }\n  else {\n    // find the actual DOM element where to apply the focus\n    var node = selection.path\n        ? this.node.findNodeByInternalPath(selection.path)\n        : null;\n    var container = (node && selection.domName)\n        ? node.dom[selection.domName]\n        : null;\n    if (selection.range && container) {\n      var range = Object.assign({}, selection.range, { container: container });\n      util.setSelectionOffset(range);\n    }\n    else if (node) { // just a fallback\n      node.focus();\n    }\n  }\n};\n\n/**\n * Get the current focus\n * @return {Object} selection An object containing fields:\n *                            {Element | undefined} dom     The dom element\n *                                                          which has focus\n *                            {Range | TextRange} range     A text selection\n *                            {Node[]} nodes                Nodes in case of multi selection\n *                            {Number} scrollTop            Scroll position\n */\ntreemode.getDomSelection = function () {\n  // find the node and field name of the current target,\n  // so we can store the current selection in a serializable\n  // way (internal node path and domName)\n  var node = Node.getNodeFromTarget(this.focusTarget);\n  var focusTarget = this.focusTarget;\n  var domName = node\n      ? Object.keys(node.dom).find(function (domName) {\n        return node.dom[domName] === focusTarget;\n      })\n      : null;\n\n  var range = util.getSelectionOffset();\n  if (range && range.container.nodeName !== 'DIV') { // filter on (editable) divs)\n    range = null;\n  }\n  if (range && range.container !== focusTarget) {\n    range = null;\n  }\n  if (range) {\n    // we cannot rely on the current instance of the container,\n    // we need to store the internal node path and field and\n    // find the actual DOM field when applying the selection\n    delete range.container;\n  }\n\n  return {\n    path: node ? node.getInternalPath() : null,\n    domName: domName,\n    range: range,\n    paths: this.multiselection.length > 0\n        ? this.multiselection.nodes.map(function (node) {\n            return node.getInternalPath();\n          })\n        : null,\n    scrollTop: this.scrollableContent ? this.scrollableContent.scrollTop : 0\n  };\n};\n\n/**\n * Adjust the scroll position such that given top position is shown at 1/4\n * of the window height.\n * @param {Number} top\n * @param {function(boolean)} [callback]   Callback, executed when animation is\n *                                         finished. The callback returns true\n *                                         when animation is finished, or false\n *                                         when not.\n */\ntreemode.scrollTo = function (top, callback) {\n  var content = this.scrollableContent;\n  if (content) {\n    var editor = this;\n    // cancel any running animation\n    if (editor.animateTimeout) {\n      clearTimeout(editor.animateTimeout);\n      delete editor.animateTimeout;\n    }\n    if (editor.animateCallback) {\n      editor.animateCallback(false);\n      delete editor.animateCallback;\n    }\n\n    // calculate final scroll position\n    var height = content.clientHeight;\n    var bottom = content.scrollHeight - height;\n    var finalScrollTop = Math.min(Math.max(top - height / 4, 0), bottom);\n\n    // animate towards the new scroll position\n    var animate = function () {\n      var scrollTop = content.scrollTop;\n      var diff = (finalScrollTop - scrollTop);\n      if (Math.abs(diff) > 3) {\n        content.scrollTop += diff / 3;\n        editor.animateCallback = callback;\n        editor.animateTimeout = setTimeout(animate, 50);\n      }\n      else {\n        // finished\n        if (callback) {\n          callback(true);\n        }\n        content.scrollTop = finalScrollTop;\n        delete editor.animateTimeout;\n        delete editor.animateCallback;\n      }\n    };\n    animate();\n  }\n  else {\n    if (callback) {\n      callback(false);\n    }\n  }\n};\n\n/**\n * Create main frame\n * @private\n */\ntreemode._createFrame = function () {\n  // create the frame\n  this.frame = document.createElement('div');\n  this.frame.className = 'jsoneditor jsoneditor-mode-' + this.options.mode;\n  this.container.appendChild(this.frame);\n\n  this.contentOuter = document.createElement('div');\n  this.contentOuter.className = 'jsoneditor-outer';\n\n  // create one global event listener to handle all events from all nodes\n  var editor = this;\n  function onEvent(event) {\n    // when switching to mode \"code\" or \"text\" via the menu, some events\n    // are still fired whilst the _onEvent methods is already removed.\n    if (editor._onEvent) {\n      editor._onEvent(event);\n    }\n  }\n  this.frame.onclick = function (event) {\n    var target = event.target;// || event.srcElement;\n\n    onEvent(event);\n\n    // prevent default submit action of buttons when editor is located\n    // inside a form\n    if (target.nodeName == 'BUTTON') {\n      event.preventDefault();\n    }\n  };\n  this.frame.oninput = onEvent;\n  this.frame.onchange = onEvent;\n  this.frame.onkeydown = onEvent;\n  this.frame.onkeyup = onEvent;\n  this.frame.oncut = onEvent;\n  this.frame.onpaste = onEvent;\n  this.frame.onmousedown = onEvent;\n  this.frame.onmouseup = onEvent;\n  this.frame.onmouseover = onEvent;\n  this.frame.onmouseout = onEvent;\n  // Note: focus and blur events do not propagate, therefore they defined\n  // using an eventListener with useCapture=true\n  // see http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html\n  util.addEventListener(this.frame, 'focus', onEvent, true);\n  util.addEventListener(this.frame, 'blur', onEvent, true);\n  this.frame.onfocusin = onEvent;  // for IE\n  this.frame.onfocusout = onEvent; // for IE\n\n  if (this.options.mainMenuBar) {\n    util.addClassName(this.contentOuter, 'has-main-menu-bar');\n\n    // create menu\n    this.menu = document.createElement('div');\n    this.menu.className = 'jsoneditor-menu';\n    this.frame.appendChild(this.menu);\n\n    // create expand all button\n    var expandAll = document.createElement('button');\n    expandAll.type = 'button';\n    expandAll.className = 'jsoneditor-expand-all';\n    expandAll.title = translate('expandAll');\n    expandAll.onclick = function () {\n      editor.expandAll();\n    };\n    this.menu.appendChild(expandAll);\n\n    // create collapse all button\n    var collapseAll = document.createElement('button');\n    collapseAll.type = 'button';\n    collapseAll.title = translate('collapseAll');\n    collapseAll.className = 'jsoneditor-collapse-all';\n    collapseAll.onclick = function () {\n      editor.collapseAll();\n    };\n    this.menu.appendChild(collapseAll);\n\n    // create sort button\n    if (this.options.enableSort) {\n      var sort = document.createElement('button');\n      sort.type = 'button';\n      sort.className = 'jsoneditor-sort';\n      sort.title = translate('sortTitleShort');\n      sort.onclick = function () {\n        var anchor = editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n        showSortModal(editor.node, anchor)\n      };\n      this.menu.appendChild(sort);\n    }\n\n    // create transform button\n    if (this.options.enableTransform) {\n      var transform = document.createElement('button');\n      transform.type = 'button';\n      transform.title = translate('transformTitleShort');\n      transform.className = 'jsoneditor-transform';\n      transform.onclick = function () {\n        var anchor = editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n        showTransformModal(editor.node, anchor)\n      };\n      this.menu.appendChild(transform);\n    }\n\n    // create undo/redo buttons\n    if (this.history) {\n      // create undo button\n      var undo = document.createElement('button');\n      undo.type = 'button';\n      undo.className = 'jsoneditor-undo jsoneditor-separator';\n      undo.title = translate('undo');\n      undo.onclick = function () {\n        editor._onUndo();\n      };\n      this.menu.appendChild(undo);\n      this.dom.undo = undo;\n\n      // create redo button\n      var redo = document.createElement('button');\n      redo.type = 'button';\n      redo.className = 'jsoneditor-redo';\n      redo.title = translate('redo');\n      redo.onclick = function () {\n        editor._onRedo();\n      };\n      this.menu.appendChild(redo);\n      this.dom.redo = redo;\n\n      // register handler for onchange of history\n      this.history.onChange = function () {\n        undo.disabled = !editor.history.canUndo();\n        redo.disabled = !editor.history.canRedo();\n      };\n      this.history.onChange();\n    }\n\n    // create mode box\n    if (this.options && this.options.modes && this.options.modes.length) {\n      var me = this;\n      this.modeSwitcher = new ModeSwitcher(this.menu, this.options.modes, this.options.mode, function onSwitch(mode) {\n        // switch mode and restore focus\n        me.setMode(mode);\n        me.modeSwitcher.focus();\n      });\n    }\n\n    // create search box\n    if (this.options.search) {\n      this.searchBox = new SearchBox(this, this.menu);\n    }\n  }\n\n  if (this.options.navigationBar) {\n    // create second menu row for treepath\n    this.navBar = document.createElement('div');\n    this.navBar.className = 'jsoneditor-navigation-bar nav-bar-empty';\n    this.frame.appendChild(this.navBar);\n\n    this.treePath = new TreePath(this.navBar, this.frame);\n    this.treePath.onSectionSelected(this._onTreePathSectionSelected.bind(this));\n    this.treePath.onContextMenuItemSelected(this._onTreePathMenuItemSelected.bind(this));\n  }\n};\n\n/**\n * Perform an undo action\n * @private\n */\ntreemode._onUndo = function () {\n  if (this.history) {\n    // undo last action\n    this.history.undo();\n\n    // fire change event\n    this._onChange();\n  }\n};\n\n/**\n * Perform a redo action\n * @private\n */\ntreemode._onRedo = function () {\n  if (this.history) {\n    // redo last action\n    this.history.redo();\n\n    // fire change event\n    this._onChange();\n  }\n};\n\n/**\n * Event handler\n * @param event\n * @private\n */\ntreemode._onEvent = function (event) {\n  // don't process events when coming from the color picker\n  if (Node.targetIsColorPicker(event.target)) {\n    return;\n  }\n\n  var node = Node.getNodeFromTarget(event.target);\n\n  if (event.type === 'keydown') {\n    this._onKeyDown(event);\n  }\n\n  if (event.type === 'focus') {\n    this.focusTarget = event.target;\n    if (this.options.autocomplete && this.options.autocomplete.trigger === 'focus') {\n      this._showAutoComplete(event.target);\n    }\n  }\n\n  if (event.type === 'mousedown') {\n    this._startDragDistance(event);\n  }\n  if (event.type === 'mousemove' || event.type === 'mouseup' || event.type === 'click') {\n    this._updateDragDistance(event);\n  }\n\n\n  if (node && this.options && this.options.navigationBar && node && (event.type === 'keydown' || event.type === 'mousedown')) {\n    // apply on next tick, right after the new key press is applied\n    var me = this;\n    setTimeout(function () {\n      me._updateTreePath(node.getNodePath());\n    })\n  }\n\n  if (node && node.selected) {\n    if (event.type === 'click') {\n      if (event.target === node.dom.menu) {\n        this.showContextMenu(event.target);\n\n        // stop propagation (else we will open the context menu of a single node)\n        return;\n      }\n\n      // deselect a multi selection\n      if (!event.hasMoved) {\n        this.deselect();\n      }\n    }\n\n    if (event.type === 'mousedown') {\n      // drag multiple nodes\n      Node.onDragStart(this.multiselection.nodes, event);\n    }\n  }\n  else {\n    // filter mouse events in the contents part of the editor (not the main menu)\n    if (event.type === 'mousedown' && util.hasParentNode(event.target, this.content)) {\n      this.deselect();\n\n      if (node && event.target === node.dom.drag) {\n        // drag a singe node\n        Node.onDragStart(node, event);\n      }\n      else if (!node || (event.target !== node.dom.field && event.target !== node.dom.value && event.target !== node.dom.select)) {\n        // select multiple nodes\n        this._onMultiSelectStart(event);\n      }\n    }\n  }\n\n  if (node) {\n    node.onEvent(event);\n  }\n};\n\n/**\n * Update TreePath components\n * @param {Array<Node>} pathNodes list of nodes in path from root to selection\n * @private\n */\ntreemode._updateTreePath = function (pathNodes) {\n  if (pathNodes && pathNodes.length) {\n    util.removeClassName(this.navBar, 'nav-bar-empty');\n\n    var pathObjs = [];\n    pathNodes.forEach(function (node) {\n      var pathObj = {\n        name: getName(node),\n        node: node,\n        children: []\n      };\n      if (node.childs && node.childs.length) {\n        node.childs.forEach(function (childNode) {\n          pathObj.children.push({\n            name: getName(childNode),\n            node: childNode\n          });\n        });\n      }\n      pathObjs.push(pathObj);\n    });\n    this.treePath.setPath(pathObjs);\n  } else {\n    util.addClassName(this.navBar, 'nav-bar-empty');\n  }\n\n  function getName(node) {\n    return node.parent\n        ? ((node.parent.type === 'array') ? node.index : node.field)\n        : node.type;\n  }\n};\n\n/**\n * Callback for tree path section selection - focus the selected node in the tree\n * @param {Object} pathObj path object that was represents the selected section node\n * @private\n */\ntreemode._onTreePathSectionSelected = function (pathObj) {\n  if(pathObj && pathObj.node) {\n    pathObj.node.expandTo();\n    pathObj.node.focus();\n  }\n};\n\n/**\n * Callback for tree path menu item selection - rebuild the path accrding to the new selection and focus the selected node in the tree\n * @param {Object} pathObj path object that was represents the parent section node\n * @param {String} selection selected section child\n * @private\n */\ntreemode._onTreePathMenuItemSelected = function (pathObj, selection) {\n  if(pathObj && pathObj.children.length) {\n    var selectionObj = pathObj.children.find(function (obj) {\n      return obj.name === selection;\n    });\n    if(selectionObj && selectionObj.node) {\n      this._updateTreePath(selectionObj.node.getNodePath());\n      selectionObj.node.expandTo();\n      selectionObj.node.focus();\n    }\n  }\n};\n\ntreemode._startDragDistance = function (event) {\n  this.dragDistanceEvent = {\n    initialTarget: event.target,\n    initialPageX: event.pageX,\n    initialPageY: event.pageY,\n    dragDistance: 0,\n    hasMoved: false\n  };\n};\n\ntreemode._updateDragDistance = function (event) {\n  if (!this.dragDistanceEvent) {\n    this._startDragDistance(event);\n  }\n\n  var diffX = event.pageX - this.dragDistanceEvent.initialPageX;\n  var diffY = event.pageY - this.dragDistanceEvent.initialPageY;\n\n  this.dragDistanceEvent.dragDistance = Math.sqrt(diffX * diffX + diffY * diffY);\n  this.dragDistanceEvent.hasMoved =\n      this.dragDistanceEvent.hasMoved || this.dragDistanceEvent.dragDistance > 10;\n\n  event.dragDistance = this.dragDistanceEvent.dragDistance;\n  event.hasMoved = this.dragDistanceEvent.hasMoved;\n\n  return event.dragDistance;\n};\n\n/**\n * Start multi selection of nodes by dragging the mouse\n * @param event\n * @private\n */\ntreemode._onMultiSelectStart = function (event) {\n  var node = Node.getNodeFromTarget(event.target);\n\n  if (this.options.mode !== 'tree' || this.options.onEditable !== undefined) {\n    // dragging not allowed in modes 'view' and 'form'\n    // TODO: allow multiselection of items when option onEditable is specified\n    return;\n  }\n\n  this.multiselection = {\n    start: node || null,\n    end: null,\n    nodes: []\n  };\n\n  this._startDragDistance(event);\n\n  var editor = this;\n  if (!this.mousemove) {\n    this.mousemove = util.addEventListener(window, 'mousemove', function (event) {\n      editor._onMultiSelect(event);\n    });\n  }\n  if (!this.mouseup) {\n    this.mouseup = util.addEventListener(window, 'mouseup', function (event ) {\n      editor._onMultiSelectEnd(event);\n    });\n  }\n\n  event.preventDefault();\n};\n\n/**\n * Multiselect nodes by dragging\n * @param event\n * @private\n */\ntreemode._onMultiSelect = function (event) {\n  event.preventDefault();\n\n  this._updateDragDistance(event);\n  if (!event.hasMoved) {\n    return;\n  }\n\n  var node = Node.getNodeFromTarget(event.target);\n\n  if (node) {\n    if (this.multiselection.start == null) {\n      this.multiselection.start = node;\n    }\n    this.multiselection.end = node;\n  }\n\n  // deselect previous selection\n  this.deselect();\n\n  // find the selected nodes in the range from first to last\n  var start = this.multiselection.start;\n  var end = this.multiselection.end || this.multiselection.start;\n  if (start && end) {\n    // find the top level childs, all having the same parent\n    this.multiselection.nodes = this._findTopLevelNodes(start, end);\n    if (this.multiselection.nodes && this.multiselection.nodes.length) {\n      var firstNode = this.multiselection.nodes[0];\n      if (this.multiselection.start === firstNode || this.multiselection.start.isDescendantOf(firstNode)) {\n        this.multiselection.direction = 'down';\n      } else {\n        this.multiselection.direction = 'up';\n      }\n    }\n    this.select(this.multiselection.nodes);\n  }\n};\n\n/**\n * End of multiselect nodes by dragging\n * @private\n */\ntreemode._onMultiSelectEnd = function () {\n  // set focus to the context menu button of the first node\n  if (this.multiselection.nodes[0]) {\n    this.multiselection.nodes[0].dom.menu.focus();\n  }\n\n  this.multiselection.start = null;\n  this.multiselection.end = null;\n\n  // cleanup global event listeners\n  if (this.mousemove) {\n    util.removeEventListener(window, 'mousemove', this.mousemove);\n    delete this.mousemove;\n  }\n  if (this.mouseup) {\n    util.removeEventListener(window, 'mouseup', this.mouseup);\n    delete this.mouseup;\n  }\n};\n\n/**\n * deselect currently selected nodes\n * @param {boolean} [clearStartAndEnd=false]  If true, the `start` and `end`\n *                                            state is cleared too.\n */\ntreemode.deselect = function (clearStartAndEnd) {\n  var selectionChanged = !!this.multiselection.nodes.length;\n  this.multiselection.nodes.forEach(function (node) {\n    node.setSelected(false);\n  });\n  this.multiselection.nodes = [];\n\n  if (clearStartAndEnd) {\n    this.multiselection.start = null;\n    this.multiselection.end = null;\n  }\n\n  if (selectionChanged) {\n    if (this._selectionChangedHandler) {\n      this._selectionChangedHandler();\n    }\n  }\n};\n\n/**\n * select nodes\n * @param {Node[] | Node} nodes\n */\ntreemode.select = function (nodes) {\n  if (!Array.isArray(nodes)) {\n    return this.select([nodes]);\n  }\n\n  if (nodes) {\n    this.deselect();\n\n    this.multiselection.nodes = nodes.slice(0);\n\n    var first = nodes[0];\n    nodes.forEach(function (node) {\n      node.expandPathToNode();\n      node.setSelected(true, node === first);\n    });\n\n    if (this._selectionChangedHandler) {\n      var selection = this.getSelection();\n      this._selectionChangedHandler(selection.start, selection.end);\n    }\n  }\n};\n\n/**\n * From two arbitrary selected nodes, find their shared parent node.\n * From that parent node, select the two child nodes in the brances going to\n * nodes `start` and `end`, and select all childs in between.\n * @param {Node} start\n * @param {Node} end\n * @return {Array.<Node>} Returns an ordered list with child nodes\n * @private\n */\ntreemode._findTopLevelNodes = function (start, end) {\n  var startPath = start.getNodePath();\n  var endPath = end.getNodePath();\n  var i = 0;\n  while (i < startPath.length && startPath[i] === endPath[i]) {\n    i++;\n  }\n  var root = startPath[i - 1];\n  var startChild = startPath[i];\n  var endChild = endPath[i];\n\n  if (!startChild || !endChild) {\n    if (root.parent) {\n      // startChild is a parent of endChild or vice versa\n      startChild = root;\n      endChild = root;\n      root = root.parent\n    }\n    else {\n      // we have selected the root node (which doesn't have a parent)\n      startChild = root.childs[0];\n      endChild = root.childs[root.childs.length - 1];\n    }\n  }\n\n  if (root && startChild && endChild) {\n    var startIndex = root.childs.indexOf(startChild);\n    var endIndex = root.childs.indexOf(endChild);\n    var firstIndex = Math.min(startIndex, endIndex);\n    var lastIndex = Math.max(startIndex, endIndex);\n\n    return root.childs.slice(firstIndex, lastIndex + 1);\n  }\n  else {\n    return [];\n  }\n};\n\n/**\n * Show autocomplete menu\n * @param {Node} node\n * @param {HTMLElement} element\n * @private\n */\ntreemode._showAutoComplete = function (element) {\n  var node = Node.getNodeFromTarget(element);\n\n  var jsonElementType = \"\";\n    if (event.target.className.indexOf(\"jsoneditor-value\") >= 0) jsonElementType = \"value\";\n    if (event.target.className.indexOf(\"jsoneditor-field\") >= 0) jsonElementType = \"field\";\n\n  var self = this;\n\n  setTimeout(function () {\n      if (self.options.autocomplete.trigger === 'focus' || element.innerText.length > 0) {\n          var result = self.options.autocomplete.getOptions(element.innerText, node.getPath(), jsonElementType, node.editor);\n          if (result === null) {\n              self.autocomplete.hideDropDown();\n          } else if (typeof result.then === 'function') {\n              // probably a promise\n              if (result.then(function (obj) {\n                  if (obj === null) {\n                      self.autocomplete.hideDropDown();\n                  } else if (obj.options) {\n                      self.autocomplete.show(element, obj.startFrom, obj.options);\n                  } else {\n                      self.autocomplete.show(element, 0, obj);\n                  }\n              }.bind(self)));\n          } else {\n              // definitely not a promise\n              if (result.options)\n                  self.autocomplete.show(element, result.startFrom, result.options);\n              else\n                  self.autocomplete.show(element, 0, result);\n          }\n      }\n      else\n          self.autocomplete.hideDropDown();\n\n  }, 50);\n}\n\n/**\n * Event handler for keydown. Handles shortcut keys\n * @param {Event} event\n * @private\n */\ntreemode._onKeyDown = function (event) {\n  var keynum = event.which || event.keyCode;\n  var altKey = event.altKey;\n  var ctrlKey = event.ctrlKey;\n  var metaKey = event.metaKey;\n  var shiftKey = event.shiftKey;\n  var handled = false;\n\n  if (keynum == 9) { // Tab or Shift+Tab\n    var me = this;\n    setTimeout(function () {\n      // select all text when moving focus to an editable div\n      util.selectContentEditable(me.focusTarget);\n    }, 0);\n  }\n\n  if (this.searchBox) {\n    if (ctrlKey && keynum == 70) { // Ctrl+F\n      this.searchBox.dom.search.focus();\n      this.searchBox.dom.search.select();\n      handled = true;\n    }\n    else if (keynum == 114 || (ctrlKey && keynum == 71)) { // F3 or Ctrl+G\n      var focus = true;\n      if (!shiftKey) {\n        // select next search result (F3 or Ctrl+G)\n        this.searchBox.next(focus);\n      }\n      else {\n        // select previous search result (Shift+F3 or Ctrl+Shift+G)\n        this.searchBox.previous(focus);\n      }\n\n      handled = true;\n    }\n  }\n\n  if (this.history) {\n    if (ctrlKey && !shiftKey && keynum == 90) { // Ctrl+Z\n      // undo\n      this._onUndo();\n      handled = true;\n    }\n    else if (ctrlKey && shiftKey && keynum == 90) { // Ctrl+Shift+Z\n      // redo\n      this._onRedo();\n      handled = true;\n    }\n  }\n\n  if ((this.options.autocomplete) && (!handled)) {\n      if (!ctrlKey && !altKey && !metaKey && (event.key.length == 1 || keynum == 8 || keynum == 46)) {\n        handled = false;\n        var node = Node.getNodeFromTarget(event.target);\n\n        // Activate autocomplete\n        this._showAutoComplete(event.target);\n      }\n  }\n\n  if (handled) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\n/**\n * Create main table\n * @private\n */\ntreemode._createTable = function () {\n  if (this.options.navigationBar) {\n    util.addClassName(this.contentOuter, 'has-nav-bar');\n  }\n\n  this.scrollableContent = document.createElement('div');\n  this.scrollableContent.className = 'jsoneditor-tree';\n  this.contentOuter.appendChild(this.scrollableContent);\n\n  // the jsoneditor-tree-inner div with bottom padding is here to\n  // keep space for the action menu dropdown. It's created as a\n  // separate div instead of using scrollableContent to work around\n  // and issue in the Chrome browser showing scrollable contents outside of the div\n  // see https://github.com/josdejong/jsoneditor/issues/557\n  this.content = document.createElement('div');\n  this.content.className = 'jsoneditor-tree-inner';\n  this.scrollableContent.appendChild(this.content);\n\n  this.table = document.createElement('table');\n  this.table.className = 'jsoneditor-tree';\n  this.content.appendChild(this.table);\n\n  // create colgroup where the first two columns don't have a fixed\n  // width, and the edit columns do have a fixed width\n  var col;\n  this.colgroupContent = document.createElement('colgroup');\n  if (this.options.mode === 'tree') {\n    col = document.createElement('col');\n    col.width = \"24px\";\n    this.colgroupContent.appendChild(col);\n  }\n  col = document.createElement('col');\n  col.width = \"24px\";\n  this.colgroupContent.appendChild(col);\n  col = document.createElement('col');\n  this.colgroupContent.appendChild(col);\n  this.table.appendChild(this.colgroupContent);\n\n  this.tbody = document.createElement('tbody');\n  this.table.appendChild(this.tbody);\n\n  this.frame.appendChild(this.contentOuter);\n};\n\n/**\n * Show a contextmenu for this node.\n * Used for multiselection\n * @param {HTMLElement} anchor   Anchor element to attach the context menu to.\n * @param {function} [onClose]   Callback method called when the context menu\n *                               is being closed.\n */\ntreemode.showContextMenu = function (anchor, onClose) {\n  var items = [];\n  var selectedNodes = this.multiselection.nodes.slice();\n\n  // create duplicate button\n  items.push({\n    text: translate('duplicateText'),\n    title: translate('duplicateTitle'),\n    className: 'jsoneditor-duplicate',\n    click: function () {\n      Node.onDuplicate(selectedNodes );\n    }\n  });\n\n  // create remove button\n  items.push({\n    text: translate('remove'),\n    title: translate('removeTitle'),\n    className: 'jsoneditor-remove',\n    click: function () {\n      Node.onRemove(selectedNodes);\n    }\n  });\n  \n  if (this.options.onCreateMenu) {\n    var paths = selectedNodes.map(function (node) {\n      return node.getPath();\n    });\n\n\t\titems = this.options.onCreateMenu(items, {\n\t\t  type: 'multiple',\n\t\t  path: paths[0],\n      paths: paths\n\t\t});\n\t}\n\n  var menu = new ContextMenu(items, {close: onClose});\n  menu.show(anchor, this.frame);\n};\n\n/**\n * Get current selected nodes\n * @return {{start:SerializableNode, end: SerializableNode}}\n */\ntreemode.getSelection = function () {\n  var selection = {\n    start: null,\n    end: null\n  };\n  if (this.multiselection.nodes && this.multiselection.nodes.length) {\n    if (this.multiselection.nodes.length) {\n      var selection1 = this.multiselection.nodes[0];\n      var selection2 = this.multiselection.nodes[this.multiselection.nodes.length - 1];\n      if (this.multiselection.direction === 'down') {\n        selection.start = selection1.serialize();\n        selection.end = selection2.serialize();\n      } else {\n        selection.start = selection2.serialize();\n        selection.end = selection1.serialize();\n      }\n    }\n  }\n  return selection;\n};\n\n/**\n * Callback registration for selection change\n * @param {selectionCallback} callback\n *\n * @callback selectionCallback\n */\ntreemode.onSelectionChange = function (callback) {\n  if (typeof callback === 'function') {\n    this._selectionChangedHandler = util.debounce(callback, this.DEBOUNCE_INTERVAL);\n  }\n};\n\n/**\n * Select range of nodes.\n * For selecting single node send only the start parameter\n * For clear the selection do not send any parameter\n * If the nodes are not from the same level the first common parent will be selected\n * @param {{path: Array.<String>}} start object contains the path for selection start\n * @param {{path: Array.<String>}} end object contains the path for selection end\n */\ntreemode.setSelection = function (start, end) {\n  // check for old usage\n  if (start && start.dom && start.range) {\n    console.warn('setSelection/getSelection usage for text selection is deprecated and should not be used, see documentation for supported selection options');\n    this.setDomSelection(start);\n  }\n\n  var nodes = this._getNodeInstancesByRange(start, end);\n\n  nodes.forEach(function(node) {\n    node.expandTo();\n  });\n  this.select(nodes);\n};\n\n/**\n * Returns a set of Nodes according to a range of selection\n * @param {{path: Array.<String>}} start object contains the path for range start\n * @param {{path: Array.<String>}=} end object contains the path for range end\n * @return {Array.<Node>} Node instances on the given range\n * @private\n */\ntreemode._getNodeInstancesByRange = function (start, end) {\n  var startNode, endNode;\n\n  if (start && start.path) {\n    startNode = this.node.findNodeByPath(start.path);\n    if (end && end.path) {\n      endNode = this.node.findNodeByPath(end.path);\n    }\n  }\n\n  var nodes = [];\n  if (startNode instanceof Node) {\n    if (endNode instanceof Node && endNode !== startNode) {\n      if (startNode.parent === endNode.parent) {\n        var start, end;\n        if (startNode.getIndex() < endNode.getIndex()) {\n          start = startNode;\n          end = endNode;\n        } else {\n          start = endNode;\n          end = startNode;\n        }\n        var current = start;\n        nodes.push(current);\n        do {\n          current = current.nextSibling();\n          nodes.push(current);\n        } while (current && current !== end);\n      } else {\n        nodes = this._findTopLevelNodes(startNode, endNode);\n      }\n    } else {\n      nodes.push(startNode);\n    }\n  }\n\n  return nodes;\n\n};\n\ntreemode.getNodesByRange = function (start, end) {\n  var nodes = this._getNodeInstancesByRange(start, end);\n  var serializableNodes = [];\n\n  nodes.forEach(function (node){\n    serializableNodes.push(node.serialize());\n  });\n\n  return serializableNodes;\n};\n\n// define modes\nmodule.exports = [\n  {\n    mode: 'tree',\n    mixin: treemode,\n    data: 'json'\n  },\n  {\n    mode: 'view',\n    mixin: treemode,\n    data: 'json'\n  },\n  {\n    mode: 'form',\n    mixin: treemode,\n    data: 'json'\n  }\n];\n","'use strict';\n\nvar Ajv;\ntry {\n  Ajv = require('ajv');\n}\ncatch (err) {\n  // no problem... when we need Ajv we will throw a neat exception\n}\n\nvar ace = require('./ace'); // may be undefined in case of minimalist bundle\nvar VanillaPicker = require('./vanilla-picker'); // may be undefined in case of minimalist bundle\n\nvar treemode = require('./treemode');\nvar textmode = require('./textmode');\nvar util = require('./util');\n\nif (typeof Promise === 'undefined') {\n  console.error('Promise undefined. Please load a Promise polyfill in the browser in order to use JSONEditor');\n}\n\n/**\n * @constructor JSONEditor\n * @param {Element} container    Container element\n * @param {Object}  [options]    Object with options. available options:\n *                               {String} mode        Editor mode. Available values:\n *                                                    'tree' (default), 'view',\n *                                                    'form', 'text', and 'code'.\n *                               {function} onChange  Callback method, triggered\n *                                                    on change of contents.\n *                                                    Does not pass the contents itself.\n *                                                    See also `onChangeJSON` and\n *                                                    `onChangeText`.\n *                               {function} onChangeJSON  Callback method, triggered\n *                                                        in modes on change of contents,\n *                                                        passing the changed contents\n *                                                        as JSON.\n *                                                        Only applicable for modes\n *                                                        'tree', 'view', and 'form'.\n *                               {function} onChangeText  Callback method, triggered\n *                                                        in modes on change of contents,\n *                                                        passing the changed contents\n *                                                        as stringified JSON.\n *                               {function} onError   Callback method, triggered\n *                                                    when an error occurs\n *                               {Boolean} search     Enable search box.\n *                                                    True by default\n *                                                    Only applicable for modes\n *                                                    'tree', 'view', and 'form'\n *                               {Boolean} history    Enable history (undo/redo).\n *                                                    True by default\n *                                                    Only applicable for modes\n *                                                    'tree', 'view', and 'form'\n *                               {String} name        Field name for the root node.\n *                                                    Only applicable for modes\n *                                                    'tree', 'view', and 'form'\n *                               {Number} indentation     Number of indentation\n *                                                        spaces. 4 by default.\n *                                                        Only applicable for\n *                                                        modes 'text' and 'code'\n *                               {boolean} escapeUnicode  If true, unicode\n *                                                        characters are escaped.\n *                                                        false by default.\n *                               {boolean} sortObjectKeys If true, object keys are\n *                                                        sorted before display.\n *                                                        false by default.\n *                               {function} onSelectionChange Callback method,\n *                                                            triggered on node selection change\n *                                                            Only applicable for modes\n *                                                            'tree', 'view', and 'form'\n *                               {function} onTextSelectionChange Callback method,\n *                                                                triggered on text selection change\n *                                                                Only applicable for modes\n *                               {HTMLElement} modalAnchor        The anchor element to apply an\n *                                                                overlay and display the modals in a\n *                                                                centered location.\n *                                                                Defaults to document.body\n *                                                                'text' and 'code'\n *                               {function} onEvent Callback method, triggered\n *                                                  when an event occurs in\n *                                                  a JSON field or value.\n *                                                  Only applicable for\n *                                                  modes 'form', 'tree' and\n *                                                  'view'\n *                               {function} onClassName Callback method, triggered\n *                                                  when a Node DOM is rendered. Function returns\n *                                                  a css class name to be set on a node.\n *                                                  Only applicable for\n *                                                  modes 'form', 'tree' and\n *                                                  'view'\n *                               {Number} maxVisibleChilds Number of children allowed for a node \n *                                                         in 'tree', 'view', or 'form' mode before \n *                                                         the \"show more/show all\" buttons appear.  \n *                                                         100 by default.\n *\n * @param {Object | undefined} json JSON object\n */\nfunction JSONEditor (container, options, json) {\n  if (!(this instanceof JSONEditor)) {\n    throw new Error('JSONEditor constructor called without \"new\".');\n  }\n\n  // check for unsupported browser (IE8 and older)\n  var ieVersion = util.getInternetExplorerVersion();\n  if (ieVersion != -1 && ieVersion < 9) {\n    throw new Error('Unsupported browser, IE9 or newer required. ' +\n        'Please install the newest version of your browser.');\n  }\n\n  if (options) {\n    // check for deprecated options\n    if (options.error) {\n      console.warn('Option \"error\" has been renamed to \"onError\"');\n      options.onError = options.error;\n      delete options.error;\n    }\n    if (options.change) {\n      console.warn('Option \"change\" has been renamed to \"onChange\"');\n      options.onChange = options.change;\n      delete options.change;\n    }\n    if (options.editable) {\n      console.warn('Option \"editable\" has been renamed to \"onEditable\"');\n      options.onEditable = options.editable;\n      delete options.editable;\n    }\n\n    // warn if onChangeJSON is used when mode can be `text` or `code`\n    if (options.onChangeJSON) {\n      if (options.mode === 'text' || options.mode === 'code' ||\n          (options.modes && (options.modes.indexOf('text') !== -1 || options.modes.indexOf('code') !== -1))) {\n        console.warn('Option \"onChangeJSON\" is not applicable to modes \"text\" and \"code\". ' +\n            'Use \"onChangeText\" or \"onChange\" instead.');\n      }\n    }\n\n    // validate options\n    if (options) {\n      Object.keys(options).forEach(function (option) {\n        if (JSONEditor.VALID_OPTIONS.indexOf(option) === -1) {\n          console.warn('Unknown option \"' + option + '\". This option will be ignored');\n        }\n      });\n    }\n  }\n\n  if (arguments.length) {\n    this._create(container, options, json);\n  }\n}\n\n/**\n * Configuration for all registered modes. Example:\n * {\n *     tree: {\n *         mixin: TreeEditor,\n *         data: 'json'\n *     },\n *     text: {\n *         mixin: TextEditor,\n *         data: 'text'\n *     }\n * }\n *\n * @type { Object.<String, {mixin: Object, data: String} > }\n */\nJSONEditor.modes = {};\n\n// debounce interval for JSON schema vaidation in milliseconds\nJSONEditor.prototype.DEBOUNCE_INTERVAL = 150;\n\nJSONEditor.VALID_OPTIONS = [\n  'ajv', 'schema', 'schemaRefs','templates',\n  'ace', 'theme', 'autocomplete',\n  'onChange', 'onChangeJSON', 'onChangeText',\n  'onEditable', 'onError', 'onEvent', 'onModeChange', 'onNodeName', 'onValidate', 'onCreateMenu',\n  'onSelectionChange', 'onTextSelectionChange', 'onClassName',\n  'colorPicker', 'onColorPicker',\n  'timestampTag',\n  'escapeUnicode', 'history', 'search', 'mode', 'modes', 'name', 'indentation',\n  'sortObjectKeys', 'navigationBar', 'statusBar', 'mainMenuBar', 'languages', 'language', 'enableSort', 'enableTransform',\n  'maxVisibleChilds'\n];\n\n/**\n * Create the JSONEditor\n * @param {Element} container    Container element\n * @param {Object}  [options]    See description in constructor\n * @param {Object | undefined} json JSON object\n * @private\n */\nJSONEditor.prototype._create = function (container, options, json) {\n  this.container = container;\n  this.options = options || {};\n  this.json = json || {};\n\n  var mode = this.options.mode || (this.options.modes && this.options.modes[0]) || 'tree';\n  this.setMode(mode);\n};\n\n/**\n * Destroy the editor. Clean up DOM, event listeners, and web workers.\n */\nJSONEditor.prototype.destroy = function () {};\n\n/**\n * Set JSON object in editor\n * @param {Object | undefined} json      JSON data\n */\nJSONEditor.prototype.set = function (json) {\n  this.json = json;\n};\n\n/**\n * Get JSON from the editor\n * @returns {Object} json\n */\nJSONEditor.prototype.get = function () {\n  return this.json;\n};\n\n/**\n * Set string containing JSON for the editor\n * @param {String | undefined} jsonText\n */\nJSONEditor.prototype.setText = function (jsonText) {\n  this.json = util.parse(jsonText);\n};\n\n/**\n * Get stringified JSON contents from the editor\n * @returns {String} jsonText\n */\nJSONEditor.prototype.getText = function () {\n  return JSON.stringify(this.json);\n};\n\n/**\n * Set a field name for the root node.\n * @param {String | undefined} name\n */\nJSONEditor.prototype.setName = function (name) {\n  if (!this.options) {\n    this.options = {};\n  }\n  this.options.name = name;\n};\n\n/**\n * Get the field name for the root node.\n * @return {String | undefined} name\n */\nJSONEditor.prototype.getName = function () {\n  return this.options && this.options.name;\n};\n\n/**\n * Change the mode of the editor.\n * JSONEditor will be extended with all methods needed for the chosen mode.\n * @param {String} mode     Available modes: 'tree' (default), 'view', 'form',\n *                          'text', and 'code'.\n */\nJSONEditor.prototype.setMode = function (mode) {\n  // if the mode is the same as current mode (and it's not the first time), do nothing.\n  if (mode === this.options.mode && this.create) {\n    return;\n  }\n\n  var container = this.container;\n  var options = util.extend({}, this.options);\n  var oldMode = options.mode;\n  var data;\n  var name;\n\n  options.mode = mode;\n  var config = JSONEditor.modes[mode];\n  if (config) {\n    try {\n      var asText = (config.data == 'text');\n      name = this.getName();\n      data = this[asText ? 'getText' : 'get'](); // get text or json\n\n      this.destroy();\n      util.clear(this);\n      util.extend(this, config.mixin);\n      this.create(container, options);\n\n      this.setName(name);\n      this[asText ? 'setText' : 'set'](data); // set text or json\n\n      if (typeof config.load === 'function') {\n        try {\n          config.load.call(this);\n        }\n        catch (err) {\n          console.error(err);\n        }\n      }\n\n      if (typeof options.onModeChange === 'function' && mode !== oldMode) {\n        try {\n          options.onModeChange(mode, oldMode);\n        }\n        catch (err) {\n          console.error(err);\n        }\n      }\n    }\n    catch (err) {\n      this._onError(err);\n    }\n  }\n  else {\n    throw new Error('Unknown mode \"' + options.mode + '\"');\n  }\n};\n\n/**\n * Get the current mode\n * @return {string}\n */\nJSONEditor.prototype.getMode = function () {\n  return this.options.mode;\n};\n\n/**\n * Throw an error. If an error callback is configured in options.error, this\n * callback will be invoked. Else, a regular error is thrown.\n * @param {Error} err\n * @private\n */\nJSONEditor.prototype._onError = function(err) {\n  if (this.options && typeof this.options.onError === 'function') {\n    this.options.onError(err);\n  }\n  else {\n    throw err;\n  }\n};\n\n/**\n * Set a JSON schema for validation of the JSON object.\n * To remove the schema, call JSONEditor.setSchema(null)\n * @param {Object | null} schema\n * @param {Object.<string, Object>=} schemaRefs Schemas that are referenced using the `$ref` property from the JSON schema that are set in the `schema` option,\n +  the object structure in the form of `{reference_key: schemaObject}`\n */\nJSONEditor.prototype.setSchema = function (schema, schemaRefs) {\n  // compile a JSON schema validator if a JSON schema is provided\n  if (schema) {\n    var ajv;\n    try {\n      // grab ajv from options if provided, else create a new instance\n      ajv = this.options.ajv || Ajv({ allErrors: true, verbose: true });\n\n    }\n    catch (err) {\n      console.warn('Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.');\n    }\n\n    if (ajv) {\n      if(schemaRefs) {\n        for (var ref in schemaRefs) {\n          ajv.removeSchema(ref);  // When updating a schema - old refs has to be removed first\n          if(schemaRefs[ref]) {\n            ajv.addSchema(schemaRefs[ref], ref);\n          }\n        }\n        this.options.schemaRefs = schemaRefs;\n      }\n      this.validateSchema = ajv.compile(schema);\n\n      // add schema to the options, so that when switching to an other mode,\n      // the set schema is not lost\n      this.options.schema = schema;\n\n      // validate now\n      this.validate();\n    }\n\n    this.refresh(); // update DOM\n  }\n  else {\n    // remove current schema\n    this.validateSchema = null;\n    this.options.schema = null;\n    this.options.schemaRefs = null;\n    this.validate(); // to clear current error messages\n    this.refresh();  // update DOM\n  }\n};\n\n/**\n * Validate current JSON object against the configured JSON schema\n * Throws an exception when no JSON schema is configured\n */\nJSONEditor.prototype.validate = function () {\n  // must be implemented by treemode and textmode\n};\n\n/**\n * Refresh the rendered contents\n */\nJSONEditor.prototype.refresh = function () {\n  // can be implemented by treemode and textmode\n};\n\n/**\n * Register a plugin with one ore multiple modes for the JSON Editor.\n *\n * A mode is described as an object with properties:\n *\n * - `mode: String`           The name of the mode.\n * - `mixin: Object`          An object containing the mixin functions which\n *                            will be added to the JSONEditor. Must contain functions\n *                            create, get, getText, set, and setText. May have\n *                            additional functions.\n *                            When the JSONEditor switches to a mixin, all mixin\n *                            functions are added to the JSONEditor, and then\n *                            the function `create(container, options)` is executed.\n * - `data: 'text' | 'json'`  The type of data that will be used to load the mixin.\n * - `[load: function]`       An optional function called after the mixin\n *                            has been loaded.\n *\n * @param {Object | Array} mode  A mode object or an array with multiple mode objects.\n */\nJSONEditor.registerMode = function (mode) {\n  var i, prop;\n\n  if (util.isArray(mode)) {\n    // multiple modes\n    for (i = 0; i < mode.length; i++) {\n      JSONEditor.registerMode(mode[i]);\n    }\n  }\n  else {\n    // validate the new mode\n    if (!('mode' in mode)) throw new Error('Property \"mode\" missing');\n    if (!('mixin' in mode)) throw new Error('Property \"mixin\" missing');\n    if (!('data' in mode)) throw new Error('Property \"data\" missing');\n    var name = mode.mode;\n    if (name in JSONEditor.modes) {\n      throw new Error('Mode \"' + name + '\" already registered');\n    }\n\n    // validate the mixin\n    if (typeof mode.mixin.create !== 'function') {\n      throw new Error('Required function \"create\" missing on mixin');\n    }\n    var reserved = ['setMode', 'registerMode', 'modes'];\n    for (i = 0; i < reserved.length; i++) {\n      prop = reserved[i];\n      if (prop in mode.mixin) {\n        throw new Error('Reserved property \"' + prop + '\" not allowed in mixin');\n      }\n    }\n\n    JSONEditor.modes[name] = mode;\n  }\n};\n\n// register tree and text modes\nJSONEditor.registerMode(treemode);\nJSONEditor.registerMode(textmode);\n\n// expose some of the libraries that can be used customized\nJSONEditor.ace = ace;\nJSONEditor.Ajv = Ajv;\nJSONEditor.VanillaPicker = VanillaPicker;\n\n// default export for TypeScript ES6 projects\nJSONEditor.default = JSONEditor;\n\nmodule.exports = JSONEditor;\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nrequire('./polyfills');\n\nvar _locales = ['en', 'pt-BR', 'zh-CN', 'tr'];\nvar _defs = {\n  en: {\n    array: 'Array',\n    auto: 'Auto',\n    appendText: 'Append',\n    appendTitle: 'Append a new field with type \\'auto\\' after this field (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: 'Select the type of the field to be appended',\n    appendTitleAuto: 'Append a new field with type \\'auto\\' (Ctrl+Shift+Ins)',\n    ascending: 'Ascending',\n    ascendingTitle: 'Sort the childs of this ${type} in ascending order',\n    actionsMenu: 'Click to open the actions menu (Ctrl+M)',\n    collapseAll: 'Collapse all fields',\n    descending: 'Descending',\n    descendingTitle: 'Sort the childs of this ${type} in descending order',\n    drag: 'Drag to move this field (Alt+Shift+Arrows)',\n    duplicateKey: 'duplicate key',\n    duplicateText: 'Duplicate',\n    duplicateTitle: 'Duplicate selected fields (Ctrl+D)',\n    duplicateField: 'Duplicate this field (Ctrl+D)',\n    duplicateFieldError: 'Duplicate field name',\n    cannotParseFieldError: 'Cannot parse field into JSON',\n    cannotParseValueError: 'Cannot parse value into JSON',\n    empty: 'empty',\n    expandAll: 'Expand all fields',\n    expandTitle: 'Click to expand/collapse this field (Ctrl+E). \\n' +\n      'Ctrl+Click to expand/collapse including all childs.',\n    insert: 'Insert',\n    insertTitle: 'Insert a new field with type \\'auto\\' before this field (Ctrl+Ins)',\n    insertSub: 'Select the type of the field to be inserted',\n    object: 'Object',\n    ok: 'Ok',\n    redo: 'Redo (Ctrl+Shift+Z)',\n    removeText: 'Remove',\n    removeTitle: 'Remove selected fields (Ctrl+Del)',\n    removeField: 'Remove this field (Ctrl+Del)',\n    selectNode: 'Select a node...',\n    showAll: 'show all',\n    showMore: 'show more',\n    showMoreStatus: 'displaying ${visibleChilds} of ${totalChilds} items.',\n    sort: 'Sort',\n    sortTitle: 'Sort the childs of this ${type}',\n    sortTitleShort: 'Sort contents',\n    sortFieldLabel: 'Field:',\n    sortDirectionLabel: 'Direction:',\n    sortFieldTitle: 'Select the nested field by which to sort the array or object',\n    sortAscending: 'Ascending',\n    sortAscendingTitle: 'Sort the selected field in ascending order',\n    sortDescending: 'Descending',\n    sortDescendingTitle: 'Sort the selected field in descending order',\n    string: 'String',\n    transform: 'Transform',\n    transformTitle: 'Filter, sort, or transform the childs of this ${type}',\n    transformTitleShort: 'Filter, sort, or transform contents',\n    transformQueryTitle: 'Enter a JMESPath query',\n    transformWizardLabel: 'Wizard',\n    transformWizardFilter: 'Filter',\n    transformWizardSortBy: 'Sort by',\n    transformWizardSelectFields: 'Select fields',\n    transformQueryLabel: 'Query',\n    transformPreviewLabel: 'Preview',\n    type: 'Type',\n    typeTitle: 'Change the type of this field',\n    openUrl: 'Ctrl+Click or Ctrl+Enter to open url in new window',\n    undo: 'Undo last action (Ctrl+Z)',\n    validationCannotMove: 'Cannot move a field into a child of itself',\n    autoType: 'Field type \"auto\". ' +\n      'The field type is automatically determined from the value ' +\n      'and can be a string, number, boolean, or null.',\n    objectType: 'Field type \"object\". ' +\n      'An object contains an unordered set of key/value pairs.',\n    arrayType: 'Field type \"array\". ' +\n      'An array contains an ordered collection of values.',\n    stringType: 'Field type \"string\". ' +\n      'Field type is not determined from the value, ' +\n      'but always returned as string.',\n    modeCodeText: 'Code',\n    modeCodeTitle: 'Switch to code highlighter',\n    modeFormText: 'Form',\n    modeFormTitle: 'Switch to form editor',\n    modeTextText: 'Text',\n    modeTextTitle: 'Switch to plain text editor',\n    modeTreeText: 'Tree',\n    modeTreeTitle: 'Switch to tree editor',\n    modeViewText: 'View',\n    modeViewTitle: 'Switch to tree view',\n    examples: 'Examples',\n    default: 'Default',\n  },\n  'zh-CN': {\n    array: '数组',\n    auto: '自动',\n    appendText: '追加',\n    appendTitle: '在此字段后追加一个类型为“auto”的新字段 (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: '选择要追加的字段类型',\n    appendTitleAuto: '追加类型为“auto”的新字段 (Ctrl+Shift+Ins)',\n    ascending: '升序',\n    ascendingTitle: '升序排列${type}的子节点',\n    actionsMenu: '点击打开动作菜单(Ctrl+M)',\n    collapseAll: '缩进所有字段',\n    descending: '降序',\n    descendingTitle: '降序排列${type}的子节点',\n    drag: '拖拽移动该节点(Alt+Shift+Arrows)',\n    duplicateKey: '重复键',\n    duplicateText: '复制',\n    duplicateTitle: '复制选中字段(Ctrl+D)',\n    duplicateField: '复制该字段(Ctrl+D)',\n    duplicateFieldError: '重复的字段名称',\n    cannotParseFieldError: '无法将字段解析为JSON',\n    cannotParseValueError: '无法将值解析为JSON',\n    empty: '清空',\n    expandAll: '展开所有字段',\n    expandTitle: '点击 展开/收缩 该字段(Ctrl+E). \\n' +\n      'Ctrl+Click 展开/收缩 包含所有子节点.',\n    insert: '插入',\n    insertTitle: '在此字段前插入类型为“auto”的新字段 (Ctrl+Ins)',\n    insertSub: '选择要插入的字段类型',\n    object: '对象',\n    ok: 'Ok',\n    redo: '重做 (Ctrl+Shift+Z)',\n    removeText: '移除',\n    removeTitle: '移除选中字段 (Ctrl+Del)',\n    removeField: '移除该字段 (Ctrl+Del)',\n    selectNode: '选择一个节点...',\n    showAll: '展示全部',\n    showMore: '展示更多',\n    showMoreStatus: '显示${totalChilds}的${visibleChilds}项目.',\n    sort: '排序',\n    sortTitle: '排序${type}的子节点',\n    sortTitleShort: '内容排序',\n    sortFieldLabel: '字段：',\n    sortDirectionLabel: '方向：',\n    sortFieldTitle: '选择用于对数组或对象排序的嵌套字段',\n    sortAscending: '升序排序',\n    sortAscendingTitle: '按照该字段升序排序',\n    sortDescending: '降序排序',\n    sortDescendingTitle: '按照该字段降序排序',\n    string: '字符串',\n    transform: '变换',\n    transformTitle: '筛选，排序，或者转换${type}的子节点',\n    transformTitleShort: '筛选，排序，或者转换内容',\n    transformQueryTitle: '输入JMESPath查询',\n    transformWizardLabel: '向导',\n    transformWizardFilter: '筛选',\n    transformWizardSortBy: '排序',\n    transformWizardSelectFields: '选择字段',\n    transformQueryLabel: '查询',\n    transformPreviewLabel: '预览',\n    type: '类型',\n    typeTitle: '更改字段类型',\n    openUrl: 'Ctrl+Click 或者 Ctrl+Enter 在新窗口打开链接',\n    undo: '撤销上次动作 (Ctrl+Z)',\n    validationCannotMove: '无法将字段移入其子节点',\n    autoType: '字段类型 \"auto\". ' +\n      '字段类型由值自动确定 ' +\n      '可以为 string，number，boolean，或者 null.',\n    objectType: '字段类型 \"object\". ' +\n      '对象包含一组无序的键/值对.',\n    arrayType: '字段类型 \"array\". ' +\n      '数组包含值的有序集合.',\n    stringType: '字段类型 \"string\". ' +\n      '字段类型由值自动确定，' +\n      '但始终作为字符串返回.',\n    modeCodeText: '代码',\n    modeCodeTitle: '切换至代码高亮',\n    modeFormText: '表单',\n    modeFormTitle: '切换至表单编辑',\n    modeTextText: '文本',\n    modeTextTitle: '切换至文本编辑',\n    modeTreeText: '树',\n    modeTreeTitle: '切换至树编辑',\n    modeViewText: '视图',\n    modeViewTitle: '切换至树视图',\n    examples: '例子',\n    default: '缺省',\n  },\n  'pt-BR': {\n    array: 'Lista',\n    auto: 'Automatico',\n    appendText: 'Adicionar',\n    appendTitle: 'Adicionar novo campo com tipo \\'auto\\' depois deste campo (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: 'Selecione o tipo do campo a ser adicionado',\n    appendTitleAuto: 'Adicionar novo campo com tipo \\'auto\\' (Ctrl+Shift+Ins)',\n    ascending: 'Ascendente',\n    ascendingTitle: 'Organizar filhor do tipo ${type} em crescente',\n    actionsMenu: 'Clique para abrir o menu de ações (Ctrl+M)',\n    collapseAll: 'Fechar todos campos',\n    descending: 'Descendente',\n    descendingTitle: 'Organizar o filhos do tipo ${type} em decrescente',\n    duplicateKey: 'chave duplicada',\n    drag: 'Arraste para mover este campo (Alt+Shift+Arrows)',\n    duplicateText: 'Duplicar',\n    duplicateTitle: 'Duplicar campos selecionados (Ctrl+D)',\n    duplicateField: 'Duplicar este campo (Ctrl+D)',\n    duplicateFieldError: 'Nome do campo duplicado',\n    cannotParseFieldError: 'Não é possível analisar o campo no JSON',\n    cannotParseValueError: 'Não é possível analisar o valor em JSON',\n    empty: 'vazio',\n    expandAll: 'Expandir todos campos',\n    expandTitle: 'Clique para expandir/encolher este campo (Ctrl+E). \\n' +\n      'Ctrl+Click para expandir/encolher incluindo todos os filhos.',\n    insert: 'Inserir',\n    insertTitle: 'Inserir um novo campo do tipo \\'auto\\' antes deste campo (Ctrl+Ins)',\n    insertSub: 'Selecionar o tipo de campo a ser inserido',\n    object: 'Objeto',\n    ok: 'Ok',\n    redo: 'Refazer (Ctrl+Shift+Z)',\n    removeText: 'Remover',\n    removeTitle: 'Remover campos selecionados (Ctrl+Del)',\n    removeField: 'Remover este campo (Ctrl+Del)',\n    // TODO: correctly translate\n    selectNode: 'Select a node...',\n    // TODO: correctly translate\n    showAll: 'mostre tudo',\n    // TODO: correctly translate\n    showMore: 'mostre mais',\n    // TODO: correctly translate\n    showMoreStatus: 'exibindo ${visibleChilds} de ${totalChilds} itens.',\n    sort: 'Organizar',\n    sortTitle: 'Organizar os filhos deste ${type}',\n    // TODO: correctly translate\n    sortTitleShort: 'Organizar os filhos',\n    // TODO: correctly translate\n    sortFieldLabel: 'Field:',\n    // TODO: correctly translate\n    sortDirectionLabel: 'Direction:',\n    // TODO: correctly translate\n    sortFieldTitle: 'Select the nested field by which to sort the array or object',\n    // TODO: correctly translate\n    sortAscending: 'Ascending',\n    // TODO: correctly translate\n    sortAscendingTitle: 'Sort the selected field in ascending order',\n    // TODO: correctly translate\n    sortDescending: 'Descending',\n    // TODO: correctly translate\n    sortDescendingTitle: 'Sort the selected field in descending order',\n    string: 'Texto',\n    // TODO: correctly translate\n    transform: 'Transform',\n    // TODO: correctly translate\n    transformTitle: 'Filter, sort, or transform the childs of this ${type}',\n    // TODO: correctly translate\n    transformTitleShort: 'Filter, sort, or transform contents',\n    // TODO: correctly translate\n    transformQueryTitle: 'Enter a JMESPath query',\n    // TODO: correctly translate\n    transformWizardLabel: 'Wizard',\n    // TODO: correctly translate\n    transformWizardFilter: 'Filter',\n    // TODO: correctly translate\n    transformWizardSortBy: 'Sort by',\n    // TODO: correctly translate\n    transformWizardSelectFields: 'Select fields',\n    // TODO: correctly translate\n    transformQueryLabel: 'Query',\n    // TODO: correctly translate\n    transformPreviewLabel: 'Preview',\n    type: 'Tipo',\n    typeTitle: 'Mudar o tipo deste campo',\n    openUrl: 'Ctrl+Click ou Ctrl+Enter para abrir link em nova janela',\n    undo: 'Desfazer último ação (Ctrl+Z)',\n    validationCannotMove: 'Não pode mover um campo como filho dele mesmo',\n    autoType: 'Campo do tipo \"auto\". ' +\n      'O tipo do campo é determinao automaticamente a partir do seu valor ' +\n      'e pode ser texto, número, verdade/falso ou nulo.',\n    objectType: 'Campo do tipo \"objeto\". ' +\n      'Um objeto contém uma lista de pares com chave e valor.',\n    arrayType: 'Campo do tipo \"lista\". ' +\n      'Uma lista contem uma coleção de valores ordenados.',\n    stringType: 'Campo do tipo \"string\". ' +\n      'Campo do tipo nao é determinado através do seu valor, ' +\n      'mas sempre retornara um texto.',\n    examples: 'Exemplos',\n    default: 'Revelia',\n  },\n  tr: {\n    array: 'Dizin',\n    auto: 'Otomatik',\n    appendText: 'Ekle',\n    appendTitle: 'Bu alanın altına \\'otomatik\\' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)',\n    appendSubmenuTitle: 'Eklenecek alanın tipini seç',\n    appendTitleAuto: '\\'Otomatik\\' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)',\n    ascending: 'Artan',\n    ascendingTitle: '${type}\\'ın alt tiplerini artan düzende sırala',\n    actionsMenu: 'Aksiyon menüsünü açmak için tıklayın (Ctrl+M)',\n    collapseAll: 'Tüm alanları kapat',\n    descending: 'Azalan',\n    descendingTitle: '${type}\\'ın alt tiplerini azalan düzende sırala',\n    drag: 'Bu alanı taşımak için sürükleyin (Alt+Shift+Arrows)',\n    duplicateKey: 'Var olan anahtar',\n    duplicateText: 'Aşağıya kopyala',\n    duplicateTitle: 'Seçili alanlardan bir daha oluştur (Ctrl+D)',\n    duplicateField: 'Bu alandan bir daha oluştur (Ctrl+D)',\n    duplicateFieldError: 'Duplicate field name',\n    cannotParseFieldError: 'Alan JSON\\'a ayrıştırılamıyor',\n    cannotParseValueError: 'JSON\\'a değer ayrıştırılamıyor',\n    empty: 'boş',\n    expandAll: 'Tüm alanları aç',\n    expandTitle: 'Bu alanı açmak/kapatmak için tıkla (Ctrl+E). \\n' +\n      'Alt alanlarda dahil tüm alanları açmak için Ctrl+Click ',\n    insert: 'Ekle',\n    insertTitle: 'Bu alanın üstüne \\'otomatik\\' tipinde yeni bir alan ekle (Ctrl+Ins)',\n    insertSub: 'Araya eklenecek alanın tipini seç',\n    object: 'Nesne',\n    ok: 'Tamam',\n    redo: 'Yeniden yap (Ctrl+Shift+Z)',\n    removeText: 'Kaldır',\n    removeTitle: 'Seçilen alanları kaldır (Ctrl+Del)',\n    removeField: 'Bu alanı kaldır (Ctrl+Del)',\n    selectNode: 'Bir nesne seç...',\n    showAll: 'tümünü göster',\n    showMore: 'daha fazla göster',\n    showMoreStatus: '${totalChilds} alanın ${visibleChilds} alt alanları gösteriliyor',\n    sort: 'Sırala',\n    sortTitle: '${type}\\'ın alt alanlarını sırala',\n    sortTitleShort: 'İçerikleri sırala',\n    sortFieldLabel: 'Alan:',\n    sortDirectionLabel: 'Yön:',\n    sortFieldTitle: 'Diziyi veya nesneyi sıralamak için iç içe geçmiş alanı seçin',\n    sortAscending: 'Artan',\n    sortAscendingTitle: 'Seçili alanı artan düzende sırala',\n    sortDescending: 'Azalan',\n    sortDescendingTitle: 'Seçili alanı azalan düzende sırala',\n    string: 'Karakter Dizisi',\n    transform: 'Dönüştür',\n    transformTitle: '${type}\\'ın alt alanlarını filtrele, sırala veya dönüştür',\n    transformTitleShort: 'İçerikleri filterele, sırala veya dönüştür',\n    transformQueryTitle: 'JMESPath sorgusu gir',\n    transformWizardLabel: 'Sihirbaz',\n    transformWizardFilter: 'Filtre',\n    transformWizardSortBy: 'Sırala',\n    transformWizardSelectFields: 'Alanları seç',\n    transformQueryLabel: 'Sorgu',\n    transformPreviewLabel: 'Önizleme',\n    type: 'Tip',\n    typeTitle: 'Bu alanın tipini değiştir',\n    openUrl: 'URL\\'i yeni bir pencerede açmak için Ctrl+Click veya Ctrl+Enter',\n    undo: 'Son değişikliği geri al (Ctrl+Z)',\n    validationCannotMove: 'Alt alan olarak taşınamıyor',\n    autoType: 'Alan tipi \"otomatik\". ' +\n      'Alan türü otomatik olarak değerden belirlenir' +\n      've bir dize, sayı, boolean veya null olabilir.',\n    objectType: 'Alan tipi \"nesne\". ' +\n      'Bir nesne, sıralanmamış bir anahtar / değer çifti kümesi içerir.',\n    arrayType: 'Alan tipi \"dizi\". ' +\n      'Bir dizi, düzenli değerler koleksiyonu içerir.',\n    stringType: 'Alan tipi \"karakter dizisi\". ' +\n      'Alan türü değerden belirlenmez,' +\n      'ancak her zaman karakter dizisi olarak döndürülür.',\n    modeCodeText: 'Kod',\n    modeCodeTitle: 'Kod vurgulayıcıya geç',\n    modeFormText: 'Form',\n    modeFormTitle: 'Form düzenleyiciye geç',\n    modeTextText: 'Metin',\n    modeTextTitle: 'Düz metin düzenleyiciye geç',\n    modeTreeText: 'Ağaç',\n    modeTreeTitle: 'Ağaç düzenleyiciye geç',\n    modeViewText: 'Görünüm',\n    modeViewTitle: 'Ağaç görünümüne geç',\n    examples: 'Örnekler',\n    default: 'Varsayılan',\n  }\n};\n\nvar _defaultLang = 'en';\nvar _lang;\nvar userLang = typeof navigator !== 'undefined' ?\n  navigator.language || navigator.userLanguage :\n  undefined;\n_lang = _locales.find(function (l) {\n  return l === userLang;\n});\nif (!_lang) {\n  _lang = _defaultLang;\n}\n\nmodule.exports = {\n  // supported locales\n  _locales: _locales,\n  _defs: _defs,\n  _lang: _lang,\n  setLanguage: function (lang) {\n    if (!lang) {\n      return;\n    }\n    var langFound = _locales.find(function (l) {\n      return l === lang;\n    });\n    if (langFound) {\n      _lang = langFound;\n    } else {\n      console.error('Language not found');\n    }\n  },\n  setLanguages: function (languages) {\n    if (!languages) {\n      return;\n    }\n    for (var key in languages) {\n      var langFound = _locales.find(function (l) {\n        return l === key;\n      });\n      if (!langFound) {\n        _locales.push(key);\n      }\n      _defs[key] = Object.assign({}, _defs[_defaultLang], _defs[key], languages[key]);\n    }\n  },\n  translate: function (key, data, lang) {\n    if (!lang) {\n      lang = _lang;\n    }\n    var text = _defs[lang][key];\n    if (data) {\n      for (key in data) {\n        text = text.replace('${' + key + '}', data[key]);\n      }\n    }\n    return text || key;\n  }\n};","'use strict';\n\nvar util = require('./util');\n\n/**\n * @constructor History\n * Store action history, enables undo and redo\n * @param {JSONEditor} editor\n */\nfunction History (editor) {\n  this.editor = editor;\n  this.history = [];\n  this.index = -1;\n\n  this.clear();\n\n  // helper function to find a Node from a path\n  function findNode(path) {\n    return editor.node.findNodeByInternalPath(path)\n  }\n\n  // map with all supported actions\n  this.actions = {\n    'editField': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var node = parentNode.childs[params.index];\n        node.updateField(params.oldValue);\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var node = parentNode.childs[params.index];\n        node.updateField(params.newValue);\n      }\n    },\n    'editValue': {\n      'undo': function (params) {\n        findNode(params.path).updateValue(params.oldValue);\n      },\n      'redo': function (params) {\n        findNode(params.path).updateValue(params.newValue);\n      }\n    },\n    'changeType': {\n      'undo': function (params) {\n        findNode(params.path).changeType(params.oldType);\n      },\n      'redo': function (params) {\n        findNode(params.path).changeType(params.newType);\n      }\n    },\n\n    'appendNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n       },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.nodes.forEach(function (node) {\n          parentNode.appendChild(node);\n        });\n      }\n    },\n    'insertBeforeNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var beforeNode = findNode(params.beforePath);\n        params.nodes.forEach(function (node) {\n          parentNode.insertBefore(node, beforeNode);\n        });\n      }\n    },\n    'insertAfterNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var afterNode = findNode(params.afterPath);\n        params.nodes.forEach(function (node) {\n          parentNode.insertAfter(node, afterNode);\n          afterNode = node;\n        });\n      }\n    },\n    'removeNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var beforeNode = parentNode.childs[params.index] || parentNode.append;\n        params.nodes.forEach(function (node) {\n          parentNode.insertBefore(node, beforeNode);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.paths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      }\n    },\n    'duplicateNodes': {\n      'undo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        params.clonePaths.map(findNode).forEach(function (node) {\n          parentNode.removeChild(node);\n        });\n      },\n      'redo': function (params) {\n        var parentNode = findNode(params.parentPath);\n        var afterNode = findNode(params.afterPath);\n        var nodes = params.paths.map(findNode);\n        nodes.forEach(function (node) {\n          var clone = node.clone();\n          if (parentNode.type === 'object') {\n            var existingFieldNames = parentNode.getFieldNames();\n            clone.field = util.findUniqueName(node.field, existingFieldNames);\n          }\n          parentNode.insertAfter(clone, afterNode);\n          afterNode = clone;\n        });\n      }\n    },\n    'moveNodes': {\n      'undo': function (params) {\n        var oldParentNode = findNode(params.oldParentPath);\n        var newParentNode = findNode(params.newParentPath);\n        var oldBeforeNode = oldParentNode.childs[params.oldIndex] || oldParentNode.append;\n\n        // first copy the nodes, then move them\n        var nodes = newParentNode.childs.slice(params.newIndex, params.newIndex + params.count);\n\n        nodes.forEach(function (node, index) {\n          node.field = params.fieldNames[index];\n          oldParentNode.moveBefore(node, oldBeforeNode);\n        });\n\n        // This is a hack to work around an issue that we don't know tha original\n        // path of the new parent after dragging, as the node is already moved at that time.\n        if (params.newParentPathRedo === null) {\n          params.newParentPathRedo = newParentNode.getInternalPath();\n        }\n      },\n      'redo': function (params) {\n        var oldParentNode = findNode(params.oldParentPathRedo);\n        var newParentNode = findNode(params.newParentPathRedo);\n        var newBeforeNode = newParentNode.childs[params.newIndexRedo] || newParentNode.append;\n\n        // first copy the nodes, then move them\n        var nodes = oldParentNode.childs.slice(params.oldIndexRedo, params.oldIndexRedo + params.count);\n\n        nodes.forEach(function (node, index) {\n          node.field = params.fieldNames[index];\n          newParentNode.moveBefore(node, newBeforeNode);\n        });\n      }\n    },\n\n    'sort': {\n      'undo': function (params) {\n        var node = findNode(params.path);\n        node.hideChilds();\n        node.childs = params.oldChilds;\n        node.updateDom({updateIndexes: true});\n        node.showChilds();\n      },\n      'redo': function (params) {\n        var node = findNode(params.path);\n        node.hideChilds();\n        node.childs = params.newChilds;\n        node.updateDom({updateIndexes: true});\n        node.showChilds();\n      }\n    },\n\n    'transform': {\n      'undo': function (params) {\n        findNode(params.path).setInternalValue(params.oldValue);\n\n        // TODO: would be nice to restore the state of the node and childs\n      },\n      'redo': function (params) {\n        findNode(params.path).setInternalValue(params.newValue);\n\n        // TODO: would be nice to restore the state of the node and childs\n      }\n    }\n\n    // TODO: restore the original caret position and selection with each undo\n    // TODO: implement history for actions \"expand\", \"collapse\", \"scroll\", \"setDocument\"\n  };\n}\n\n/**\n * The method onChange is executed when the History is changed, and can\n * be overloaded.\n */\nHistory.prototype.onChange = function () {};\n\n/**\n * Add a new action to the history\n * @param {String} action  The executed action. Available actions: \"editField\",\n *                         \"editValue\", \"changeType\", \"appendNode\",\n *                         \"removeNode\", \"duplicateNode\", \"moveNode\"\n * @param {Object} params  Object containing parameters describing the change.\n *                         The parameters in params depend on the action (for\n *                         example for \"editValue\" the Node, old value, and new\n *                         value are provided). params contains all information\n *                         needed to undo or redo the action.\n */\nHistory.prototype.add = function (action, params) {\n  this.index++;\n  this.history[this.index] = {\n    'action': action,\n    'params': params,\n    'timestamp': new Date()\n  };\n\n  // remove redo actions which are invalid now\n  if (this.index < this.history.length - 1) {\n    this.history.splice(this.index + 1, this.history.length - this.index - 1);\n  }\n\n  // fire onchange event\n  this.onChange();\n};\n\n/**\n * Clear history\n */\nHistory.prototype.clear = function () {\n  this.history = [];\n  this.index = -1;\n\n  // fire onchange event\n  this.onChange();\n};\n\n/**\n * Check if there is an action available for undo\n * @return {Boolean} canUndo\n */\nHistory.prototype.canUndo = function () {\n  return (this.index >= 0);\n};\n\n/**\n * Check if there is an action available for redo\n * @return {Boolean} canRedo\n */\nHistory.prototype.canRedo = function () {\n  return (this.index < this.history.length - 1);\n};\n\n/**\n * Undo the last action\n */\nHistory.prototype.undo = function () {\n  if (this.canUndo()) {\n    var obj = this.history[this.index];\n    if (obj) {\n      var action = this.actions[obj.action];\n      if (action && action.undo) {\n        action.undo(obj.params);\n        if (obj.params.oldSelection) {\n          try {\n            this.editor.setDomSelection(obj.params.oldSelection);\n          }\n          catch (err) {\n            console.error(err);\n          }\n        }\n      }\n      else {\n        console.error(new Error('unknown action \"' + obj.action + '\"'));\n      }\n    }\n    this.index--;\n\n    // fire onchange event\n    this.onChange();\n  }\n};\n\n/**\n * Redo the last action\n */\nHistory.prototype.redo = function () {\n  if (this.canRedo()) {\n    this.index++;\n\n    var obj = this.history[this.index];\n    if (obj) {\n      var action = this.actions[obj.action];\n      if (action && action.redo) {\n        action.redo(obj.params);\n        if (obj.params.newSelection) {\n          try {\n            this.editor.setDomSelection(obj.params.newSelection);\n          }\n          catch (err) {\n            console.error(err);\n          }\n        }\n      }\n      else {\n        console.error(new Error('unknown action \"' + obj.action + '\"'));\n      }\n    }\n\n    // fire onchange event\n    this.onChange();\n  }\n};\n\n/**\n * Destroy history\n */\nHistory.prototype.destroy = function () {\n  this.editor = null;\n\n  this.history = [];\n  this.index = -1;\n};\n\nmodule.exports = History;\n","'use strict';\n\nvar util = require('./util');\nvar ContextMenu = require('./ContextMenu');\nvar translate = require('./i18n').translate;\n\n/**\n * A factory function to create an AppendNode, which depends on a Node\n * @param {Node} Node\n */\nfunction appendNodeFactory(Node) {\n  /**\n   * @constructor AppendNode\n   * @extends Node\n   * @param {TreeEditor} editor\n   * Create a new AppendNode. This is a special node which is created at the\n   * end of the list with childs for an object or array\n   */\n  function AppendNode (editor) {\n    /** @type {TreeEditor} */\n    this.editor = editor;\n    this.dom = {};\n  }\n\n  AppendNode.prototype = new Node();\n\n  /**\n   * Return a table row with an append button.\n   * @return {Element} dom   TR element\n   */\n  AppendNode.prototype.getDom = function () {\n    // TODO: implement a new solution for the append node\n    var dom = this.dom;\n\n    if (dom.tr) {\n      return dom.tr;\n    }\n\n    this._updateEditability();\n\n    // a row for the append button\n    var trAppend = document.createElement('tr');\n    trAppend.className = 'jsoneditor-append';\n    trAppend.node = this;\n    dom.tr = trAppend;\n\n    // TODO: consistent naming\n\n    if (this.editor.options.mode === 'tree') {\n      // a cell for the dragarea column\n      dom.tdDrag = document.createElement('td');\n\n      // create context menu\n      var tdMenu = document.createElement('td');\n      dom.tdMenu = tdMenu;\n      var menu = document.createElement('button');\n      menu.type = 'button';\n      menu.className = 'jsoneditor-button jsoneditor-contextmenu';\n      menu.title = 'Click to open the actions menu (Ctrl+M)';\n      dom.menu = menu;\n      tdMenu.appendChild(dom.menu);\n    }\n\n    // a cell for the contents (showing text 'empty')\n    var tdAppend = document.createElement('td');\n    var domText = document.createElement('div');\n    domText.innerHTML = '(' + translate('empty') + ')';\n    domText.className = 'jsoneditor-readonly';\n    tdAppend.appendChild(domText);\n    dom.td = tdAppend;\n    dom.text = domText;\n\n    this.updateDom();\n\n    return trAppend;\n  };\n\n  /**\n   * Append node doesn't have a path\n   * @returns {null}\n   */\n  AppendNode.prototype.getPath = function() {\n    return null;\n  };\n\n  /**\n   * Append node doesn't have an index\n   * @returns {null}\n   */\n  AppendNode.prototype.getIndex = function() {\n    return null;\n  };\n\n  /**\n   * Update the HTML dom of the Node\n   */\n  AppendNode.prototype.updateDom = function(options) {\n    var dom = this.dom;\n    var tdAppend = dom.td;\n    if (tdAppend) {\n      tdAppend.style.paddingLeft = (this.getLevel() * 24 + 26) + 'px';\n      // TODO: not so nice hard coded offset\n    }\n\n    var domText = dom.text;\n    if (domText) {\n      domText.innerHTML = '(' + translate('empty') + ' ' + this.parent.type + ')';\n    }\n\n    // attach or detach the contents of the append node:\n    // hide when the parent has childs, show when the parent has no childs\n    var trAppend = dom.tr;\n    if (!this.isVisible()) {\n      if (dom.tr.firstChild) {\n        if (dom.tdDrag) {\n          trAppend.removeChild(dom.tdDrag);\n        }\n        if (dom.tdMenu) {\n          trAppend.removeChild(dom.tdMenu);\n        }\n        trAppend.removeChild(tdAppend);\n      }\n    }\n    else {\n      if (!dom.tr.firstChild) {\n        if (dom.tdDrag) {\n          trAppend.appendChild(dom.tdDrag);\n        }\n        if (dom.tdMenu) {\n          trAppend.appendChild(dom.tdMenu);\n        }\n        trAppend.appendChild(tdAppend);\n      }\n    }\n  };\n\n  /**\n   * Check whether the AppendNode is currently visible.\n   * the AppendNode is visible when its parent has no childs (i.e. is empty).\n   * @return {boolean} isVisible\n   */\n  AppendNode.prototype.isVisible = function () {\n    return (this.parent.childs.length == 0);\n  };\n\n  /**\n   * Show a contextmenu for this node\n   * @param {HTMLElement} anchor   The element to attach the menu to.\n   * @param {function} [onClose]   Callback method called when the context menu\n   *                               is being closed.\n   */\n  AppendNode.prototype.showContextMenu = function (anchor, onClose) {\n    var node = this;\n    var titles = Node.TYPE_TITLES;\n    var appendSubmenu = [\n        {\n            text: translate('auto'),\n            className: 'jsoneditor-type-auto',\n            title: titles.auto,\n            click: function () {\n                node._onAppend('', '', 'auto');\n            }\n        },\n        {\n            text: translate('array'),\n            className: 'jsoneditor-type-array',\n            title: titles.array,\n            click: function () {\n                node._onAppend('', []);\n            }\n        },\n        {\n            text: translate('object'),\n            className: 'jsoneditor-type-object',\n            title: titles.object,\n            click: function () {\n                node._onAppend('', {});\n            }\n        },\n        {\n            text: translate('string'),\n            className: 'jsoneditor-type-string',\n            title: titles.string,\n            click: function () {\n                node._onAppend('', '', 'string');\n            }\n        }\n    ];\n    node.addTemplates(appendSubmenu, true);\n    var items = [\n      // create append button\n      {\n        'text': translate('appendText'),\n        'title': translate('appendTitleAuto'),\n        'submenuTitle': translate('appendSubmenuTitle'),\n        'className': 'jsoneditor-insert',\n        'click': function () {\n          node._onAppend('', '', 'auto');\n        },\n        'submenu': appendSubmenu\n      }\n    ];\n    \n    if (this.editor.options.onCreateMenu) {\n      var path = node.parent.getPath();\n\n      items = this.editor.options.onCreateMenu(items, {\n        type: 'append',\n        path: path,\n        paths: [path]\n      });\n    }\n\n    var menu = new ContextMenu(items, {close: onClose});\n    menu.show(anchor, this.editor.frame);\n  };\n\n  /**\n   * Handle an event. The event is caught centrally by the editor\n   * @param {Event} event\n   */\n  AppendNode.prototype.onEvent = function (event) {\n    var type = event.type;\n    var target = event.target || event.srcElement;\n    var dom = this.dom;\n\n    // highlight the append nodes parent\n    var menu = dom.menu;\n    if (target == menu) {\n      if (type == 'mouseover') {\n        this.editor.highlighter.highlight(this.parent);\n      }\n      else if (type == 'mouseout') {\n        this.editor.highlighter.unhighlight();\n      }\n    }\n\n    // context menu events\n    if (type == 'click' && target == dom.menu) {\n      var highlighter = this.editor.highlighter;\n      highlighter.highlight(this.parent);\n      highlighter.lock();\n      util.addClassName(dom.menu, 'jsoneditor-selected');\n      this.showContextMenu(dom.menu, function () {\n        util.removeClassName(dom.menu, 'jsoneditor-selected');\n        highlighter.unlock();\n        highlighter.unhighlight();\n      });\n    }\n\n    if (type == 'keydown') {\n      this.onKeyDown(event);\n    }\n  };\n\n  return AppendNode;\n}\n\nmodule.exports = appendNodeFactory;\n","'use strict';\nmodule.exports = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  out += 'var ' + ($errs) + ' = errors;var prevValid' + ($lvl) + ' = false;var ' + ($valid) + ' = false;';\n  var $currentBaseId = $it.baseId;\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if (it.util.schemaHasRules($sch, it.RULES.all)) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n      } else {\n        out += ' var ' + ($nextValid) + ' = true; ';\n      }\n      if ($i) {\n        out += ' if (' + ($nextValid) + ' && prevValid' + ($lvl) + ') ' + ($valid) + ' = false; else { ';\n        $closingBraces += '}';\n      }\n      out += ' if (' + ($nextValid) + ') ' + ($valid) + ' = prevValid' + ($lvl) + ' = true;';\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += '' + ($closingBraces) + 'if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('oneOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match exactly one schema in oneOf\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; return false; ';\n    }\n  }\n  out += '} else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }';\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","var ace\nif (window.ace) {\n  // use the already loaded instance of Ace\n  ace = window.ace\n}\nelse {\n  try {\n    // load brace\n    ace = require('brace');\n\n    // load required Ace plugins\n    require('brace/mode/json');\n    require('brace/ext/searchbox');\n  }\n  catch (err) {\n    // failed to load brace (can be minimalist bundle).\n    // No worries, the editor will fall back to plain text if needed.\n  }\n}\n\nmodule.exports = ace;\n","ace.define(\"ace/ext/searchbox\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/keyboard/hash_handler\",\"ace/lib/keys\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar dom = acequire(\"../lib/dom\");\nvar lang = acequire(\"../lib/lang\");\nvar event = acequire(\"../lib/event\");\nvar searchboxCss = \"\\\n.ace_search {\\\nbackground-color: #ddd;\\\ncolor: #666;\\\nborder: 1px solid #cbcbcb;\\\nborder-top: 0 none;\\\noverflow: hidden;\\\nmargin: 0;\\\npadding: 4px 6px 0 4px;\\\nposition: absolute;\\\ntop: 0;\\\nz-index: 99;\\\nwhite-space: normal;\\\n}\\\n.ace_search.left {\\\nborder-left: 0 none;\\\nborder-radius: 0px 0px 5px 0px;\\\nleft: 0;\\\n}\\\n.ace_search.right {\\\nborder-radius: 0px 0px 0px 5px;\\\nborder-right: 0 none;\\\nright: 0;\\\n}\\\n.ace_search_form, .ace_replace_form {\\\nmargin: 0 20px 4px 0;\\\noverflow: hidden;\\\nline-height: 1.9;\\\n}\\\n.ace_replace_form {\\\nmargin-right: 0;\\\n}\\\n.ace_search_form.ace_nomatch {\\\noutline: 1px solid red;\\\n}\\\n.ace_search_field {\\\nborder-radius: 3px 0 0 3px;\\\nbackground-color: white;\\\ncolor: black;\\\nborder: 1px solid #cbcbcb;\\\nborder-right: 0 none;\\\nbox-sizing: border-box!important;\\\noutline: 0;\\\npadding: 0;\\\nfont-size: inherit;\\\nmargin: 0;\\\nline-height: inherit;\\\npadding: 0 6px;\\\nmin-width: 17em;\\\nvertical-align: top;\\\n}\\\n.ace_searchbtn {\\\nborder: 1px solid #cbcbcb;\\\nline-height: inherit;\\\ndisplay: inline-block;\\\npadding: 0 6px;\\\nbackground: #fff;\\\nborder-right: 0 none;\\\nborder-left: 1px solid #dcdcdc;\\\ncursor: pointer;\\\nmargin: 0;\\\nposition: relative;\\\nbox-sizing: content-box!important;\\\ncolor: #666;\\\n}\\\n.ace_searchbtn:last-child {\\\nborder-radius: 0 3px 3px 0;\\\nborder-right: 1px solid #cbcbcb;\\\n}\\\n.ace_searchbtn:disabled {\\\nbackground: none;\\\ncursor: default;\\\n}\\\n.ace_searchbtn:hover {\\\nbackground-color: #eef1f6;\\\n}\\\n.ace_searchbtn.prev, .ace_searchbtn.next {\\\npadding: 0px 0.7em\\\n}\\\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\\\ncontent: \\\"\\\";\\\nborder: solid 2px #888;\\\nwidth: 0.5em;\\\nheight: 0.5em;\\\nborder-width:  2px 0 0 2px;\\\ndisplay:inline-block;\\\ntransform: rotate(-45deg);\\\n}\\\n.ace_searchbtn.next:after {\\\nborder-width: 0 2px 2px 0 ;\\\n}\\\n.ace_searchbtn_close {\\\nbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\\\nborder-radius: 50%;\\\nborder: 0 none;\\\ncolor: #656565;\\\ncursor: pointer;\\\nfont: 16px/16px Arial;\\\npadding: 0;\\\nheight: 14px;\\\nwidth: 14px;\\\ntop: 9px;\\\nright: 7px;\\\nposition: absolute;\\\n}\\\n.ace_searchbtn_close:hover {\\\nbackground-color: #656565;\\\nbackground-position: 50% 100%;\\\ncolor: white;\\\n}\\\n.ace_button {\\\nmargin-left: 2px;\\\ncursor: pointer;\\\n-webkit-user-select: none;\\\n-moz-user-select: none;\\\n-o-user-select: none;\\\n-ms-user-select: none;\\\nuser-select: none;\\\noverflow: hidden;\\\nopacity: 0.7;\\\nborder: 1px solid rgba(100,100,100,0.23);\\\npadding: 1px;\\\nbox-sizing:    border-box!important;\\\ncolor: black;\\\n}\\\n.ace_button:hover {\\\nbackground-color: #eee;\\\nopacity:1;\\\n}\\\n.ace_button:active {\\\nbackground-color: #ddd;\\\n}\\\n.ace_button.checked {\\\nborder-color: #3399ff;\\\nopacity:1;\\\n}\\\n.ace_search_options{\\\nmargin-bottom: 3px;\\\ntext-align: right;\\\n-webkit-user-select: none;\\\n-moz-user-select: none;\\\n-o-user-select: none;\\\n-ms-user-select: none;\\\nuser-select: none;\\\nclear: both;\\\n}\\\n.ace_search_counter {\\\nfloat: left;\\\nfont-family: arial;\\\npadding: 0 8px;\\\n}\";\nvar HashHandler = acequire(\"../keyboard/hash_handler\").HashHandler;\nvar keyUtil = acequire(\"../lib/keys\");\n\nvar MAX_COUNT = 999;\n\ndom.importCssString(searchboxCss, \"ace_searchbox\");\n\nvar html = '<div class=\"ace_search right\">\\\n    <span action=\"hide\" class=\"ace_searchbtn_close\"></span>\\\n    <div class=\"ace_search_form\">\\\n        <input class=\"ace_search_field\" placeholder=\"Search for\" spellcheck=\"false\"></input>\\\n        <span action=\"findPrev\" class=\"ace_searchbtn prev\"></span>\\\n        <span action=\"findNext\" class=\"ace_searchbtn next\"></span>\\\n        <span action=\"findAll\" class=\"ace_searchbtn\" title=\"Alt-Enter\">All</span>\\\n    </div>\\\n    <div class=\"ace_replace_form\">\\\n        <input class=\"ace_search_field\" placeholder=\"Replace with\" spellcheck=\"false\"></input>\\\n        <span action=\"replaceAndFindNext\" class=\"ace_searchbtn\">Replace</span>\\\n        <span action=\"replaceAll\" class=\"ace_searchbtn\">All</span>\\\n    </div>\\\n    <div class=\"ace_search_options\">\\\n        <span action=\"toggleReplace\" class=\"ace_button\" title=\"Toggel Replace mode\"\\\n            style=\"float:left;margin-top:-2px;padding:0 5px;\">+</span>\\\n        <span class=\"ace_search_counter\"></span>\\\n        <span action=\"toggleRegexpMode\" class=\"ace_button\" title=\"RegExp Search\">.*</span>\\\n        <span action=\"toggleCaseSensitive\" class=\"ace_button\" title=\"CaseSensitive Search\">Aa</span>\\\n        <span action=\"toggleWholeWords\" class=\"ace_button\" title=\"Whole Word Search\">\\\\b</span>\\\n        <span action=\"searchInSelection\" class=\"ace_button\" title=\"Search In Selection\">S</span>\\\n    </div>\\\n</div>'.replace(/> +/g, \">\");\n\nvar SearchBox = function(editor, range, showReplaceForm) {\n    var div = dom.createElement(\"div\");\n    div.innerHTML = html;\n    this.element = div.firstChild;\n\n    this.setSession = this.setSession.bind(this);\n\n    this.$init();\n    this.setEditor(editor);\n};\n\n(function() {\n    this.setEditor = function(editor) {\n        editor.searchBox = this;\n        editor.renderer.scroller.appendChild(this.element);\n        this.editor = editor;\n    };\n\n    this.setSession = function(e) {\n        this.searchRange = null;\n        this.$syncOptions(true);\n    };\n\n    this.$initElements = function(sb) {\n        this.searchBox = sb.querySelector(\".ace_search_form\");\n        this.replaceBox = sb.querySelector(\".ace_replace_form\");\n        this.searchOption = sb.querySelector(\"[action=searchInSelection]\");\n        this.replaceOption = sb.querySelector(\"[action=toggleReplace]\");\n        this.regExpOption = sb.querySelector(\"[action=toggleRegexpMode]\");\n        this.caseSensitiveOption = sb.querySelector(\"[action=toggleCaseSensitive]\");\n        this.wholeWordOption = sb.querySelector(\"[action=toggleWholeWords]\");\n        this.searchInput = this.searchBox.querySelector(\".ace_search_field\");\n        this.replaceInput = this.replaceBox.querySelector(\".ace_search_field\");\n        this.searchCounter = sb.querySelector(\".ace_search_counter\");\n    };\n    \n    this.$init = function() {\n        var sb = this.element;\n        \n        this.$initElements(sb);\n        \n        var _this = this;\n        event.addListener(sb, \"mousedown\", function(e) {\n            setTimeout(function(){\n                _this.activeInput.focus();\n            }, 0);\n            event.stopPropagation(e);\n        });\n        event.addListener(sb, \"click\", function(e) {\n            var t = e.target || e.srcElement;\n            var action = t.getAttribute(\"action\");\n            if (action && _this[action])\n                _this[action]();\n            else if (_this.$searchBarKb.commands[action])\n                _this.$searchBarKb.commands[action].exec(_this);\n            event.stopPropagation(e);\n        });\n\n        event.addCommandKeyListener(sb, function(e, hashId, keyCode) {\n            var keyString = keyUtil.keyCodeToString(keyCode);\n            var command = _this.$searchBarKb.findKeyCommand(hashId, keyString);\n            if (command && command.exec) {\n                command.exec(_this);\n                event.stopEvent(e);\n            }\n        });\n\n        this.$onChange = lang.delayedCall(function() {\n            _this.find(false, false);\n        });\n\n        event.addListener(this.searchInput, \"input\", function() {\n            _this.$onChange.schedule(20);\n        });\n        event.addListener(this.searchInput, \"focus\", function() {\n            _this.activeInput = _this.searchInput;\n            _this.searchInput.value && _this.highlight();\n        });\n        event.addListener(this.replaceInput, \"focus\", function() {\n            _this.activeInput = _this.replaceInput;\n            _this.searchInput.value && _this.highlight();\n        });\n    };\n    this.$closeSearchBarKb = new HashHandler([{\n        bindKey: \"Esc\",\n        name: \"closeSearchBar\",\n        exec: function(editor) {\n            editor.searchBox.hide();\n        }\n    }]);\n    this.$searchBarKb = new HashHandler();\n    this.$searchBarKb.bindKeys({\n        \"Ctrl-f|Command-f\": function(sb) {\n            var isReplace = sb.isReplace = !sb.isReplace;\n            sb.replaceBox.style.display = isReplace ? \"\" : \"none\";\n            sb.replaceOption.checked = false;\n            sb.$syncOptions();\n            sb.searchInput.focus();\n        },\n        \"Ctrl-H|Command-Option-F\": function(sb) {\n            sb.replaceOption.checked = true;\n            sb.$syncOptions();\n            sb.replaceInput.focus();\n        },\n        \"Ctrl-G|Command-G\": function(sb) {\n            sb.findNext();\n        },\n        \"Ctrl-Shift-G|Command-Shift-G\": function(sb) {\n            sb.findPrev();\n        },\n        \"esc\": function(sb) {\n            setTimeout(function() { sb.hide();});\n        },\n        \"Return\": function(sb) {\n            if (sb.activeInput == sb.replaceInput)\n                sb.replace();\n            sb.findNext();\n        },\n        \"Shift-Return\": function(sb) {\n            if (sb.activeInput == sb.replaceInput)\n                sb.replace();\n            sb.findPrev();\n        },\n        \"Alt-Return\": function(sb) {\n            if (sb.activeInput == sb.replaceInput)\n                sb.replaceAll();\n            sb.findAll();\n        },\n        \"Tab\": function(sb) {\n            (sb.activeInput == sb.replaceInput ? sb.searchInput : sb.replaceInput).focus();\n        }\n    });\n\n    this.$searchBarKb.addCommands([{\n        name: \"toggleRegexpMode\",\n        bindKey: {win: \"Alt-R|Alt-/\", mac: \"Ctrl-Alt-R|Ctrl-Alt-/\"},\n        exec: function(sb) {\n            sb.regExpOption.checked = !sb.regExpOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"toggleCaseSensitive\",\n        bindKey: {win: \"Alt-C|Alt-I\", mac: \"Ctrl-Alt-R|Ctrl-Alt-I\"},\n        exec: function(sb) {\n            sb.caseSensitiveOption.checked = !sb.caseSensitiveOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"toggleWholeWords\",\n        bindKey: {win: \"Alt-B|Alt-W\", mac: \"Ctrl-Alt-B|Ctrl-Alt-W\"},\n        exec: function(sb) {\n            sb.wholeWordOption.checked = !sb.wholeWordOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"toggleReplace\",\n        exec: function(sb) {\n            sb.replaceOption.checked = !sb.replaceOption.checked;\n            sb.$syncOptions();\n        }\n    }, {\n        name: \"searchInSelection\",\n        exec: function(sb) {\n            sb.searchOption.checked = !sb.searchRange;\n            sb.setSearchRange(sb.searchOption.checked && sb.editor.getSelectionRange());\n            sb.$syncOptions();\n        }\n    }]);\n\n    this.setSearchRange = function(range) {\n        this.searchRange = range;\n        if (range) {\n            this.searchRangeMarker = this.editor.session.addMarker(range, \"ace_active-line\");\n        } else if (this.searchRangeMarker) {\n            this.editor.session.removeMarker(this.searchRangeMarker);\n            this.searchRangeMarker = null;\n        }\n    };\n\n    this.$syncOptions = function(preventScroll) {\n        dom.setCssClass(this.replaceOption, \"checked\", this.searchRange);\n        dom.setCssClass(this.searchOption, \"checked\", this.searchOption.checked);\n        this.replaceOption.textContent = this.replaceOption.checked ? \"-\" : \"+\";\n        dom.setCssClass(this.regExpOption, \"checked\", this.regExpOption.checked);\n        dom.setCssClass(this.wholeWordOption, \"checked\", this.wholeWordOption.checked);\n        dom.setCssClass(this.caseSensitiveOption, \"checked\", this.caseSensitiveOption.checked);\n        this.replaceBox.style.display = this.replaceOption.checked ? \"\" : \"none\";\n        this.find(false, false, preventScroll);\n    };\n\n    this.highlight = function(re) {\n        this.editor.session.highlight(re || this.editor.$search.$options.re);\n        this.editor.renderer.updateBackMarkers();\n    };\n    this.find = function(skipCurrent, backwards, preventScroll) {\n        var range = this.editor.find(this.searchInput.value, {\n            skipCurrent: skipCurrent,\n            backwards: backwards,\n            wrap: true,\n            regExp: this.regExpOption.checked,\n            caseSensitive: this.caseSensitiveOption.checked,\n            wholeWord: this.wholeWordOption.checked,\n            preventScroll: preventScroll,\n            range: this.searchRange\n        });\n        var noMatch = !range && this.searchInput.value;\n        dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n        this.editor._emit(\"findSearchBox\", { match: !noMatch });\n        this.highlight();\n        this.updateCounter();\n    };\n    this.updateCounter = function() {\n        var editor = this.editor;\n        var regex = editor.$search.$options.re;\n        var all = 0;\n        var before = 0;\n        if (regex) {\n            var value = this.searchRange\n                ? editor.session.getTextRange(this.searchRange)\n                : editor.getValue();\n\n            var offset = editor.session.doc.positionToIndex(editor.selection.anchor);\n            if (this.searchRange)\n                offset -= editor.session.doc.positionToIndex(this.searchRange.start);\n\n            var last = regex.lastIndex = 0;\n            var m;\n            while ((m = regex.exec(value))) {\n                all++;\n                last = m.index;\n                if (last <= offset)\n                    before++;\n                if (all > MAX_COUNT)\n                    break;\n                if (!m[0]) {\n                    regex.lastIndex = last += 1;\n                    if (last >= value.length)\n                        break;\n                }\n            }\n        }\n        this.searchCounter.textContent = before + \" of \" + (all > MAX_COUNT ? MAX_COUNT + \"+\" : all);\n    };\n    this.findNext = function() {\n        this.find(true, false);\n    };\n    this.findPrev = function() {\n        this.find(true, true);\n    };\n    this.findAll = function(){\n        var range = this.editor.findAll(this.searchInput.value, {            \n            regExp: this.regExpOption.checked,\n            caseSensitive: this.caseSensitiveOption.checked,\n            wholeWord: this.wholeWordOption.checked\n        });\n        var noMatch = !range && this.searchInput.value;\n        dom.setCssClass(this.searchBox, \"ace_nomatch\", noMatch);\n        this.editor._emit(\"findSearchBox\", { match: !noMatch });\n        this.highlight();\n        this.hide();\n    };\n    this.replace = function() {\n        if (!this.editor.getReadOnly())\n            this.editor.replace(this.replaceInput.value);\n    };    \n    this.replaceAndFindNext = function() {\n        if (!this.editor.getReadOnly()) {\n            this.editor.replace(this.replaceInput.value);\n            this.findNext();\n        }\n    };\n    this.replaceAll = function() {\n        if (!this.editor.getReadOnly())\n            this.editor.replaceAll(this.replaceInput.value);\n    };\n\n    this.hide = function() {\n        this.active = false;\n        this.setSearchRange(null);\n        this.editor.off(\"changeSession\", this.setSession);\n\n        this.element.style.display = \"none\";\n        this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb);\n        this.editor.focus();\n    };\n    this.show = function(value, isReplace) {\n        this.active = true;\n        this.editor.on(\"changeSession\", this.setSession);\n        this.element.style.display = \"\";\n        this.replaceOption.checked = isReplace;\n\n        if (value)\n            this.searchInput.value = value;\n        \n        this.searchInput.focus();\n        this.searchInput.select();\n\n        this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb);\n\n        this.$syncOptions(true);\n    };\n\n    this.isFocused = function() {\n        var el = document.activeElement;\n        return el == this.searchInput || el == this.replaceInput;\n    };\n}).call(SearchBox.prototype);\n\nexports.SearchBox = SearchBox;\n\nexports.Search = function(editor, isReplace) {\n    var sb = editor.searchBox || new SearchBox(editor);\n    sb.show(editor.session.getTextRange(), isReplace);\n};\n\n});\n                (function() {\n                    ace.acequire([\"ace/ext/searchbox\"], function() {});\n                })();\n            ","'use strict';\nmodule.exports = function generate_contains(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId,\n    $nonEmptySchema = it.util.schemaHasRules($schema, it.RULES.all);\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($nextValid) + ' = false; for (var ' + ($idx) + ' = 0; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    out += ' if (' + ($nextValid) + ') break; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($nextValid) + ') {';\n  } else {\n    out += ' if (' + ($data) + '.length == 0) {';\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('contains') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should contain a valid item\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } else { ';\n  if ($nonEmptySchema) {\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n  }\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $noEmptySchema = $schema.every(function($sch) {\n    return it.util.schemaHasRules($sch, it.RULES.all);\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = false;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        out += ' ' + ($valid) + ' = ' + ($valid) + ' || ' + ($nextValid) + '; if (!' + ($valid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('anyOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match some schema in anyOf\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n    out = it.util.cleanUpCode(out);\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nvar translate = require('./i18n').translate;\n\n/**\n * A factory function to create an ShowMoreNode, which depends on a Node\n * @param {function} Node\n */\nfunction showMoreNodeFactory(Node) {\n  /**\n   * @constructor ShowMoreNode\n   * @extends Node\n   * @param {TreeEditor} editor\n   * @param {Node} parent\n   * Create a new ShowMoreNode. This is a special node which is created\n   * for arrays or objects having more than 100 items\n   */\n  function ShowMoreNode (editor, parent) {\n    /** @type {TreeEditor} */\n    this.editor = editor;\n    this.parent = parent;\n    this.dom = {};\n  }\n\n  ShowMoreNode.prototype = new Node();\n\n  /**\n   * Return a table row with an append button.\n   * @return {Element} dom   TR element\n   */\n  ShowMoreNode.prototype.getDom = function () {\n    if (this.dom.tr) {\n      return this.dom.tr;\n    }\n\n    this._updateEditability();\n\n    // display \"show more\"\n    if (!this.dom.tr) {\n      var me = this;\n      var parent = this.parent;\n      var showMoreButton = document.createElement('a');\n      showMoreButton.appendChild(document.createTextNode(translate('showMore')));\n      showMoreButton.href = '#';\n      showMoreButton.onclick = function (event) {\n        // TODO: use callback instead of accessing a method of the parent\n        parent.visibleChilds = Math.floor(parent.visibleChilds / parent.getMaxVisibleChilds() + 1) *\n            parent.getMaxVisibleChilds();\n        me.updateDom();\n        parent.showChilds();\n\n        event.preventDefault();\n        return false;\n      };\n\n      var showAllButton = document.createElement('a');\n      showAllButton.appendChild(document.createTextNode(translate('showAll')));\n      showAllButton.href = '#';\n      showAllButton.onclick = function (event) {\n        // TODO: use callback instead of accessing a method of the parent\n        parent.visibleChilds = Infinity;\n        me.updateDom();\n        parent.showChilds();\n\n        event.preventDefault();\n        return false;\n      };\n\n      var moreContents = document.createElement('div');\n      var moreText = document.createTextNode(this._getShowMoreText());\n      moreContents.className = 'jsoneditor-show-more';\n      moreContents.appendChild(moreText);\n      moreContents.appendChild(showMoreButton);\n      moreContents.appendChild(document.createTextNode('. '));\n      moreContents.appendChild(showAllButton);\n      moreContents.appendChild(document.createTextNode('. '));\n\n      var tdContents = document.createElement('td');\n      tdContents.appendChild(moreContents);\n\n      var moreTr = document.createElement('tr');\n      if (this.editor.options.mode === 'tree') {\n        moreTr.appendChild(document.createElement('td'));\n        moreTr.appendChild(document.createElement('td'));\n      }\n      moreTr.appendChild(tdContents);\n      moreTr.className = 'jsoneditor-show-more';\n      this.dom.tr = moreTr;\n      this.dom.moreContents = moreContents;\n      this.dom.moreText = moreText;\n    }\n\n    this.updateDom();\n\n    return this.dom.tr;\n  };\n\n  /**\n   * Update the HTML dom of the Node\n   */\n  ShowMoreNode.prototype.updateDom = function(options) {\n    if (this.isVisible()) {\n      // attach to the right child node (the first non-visible child)\n      this.dom.tr.node = this.parent.childs[this.parent.visibleChilds];\n\n      if (!this.dom.tr.parentNode) {\n        var nextTr = this.parent._getNextTr();\n        if (nextTr) {\n          nextTr.parentNode.insertBefore(this.dom.tr, nextTr);\n        }\n      }\n\n      // update the counts in the text\n      this.dom.moreText.nodeValue = this._getShowMoreText();\n\n      // update left margin\n      this.dom.moreContents.style.marginLeft = (this.getLevel() + 1) * 24 + 'px';\n    }\n    else {\n      if (this.dom.tr && this.dom.tr.parentNode) {\n        this.dom.tr.parentNode.removeChild(this.dom.tr);\n      }\n    }\n  };\n\n  ShowMoreNode.prototype._getShowMoreText = function() {\n    return translate('showMoreStatus', {\n      visibleChilds: this.parent.visibleChilds,\n      totalChilds: this.parent.childs.length\n    }) + ' ';\n  };\n\n  /**\n   * Check whether the ShowMoreNode is currently visible.\n   * the ShowMoreNode is visible when it's parent has more childs than\n   * the current visibleChilds\n   * @return {boolean} isVisible\n   */\n  ShowMoreNode.prototype.isVisible = function () {\n    return this.parent.expanded && this.parent.childs.length > this.parent.visibleChilds;\n  };\n\n  /**\n   * Handle an event. The event is caught centrally by the editor\n   * @param {Event} event\n   */\n  ShowMoreNode.prototype.onEvent = function (event) {\n    var type = event.type;\n    if (type === 'keydown') {\n      this.onKeyDown(event);\n    }\n  };\n\n  return ShowMoreNode;\n}\n\nmodule.exports = showMoreNodeFactory;\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  var arrA = isArray(a)\n    , arrB = isArray(b)\n    , i\n    , length\n    , key;\n\n  if (arrA && arrB) {\n    length = a.length;\n    if (length != b.length) return false;\n    for (i = 0; i < length; i++)\n      if (!equal(a[i], b[i])) return false;\n    return true;\n  }\n\n  if (arrA != arrB) return false;\n\n  var dateA = a instanceof Date\n    , dateB = b instanceof Date;\n  if (dateA != dateB) return false;\n  if (dateA && dateB) return a.getTime() == b.getTime();\n\n  var regexpA = a instanceof RegExp\n    , regexpB = b instanceof RegExp;\n  if (regexpA != regexpB) return false;\n  if (regexpA && regexpB) return a.toString() == b.toString();\n\n  if (a instanceof Object && b instanceof Object) {\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = 0; i < length; i++)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = 0; i < length; i++) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return false;\n};\n","/**\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n(function (root, factory) {\n    \"use strict\";\n\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    }\n    else if (typeof module === 'object' && module.exports) {\n        module.exports = factory();\n    }\n    else {\n        root.picoModal = factory();\n    }\n}(this, function () {\n\n    /**\n     * A self-contained modal library\n     */\n    \"use strict\";\n\n    /** Returns whether a value is a dom node */\n    function isNode(value) {\n        if ( typeof Node === \"object\" ) {\n            return value instanceof Node;\n        }\n        else {\n            return value && typeof value === \"object\" && typeof value.nodeType === \"number\";\n        }\n    }\n\n    /** Returns whether a value is a string */\n    function isString(value) {\n        return typeof value === \"string\";\n    }\n\n    /**\n     * Generates observable objects that can be watched and triggered\n     */\n    function observable() {\n        var callbacks = [];\n        return {\n            watch: callbacks.push.bind(callbacks),\n            trigger: function(context, detail) {\n\n                var unprevented = true;\n                var event = {\n                    detail: detail,\n                    preventDefault: function preventDefault () {\n                        unprevented = false;\n                    }\n                };\n\n                for (var i = 0; i < callbacks.length; i++) {\n                    callbacks[i](context, event);\n                }\n\n                return unprevented;\n            }\n        };\n    }\n\n\n    /** Whether an element is hidden */\n    function isHidden ( elem ) {\n        // @see http://stackoverflow.com/questions/19669786\n        return window.getComputedStyle(elem).display === 'none';\n    }\n\n\n    /**\n     * A small interface for creating and managing a dom element\n     */\n    function Elem( elem ) {\n        this.elem = elem;\n    }\n\n    /** Creates a new div */\n    Elem.make = function ( parent, tag ) {\n        if ( typeof parent === \"string\" ) {\n            parent = document.querySelector(parent);\n        }\n        var elem = document.createElement(tag || 'div');\n        (parent || document.body).appendChild(elem);\n        return new Elem(elem);\n    };\n\n    Elem.prototype = {\n\n        /** Creates a child of this node */\n        child: function (tag) {\n            return Elem.make(this.elem, tag);\n        },\n\n        /** Applies a set of styles to an element */\n        stylize: function(styles) {\n            styles = styles || {};\n\n            if ( typeof styles.opacity !== \"undefined\" ) {\n                styles.filter = \"alpha(opacity=\" + (styles.opacity * 100) + \")\";\n            }\n\n            for (var prop in styles) {\n                if (styles.hasOwnProperty(prop)) {\n                    this.elem.style[prop] = styles[prop];\n                }\n            }\n\n            return this;\n        },\n\n        /** Adds a class name */\n        clazz: function (clazz) {\n            this.elem.className += \" \" + clazz;\n            return this;\n        },\n\n        /** Sets the HTML */\n        html: function (content) {\n            if ( isNode(content) ) {\n                this.elem.appendChild( content );\n            }\n            else {\n                this.elem.innerHTML = content;\n            }\n            return this;\n        },\n\n        /** Adds a click handler to this element */\n        onClick: function(callback) {\n            this.elem.addEventListener('click', callback);\n            return this;\n        },\n\n        /** Removes this element from the DOM */\n        destroy: function() {\n            this.elem.parentNode.removeChild(this.elem);\n        },\n\n        /** Hides this element */\n        hide: function() {\n            this.elem.style.display = \"none\";\n        },\n\n        /** Shows this element */\n        show: function() {\n            this.elem.style.display = \"block\";\n        },\n\n        /** Sets an attribute on this element */\n        attr: function ( name, value ) {\n            if (value !== undefined) {\n                this.elem.setAttribute(name, value);\n            }\n            return this;\n        },\n\n        /** Executes a callback on all the ancestors of an element */\n        anyAncestor: function ( predicate ) {\n            var elem = this.elem;\n            while ( elem ) {\n                if ( predicate( new Elem(elem) ) ) {\n                    return true;\n                }\n                else {\n                    elem = elem.parentNode;\n                }\n            }\n            return false;\n        },\n\n        /** Whether this element is visible */\n        isVisible: function () {\n            return !isHidden(this.elem);\n        }\n    };\n\n\n    /** Generates the grey-out effect */\n    function buildOverlay( getOption, close ) {\n        return Elem.make( getOption(\"parent\") )\n            .clazz(\"pico-overlay\")\n            .clazz( getOption(\"overlayClass\", \"\") )\n            .stylize({\n                display: \"none\",\n                position: \"fixed\",\n                top: \"0px\",\n                left: \"0px\",\n                height: \"100%\",\n                width: \"100%\",\n                zIndex: 10000\n            })\n            .stylize(getOption('overlayStyles', {\n                opacity: 0.5,\n                background: \"#000\"\n            }))\n            .onClick(function () {\n                if ( getOption('overlayClose', true) ) {\n                    close();\n                }\n            });\n    }\n\n    // An auto incrementing ID assigned to each modal\n    var autoinc = 1;\n\n    /** Builds the content of a modal */\n    function buildModal( getOption, close ) {\n        var width = getOption('width', 'auto');\n        if ( typeof width === \"number\" ) {\n            width = \"\" + width + \"px\";\n        }\n\n        var id = getOption(\"modalId\", \"pico-\" + autoinc++);\n\n        var elem = Elem.make( getOption(\"parent\") )\n            .clazz(\"pico-content\")\n            .clazz( getOption(\"modalClass\", \"\") )\n            .stylize({\n                display: 'none',\n                position: 'fixed',\n                zIndex: 10001,\n                left: \"50%\",\n                top: \"38.1966%\",\n                maxHeight: '90%',\n                boxSizing: 'border-box',\n                width: width,\n                '-ms-transform': 'translate(-50%,-38.1966%)',\n                '-moz-transform': 'translate(-50%,-38.1966%)',\n                '-webkit-transform': 'translate(-50%,-38.1966%)',\n                '-o-transform': 'translate(-50%,-38.1966%)',\n                transform: 'translate(-50%,-38.1966%)'\n            })\n            .stylize(getOption('modalStyles', {\n                overflow: 'auto',\n                backgroundColor: \"white\",\n                padding: \"20px\",\n                borderRadius: \"5px\"\n            }))\n            .html( getOption('content') )\n            .attr(\"id\", id)\n            .attr(\"role\", \"dialog\")\n            .attr(\"aria-labelledby\", getOption(\"ariaLabelledBy\"))\n            .attr(\"aria-describedby\", getOption(\"ariaDescribedBy\", id))\n            .onClick(function (event) {\n                var isCloseClick = new Elem(event.target).anyAncestor(function (elem) {\n                    return /\\bpico-close\\b/.test(elem.elem.className);\n                });\n                if ( isCloseClick ) {\n                    close();\n                }\n            });\n\n        return elem;\n    }\n\n    /** Builds the close button */\n    function buildClose ( elem, getOption ) {\n        if ( getOption('closeButton', true) ) {\n            return elem.child('button')\n                .html( getOption('closeHtml', \"&#xD7;\") )\n                .clazz(\"pico-close\")\n                .clazz( getOption(\"closeClass\", \"\") )\n                .stylize( getOption('closeStyles', {\n                    borderRadius: \"2px\",\n                    border: 0,\n                    padding: 0,\n                    cursor: \"pointer\",\n                    height: \"15px\",\n                    width: \"15px\",\n                    position: \"absolute\",\n                    top: \"5px\",\n                    right: \"5px\",\n                    fontSize: \"16px\",\n                    textAlign: \"center\",\n                    lineHeight: \"15px\",\n                    background: \"#CCC\"\n                }) )\n                .attr(\"aria-label\", getOption(\"close-label\", \"Close\"));\n        }\n    }\n\n    /** Builds a method that calls a method and returns an element */\n    function buildElemAccessor( builder ) {\n        return function () {\n            return builder().elem;\n        };\n    }\n\n\n    // An observable that is triggered whenever the escape key is pressed\n    var escapeKey = observable();\n\n    // An observable that is triggered when the user hits the tab key\n    var tabKey = observable();\n\n    /** A global event handler to detect the escape key being pressed */\n    document.documentElement.addEventListener('keydown', function onKeyPress (event) {\n        var keycode = event.which || event.keyCode;\n\n        // If this is the escape key\n        if ( keycode === 27 ) {\n            escapeKey.trigger();\n        }\n\n        // If this is the tab key\n        else if ( keycode === 9 ) {\n            tabKey.trigger(event);\n        }\n    });\n\n\n    /** Attaches focus management events */\n    function manageFocus ( iface, isEnabled ) {\n\n        /** Whether an element matches a selector */\n        function matches ( elem, selector ) {\n            var fn = elem.msMatchesSelector || elem.webkitMatchesSelector || elem.matches;\n            return fn.call(elem, selector);\n        }\n\n        /**\n         * Returns whether an element is focusable\n         * @see http://stackoverflow.com/questions/18261595\n         */\n        function canFocus( elem ) {\n            if (\n                isHidden(elem) ||\n                matches(elem, \":disabled\") ||\n                elem.hasAttribute(\"contenteditable\")\n            ) {\n                return false;\n            }\n            else {\n                return elem.hasAttribute(\"tabindex\") ||\n                    matches(elem, \"input,select,textarea,button,a[href],area[href],iframe\");\n            }\n        }\n\n        /** Returns the first descendant that can be focused */\n        function firstFocusable ( elem ) {\n            var items = elem.getElementsByTagName(\"*\");\n            for (var i = 0; i < items.length; i++) {\n                if ( canFocus(items[i]) ) {\n                    return items[i];\n                }\n            }\n        }\n\n        /** Returns the last descendant that can be focused */\n        function lastFocusable ( elem ) {\n            var items = elem.getElementsByTagName(\"*\");\n            for (var i = items.length; i--;) {\n                if ( canFocus(items[i]) ) {\n                    return items[i];\n                }\n            }\n        }\n\n        // The element focused before the modal opens\n        var focused;\n\n        // Records the currently focused element so state can be returned\n        // after the modal closes\n        iface.beforeShow(function getActiveFocus() {\n            focused = document.activeElement;\n        });\n\n        // Shift focus into the modal\n        iface.afterShow(function focusModal() {\n            if ( isEnabled() ) {\n                var focusable = firstFocusable(iface.modalElem());\n                if ( focusable ) {\n                    focusable.focus();\n                }\n            }\n        });\n\n        // Restore the previously focused element when the modal closes\n        iface.afterClose(function returnFocus() {\n            if ( isEnabled() && focused ) {\n                focused.focus();\n            }\n            focused = null;\n        });\n\n        // Capture tab key presses and loop them within the modal\n        tabKey.watch(function tabKeyPress (event) {\n            if ( isEnabled() && iface.isVisible() ) {\n                var first = firstFocusable(iface.modalElem());\n                var last = lastFocusable(iface.modalElem());\n\n                var from = event.shiftKey ? first : last;\n                if ( from === document.activeElement ) {\n                    (event.shiftKey ? last : first).focus();\n                    event.preventDefault();\n                }\n            }\n        });\n    }\n\n    /** Manages setting the 'overflow: hidden' on the body tag */\n    function manageBodyOverflow(iface, isEnabled) {\n        var origOverflow;\n        var body = new Elem(document.body);\n\n        iface.beforeShow(function () {\n            // Capture the current values so they can be restored\n            origOverflow = body.elem.style.overflow;\n\n            if (isEnabled()) {\n                body.stylize({ overflow: \"hidden\" });\n            }\n        });\n\n        iface.afterClose(function () {\n            body.stylize({ overflow: origOverflow });\n        });\n    }\n\n    /**\n     * Displays a modal\n     */\n    return function picoModal(options) {\n\n        if ( isString(options) || isNode(options) ) {\n            options = { content: options };\n        }\n\n        var afterCreateEvent = observable();\n        var beforeShowEvent = observable();\n        var afterShowEvent = observable();\n        var beforeCloseEvent = observable();\n        var afterCloseEvent = observable();\n\n        /**\n         * Returns a named option if it has been explicitly defined. Otherwise,\n         * it returns the given default value\n         */\n        function getOption ( opt, defaultValue ) {\n            var value = options[opt];\n            if ( typeof value === \"function\" ) {\n                value = value( defaultValue );\n            }\n            return value === undefined ? defaultValue : value;\n        }\n\n\n        // The various DOM elements that constitute the modal\n        var modalElem = build.bind(window, 'modal');\n        var shadowElem = build.bind(window, 'overlay');\n        var closeElem = build.bind(window, 'close');\n\n        // This will eventually contain the modal API returned to the user\n        var iface;\n\n\n        /** Hides this modal */\n        function forceClose (detail) {\n            shadowElem().hide();\n            modalElem().hide();\n            afterCloseEvent.trigger(iface, detail);\n        }\n\n        /** Gracefully hides this modal */\n        function close (detail) {\n            if ( beforeCloseEvent.trigger(iface, detail) ) {\n                forceClose(detail);\n            }\n        }\n\n        /** Wraps a method so it returns the modal interface */\n        function returnIface ( callback ) {\n            return function () {\n                callback.apply(this, arguments);\n                return iface;\n            };\n        }\n\n\n        // The constructed dom nodes\n        var built;\n\n        /** Builds a method that calls a method and returns an element */\n        function build (name, detail) {\n            if ( !built ) {\n                var modal = buildModal(getOption, close);\n                built = {\n                    modal: modal,\n                    overlay: buildOverlay(getOption, close),\n                    close: buildClose(modal, getOption)\n                };\n                afterCreateEvent.trigger(iface, detail);\n            }\n            return built[name];\n        }\n\n        iface = {\n\n            /** Returns the wrapping modal element */\n            modalElem: buildElemAccessor(modalElem),\n\n            /** Returns the close button element */\n            closeElem: buildElemAccessor(closeElem),\n\n            /** Returns the overlay element */\n            overlayElem: buildElemAccessor(shadowElem),\n\n            /** Builds the dom without showing the modal */\n            buildDom: returnIface(build.bind(null, null)),\n\n            /** Returns whether this modal is currently being shown */\n            isVisible: function () {\n                return !!(built && modalElem && modalElem().isVisible());\n            },\n\n            /** Shows this modal */\n            show: function (detail) {\n                if ( beforeShowEvent.trigger(iface, detail) ) {\n                    shadowElem().show();\n                    closeElem();\n                    modalElem().show();\n                    afterShowEvent.trigger(iface, detail);\n                }\n                return this;\n            },\n\n            /** Hides this modal */\n            close: returnIface(close),\n\n            /**\n             * Force closes this modal. This will not call beforeClose\n             * events and will just immediately hide the modal\n             */\n            forceClose: returnIface(forceClose),\n\n            /** Destroys this modal */\n            destroy: function () {\n                modalElem().destroy();\n                shadowElem().destroy();\n                shadowElem = modalElem = closeElem = undefined;\n            },\n\n            /**\n             * Updates the options for this modal. This will only let you\n             * change options that are re-evaluted regularly, such as\n             * `overlayClose`.\n             */\n            options: function ( opts ) {\n                Object.keys(opts).map(function (key) {\n                    options[key] = opts[key];\n                });\n            },\n\n            /** Executes after the DOM nodes are created */\n            afterCreate: returnIface(afterCreateEvent.watch),\n\n            /** Executes a callback before this modal is closed */\n            beforeShow: returnIface(beforeShowEvent.watch),\n\n            /** Executes a callback after this modal is shown */\n            afterShow: returnIface(afterShowEvent.watch),\n\n            /** Executes a callback before this modal is closed */\n            beforeClose: returnIface(beforeCloseEvent.watch),\n\n            /** Executes a callback after this modal is closed */\n            afterClose: returnIface(afterCloseEvent.watch)\n        };\n\n        manageFocus(iface, getOption.bind(null, \"focus\", true));\n\n        manageBodyOverflow(iface, getOption.bind(null, \"bodyOverflow\", true));\n\n        // If a user presses the 'escape' key, close the modal.\n        escapeKey.watch(function escapeKeyPress () {\n            if ( getOption(\"escCloses\", true) && iface.isVisible() ) {\n                iface.close();\n            }\n        });\n\n        return iface;\n    };\n\n}));\n","'use strict';\nmodule.exports = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if (it.util.schemaHasRules($schema, it.RULES.all)) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = 'key' + $lvl,\n      $idx = 'idx' + $lvl,\n      $i = 'i' + $lvl,\n      $invalidName = '\\' + ' + $key + ' + \\'',\n      $dataNxt = $it.dataLevel = it.dataLevel + 1,\n      $nextData = 'data' + $dataNxt,\n      $dataProperties = 'dataProperties' + $lvl,\n      $ownProperties = it.opts.ownProperties,\n      $currentBaseId = it.baseId;\n    out += ' var ' + ($errs) + ' = errors; ';\n    if ($ownProperties) {\n      out += ' var ' + ($dataProperties) + ' = undefined; ';\n    }\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    out += ' var startErrs' + ($lvl) + ' = errors; ';\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (!' + ($nextValid) + ') { for (var ' + ($i) + '=startErrs' + ($lvl) + '; ' + ($i) + '<errors; ' + ($i) + '++) { vErrors[' + ($i) + '].propertyName = ' + ($key) + '; }   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('propertyNames') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { propertyName: \\'' + ($invalidName) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'property name \\\\\\'' + ($invalidName) + '\\\\\\' is invalid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    if ($breakOnError) {\n      out += ' break; ';\n    }\n    out += ' } }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_ref(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $async, $refCode;\n  if ($schema == '#' || $schema == '#/') {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = 'validate';\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = 'root.refVal[0]';\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);\n    if ($refVal === undefined) {\n      var $message = it.MissingRefError.message(it.baseId, $schema);\n      if (it.opts.missingRefs == 'fail') {\n        it.logger.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('$ref') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { ref: \\'' + (it.util.escapeQuotes($schema)) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'can\\\\\\'t resolve reference ' + (it.util.escapeQuotes($schema)) + '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: ' + (it.util.toQuotedString($schema)) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        if ($breakOnError) {\n          out += ' if (false) { ';\n        }\n      } else if (it.opts.missingRefs == 'ignore') {\n        it.logger.warn($message);\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = 'valid' + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = '';\n      $it.errSchemaPath = $schema;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += ' ' + ($code) + ' ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n      }\n    } else {\n      $async = $refVal.$async === true;\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    if (it.opts.passContext) {\n      out += ' ' + ($refCode) + '.call(this, ';\n    } else {\n      out += ' ' + ($refCode) + '( ';\n    }\n    out += ' ' + ($data) + ', (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ', rootData)  ';\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async) throw new Error('async schema referenced by sync schema');\n      if ($breakOnError) {\n        out += ' var ' + ($valid) + '; ';\n      }\n      out += ' try { ' + (it.yieldAwait) + ' ' + (__callValidate) + '; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = true; ';\n      }\n      out += ' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = false; ';\n      }\n      out += ' } ';\n      if ($breakOnError) {\n        out += ' if (' + ($valid) + ') { ';\n      }\n    } else {\n      out += ' if (!' + (__callValidate) + ') { if (vErrors === null) vErrors = ' + ($refCode) + '.errors; else vErrors = vErrors.concat(' + ($refCode) + '.errors); errors = vErrors.length; } ';\n      if ($breakOnError) {\n        out += ' else { ';\n      }\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_pattern(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $regexp = $isData ? '(new RegExp(' + $schemaValue + '))' : it.usePattern($schema);\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n  }\n  out += ' !' + ($regexp) + '.test(' + ($data) + ') ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('pattern') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { pattern:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match pattern \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","/*!\n * Selectr 2.4.0\n * https://github.com/Mobius1/Selectr\n *\n * Released under the MIT license\n */\n\n'use strict';\n\n/**\n * Default configuration options\n * @type {Object}\n */\nvar defaultConfig = {\n  /**\n   * Emulates browser behaviour by selecting the first option by default\n   * @type {Boolean}\n   */\n  defaultSelected: true,\n\n  /**\n   * Sets the width of the container\n   * @type {String}\n   */\n  width: \"auto\",\n\n  /**\n   * Enables/ disables the container\n   * @type {Boolean}\n   */\n  disabled: false,\n\n  /**\n   * Enables / disables the search function\n   * @type {Boolean}\n   */\n  searchable: true,\n\n  /**\n   * Enable disable the clear button\n   * @type {Boolean}\n   */\n  clearable: false,\n\n  /**\n   * Sort the tags / multiselect options\n   * @type {Boolean}\n   */\n  sortSelected: false,\n\n  /**\n   * Allow deselecting of select-one options\n   * @type {Boolean}\n   */\n  allowDeselect: false,\n\n  /**\n   * Close the dropdown when scrolling (@AlexanderReiswich, #11)\n   * @type {Boolean}\n   */\n  closeOnScroll: false,\n\n  /**\n   * Allow the use of the native dropdown (@jonnyscholes, #14)\n   * @type {Boolean}\n   */\n  nativeDropdown: false,\n\n  /**\n   * Set the main placeholder\n   * @type {String}\n   */\n  placeholder: \"Select an option...\",\n\n  /**\n   * Allow the tagging feature\n   * @type {Boolean}\n   */\n  taggable: false,\n\n  /**\n   * Set the tag input placeholder (@labikmartin, #21, #22)\n   * @type {String}\n   */\n  tagPlaceholder: \"Enter a tag...\"\n};\n\n/**\n * Event Emitter\n */\nvar Events = function() {};\n\n/**\n * Event Prototype\n * @type {Object}\n */\nEvents.prototype = {\n  /**\n   * Add custom event listener\n   * @param  {String} event Event type\n   * @param  {Function} func   Callback\n   * @return {Void}\n   */\n  on: function(event, func) {\n    this._events = this._events || {};\n    this._events[event] = this._events[event] || [];\n    this._events[event].push(func);\n  },\n\n  /**\n   * Remove custom event listener\n   * @param  {String} event Event type\n   * @param  {Function} func   Callback\n   * @return {Void}\n   */\n  off: function(event, func) {\n    this._events = this._events || {};\n    if (event in this._events === false) return;\n    this._events[event].splice(this._events[event].indexOf(func), 1);\n  },\n\n  /**\n   * Fire a custom event\n   * @param  {String} event Event type\n   * @return {Void}\n   */\n  emit: function(event /* , args... */ ) {\n    this._events = this._events || {};\n    if (event in this._events === false) return;\n    for (var i = 0; i < this._events[event].length; i++) {\n      this._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n    }\n  }\n};\n\n/**\n * Event mixin\n * @param  {Object} obj\n * @return {Object}\n */\nEvents.mixin = function(obj) {\n  var props = ['on', 'off', 'emit'];\n  for (var i = 0; i < props.length; i++) {\n    if (typeof obj === 'function') {\n      obj.prototype[props[i]] = Events.prototype[props[i]];\n    } else {\n      obj[props[i]] = Events.prototype[props[i]];\n    }\n  }\n  return obj;\n};\n\n/**\n * Helpers\n * @type {Object}\n */\nvar util = {\n  extend: function(src, props) {\n    props = props || {};\n    var p;\n    for (p in src) {\n      if (src.hasOwnProperty(p)) {\n        if (!props.hasOwnProperty(p)) {\n          props[p] = src[p];\n        }\n      }\n    }\n    return props;\n  },\n  each: function(a, b, c) {\n    if (\"[object Object]\" === Object.prototype.toString.call(a)) {\n      for (var d in a) {\n        if (Object.prototype.hasOwnProperty.call(a, d)) {\n          b.call(c, d, a[d], a);\n        }\n      }\n    } else {\n      for (var e = 0, f = a.length; e < f; e++) {\n        b.call(c, e, a[e], a);\n      }\n    }\n  },\n  createElement: function(e, a) {\n    var d = document,\n        el = d.createElement(e);\n    if (a && \"[object Object]\" === Object.prototype.toString.call(a)) {\n      var i;\n      for (i in a)\n        if (i in el) el[i] = a[i];\n        else if (\"html\" === i) el.innerHTML = a[i];\n        else if (\"text\" === i) {\n          var t = d.createTextNode(a[i]);\n          el.appendChild(t);\n        } else el.setAttribute(i, a[i]);\n    }\n    return el;\n  },\n  hasClass: function(a, b) {\n    if (a)\n      return a.classList ? a.classList.contains(b) : !!a.className && !!a.className.match(new RegExp(\"(\\\\s|^)\" + b + \"(\\\\s|$)\"));\n  },\n  addClass: function(a, b) {\n    if (!util.hasClass(a, b)) {\n      if (a.classList) {\n        a.classList.add(b);\n      } else {\n        a.className = a.className.trim() + \" \" + b;\n      }\n    }\n  },\n  removeClass: function(a, b) {\n    if (util.hasClass(a, b)) {\n      if (a.classList) {\n        a.classList.remove(b);\n      } else {\n        a.className = a.className.replace(new RegExp(\"(^|\\\\s)\" + b.split(\" \").join(\"|\") + \"(\\\\s|$)\", \"gi\"), \" \");\n      }\n    }\n  },\n  closest: function(el, fn) {\n    return el && el !== document.body && (fn(el) ? el : util.closest(el.parentNode, fn));\n  },\n  isInt: function(val) {\n    return typeof val === 'number' && isFinite(val) && Math.floor(val) === val;\n  },\n  debounce: function(a, b, c) {\n    var d;\n    return function() {\n      var e = this,\n          f = arguments,\n          g = function() {\n            d = null;\n            if (!c) a.apply(e, f);\n          },\n          h = c && !d;\n      clearTimeout(d);\n      d = setTimeout(g, b);\n      if (h) {\n        a.apply(e, f);\n      }\n    };\n  },\n  rect: function(el, abs) {\n    var w = window;\n    var r = el.getBoundingClientRect();\n    var x = abs ? w.pageXOffset : 0;\n    var y = abs ? w.pageYOffset : 0;\n\n    return {\n      bottom: r.bottom + y,\n      height: r.height,\n      left: r.left + x,\n      right: r.right + x,\n      top: r.top + y,\n      width: r.width\n    };\n  },\n  includes: function(a, b) {\n    return a.indexOf(b) > -1;\n  },\n  truncate: function(el) {\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n  }\n};\n\n\nfunction isset(obj, prop) {\n  return obj.hasOwnProperty(prop) && (obj[prop] === true || obj[prop].length);\n}\n\n/**\n * Append an item to the list\n * @param  {Object} item\n * @param  {Object} custom\n * @return {Void}\n */\nfunction appendItem(item, parent, custom) {\n  if (item.parentNode) {\n    if (!item.parentNode.parentNode) {\n      parent.appendChild(item.parentNode);\n    }\n  } else {\n    parent.appendChild(item);\n  }\n\n  util.removeClass(item, \"excluded\");\n  if (!custom) {\n    item.innerHTML = item.textContent;\n  }\n}\n\n/**\n * Render the item list\n * @return {Void}\n */\nvar render = function() {\n  if (this.items.length) {\n    var f = document.createDocumentFragment();\n\n    if (this.config.pagination) {\n      var pages = this.pages.slice(0, this.pageIndex);\n\n      util.each(pages, function(i, items) {\n        util.each(items, function(j, item) {\n          appendItem(item, f, this.customOption);\n        }, this);\n      }, this);\n    } else {\n      util.each(this.items, function(i, item) {\n        appendItem(item, f, this.customOption);\n      }, this);\n    }\n\n    if (f.childElementCount) {\n      util.removeClass(this.items[this.navIndex], \"active\");\n      this.navIndex = f.querySelector(\".selectr-option\").idx;\n      util.addClass(this.items[this.navIndex], \"active\");\n    }\n\n    this.tree.appendChild(f);\n  }\n};\n\n/**\n * Dismiss / close the dropdown\n * @param  {obj} e\n * @return {void}\n */\nvar dismiss = function(e) {\n  var target = e.target;\n  if (!this.container.contains(target) && (this.opened || util.hasClass(this.container, \"notice\"))) {\n    this.close();\n  }\n};\n\n/**\n * Build a list item from the HTMLOptionElement\n * @param  {int} i      HTMLOptionElement index\n * @param  {HTMLOptionElement} option\n * @param  {bool} group  Has parent optgroup\n * @return {void}\n */\nvar createItem = function(option, data) {\n  data = data || option;\n  var content = this.customOption ? this.config.renderOption(data) : option.textContent;\n  var opt = util.createElement(\"li\", {\n    class: \"selectr-option\",\n    html: content,\n    role: \"treeitem\",\n    \"aria-selected\": false\n  });\n\n  opt.idx = option.idx;\n\n  this.items.push(opt);\n\n  if (option.defaultSelected) {\n    this.defaultSelected.push(option.idx);\n  }\n\n  if (option.disabled) {\n    opt.disabled = true;\n    util.addClass(opt, \"disabled\");\n  }\n\n  return opt;\n};\n\n/**\n * Build the container\n * @return {Void}\n */\nvar build = function() {\n\n  this.requiresPagination = this.config.pagination && this.config.pagination > 0;\n\n  // Set width\n  if (isset(this.config, \"width\")) {\n    if (util.isInt(this.config.width)) {\n      this.width = this.config.width + \"px\";\n    } else {\n      if (this.config.width === \"auto\") {\n        this.width = \"100%\";\n      } else if (util.includes(this.config.width, \"%\")) {\n        this.width = this.config.width;\n      }\n    }\n  }\n\n  this.container = util.createElement(\"div\", {\n    class: \"selectr-container\"\n  });\n\n  // Custom className\n  if (this.config.customClass) {\n    util.addClass(this.container, this.config.customClass);\n  }\n\n  // Mobile device\n  if (this.mobileDevice) {\n    util.addClass(this.container, \"selectr-mobile\");\n  } else {\n    util.addClass(this.container, \"selectr-desktop\");\n  }\n\n  // Hide the HTMLSelectElement and prevent focus\n  this.el.tabIndex = -1;\n\n  // Native dropdown\n  if (this.config.nativeDropdown || this.mobileDevice) {\n    util.addClass(this.el, \"selectr-visible\");\n  } else {\n    util.addClass(this.el, \"selectr-hidden\");\n  }\n\n  this.selected = util.createElement(\"div\", {\n    class: \"selectr-selected\",\n    disabled: this.disabled,\n    tabIndex: 1, // enable tabIndex (#9)\n    \"aria-expanded\": false\n  });\n\n  this.label = util.createElement(this.el.multiple ? \"ul\" : \"span\", {\n    class: \"selectr-label\"\n  });\n\n  var dropdown = util.createElement(\"div\", {\n    class: \"selectr-options-container\"\n  });\n\n  this.tree = util.createElement(\"ul\", {\n    class: \"selectr-options\",\n    role: \"tree\",\n    \"aria-hidden\": true,\n    \"aria-expanded\": false\n  });\n\n  this.notice = util.createElement(\"div\", {\n    class: \"selectr-notice\"\n  });\n\n  this.el.setAttribute(\"aria-hidden\", true);\n\n  if (this.disabled) {\n    this.el.disabled = true;\n  }\n\n  if (this.el.multiple) {\n    util.addClass(this.label, \"selectr-tags\");\n    util.addClass(this.container, \"multiple\");\n\n    // Collection of tags\n    this.tags = [];\n\n    // Collection of selected values\n    this.selectedValues = this.getSelectedProperties('value');\n\n    // Collection of selected indexes\n    this.selectedIndexes = this.getSelectedProperties('idx');\n  }\n\n  this.selected.appendChild(this.label);\n\n  if (this.config.clearable) {\n    this.selectClear = util.createElement(\"button\", {\n      class: \"selectr-clear\",\n      type: \"button\"\n    });\n\n    this.container.appendChild(this.selectClear);\n\n    util.addClass(this.container, \"clearable\");\n  }\n\n  if (this.config.taggable) {\n    var li = util.createElement('li', {\n      class: 'input-tag'\n    });\n    this.input = util.createElement(\"input\", {\n      class: \"selectr-tag-input\",\n      placeholder: this.config.tagPlaceholder,\n      tagIndex: 0,\n      autocomplete: \"off\",\n      autocorrect: \"off\",\n      autocapitalize: \"off\",\n      spellcheck: \"false\",\n      role: \"textbox\",\n      type: \"search\"\n    });\n\n    li.appendChild(this.input);\n    this.label.appendChild(li);\n    util.addClass(this.container, \"taggable\");\n\n    this.tagSeperators = [\",\"];\n    if (this.config.tagSeperators) {\n      this.tagSeperators = this.tagSeperators.concat(this.config.tagSeperators);\n    }\n  }\n\n  if (this.config.searchable) {\n    this.input = util.createElement(\"input\", {\n      class: \"selectr-input\",\n      tagIndex: -1,\n      autocomplete: \"off\",\n      autocorrect: \"off\",\n      autocapitalize: \"off\",\n      spellcheck: \"false\",\n      role: \"textbox\",\n      type: \"search\"\n    });\n    this.inputClear = util.createElement(\"button\", {\n      class: \"selectr-input-clear\",\n      type: \"button\"\n    });\n    this.inputContainer = util.createElement(\"div\", {\n      class: \"selectr-input-container\"\n    });\n\n    this.inputContainer.appendChild(this.input);\n    this.inputContainer.appendChild(this.inputClear);\n    dropdown.appendChild(this.inputContainer);\n  }\n\n  dropdown.appendChild(this.notice);\n  dropdown.appendChild(this.tree);\n\n  // List of items for the dropdown\n  this.items = [];\n\n  // Establish options\n  this.options = [];\n\n  // Check for options in the element\n  if (this.el.options.length) {\n    this.options = [].slice.call(this.el.options);\n  }\n\n  // Element may have optgroups so\n  // iterate element.children instead of element.options\n  var group = false,\n      j = 0;\n  if (this.el.children.length) {\n    util.each(this.el.children, function(i, element) {\n      if (element.nodeName === \"OPTGROUP\") {\n\n        group = util.createElement(\"ul\", {\n          class: \"selectr-optgroup\",\n          role: \"group\",\n          html: \"<li class='selectr-optgroup--label'>\" + element.label + \"</li>\"\n        });\n\n        util.each(element.children, function(x, el) {\n          el.idx = j;\n          group.appendChild(createItem.call(this, el, group));\n          j++;\n        }, this);\n      } else {\n        element.idx = j;\n        createItem.call(this, element);\n        j++;\n      }\n    }, this);\n  }\n\n  // Options defined by the data option\n  if (this.config.data && Array.isArray(this.config.data)) {\n    this.data = [];\n    var optgroup = false,\n        option;\n\n    group = false;\n    j = 0;\n\n    util.each(this.config.data, function(i, opt) {\n      // Check for group options\n      if (isset(opt, \"children\")) {\n        optgroup = util.createElement(\"optgroup\", {\n          label: opt.text\n        });\n\n        group = util.createElement(\"ul\", {\n          class: \"selectr-optgroup\",\n          role: \"group\",\n          html: \"<li class='selectr-optgroup--label'>\" + opt.text + \"</li>\"\n        });\n\n        util.each(opt.children, function(x, data) {\n          option = new Option(data.text, data.value, false, data.hasOwnProperty(\"selected\") && data.selected === true);\n\n          option.disabled = isset(data, \"disabled\");\n\n          this.options.push(option);\n\n          optgroup.appendChild(option);\n\n          option.idx = j;\n\n          group.appendChild(createItem.call(this, option, data));\n\n          this.data[j] = data;\n\n          j++;\n        }, this);\n      } else {\n        option = new Option(opt.text, opt.value, false, opt.hasOwnProperty(\"selected\") && opt.selected === true);\n\n        option.disabled = isset(opt, \"disabled\");\n\n        this.options.push(option);\n\n        option.idx = j;\n\n        createItem.call(this, option, opt);\n\n        this.data[j] = opt;\n\n        j++;\n      }\n    }, this);\n  }\n\n  this.setSelected(true);\n\n  var first;\n  this.navIndex = 0;\n  for (var i = 0; i < this.items.length; i++) {\n    first = this.items[i];\n\n    if (!util.hasClass(first, \"disabled\")) {\n\n      util.addClass(first, \"active\");\n      this.navIndex = i;\n      break;\n    }\n  }\n\n  // Check for pagination / infinite scroll\n  if (this.requiresPagination) {\n    this.pageIndex = 1;\n\n    // Create the pages\n    this.paginate();\n  }\n\n  this.container.appendChild(this.selected);\n  this.container.appendChild(dropdown);\n\n  this.placeEl = util.createElement(\"div\", {\n    class: \"selectr-placeholder\"\n  });\n\n  // Set the placeholder\n  this.setPlaceholder();\n\n  this.selected.appendChild(this.placeEl);\n\n  // Disable if required\n  if (this.disabled) {\n    this.disable();\n  }\n\n  this.el.parentNode.insertBefore(this.container, this.el);\n  this.container.appendChild(this.el);\n};\n\n/**\n * Navigate through the dropdown\n * @param  {obj} e\n * @return {void}\n */\nvar navigate = function(e) {\n  e = e || window.event;\n\n  // Filter out the keys we don\"t want\n  if (!this.items.length || !this.opened || !util.includes([13, 38, 40], e.which)) {\n    this.navigating = false;\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.which === 13) {\n\n    if (this.config.taggable && this.input.value.length > 0) {\n      return false;\n    }\n\n    return this.change(this.navIndex);\n  }\n\n  var direction, prevEl = this.items[this.navIndex];\n\n  switch (e.which) {\n    case 38:\n      direction = 0;\n      if (this.navIndex > 0) {\n        this.navIndex--;\n      }\n      break;\n    case 40:\n      direction = 1;\n      if (this.navIndex < this.items.length - 1) {\n        this.navIndex++;\n      }\n  }\n\n  this.navigating = true;\n\n\n  // Instead of wasting memory holding a copy of this.items\n  // with disabled / excluded options omitted, skip them instead\n  while (util.hasClass(this.items[this.navIndex], \"disabled\") || util.hasClass(this.items[this.navIndex], \"excluded\")) {\n    if (direction) {\n      this.navIndex++;\n    } else {\n      this.navIndex--;\n    }\n\n    if (this.searching) {\n      if (this.navIndex > this.tree.lastElementChild.idx) {\n        this.navIndex = this.tree.lastElementChild.idx;\n        break;\n      } else if (this.navIndex < this.tree.firstElementChild.idx) {\n        this.navIndex = this.tree.firstElementChild.idx;\n        break;\n      }\n    }\n  }\n\n  // Autoscroll the dropdown during navigation\n  var r = util.rect(this.items[this.navIndex]);\n\n  if (!direction) {\n    if (this.navIndex === 0) {\n      this.tree.scrollTop = 0;\n    } else if (r.top - this.optsRect.top < 0) {\n      this.tree.scrollTop = this.tree.scrollTop + (r.top - this.optsRect.top);\n    }\n  } else {\n    if (this.navIndex === 0) {\n      this.tree.scrollTop = 0;\n    } else if ((r.top + r.height) > (this.optsRect.top + this.optsRect.height)) {\n      this.tree.scrollTop = this.tree.scrollTop + ((r.top + r.height) - (this.optsRect.top + this.optsRect.height));\n    }\n\n    // Load another page if needed\n    if (this.navIndex === this.tree.childElementCount - 1 && this.requiresPagination) {\n      load.call(this);\n    }\n  }\n\n  if (prevEl) {\n    util.removeClass(prevEl, \"active\");\n  }\n\n  util.addClass(this.items[this.navIndex], \"active\");\n};\n\n/**\n * Add a tag\n * @param  {HTMLElement} item\n */\nvar addTag = function(item) {\n  var that = this,\n      r;\n\n  var docFrag = document.createDocumentFragment();\n  var option = this.options[item.idx];\n  var data = this.data ? this.data[item.idx] : option;\n  var content = this.customSelected ? this.config.renderSelection(data) : option.textContent;\n\n  var tag = util.createElement(\"li\", {\n    class: \"selectr-tag\",\n    html: content\n  });\n  var btn = util.createElement(\"button\", {\n    class: \"selectr-tag-remove\",\n    type: \"button\"\n  });\n\n  tag.appendChild(btn);\n\n  // Set property to check against later\n  tag.idx = item.idx;\n  tag.tag = option.value;\n\n  this.tags.push(tag);\n\n  if (this.config.sortSelected) {\n\n    var tags = this.tags.slice();\n\n    // Deal with values that contain numbers\n    r = function(val, arr) {\n      val.replace(/(\\d+)|(\\D+)/g, function(that, $1, $2) {\n        arr.push([$1 || Infinity, $2 || \"\"]);\n      });\n    };\n\n    tags.sort(function(a, b) {\n      var x = [],\n          y = [],\n          ac, bc;\n      if (that.config.sortSelected === true) {\n        ac = a.tag;\n        bc = b.tag;\n      } else if (that.config.sortSelected === 'text') {\n        ac = a.textContent;\n        bc = b.textContent;\n      }\n\n      r(ac, x);\n      r(bc, y);\n\n      while (x.length && y.length) {\n        var ax = x.shift();\n        var by = y.shift();\n        var nn = (ax[0] - by[0]) || ax[1].localeCompare(by[1]);\n        if (nn) return nn;\n      }\n\n      return x.length - y.length;\n    });\n\n    util.each(tags, function(i, tg) {\n      docFrag.appendChild(tg);\n    });\n\n    this.label.innerHTML = \"\";\n\n  } else {\n    docFrag.appendChild(tag);\n  }\n\n  if (this.config.taggable) {\n    this.label.insertBefore(docFrag, this.input.parentNode);\n  } else {\n    this.label.appendChild(docFrag);\n  }\n};\n\n/**\n * Remove a tag\n * @param  {HTMLElement} item\n * @return {void}\n */\nvar removeTag = function(item) {\n  var tag = false;\n\n  util.each(this.tags, function(i, t) {\n    if (t.idx === item.idx) {\n      tag = t;\n    }\n  }, this);\n\n  if (tag) {\n    this.label.removeChild(tag);\n    this.tags.splice(this.tags.indexOf(tag), 1);\n  }\n};\n\n/**\n * Load the next page of items\n * @return {void}\n */\nvar load = function() {\n  var tree = this.tree;\n  var scrollTop = tree.scrollTop;\n  var scrollHeight = tree.scrollHeight;\n  var offsetHeight = tree.offsetHeight;\n  var atBottom = scrollTop >= (scrollHeight - offsetHeight);\n\n  if ((atBottom && this.pageIndex < this.pages.length)) {\n    var f = document.createDocumentFragment();\n\n    util.each(this.pages[this.pageIndex], function(i, item) {\n      appendItem(item, f, this.customOption);\n    }, this);\n\n    tree.appendChild(f);\n\n    this.pageIndex++;\n\n    this.emit(\"selectr.paginate\", {\n      items: this.items.length,\n      total: this.data.length,\n      page: this.pageIndex,\n      pages: this.pages.length\n    });\n  }\n};\n\n/**\n * Clear a search\n * @return {void}\n */\nvar clearSearch = function() {\n  if (this.config.searchable || this.config.taggable) {\n    this.input.value = null;\n    this.searching = false;\n    if (this.config.searchable) {\n      util.removeClass(this.inputContainer, \"active\");\n    }\n\n    if (util.hasClass(this.container, \"notice\")) {\n      util.removeClass(this.container, \"notice\");\n      util.addClass(this.container, \"open\");\n      this.input.focus();\n    }\n\n    util.each(this.items, function(i, item) {\n      // Items that didn't match need the class\n      // removing to make them visible again\n      util.removeClass(item, \"excluded\");\n      // Remove the span element for underlining matched items\n      if (!this.customOption) {\n        item.innerHTML = item.textContent;\n      }\n    }, this);\n  }\n};\n\n/**\n * Query matching for searches\n * @param  {string} query\n * @param  {HTMLOptionElement} option\n * @return {bool}\n */\nvar match = function(query, option) {\n  var result = new RegExp(query, \"i\").exec(option.textContent);\n  if (result) {\n    return option.textContent.replace(result[0], \"<span class='selectr-match'>\" + result[0] + \"</span>\");\n  }\n  return false;\n};\n\n// Main Lib\nvar Selectr = function(el, config) {\n\n  config = config || {};\n\n  if (!el) {\n    throw new Error(\"You must supply either a HTMLSelectElement or a CSS3 selector string.\");\n  }\n\n  this.el = el;\n\n  // CSS3 selector string\n  if (typeof el === \"string\") {\n    this.el = document.querySelector(el);\n  }\n\n  if (this.el === null) {\n    throw new Error(\"The element you passed to Selectr can not be found.\");\n  }\n\n  if (this.el.nodeName.toLowerCase() !== \"select\") {\n    throw new Error(\"The element you passed to Selectr is not a HTMLSelectElement.\");\n  }\n\n  this.render(config);\n};\n\n/**\n * Render the instance\n * @param  {object} config\n * @return {void}\n */\nSelectr.prototype.render = function(config) {\n\n  if (this.rendered) return;\n\n  // Merge defaults with user set config\n  this.config = util.extend(defaultConfig, config);\n\n  // Store type\n  this.originalType = this.el.type;\n\n  // Store tabIndex\n  this.originalIndex = this.el.tabIndex;\n\n  // Store defaultSelected options for form reset\n  this.defaultSelected = [];\n\n  // Store the original option count\n  this.originalOptionCount = this.el.options.length;\n\n  if (this.config.multiple || this.config.taggable) {\n    this.el.multiple = true;\n  }\n\n  // Disabled?\n  this.disabled = isset(this.config, \"disabled\");\n\n  this.opened = false;\n\n  if (this.config.taggable) {\n    this.config.searchable = false;\n  }\n\n  this.navigating = false;\n\n  this.mobileDevice = false;\n  if (/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)) {\n    this.mobileDevice = true;\n  }\n\n  this.customOption = this.config.hasOwnProperty(\"renderOption\") && typeof this.config.renderOption === \"function\";\n  this.customSelected = this.config.hasOwnProperty(\"renderSelection\") && typeof this.config.renderSelection === \"function\";\n\n  // Enable event emitter\n  Events.mixin(this);\n\n  build.call(this);\n\n  this.bindEvents();\n\n  this.update();\n\n  this.optsRect = util.rect(this.tree);\n\n  this.rendered = true;\n\n  // Fixes macOS Safari bug #28\n  if (!this.el.multiple) {\n    this.el.selectedIndex = this.selectedIndex;\n  }\n\n  var that = this;\n  setTimeout(function() {\n    that.emit(\"selectr.init\");\n  }, 20);\n};\n\nSelectr.prototype.getSelected = function () {\n  var selected = this.el.querySelectorAll('option:checked');\n  return selected;\n};\n\nSelectr.prototype.getSelectedProperties = function (prop) {\n  var selected = this.getSelected();\n  var values = [].slice.call(selected)\n      .map(function(option) { return option[prop]; })\n      .filter(function(i) { return i!==null && i!==undefined; });\n  return values;\n};\n\n/**\n * Attach the required event listeners\n */\nSelectr.prototype.bindEvents = function() {\n\n  var that = this;\n\n  this.events = {};\n\n  this.events.dismiss = dismiss.bind(this);\n  this.events.navigate = navigate.bind(this);\n  this.events.reset = this.reset.bind(this);\n\n  if (this.config.nativeDropdown || this.mobileDevice) {\n\n    this.container.addEventListener(\"touchstart\", function(e) {\n      if (e.changedTouches[0].target === that.el) {\n        that.toggle();\n      }\n    });\n\n    if (this.config.nativeDropdown || this.mobileDevice) {\n      this.container.addEventListener(\"click\", function(e) {\n        e.preventDefault();  // Jos: Added to prevent emitting clear directly after select\n        e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n\n        if (e.target === that.el) {\n          that.toggle();\n        }\n      });\n    }\n\n    var getChangedOptions = function(last, current) {\n      var added=[], removed=last.slice(0);\n      var idx;\n      for (var i=0; i<current.length; i++) {\n        idx = removed.indexOf(current[i]);\n        if (idx > -1)\n          removed.splice(idx, 1);\n        else\n          added.push(current[i]);\n      }\n      return [added, removed];\n    };\n\n    // Listen for the change on the native select\n    // and update accordingly\n    this.el.addEventListener(\"change\", function(e) {\n      if (that.el.multiple) {\n        var indexes = that.getSelectedProperties('idx');\n        var changes = getChangedOptions(that.selectedIndexes, indexes);\n\n        util.each(changes[0], function(i, idx) {\n          that.select(idx);\n        }, that);\n\n        util.each(changes[1], function(i, idx) {\n          that.deselect(idx);\n        }, that);\n\n      } else {\n        if (that.el.selectedIndex > -1) {\n          that.select(that.el.selectedIndex);\n        }\n      }\n    });\n\n  }\n\n  // Open the dropdown with Enter key if focused\n  if (this.config.nativeDropdown) {\n    this.container.addEventListener(\"keydown\", function(e) {\n      if (e.key === \"Enter\" && that.selected === document.activeElement) {\n        // Show the native\n        that.toggle();\n\n        // Focus on the native multiselect\n        setTimeout(function() {\n          that.el.focus();\n        }, 200);\n      }\n    });\n  }\n\n  // Non-native dropdown\n  this.selected.addEventListener(\"click\", function(e) {\n\n    if (!that.disabled) {\n      that.toggle();\n    }\n\n    e.preventDefault();\n    e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n  });\n\n  // Remove tag\n  this.label.addEventListener(\"click\", function(e) {\n    if (util.hasClass(e.target, \"selectr-tag-remove\")) {\n      that.deselect(e.target.parentNode.idx);\n    }\n  });\n\n  // Clear input\n  if (this.selectClear) {\n    this.selectClear.addEventListener(\"click\", this.clear.bind(this));\n  }\n\n  // Prevent text selection\n  this.tree.addEventListener(\"mousedown\", function(e) {\n    e.preventDefault();\n  });\n\n  // Select / deselect items\n  this.tree.addEventListener(\"click\", function(e) {\n    e.preventDefault();  // Jos: Added to prevent emitting clear directly after select\n    e.stopPropagation(); // Jos: Added to prevent emitting clear directly after select\n\n    var item = util.closest(e.target, function(el) {\n      return el && util.hasClass(el, \"selectr-option\");\n    });\n\n    if (item) {\n      if (!util.hasClass(item, \"disabled\")) {\n        if (util.hasClass(item, \"selected\")) {\n          if (that.el.multiple || !that.el.multiple && that.config.allowDeselect) {\n            that.deselect(item.idx);\n          }\n        } else {\n          that.select(item.idx);\n        }\n\n        if (that.opened && !that.el.multiple) {\n          that.close();\n        }\n      }\n    }\n  });\n\n  // Mouseover list items\n  this.tree.addEventListener(\"mouseover\", function(e) {\n    if (util.hasClass(e.target, \"selectr-option\")) {\n      if (!util.hasClass(e.target, \"disabled\")) {\n        util.removeClass(that.items[that.navIndex], \"active\");\n\n        util.addClass(e.target, \"active\");\n\n        that.navIndex = [].slice.call(that.items).indexOf(e.target);\n      }\n    }\n  });\n\n  // Searchable\n  if (this.config.searchable) {\n    // Show / hide the search input clear button\n\n    this.input.addEventListener(\"focus\", function(e) {\n      that.searching = true;\n    });\n\n    this.input.addEventListener(\"blur\", function(e) {\n      that.searching = false;\n    });\n\n    this.input.addEventListener(\"keyup\", function(e) {\n      that.search();\n\n      if (!that.config.taggable) {\n        // Show / hide the search input clear button\n        if (this.value.length) {\n          util.addClass(this.parentNode, \"active\");\n        } else {\n          util.removeClass(this.parentNode, \"active\");\n        }\n      }\n    });\n\n    // Clear the search input\n    this.inputClear.addEventListener(\"click\", function(e) {\n      that.input.value = null;\n      clearSearch.call(that);\n\n      if (!that.tree.childElementCount) {\n        render.call(that);\n      }\n    });\n  }\n\n  if (this.config.taggable) {\n    this.input.addEventListener(\"keyup\", function(e) {\n\n      that.search();\n\n      if (that.config.taggable && this.value.length) {\n        var val = this.value.trim();\n\n        if (e.which === 13 || util.includes(that.tagSeperators, e.key)) {\n\n          util.each(that.tagSeperators, function(i, k) {\n            val = val.replace(k, '');\n          });\n\n          var option = that.add({\n            value: val,\n            text: val,\n            selected: true\n          }, true);\n\n          if (!option) {\n            this.value = '';\n            that.setMessage('That tag is already in use.');\n          } else {\n            that.close();\n            clearSearch.call(that);\n          }\n        }\n      }\n    });\n  }\n\n  this.update = util.debounce(function() {\n    // Optionally close dropdown on scroll / resize (#11)\n    if (that.opened && that.config.closeOnScroll) {\n      that.close();\n    }\n    if (that.width) {\n      that.container.style.width = that.width;\n    }\n    that.invert();\n  }, 50);\n\n  if (this.requiresPagination) {\n    this.paginateItems = util.debounce(function() {\n      load.call(this);\n    }, 50);\n\n    this.tree.addEventListener(\"scroll\", this.paginateItems.bind(this));\n  }\n\n  // Dismiss when clicking outside the container\n  document.addEventListener(\"click\", this.events.dismiss);\n  window.addEventListener(\"keydown\", this.events.navigate);\n\n  window.addEventListener(\"resize\", this.update);\n  window.addEventListener(\"scroll\", this.update);\n\n  // Listen for form.reset() (@ambrooks, #13)\n  if (this.el.form) {\n    this.el.form.addEventListener(\"reset\", this.events.reset);\n  }\n};\n\n/**\n * Check for selected options\n * @param {bool} reset\n */\nSelectr.prototype.setSelected = function(reset) {\n\n  // Select first option as with a native select-one element - #21, #24\n  if (!this.config.data && !this.el.multiple && this.el.options.length) {\n    // Browser has selected the first option by default\n    if (this.el.selectedIndex === 0) {\n      if (!this.el.options[0].defaultSelected && !this.config.defaultSelected) {\n        this.el.selectedIndex = -1;\n      }\n    }\n\n    this.selectedIndex = this.el.selectedIndex;\n\n    if (this.selectedIndex > -1) {\n      this.select(this.selectedIndex);\n    }\n  }\n\n  // If we're changing a select-one to select-multiple via the config\n  // and there are no selected options, the first option will be selected by the browser\n  // Let's prevent that here.\n  if (this.config.multiple && this.originalType === \"select-one\" && !this.config.data) {\n    if (this.el.options[0].selected && !this.el.options[0].defaultSelected) {\n      this.el.options[0].selected = false;\n    }\n  }\n\n  util.each(this.options, function(i, option) {\n    if (option.selected && option.defaultSelected) {\n      this.select(option.idx);\n    }\n  }, this);\n\n  if (this.config.selectedValue) {\n    this.setValue(this.config.selectedValue);\n  }\n\n  if (this.config.data) {\n\n\n    if (!this.el.multiple && this.config.defaultSelected && this.el.selectedIndex < 0) {\n      this.select(0);\n    }\n\n    var j = 0;\n    util.each(this.config.data, function(i, opt) {\n      // Check for group options\n      if (isset(opt, \"children\")) {\n        util.each(opt.children, function(x, item) {\n          if (item.hasOwnProperty(\"selected\") && item.selected === true) {\n            this.select(j);\n          }\n          j++;\n        }, this);\n      } else {\n        if (opt.hasOwnProperty(\"selected\") && opt.selected === true) {\n          this.select(j);\n        }\n        j++;\n      }\n    }, this);\n  }\n};\n\n/**\n * Destroy the instance\n * @return {void}\n */\nSelectr.prototype.destroy = function() {\n\n  if (!this.rendered) return;\n\n  this.emit(\"selectr.destroy\");\n\n  // Revert to select-single if programtically set to multiple\n  if (this.originalType === 'select-one') {\n    this.el.multiple = false;\n  }\n\n  if (this.config.data) {\n    this.el.innerHTML = \"\";\n  }\n\n  // Remove the className from select element\n  util.removeClass(this.el, 'selectr-hidden');\n\n  // Remove reset listener from parent form\n  if (this.el.form) {\n    util.off(this.el.form, \"reset\", this.events.reset);\n  }\n\n  // Remove event listeners attached to doc and win\n  util.off(document, \"click\", this.events.dismiss);\n  util.off(document, \"keydown\", this.events.navigate);\n  util.off(window, \"resize\", this.update);\n  util.off(window, \"scroll\", this.update);\n\n  // Replace the container with the original select element\n  this.container.parentNode.replaceChild(this.el, this.container);\n\n  this.rendered = false;\n};\n\n/**\n * Change an options state\n * @param  {Number} index\n * @return {void}\n */\nSelectr.prototype.change = function(index) {\n  var item = this.items[index],\n      option = this.options[index];\n\n  if (option.disabled) {\n    return;\n  }\n\n  if (option.selected && util.hasClass(item, \"selected\")) {\n    this.deselect(index);\n  } else {\n    this.select(index);\n  }\n\n  if (this.opened && !this.el.multiple) {\n    this.close();\n  }\n};\n\n/**\n * Select an option\n * @param  {Number} index\n * @return {void}\n */\nSelectr.prototype.select = function(index) {\n\n  var item = this.items[index],\n      options = [].slice.call(this.el.options),\n      option = this.options[index];\n\n  if (this.el.multiple) {\n    if (util.includes(this.selectedIndexes, index)) {\n      return false;\n    }\n\n    if (this.config.maxSelections && this.tags.length === this.config.maxSelections) {\n      this.setMessage(\"A maximum of \" + this.config.maxSelections + \" items can be selected.\", true);\n      return false;\n    }\n\n    this.selectedValues.push(option.value);\n    this.selectedIndexes.push(index);\n\n    addTag.call(this, item);\n  } else {\n    var data = this.data ? this.data[index] : option;\n    this.label.innerHTML = this.customSelected ? this.config.renderSelection(data) : option.textContent;\n\n    this.selectedValue = option.value;\n    this.selectedIndex = index;\n\n    util.each(this.options, function(i, o) {\n      var opt = this.items[i];\n\n      if (i !== index) {\n        if (opt) {\n          util.removeClass(opt, \"selected\");\n        }\n        o.selected = false;\n        o.removeAttribute(\"selected\");\n      }\n    }, this);\n  }\n\n  if (!util.includes(options, option)) {\n    this.el.add(option);\n  }\n\n  item.setAttribute(\"aria-selected\", true);\n\n  util.addClass(item, \"selected\");\n  util.addClass(this.container, \"has-selected\");\n\n  option.selected = true;\n  option.setAttribute(\"selected\", \"\");\n\n  this.emit(\"selectr.change\", option);\n\n  this.emit(\"selectr.select\", option);\n};\n\n/**\n * Deselect an option\n * @param  {Number} index\n * @return {void}\n */\nSelectr.prototype.deselect = function(index, force) {\n  var item = this.items[index],\n      option = this.options[index];\n\n  if (this.el.multiple) {\n    var selIndex = this.selectedIndexes.indexOf(index);\n    this.selectedIndexes.splice(selIndex, 1);\n\n    var valIndex = this.selectedValues.indexOf(option.value);\n    this.selectedValues.splice(valIndex, 1);\n\n    removeTag.call(this, item);\n\n    if (!this.tags.length) {\n      util.removeClass(this.container, \"has-selected\");\n    }\n  } else {\n\n    if (!force && !this.config.clearable && !this.config.allowDeselect) {\n      return false;\n    }\n\n    this.label.innerHTML = \"\";\n    this.selectedValue = null;\n\n    this.el.selectedIndex = this.selectedIndex = -1;\n\n    util.removeClass(this.container, \"has-selected\");\n  }\n\n\n  this.items[index].setAttribute(\"aria-selected\", false);\n\n  util.removeClass(this.items[index], \"selected\");\n\n  option.selected = false;\n\n  option.removeAttribute(\"selected\");\n\n  this.emit(\"selectr.change\", null);\n\n  this.emit(\"selectr.deselect\", option);\n};\n\n/**\n * Programmatically set selected values\n * @param {String|Array} value - A string or an array of strings\n */\nSelectr.prototype.setValue = function(value) {\n  var isArray = Array.isArray(value);\n\n  if (!isArray) {\n    value = value.toString().trim();\n  }\n\n  // Can't pass array to select-one\n  if (!this.el.multiple && isArray) {\n    return false;\n  }\n\n  util.each(this.options, function(i, option) {\n    if (isArray && util.includes(value.toString(), option.value) || option.value === value) {\n      this.change(option.idx);\n    }\n  }, this);\n};\n\n/**\n * Set the selected value(s)\n * @param  {bool} toObject Return only the raw values or an object\n * @param  {bool} toJson   Return the object as a JSON string\n * @return {mixed}         Array or String\n */\nSelectr.prototype.getValue = function(toObject, toJson) {\n  var value;\n\n  if (this.el.multiple) {\n    if (toObject) {\n      if (this.selectedIndexes.length) {\n        value = {};\n        value.values = [];\n        util.each(this.selectedIndexes, function(i, index) {\n          var option = this.options[index];\n          value.values[i] = {\n            value: option.value,\n            text: option.textContent\n          };\n        }, this);\n      }\n    } else {\n      value = this.selectedValues.slice();\n    }\n  } else {\n    if (toObject) {\n      var option = this.options[this.selectedIndex];\n      value = {\n        value: option.value,\n        text: option.textContent\n      };\n    } else {\n      value = this.selectedValue;\n    }\n  }\n\n  if (toObject && toJson) {\n    value = JSON.stringify(value);\n  }\n\n  return value;\n};\n\n/**\n * Add a new option or options\n * @param {object} data\n */\nSelectr.prototype.add = function(data, checkDuplicate) {\n  if (data) {\n\n    this.data = this.data || [];\n    this.items = this.items || [];\n    this.options = this.options || [];\n\n    if (Array.isArray(data)) {\n      // We have an array on items\n      util.each(data, function(i, obj) {\n        this.add(obj, checkDuplicate);\n      }, this);\n    }\n    // User passed a single object to the method\n    // or Selectr passed an object from an array\n    else if (\"[object Object]\" === Object.prototype.toString.call(data)) {\n\n      if (checkDuplicate) {\n        var dupe = false;\n\n        util.each(this.options, function(i, option) {\n          if (option.value.toLowerCase() === data.value.toLowerCase()) {\n            dupe = true;\n          }\n        });\n\n        if (dupe) {\n          return false;\n        }\n      }\n\n      var option = util.createElement('option', data);\n\n      this.data.push(data);\n\n      // Add the new option to the list\n      this.options.push(option);\n\n      // Add the index for later use\n      option.idx = this.options.length > 0 ? this.options.length - 1 : 0;\n\n      // Create a new item\n      createItem.call(this, option);\n\n      // Select the item if required\n      if (data.selected) {\n        this.select(option.idx);\n      }\n\n      return option;\n    }\n\n    // We may have had an empty select so update\n    // the placeholder to reflect the changes.\n    this.setPlaceholder();\n\n    // Recount the pages\n    if (this.config.pagination) {\n      this.paginate();\n    }\n\n    return true;\n  }\n};\n\n/**\n * Remove an option or options\n * @param  {Mixed} o Array, integer (index) or string (value)\n * @return {Void}\n */\nSelectr.prototype.remove = function(o) {\n  var options = [];\n  if (Array.isArray(o)) {\n    util.each(o, function(i, opt) {\n      if (util.isInt(opt)) {\n        options.push(this.getOptionByIndex(opt));\n      } else if (typeof o === \"string\") {\n        options.push(this.getOptionByValue(opt));\n      }\n    }, this);\n\n  } else if (util.isInt(o)) {\n    options.push(this.getOptionByIndex(o));\n  } else if (typeof o === \"string\") {\n    options.push(this.getOptionByValue(o));\n  }\n\n  if (options.length) {\n    var index;\n    util.each(options, function(i, option) {\n      index = option.idx;\n\n      // Remove the HTMLOptionElement\n      this.el.remove(option);\n\n      // Remove the reference from the option array\n      this.options.splice(index, 1);\n\n      // If the item has a parentNode (group element) it needs to be removed\n      // otherwise the render function will still append it to the dropdown\n      var parentNode = this.items[index].parentNode;\n\n      if (parentNode) {\n        parentNode.removeChild(this.items[index]);\n      }\n\n      // Remove reference from the items array\n      this.items.splice(index, 1);\n\n      // Reset the indexes\n      util.each(this.options, function(i, opt) {\n        opt.idx = i;\n        this.items[i].idx = i;\n      }, this);\n    }, this);\n\n    // We may have had an empty select now so update\n    // the placeholder to reflect the changes.\n    this.setPlaceholder();\n\n    // Recount the pages\n    if (this.config.pagination) {\n      this.paginate();\n    }\n  }\n};\n\n/**\n * Remove all options\n */\nSelectr.prototype.removeAll = function() {\n\n  // Clear any selected options\n  this.clear(true);\n\n  // Remove the HTMLOptionElements\n  util.each(this.el.options, function(i, option) {\n    this.el.remove(option);\n  }, this);\n\n  // Empty the dropdown\n  util.truncate(this.tree);\n\n  // Reset variables\n  this.items = [];\n  this.options = [];\n  this.data = [];\n\n  this.navIndex = 0;\n\n  if (this.requiresPagination) {\n    this.requiresPagination = false;\n\n    this.pageIndex = 1;\n    this.pages = [];\n  }\n\n  // Update the placeholder\n  this.setPlaceholder();\n};\n\n/**\n * Perform a search\n * @param  {string} query The query string\n */\nSelectr.prototype.search = function(string) {\n\n  if (this.navigating) return;\n\n  string = string || this.input.value;\n\n  var f = document.createDocumentFragment();\n\n  // Remove message\n  this.removeMessage();\n\n  // Clear the dropdown\n  util.truncate(this.tree);\n\n  if (string.length > 1) {\n    // Check the options for the matching string\n    util.each(this.options, function(i, option) {\n      var item = this.items[option.idx];\n      var includes = util.includes(option.textContent.toLowerCase(), string.toLowerCase());\n\n      if (includes && !option.disabled) {\n\n        appendItem(item, f, this.customOption);\n\n        util.removeClass(item, \"excluded\");\n\n        // Underline the matching results\n        if (!this.customOption) {\n          item.innerHTML = match(string, option);\n        }\n      } else {\n        util.addClass(item, \"excluded\");\n      }\n    }, this);\n\n\n    if (!f.childElementCount) {\n      if (!this.config.taggable) {\n        this.setMessage(\"no results.\");\n      }\n    } else {\n      // Highlight top result (@binary-koan #26)\n      var prevEl = this.items[this.navIndex];\n      var firstEl = f.firstElementChild;\n\n      util.removeClass(prevEl, \"active\");\n\n      this.navIndex = firstEl.idx;\n\n      util.addClass(firstEl, \"active\");\n    }\n\n  } else {\n    render.call(this);\n  }\n\n  this.tree.appendChild(f);\n};\n\n/**\n * Toggle the dropdown\n * @return {void}\n */\nSelectr.prototype.toggle = function() {\n  if (!this.disabled) {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n};\n\n/**\n * Open the dropdown\n * @return {void}\n */\nSelectr.prototype.open = function() {\n\n  var that = this;\n\n  if (!this.options.length) {\n    return false;\n  }\n\n  if (!this.opened) {\n    this.emit(\"selectr.open\");\n  }\n\n  this.opened = true;\n\n  if (this.mobileDevice || this.config.nativeDropdown) {\n    util.addClass(this.container, \"native-open\");\n\n    if (this.config.data) {\n      // Dump the options into the select\n      // otherwise the native dropdown will be empty\n      util.each(this.options, function(i, option) {\n        this.el.add(option);\n      }, this);\n    }\n\n    return;\n  }\n\n  util.addClass(this.container, \"open\");\n\n  render.call(this);\n\n  this.invert();\n\n  this.tree.scrollTop = 0;\n\n  util.removeClass(this.container, \"notice\");\n\n  this.selected.setAttribute(\"aria-expanded\", true);\n\n  this.tree.setAttribute(\"aria-hidden\", false);\n  this.tree.setAttribute(\"aria-expanded\", true);\n\n  if (this.config.searchable && !this.config.taggable) {\n    setTimeout(function() {\n      that.input.focus();\n      // Allow tab focus\n      that.input.tabIndex = 0;\n    }, 10);\n  }\n};\n\n/**\n * Close the dropdown\n * @return {void}\n */\nSelectr.prototype.close = function() {\n\n  if (this.opened) {\n    this.emit(\"selectr.close\");\n  }\n\n  this.opened = false;\n\n  if (this.mobileDevice || this.config.nativeDropdown) {\n    util.removeClass(this.container, \"native-open\");\n    return;\n  }\n\n  var notice = util.hasClass(this.container, \"notice\");\n\n  if (this.config.searchable && !notice) {\n    this.input.blur();\n    // Disable tab focus\n    this.input.tabIndex = -1;\n    this.searching = false;\n  }\n\n  if (notice) {\n    util.removeClass(this.container, \"notice\");\n    this.notice.textContent = \"\";\n  }\n\n  util.removeClass(this.container, \"open\");\n  util.removeClass(this.container, \"native-open\");\n\n  this.selected.setAttribute(\"aria-expanded\", false);\n\n  this.tree.setAttribute(\"aria-hidden\", true);\n  this.tree.setAttribute(\"aria-expanded\", false);\n\n  util.truncate(this.tree);\n  clearSearch.call(this);\n};\n\n\n/**\n * Enable the element\n * @return {void}\n */\nSelectr.prototype.enable = function() {\n  this.disabled = false;\n  this.el.disabled = false;\n\n  this.selected.tabIndex = this.originalIndex;\n\n  if (this.el.multiple) {\n    util.each(this.tags, function(i, t) {\n      t.lastElementChild.tabIndex = 0;\n    });\n  }\n\n  util.removeClass(this.container, \"selectr-disabled\");\n};\n\n/**\n * Disable the element\n * @param  {boolean} container Disable the container only (allow value submit with form)\n * @return {void}\n */\nSelectr.prototype.disable = function(container) {\n  if (!container) {\n    this.el.disabled = true;\n  }\n\n  this.selected.tabIndex = -1;\n\n  if (this.el.multiple) {\n    util.each(this.tags, function(i, t) {\n      t.lastElementChild.tabIndex = -1;\n    });\n  }\n\n  this.disabled = true;\n  util.addClass(this.container, \"selectr-disabled\");\n};\n\n\n/**\n * Reset to initial state\n * @return {void}\n */\nSelectr.prototype.reset = function() {\n  if (!this.disabled) {\n    this.clear();\n\n    this.setSelected(true);\n\n    util.each(this.defaultSelected, function(i, idx) {\n      this.select(idx);\n    }, this);\n\n    this.emit(\"selectr.reset\");\n  }\n};\n\n/**\n * Clear all selections\n * @return {void}\n */\nSelectr.prototype.clear = function(force) {\n\n  if (this.el.multiple) {\n    // Loop over the selectedIndexes so we don't have to loop over all the options\n    // which can be costly if there are a lot of them\n\n    if (this.selectedIndexes.length) {\n      // Copy the array or we'll get an error\n      var indexes = this.selectedIndexes.slice();\n\n      util.each(indexes, function(i, idx) {\n        this.deselect(idx);\n      }, this);\n    }\n  } else {\n    if (this.selectedIndex > -1) {\n      this.deselect(this.selectedIndex, force);\n    }\n  }\n\n  this.emit(\"selectr.clear\");\n};\n\n/**\n * Return serialised data\n * @param  {boolean} toJson\n * @return {mixed} Returns either an object or JSON string\n */\nSelectr.prototype.serialise = function(toJson) {\n  var data = [];\n  util.each(this.options, function(i, option) {\n    var obj = {\n      value: option.value,\n      text: option.textContent\n    };\n\n    if (option.selected) {\n      obj.selected = true;\n    }\n    if (option.disabled) {\n      obj.disabled = true;\n    }\n    data[i] = obj;\n  });\n\n  return toJson ? JSON.stringify(data) : data;\n};\n\n/**\n * Localised version of serialise() method\n */\nSelectr.prototype.serialize = function(toJson) {\n  return this.serialise(toJson);\n};\n\n/**\n * Sets the placeholder\n * @param {String} placeholder\n */\nSelectr.prototype.setPlaceholder = function(placeholder) {\n  // Set the placeholder\n  placeholder = placeholder || this.config.placeholder || this.el.getAttribute(\"placeholder\");\n\n  if (!this.options.length) {\n    placeholder = \"No options available\";\n  }\n\n  this.placeEl.innerHTML = placeholder;\n};\n\n/**\n * Paginate the option list\n * @return {Array}\n */\nSelectr.prototype.paginate = function() {\n  if (this.items.length) {\n    var that = this;\n\n    this.pages = this.items.map(function(v, i) {\n      return i % that.config.pagination === 0 ? that.items.slice(i, i + that.config.pagination) : null;\n    }).filter(function(pages) {\n      return pages;\n    });\n\n    return this.pages;\n  }\n};\n\n/**\n * Display a message\n * @param  {String} message The message\n */\nSelectr.prototype.setMessage = function(message, close) {\n  if (close) {\n    this.close();\n  }\n  util.addClass(this.container, \"notice\");\n  this.notice.textContent = message;\n};\n\n/**\n * Dismiss the current message\n */\nSelectr.prototype.removeMessage = function() {\n  util.removeClass(this.container, \"notice\");\n  this.notice.innerHTML = \"\";\n};\n\n/**\n * Keep the dropdown within the window\n * @return {void}\n */\nSelectr.prototype.invert = function() {\n  var rt = util.rect(this.selected),\n      oh = this.tree.parentNode.offsetHeight,\n      wh = window.innerHeight,\n      doInvert = rt.top + rt.height + oh > wh;\n\n  if (doInvert) {\n    util.addClass(this.container, \"inverted\");\n    this.isInverted = true;\n  } else {\n    util.removeClass(this.container, \"inverted\");\n    this.isInverted = false;\n  }\n\n  this.optsRect = util.rect(this.tree);\n};\n\n/**\n * Get an option via it's index\n * @param  {Integer} index The index of the HTMLOptionElement required\n * @return {HTMLOptionElement}\n */\nSelectr.prototype.getOptionByIndex = function(index) {\n  return this.options[index];\n};\n\n/**\n * Get an option via it's value\n * @param  {String} value The value of the HTMLOptionElement required\n * @return {HTMLOptionElement}\n */\nSelectr.prototype.getOptionByValue = function(value) {\n  var option = false;\n\n  for (var i = 0, l = this.options.length; i < l; i++) {\n    if (this.options[i].value.trim() === value.toString().trim()) {\n      option = this.options[i];\n      break;\n    }\n  }\n\n  return option;\n};\n\nmodule.exports = Selectr;\n","'use strict';\nmodule.exports = function generate_custom(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition,\n    $closingBraces = '';\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    if (!$ruleValidate) return;\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($isData && $rDef.$data) {\n    $closingBraces += '}';\n    out += ' if (' + ($schemaValue) + ' === undefined) { ' + ($valid) + ' = true; } else { ';\n    if ($validateSchema) {\n      $closingBraces += '}';\n      out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') { ';\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = '';\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += '' + (it.yieldAwait);\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = ' + (it.yieldAwait) + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' if (' + ($parentData) + ') ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  out += '' + ($closingBraces);\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n","'use strict';\n\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nmodule.exports = function ucs2length(str) {\n  var length = 0\n    , len = str.length\n    , pos = 0\n    , value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 0xD800 && value <= 0xDBFF && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos);\n      if ((value & 0xFC00) == 0xDC00) pos++; // low surrogate\n    }\n  }\n  return length;\n};\n","\nif (typeof Element !== 'undefined') {\n  // Polyfill for array remove\n  (function () {\n    function polyfill (item) {\n      if (item.hasOwnProperty('remove')) {\n        return;\n      }\n      Object.defineProperty(item, 'remove', {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: function remove() {\n          if (this.parentNode != null)\n            this.parentNode.removeChild(this);\n        }\n      });\n    }\n\n    if (typeof Element !== 'undefined')       { polyfill(Element.prototype); }\n    if (typeof CharacterData !== 'undefined') { polyfill(CharacterData.prototype); }\n    if (typeof DocumentType !== 'undefined')  { polyfill(DocumentType.prototype); }\n  })();\n}\n\n\n// Polyfill for startsWith\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function (searchString, position) {\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\n// Polyfill for Array.find\nif (!Array.prototype.find) {\n  Array.prototype.find = function(callback) {\n    for (var i = 0; i < this.length; i++) {\n      var element = this[i];\n      if ( callback.call(this, element, i, this) ) {\n        return element;\n      }\n    }\n  }\n}\n\n// Polyfill for String.trim\nif (!String.prototype.trim) {\n  String.prototype.trim = function () {\n    return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n  };\n}\n","'use strict';\nmodule.exports = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $op = $keyword == 'maxProperties' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' Object.keys(' + ($data) + ').length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxProperties') {\n        out += 'more';\n      } else {\n        out += 'less';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' properties\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('fast-json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./$data')\n  , patternGroups = require('./patternGroups')\n  , util = require('./compile/util')\n  , co = require('co');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-06/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n  var schemaUriFormat = this._schemaUriFormat = this._formats['uri-reference'];\n  this._schemaUriFormatFunc = function (str) { return schemaUriFormat.test(str); };\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  addDraft6MetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  addInitialSchemas(this);\n  if (opts.patternGroups) patternGroups(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async === true)\n    return this._opts.async == '*' ? co(valid) : valid;\n  this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n * @return {Ajv} this for method chaining\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n * @return {Ajv} this for method chaining\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    this.logger.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var currentUriFormat = this._formats.uri;\n  this._formats.uri = typeof currentUriFormat == 'function'\n                      ? this._schemaUriFormatFunc\n                      : this._schemaUriFormat;\n  var valid;\n  try { valid = this.validate($schema, schema); }\n  finally { this._formats.uri = currentUriFormat; }\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') this.logger.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n * @return {Ajv} this for method chaining\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  function callValidate() {\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(null, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case '$id': return _get$Id;\n    case 'id': return _getId;\n    default: return _get$IdOrId;\n  }\n}\n\n/* @this   Ajv */\nfunction _getId(schema) {\n  if (schema.$id) this.logger.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n/* @this   Ajv */\nfunction _get$Id(schema) {\n  if (schema.id) this.logger.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n * @return {Ajv} this for method chaining\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n  return this;\n}\n\n\nfunction addDraft6MetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/$data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-06.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n\n\nfunction setLogger(self) {\n  var logger = self._opts.logger;\n  if (logger === false) {\n    self.logger = {log: noop, warn: noop, error: noop};\n  } else {\n    if (logger === undefined) logger = console;\n    if (!(typeof logger == 'object' && logger.log && logger.warn && logger.error))\n      throw new Error('logger must implement log, warn and error methods');\n    self.logger = logger;\n  }\n}\n\n\nfunction noop() {}\n","'use strict';\nmodule.exports = function generate_items(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId;\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if (Array.isArray($schema)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += ' ' + ($valid) + ' = ' + ($data) + '.length <= ' + ($schema.length) + '; ';\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += '  if (!' + ($valid) + ') {   ';\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ('additionalItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schema.length) + ' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should NOT have more than ' + ($schema.length) + ' items\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n      out += ' } ';\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($i) + ') { ';\n          var $passData = $data + '[' + $i + ']';\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + '[' + $i + ']';\n          $it.errSchemaPath = $errSchemaPath + '/' + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == 'object' && it.util.schemaHasRules($additionalItems, it.RULES.all)) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + '.additionalItems';\n      $it.errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($schema.length) + ') {  for (var ' + ($idx) + ' = ' + ($schema.length) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + '[' + $idx + ']';\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n      } else {\n        out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n      }\n      if ($breakOnError) {\n        out += ' if (!' + ($nextValid) + ') break; ';\n      }\n      out += ' } }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  } else if (it.util.schemaHasRules($schema, it.RULES.all)) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += '  for (var ' + ($idx) + ' = ' + (0) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    if ($breakOnError) {\n      out += ' if (!' + ($nextValid) + ') break; ';\n    }\n    out += ' }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\nace.define('ace/theme/jsoneditor', ['require', 'exports', 'module', 'ace/lib/dom'], function(acequire, exports, module) {\n\nexports.isDark = false;\nexports.cssClass = \"ace-jsoneditor\";\nexports.cssText = \".ace-jsoneditor .ace_gutter {\\\nbackground: #ebebeb;\\\ncolor: #333\\\n}\\\n\\\n.ace-jsoneditor.ace_editor {\\\nfont-family: \\\"dejavu sans mono\\\", \\\"droid sans mono\\\", consolas, monaco, \\\"lucida console\\\", \\\"courier new\\\", courier, monospace, sans-serif;\\\nline-height: 1.3;\\\nbackground-color: #fff;\\\n}\\\n.ace-jsoneditor .ace_print-margin {\\\nwidth: 1px;\\\nbackground: #e8e8e8\\\n}\\\n.ace-jsoneditor .ace_scroller {\\\nbackground-color: #FFFFFF\\\n}\\\n.ace-jsoneditor .ace_text-layer {\\\ncolor: gray\\\n}\\\n.ace-jsoneditor .ace_variable {\\\ncolor: #1a1a1a\\\n}\\\n.ace-jsoneditor .ace_cursor {\\\nborder-left: 2px solid #000000\\\n}\\\n.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\\\nborder-left: 0px;\\\nborder-bottom: 1px solid #000000\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_selection {\\\nbackground: lightgray\\\n}\\\n.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\\\nbox-shadow: 0 0 3px 0px #FFFFFF;\\\nborder-radius: 2px\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_step {\\\nbackground: rgb(255, 255, 0)\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_bracket {\\\nmargin: -1px 0 0 -1px;\\\nborder: 1px solid #BFBFBF\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_active-line {\\\nbackground: #FFFBD1\\\n}\\\n.ace-jsoneditor .ace_gutter-active-line {\\\nbackground-color : #dcdcdc\\\n}\\\n.ace-jsoneditor .ace_marker-layer .ace_selected-word {\\\nborder: 1px solid lightgray\\\n}\\\n.ace-jsoneditor .ace_invisible {\\\ncolor: #BFBFBF\\\n}\\\n.ace-jsoneditor .ace_keyword,\\\n.ace-jsoneditor .ace_meta,\\\n.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\\\ncolor: #AF956F\\\n}\\\n.ace-jsoneditor .ace_keyword.ace_operator {\\\ncolor: #484848\\\n}\\\n.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\\\ncolor: #96DC5F\\\n}\\\n.ace-jsoneditor .ace_constant.ace_language {\\\ncolor: darkorange\\\n}\\\n.ace-jsoneditor .ace_constant.ace_numeric {\\\ncolor: red\\\n}\\\n.ace-jsoneditor .ace_constant.ace_character.ace_entity {\\\ncolor: #BF78CC\\\n}\\\n.ace-jsoneditor .ace_invalid {\\\ncolor: #FFFFFF;\\\nbackground-color: #FF002A;\\\n}\\\n.ace-jsoneditor .ace_fold {\\\nbackground-color: #AF956F;\\\nborder-color: #000000\\\n}\\\n.ace-jsoneditor .ace_storage,\\\n.ace-jsoneditor .ace_support.ace_class,\\\n.ace-jsoneditor .ace_support.ace_function,\\\n.ace-jsoneditor .ace_support.ace_other,\\\n.ace-jsoneditor .ace_support.ace_type {\\\ncolor: #C52727\\\n}\\\n.ace-jsoneditor .ace_string {\\\ncolor: green\\\n}\\\n.ace-jsoneditor .ace_comment {\\\ncolor: #BCC8BA\\\n}\\\n.ace-jsoneditor .ace_entity.ace_name.ace_tag,\\\n.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\\\ncolor: #606060\\\n}\\\n.ace-jsoneditor .ace_markup.ace_underline {\\\ntext-decoration: underline\\\n}\\\n.ace-jsoneditor .ace_indent-guide {\\\nbackground: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y\\\n}\";\n\nvar dom = acequire(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass);\n});\n","ace.define(\"ace/mode/json_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text_highlight_rules\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar TextHighlightRules = acequire(\"./text_highlight_rules\").TextHighlightRules;\n\nvar JsonHighlightRules = function() {\n    this.$rules = {\n        \"start\" : [\n            {\n                token : \"variable\", // single line\n                regex : '[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]\\\\s*(?=:)'\n            }, {\n                token : \"string\", // single line\n                regex : '\"',\n                next  : \"string\"\n            }, {\n                token : \"constant.numeric\", // hex\n                regex : \"0[xX][0-9a-fA-F]+\\\\b\"\n            }, {\n                token : \"constant.numeric\", // float\n                regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n            }, {\n                token : \"constant.language.boolean\",\n                regex : \"(?:true|false)\\\\b\"\n            }, {\n                token : \"text\", // single quoted strings are not allowed\n                regex : \"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"\n            }, {\n                token : \"comment\", // comments are not allowed, but who cares?\n                regex : \"\\\\/\\\\/.*$\"\n            }, {\n                token : \"comment.start\", // comments are not allowed, but who cares?\n                regex : \"\\\\/\\\\*\",\n                next  : \"comment\"\n            }, {\n                token : \"paren.lparen\",\n                regex : \"[[({]\"\n            }, {\n                token : \"paren.rparen\",\n                regex : \"[\\\\])}]\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            }\n        ],\n        \"string\" : [\n            {\n                token : \"constant.language.escape\",\n                regex : /\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[\"\\\\\\/bfnrt])/\n            }, {\n                token : \"string\",\n                regex : '\"|$',\n                next  : \"start\"\n            }, {\n                defaultToken : \"string\"\n            }\n        ],\n        \"comment\" : [\n            {\n                token : \"comment.end\", // comments are not allowed, but who cares?\n                regex : \"\\\\*\\\\/\",\n                next  : \"start\"\n            }, {\n                defaultToken: \"comment\"\n            }\n        ]\n    };\n    \n};\n\noop.inherits(JsonHighlightRules, TextHighlightRules);\n\nexports.JsonHighlightRules = JsonHighlightRules;\n});\n\nace.define(\"ace/mode/matching_brace_outdent\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar Range = acequire(\"../range\").Range;\n\nvar MatchingBraceOutdent = function() {};\n\n(function() {\n\n    this.checkOutdent = function(line, input) {\n        if (! /^\\s+$/.test(line))\n            return false;\n\n        return /^\\s*\\}/.test(input);\n    };\n\n    this.autoOutdent = function(doc, row) {\n        var line = doc.getLine(row);\n        var match = line.match(/^(\\s*\\})/);\n\n        if (!match) return 0;\n\n        var column = match[1].length;\n        var openBracePos = doc.findMatchingBracket({row: row, column: column});\n\n        if (!openBracePos || openBracePos.row == row) return 0;\n\n        var indent = this.$getIndent(doc.getLine(openBracePos.row));\n        doc.replace(new Range(row, 0, row, column-1), indent);\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n}).call(MatchingBraceOutdent.prototype);\n\nexports.MatchingBraceOutdent = MatchingBraceOutdent;\n});\n\nace.define(\"ace/mode/folding/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/mode/folding/fold_mode\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../../lib/oop\");\nvar Range = acequire(\"../../range\").Range;\nvar BaseFoldMode = acequire(\"./fold_mode\").FoldMode;\n\nvar FoldMode = exports.FoldMode = function(commentRegex) {\n    if (commentRegex) {\n        this.foldingStartMarker = new RegExp(\n            this.foldingStartMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.start)\n        );\n        this.foldingStopMarker = new RegExp(\n            this.foldingStopMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.end)\n        );\n    }\n};\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n    \n    this.foldingStartMarker = /([\\{\\[\\(])[^\\}\\]\\)]*$|^\\s*(\\/\\*)/;\n    this.foldingStopMarker = /^[^\\[\\{\\(]*([\\}\\]\\)])|^[\\s\\*]*(\\*\\/)/;\n    this.singleLineBlockCommentRe= /^\\s*(\\/\\*).*\\*\\/\\s*$/;\n    this.tripleStarBlockCommentRe = /^\\s*(\\/\\*\\*\\*).*\\*\\/\\s*$/;\n    this.startRegionRe = /^\\s*(\\/\\*|\\/\\/)#?region\\b/;\n    this._getFoldWidgetBase = this.getFoldWidget;\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n    \n        if (this.singleLineBlockCommentRe.test(line)) {\n            if (!this.startRegionRe.test(line) && !this.tripleStarBlockCommentRe.test(line))\n                return \"\";\n        }\n    \n        var fw = this._getFoldWidgetBase(session, foldStyle, row);\n    \n        if (!fw && this.startRegionRe.test(line))\n            return \"start\"; // lineCommentRegionStart\n    \n        return fw;\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row, forceMultiline) {\n        var line = session.getLine(row);\n        \n        if (this.startRegionRe.test(line))\n            return this.getCommentRegionBlock(session, line, row);\n        \n        var match = line.match(this.foldingStartMarker);\n        if (match) {\n            var i = match.index;\n\n            if (match[1])\n                return this.openingBracketBlock(session, match[1], row, i);\n                \n            var range = session.getCommentFoldRange(row, i + match[0].length, 1);\n            \n            if (range && !range.isMultiLine()) {\n                if (forceMultiline) {\n                    range = this.getSectionRange(session, row);\n                } else if (foldStyle != \"all\")\n                    range = null;\n            }\n            \n            return range;\n        }\n\n        if (foldStyle === \"markbegin\")\n            return;\n\n        var match = line.match(this.foldingStopMarker);\n        if (match) {\n            var i = match.index + match[0].length;\n\n            if (match[1])\n                return this.closingBracketBlock(session, match[1], row, i);\n\n            return session.getCommentFoldRange(row, i, -1);\n        }\n    };\n    \n    this.getSectionRange = function(session, row) {\n        var line = session.getLine(row);\n        var startIndent = line.search(/\\S/);\n        var startRow = row;\n        var startColumn = line.length;\n        row = row + 1;\n        var endRow = row;\n        var maxRow = session.getLength();\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var indent = line.search(/\\S/);\n            if (indent === -1)\n                continue;\n            if  (startIndent > indent)\n                break;\n            var subRange = this.getFoldWidgetRange(session, \"all\", row);\n            \n            if (subRange) {\n                if (subRange.start.row <= startRow) {\n                    break;\n                } else if (subRange.isMultiLine()) {\n                    row = subRange.end.row;\n                } else if (startIndent == indent) {\n                    break;\n                }\n            }\n            endRow = row;\n        }\n        \n        return new Range(startRow, startColumn, endRow, session.getLine(endRow).length);\n    };\n    this.getCommentRegionBlock = function(session, line, row) {\n        var startColumn = line.search(/\\s*$/);\n        var maxRow = session.getLength();\n        var startRow = row;\n        \n        var re = /^\\s*(?:\\/\\*|\\/\\/|--)#?(end)?region\\b/;\n        var depth = 1;\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var m = re.exec(line);\n            if (!m) continue;\n            if (m[1]) depth--;\n            else depth++;\n\n            if (!depth) break;\n        }\n\n        var endRow = row;\n        if (endRow > startRow) {\n            return new Range(startRow, startColumn, endRow, line.length);\n        }\n    };\n\n}).call(FoldMode.prototype);\n\n});\n\nace.define(\"ace/mode/json\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/text\",\"ace/mode/json_highlight_rules\",\"ace/mode/matching_brace_outdent\",\"ace/mode/behaviour/cstyle\",\"ace/mode/folding/cstyle\",\"ace/worker/worker_client\"], function(acequire, exports, module) {\n\"use strict\";\n\nvar oop = acequire(\"../lib/oop\");\nvar TextMode = acequire(\"./text\").Mode;\nvar HighlightRules = acequire(\"./json_highlight_rules\").JsonHighlightRules;\nvar MatchingBraceOutdent = acequire(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar CstyleBehaviour = acequire(\"./behaviour/cstyle\").CstyleBehaviour;\nvar CStyleFoldMode = acequire(\"./folding/cstyle\").FoldMode;\nvar WorkerClient = acequire(\"../worker/worker_client\").WorkerClient;\n\nvar Mode = function() {\n    this.HighlightRules = HighlightRules;\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CstyleBehaviour();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        if (state == \"start\") {\n            var match = line.match(/^.*[\\{\\(\\[]\\s*$/);\n            if (match) {\n                indent += tab;\n            }\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.createWorker = function(session) {\n        var worker = new WorkerClient([\"ace\"], require(\"../worker/json\"), \"JsonWorker\");\n        worker.attachToDocument(session.getDocument());\n\n        worker.on(\"annotate\", function(e) {\n            session.setAnnotations(e.data);\n        });\n\n        worker.on(\"terminate\", function() {\n            session.clearAnnotations();\n        });\n\n        return worker;\n    };\n\n\n    this.$id = \"ace/mode/json\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n});\n","'use strict';\n\nvar ace = require('./ace');\nvar ModeSwitcher = require('./ModeSwitcher');\nvar util = require('./util');\n\n// create a mixin with the functions for text mode\nvar textmode = {};\n\nvar DEFAULT_THEME = 'ace/theme/jsoneditor';\n\n/**\n * Create a text editor\n * @param {Element} container\n * @param {Object} [options]   Object with options. available options:\n *                             {String} mode             Available values:\n *                                                       \"text\" (default)\n *                                                       or \"code\".\n *                             {Number} indentation      Number of indentation\n *                                                       spaces. 2 by default.\n *                             {function} onChange       Callback method triggered on change.\n *                                                       Does not pass the changed contents.\n *                             {function} onChangeText   Callback method, triggered\n *                                                       in modes on change of contents,\n *                                                       passing the changed contents\n *                                                       as stringified JSON.\n *                             {function} onModeChange   Callback method\n *                                                       triggered after setMode\n *                             {function} onEditable     Determine if textarea is readOnly\n *                                                       readOnly defaults true\n *                             {Object} ace              A custom instance of\n *                                                       Ace editor.\n *                             {boolean} escapeUnicode   If true, unicode\n *                                                       characters are escaped.\n *                                                       false by default.\n *                             {function} onTextSelectionChange Callback method, \n *                                                              triggered on text selection change\n * @private\n */\ntextmode.create = function (container, options) {\n  // read options\n  options = options || {};\n  \n  if (typeof options.statusBar === 'undefined') {\n    options.statusBar = true;\n  }\n\n  // setting default for textmode\n  options.mainMenuBar = options.mainMenuBar !== false;\n\n  this.options = options;\n\n  // indentation\n  if (options.indentation) {\n    this.indentation = Number(options.indentation);\n  }\n  else {\n    this.indentation = 2; // number of spaces\n  }\n\n  // grab ace from options if provided\n  var _ace = options.ace ? options.ace : ace;\n  // TODO: make the option options.ace deprecated, it's not needed anymore (see #309)\n\n  // determine mode\n  this.mode = (options.mode == 'code') ? 'code' : 'text';\n  if (this.mode == 'code') {\n    // verify whether Ace editor is available and supported\n    if (typeof _ace === 'undefined') {\n      this.mode = 'text';\n      console.warn('Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.');\n    }\n  }\n\n  // determine theme\n  this.theme = options.theme || DEFAULT_THEME;\n  if (this.theme === DEFAULT_THEME && _ace) {\n    try {\n      require('./ace/theme-jsoneditor');\n    }\n    catch (err) {\n      console.error(err);\n    }\n  }\n\n  if (options.onTextSelectionChange) {\n    this.onTextSelectionChange(options.onTextSelectionChange);\n  }\n\n  var me = this;\n  this.container = container;\n  this.dom = {};\n  this.aceEditor = undefined;  // ace code editor\n  this.textarea = undefined;  // plain text editor (fallback when Ace is not available)\n  this.validateSchema = null;\n  this.validationSequence = 0;\n  this.annotations = [];\n  /**\n   * Visibility of validation error table\n   * @type {Boolean|undefined} undefined means default behavior for mode\n   */\n  this.errorTableVisible = undefined;\n\n  // create a debounced validate function\n  this._debouncedValidate = util.debounce(this.validate.bind(this), this.DEBOUNCE_INTERVAL);\n\n  this.width = container.clientWidth;\n  this.height = container.clientHeight;\n\n  this.frame = document.createElement('div');\n  this.frame.className = 'jsoneditor jsoneditor-mode-' + this.options.mode;\n  this.frame.onclick = function (event) {\n    // prevent default submit action when the editor is located inside a form\n    event.preventDefault();\n  };\n  this.frame.onkeydown = function (event) {\n    me._onKeyDown(event);\n  };\n\n  this.content = document.createElement('div');\n  this.content.className = 'jsoneditor-outer';\n\n  if (this.options.mainMenuBar) {\n    util.addClassName(this.content, 'has-main-menu-bar');\n\n    // create menu\n    this.menu = document.createElement('div');\n    this.menu.className = 'jsoneditor-menu';\n    this.frame.appendChild(this.menu);\n\n    // create format button\n    var buttonFormat = document.createElement('button');\n    buttonFormat.type = 'button';\n    buttonFormat.className = 'jsoneditor-format';\n    buttonFormat.title = 'Format JSON data, with proper indentation and line feeds (Ctrl+\\\\)';\n    this.menu.appendChild(buttonFormat);\n    buttonFormat.onclick = function () {\n      try {\n        me.format();\n        me._onChange();\n      }\n      catch (err) {\n        me._onError(err);\n      }\n    };\n\n    // create compact button\n    var buttonCompact = document.createElement('button');\n    buttonCompact.type = 'button';\n    buttonCompact.className = 'jsoneditor-compact';\n    buttonCompact.title = 'Compact JSON data, remove all whitespaces (Ctrl+Shift+\\\\)';\n    this.menu.appendChild(buttonCompact);\n    buttonCompact.onclick = function () {\n      try {\n        me.compact();\n        me._onChange();\n      }\n      catch (err) {\n        me._onError(err);\n      }\n    };\n\n    // create repair button\n    var buttonRepair = document.createElement('button');\n    buttonRepair.type = 'button';\n    buttonRepair.className = 'jsoneditor-repair';\n    buttonRepair.title = 'Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.';\n    this.menu.appendChild(buttonRepair);\n    buttonRepair.onclick = function () {\n      try {\n        me.repair();\n        me._onChange();\n      }\n      catch (err) {\n        me._onError(err);\n      }\n    };\n\n    // create mode box\n    if (this.options && this.options.modes && this.options.modes.length) {\n      this.modeSwitcher = new ModeSwitcher(this.menu, this.options.modes, this.options.mode, function onSwitch(mode) {\n        // switch mode and restore focus\n        me.setMode(mode);\n        me.modeSwitcher.focus();\n      });\n    }\n\n    if (this.mode == 'code') {\n      var poweredBy = document.createElement('a');\n      poweredBy.appendChild(document.createTextNode('powered by ace'));\n      poweredBy.href = 'http://ace.ajax.org';\n      poweredBy.target = '_blank';\n      poweredBy.className = 'jsoneditor-poweredBy';\n      poweredBy.onclick = function () {\n        // TODO: this anchor falls below the margin of the content,\n        // therefore the normal a.href does not work. We use a click event\n        // for now, but this should be fixed.\n        window.open(poweredBy.href, poweredBy.target);\n      };\n      this.menu.appendChild(poweredBy);\n    }\n  }\n\n  var emptyNode = {};\n  var isReadOnly = (this.options.onEditable\n  && typeof(this.options.onEditable === 'function')\n  && !this.options.onEditable(emptyNode));\n\n  this.frame.appendChild(this.content);\n  this.container.appendChild(this.frame);\n\n  if (this.mode == 'code') {\n    this.editorDom = document.createElement('div');\n    this.editorDom.style.height = '100%'; // TODO: move to css\n    this.editorDom.style.width = '100%'; // TODO: move to css\n    this.content.appendChild(this.editorDom);\n\n    var aceEditor = _ace.edit(this.editorDom);\n    var aceSession = aceEditor.getSession();\n    aceEditor.$blockScrolling = Infinity;\n    aceEditor.setTheme(this.theme);\n    aceEditor.setOptions({ readOnly: isReadOnly });\n    aceEditor.setShowPrintMargin(false);\n    aceEditor.setFontSize(13);\n    aceSession.setMode('ace/mode/json');\n    aceSession.setTabSize(this.indentation);\n    aceSession.setUseSoftTabs(true);\n    aceSession.setUseWrapMode(true);\n    \n    // replace ace setAnnotations with custom function that also covers jsoneditor annotations\n    var originalSetAnnotations = aceSession.setAnnotations;\n    aceSession.setAnnotations = function (annotations) {\n      originalSetAnnotations.call(this, annotations && annotations.length ? annotations : me.annotations);\n    };\n    \n    aceEditor.commands.bindKey('Ctrl-L', null);    // disable Ctrl+L (is used by the browser to select the address bar)\n    aceEditor.commands.bindKey('Command-L', null); // disable Ctrl+L (is used by the browser to select the address bar)\n    this.aceEditor = aceEditor;\n\n    // TODO: deprecated since v5.0.0. Cleanup backward compatibility some day\n    if (!this.hasOwnProperty('editor')) {\n      Object.defineProperty(this, 'editor', {\n        get: function () {\n          console.warn('Property \"editor\" has been renamed to \"aceEditor\".');\n          return me.aceEditor;\n        },\n        set: function (aceEditor) {\n          console.warn('Property \"editor\" has been renamed to \"aceEditor\".');\n          me.aceEditor = aceEditor;\n        }\n      });\n    }\n\n    // register onchange event\n    aceEditor.on('change', this._onChange.bind(this));\n    aceEditor.on('changeSelection', this._onSelect.bind(this));\n  }\n  else {\n    // load a plain text textarea\n    var textarea = document.createElement('textarea');\n    textarea.className = 'jsoneditor-text';\n    textarea.spellcheck = false;\n    this.content.appendChild(textarea);\n    this.textarea = textarea;\n    this.textarea.readOnly = isReadOnly;\n\n    // register onchange event\n    if (this.textarea.oninput === null) {\n      this.textarea.oninput = this._onChange.bind(this);\n    }\n    else {\n      // oninput is undefined. For IE8-\n      this.textarea.onchange = this._onChange.bind(this);\n    }\n\n    textarea.onselect = this._onSelect.bind(this);\n    textarea.onmousedown = this._onMouseDown.bind(this);\n    textarea.onblur = this._onBlur.bind(this);\n  }\n\n  var validationErrorsContainer = document.createElement('div');\n  validationErrorsContainer.className = 'jsoneditor-validation-errors-container';\n  this.dom.validationErrorsContainer = validationErrorsContainer;\n  this.frame.appendChild(validationErrorsContainer);\n\n  var additionalErrorsIndication = document.createElement('div');\n  additionalErrorsIndication.style.display = 'none';\n  additionalErrorsIndication.className = \"jsoneditor-additional-errors fadein\";\n  additionalErrorsIndication.innerHTML = \"Scroll for more &#9663;\";\n  this.dom.additionalErrorsIndication = additionalErrorsIndication;\n  validationErrorsContainer.appendChild(additionalErrorsIndication);\n\n  if (options.statusBar) {\n    util.addClassName(this.content, 'has-status-bar');\n\n    this.curserInfoElements = {};\n    var statusBar = document.createElement('div');\n    this.dom.statusBar = statusBar;\n    statusBar.className = 'jsoneditor-statusbar';\n    this.frame.appendChild(statusBar);\n\n    var lnLabel = document.createElement('span');\n    lnLabel.className = 'jsoneditor-curserinfo-label';\n    lnLabel.innerText = 'Ln:';\n\n    var lnVal = document.createElement('span');\n    lnVal.className = 'jsoneditor-curserinfo-val';\n    lnVal.innerText = '1';\n\n    statusBar.appendChild(lnLabel);\n    statusBar.appendChild(lnVal);\n\n    var colLabel = document.createElement('span');\n    colLabel.className = 'jsoneditor-curserinfo-label';\n    colLabel.innerText = 'Col:';\n\n    var colVal = document.createElement('span');\n    colVal.className = 'jsoneditor-curserinfo-val';\n    colVal.innerText = '1';\n\n    statusBar.appendChild(colLabel);\n    statusBar.appendChild(colVal);\n\n    this.curserInfoElements.colVal = colVal;\n    this.curserInfoElements.lnVal = lnVal;\n\n    var countLabel = document.createElement('span');\n    countLabel.className = 'jsoneditor-curserinfo-label';\n    countLabel.innerText = 'characters selected';\n    countLabel.style.display = 'none';\n\n    var countVal = document.createElement('span');\n    countVal.className = 'jsoneditor-curserinfo-count';\n    countVal.innerText = '0';\n    countVal.style.display = 'none';\n\n    this.curserInfoElements.countLabel = countLabel;\n    this.curserInfoElements.countVal = countVal;\n\n    statusBar.appendChild(countVal);\n    statusBar.appendChild(countLabel);\n\n    var validationErrorIcon = document.createElement('span');\n    validationErrorIcon.className = 'jsoneditor-validation-error-icon';\n    validationErrorIcon.style.display = 'none';\n\n    var validationErrorCount = document.createElement('span');\n    validationErrorCount.className = 'jsoneditor-validation-error-count';    \n    validationErrorCount.style.display = 'none';\n\n    this.validationErrorIndication = {\n      validationErrorIcon: validationErrorIcon,\n      validationErrorCount: validationErrorCount\n    };\n\n    statusBar.appendChild(validationErrorCount);\n    statusBar.appendChild(validationErrorIcon);\n\n    this.parseErrorIndication = document.createElement('span');\n    this.parseErrorIndication.className = 'jsoneditor-parse-error-icon';    \n    this.parseErrorIndication.style.display = 'none';\n    statusBar.appendChild(this.parseErrorIndication);\n  }\n\n  this.setSchema(this.options.schema, this.options.schemaRefs);  \n};\n\n/**\n * Handle a change:\n * - Validate JSON schema\n * - Send a callback to the onChange listener if provided\n * @private\n */\ntextmode._onChange = function () {\n  if (this.onChangeDisabled) {\n    return;\n  }\n\n  // validate JSON schema (if configured)\n  this._debouncedValidate();\n\n  // trigger the onChange callback\n  if (this.options.onChange) {\n    try {\n      this.options.onChange();\n    }\n    catch (err) {\n      console.error('Error in onChange callback: ', err);\n    }\n  }\n\n  // trigger the onChangeText callback\n  if (this.options.onChangeText) {\n    try {\n      this.options.onChangeText(this.getText());\n    }\n    catch (err) {\n      console.error('Error in onChangeText callback: ', err);\n    }\n  }\n};\n\n/**\n * Handle text selection\n * Calculates the cursor position and selection range and updates menu\n * @private\n */\ntextmode._onSelect = function () {\n  this._updateCursorInfo();\n  this._emitSelectionChange();\n};\n\n/**\n * Event handler for keydown. Handles shortcut keys\n * @param {Event} event\n * @private\n */\ntextmode._onKeyDown = function (event) {\n  var keynum = event.which || event.keyCode;\n  var handled = false;\n\n  if (keynum == 220 && event.ctrlKey) {\n    if (event.shiftKey) { // Ctrl+Shift+\\\n      this.compact();\n      this._onChange();\n    }\n    else { // Ctrl+\\\n      this.format();\n      this._onChange();\n    }\n    handled = true;\n  }\n\n  if (handled) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  this._updateCursorInfo();\n  this._emitSelectionChange();\n};\n\n/**\n * Event handler for mousedown.\n * @private\n */\ntextmode._onMouseDown = function () {\n  this._updateCursorInfo();\n  this._emitSelectionChange();\n};\n\n/**\n * Event handler for blur.\n * @private\n */\ntextmode._onBlur = function () {\n  var me = this;\n  // this allows to avoid blur when clicking inner elements (like the errors panel)\n  // just make sure to set the isFocused to true on the inner element onclick callback\n  setTimeout(function(){\n    if (!me.isFocused) {\n      me._updateCursorInfo();\n      me._emitSelectionChange();\n    }\n    me.isFocused = false;\n  });\n};\n\n/**\n * Update the cursor info and the status bar, if presented\n */\ntextmode._updateCursorInfo = function () {\n  var me = this;\n  var line, col, count;\n\n  if (this.textarea) {\n    setTimeout(function() { //this to verify we get the most updated textarea cursor selection\n      var selectionRange = util.getInputSelection(me.textarea);\n      \n      if (selectionRange.startIndex !== selectionRange.endIndex) {\n        count = selectionRange.endIndex - selectionRange.startIndex;\n      }\n      \n      if (count && me.cursorInfo && me.cursorInfo.line === selectionRange.end.row && me.cursorInfo.column === selectionRange.end.column) {\n        line = selectionRange.start.row;\n        col = selectionRange.start.column;\n      } else {\n        line = selectionRange.end.row;\n        col = selectionRange.end.column;\n      }\n      \n      me.cursorInfo = {\n        line: line,\n        column: col,\n        count: count\n      };\n\n      if(me.options.statusBar) {\n        updateDisplay();\n      }\n    },0);\n    \n  } else if (this.aceEditor && this.curserInfoElements) {\n    var curserPos = this.aceEditor.getCursorPosition();\n    var selectedText = this.aceEditor.getSelectedText();\n\n    line = curserPos.row + 1;\n    col = curserPos.column + 1;\n    count = selectedText.length;\n\n    me.cursorInfo = {\n      line: line,\n      column: col,\n      count: count\n    };\n\n    if(this.options.statusBar) {\n      updateDisplay();\n    }\n  }\n\n  function updateDisplay() {\n\n    if (me.curserInfoElements.countVal.innerText !== count) {\n      me.curserInfoElements.countVal.innerText = count;\n      me.curserInfoElements.countVal.style.display = count ? 'inline' : 'none';\n      me.curserInfoElements.countLabel.style.display = count ? 'inline' : 'none';\n    }\n    me.curserInfoElements.lnVal.innerText = line;\n    me.curserInfoElements.colVal.innerText = col;\n  }\n};\n\n/**\n * emits selection change callback, if given\n * @private\n */\ntextmode._emitSelectionChange = function () {\n  if(this._selectionChangedHandler) {\n    var currentSelection = this.getTextSelection();\n    this._selectionChangedHandler(currentSelection.start, currentSelection.end, currentSelection.text);\n  }\n};\n\n/**\n * refresh ERROR annotations state\n * error annotations are handled by the ace json mode (ace/mode/json)\n * validation annotations are handled by this mode\n * therefore in order to refresh we send only the annotations of error type in order to maintain its state \n * @private\n */\ntextmode._refreshAnnotations = function () {  \n  var session = this.aceEditor && this.aceEditor.getSession();\n  if (session) {\n    var errEnnotations = session.getAnnotations().filter(function(annotation) {return annotation.type === 'error' });\n    session.setAnnotations(errEnnotations);\n  }\n};\n\n/**\n * Destroy the editor. Clean up DOM, event listeners, and web workers.\n */\ntextmode.destroy = function () {\n  // remove old ace editor\n  if (this.aceEditor) {\n    this.aceEditor.destroy();\n    this.aceEditor = null;\n  }\n\n  if (this.frame && this.container && this.frame.parentNode == this.container) {\n    this.container.removeChild(this.frame);\n  }\n\n  if (this.modeSwitcher) {\n    this.modeSwitcher.destroy();\n    this.modeSwitcher = null;\n  }\n\n  this.textarea = null;\n  \n  this._debouncedValidate = null;\n};\n\n/**\n * Compact the code in the text editor\n */\ntextmode.compact = function () {\n  var json = this.get();\n  var text = JSON.stringify(json);\n  this.setText(text);\n};\n\n/**\n * Format the code in the text editor\n */\ntextmode.format = function () {\n  var json = this.get();\n  var text = JSON.stringify(json, null, this.indentation);\n  this.setText(text);\n};\n\n/**\n * Repair the code in the text editor\n */\ntextmode.repair = function () {\n  var text = this.getText();\n  var sanitizedText = util.sanitize(text);\n  this.setText(sanitizedText);\n};\n\n/**\n * Set focus to the formatter\n */\ntextmode.focus = function () {\n  if (this.textarea) {\n    this.textarea.focus();\n  }\n  if (this.aceEditor) {\n    this.aceEditor.focus();\n  }\n};\n\n/**\n * Resize the formatter\n */\ntextmode.resize = function () {\n  if (this.aceEditor) {\n    var force = false;\n    this.aceEditor.resize(force);\n  }\n};\n\n/**\n * Set json data in the formatter\n * @param {*} json\n */\ntextmode.set = function(json) {\n  this.setText(JSON.stringify(json, null, this.indentation));\n};\n\n/**\n * Update data. Same as calling `set` in text/code mode.\n * @param {*} json\n */\ntextmode.update = function(json) {\n  this.updateText(JSON.stringify(json, null, this.indentation));\n};\n\n/**\n * Get json data from the formatter\n * @return {*} json\n */\ntextmode.get = function() {\n  var text = this.getText();\n  var json;\n\n  try {\n    json = util.parse(text); // this can throw an error\n  }\n  catch (err) {\n    // try to sanitize json, replace JavaScript notation with JSON notation\n    text = util.sanitize(text);\n\n    // try to parse again\n    json = util.parse(text); // this can throw an error\n  }\n\n  return json;\n};\n\n/**\n * Get the text contents of the editor\n * @return {String} jsonText\n */\ntextmode.getText = function() {\n  if (this.textarea) {\n    return this.textarea.value;\n  }\n  if (this.aceEditor) {\n    return this.aceEditor.getValue();\n  }\n  return '';\n};\n\n/**\n * Set the text contents of the editor\n * @param {String} jsonText\n */\ntextmode.setText = function(jsonText) {\n  var text;\n\n  if (this.options.escapeUnicode === true) {\n    text = util.escapeUnicodeChars(jsonText);\n  }\n  else {\n    text = jsonText;\n  }\n\n  if (this.textarea) {\n    this.textarea.value = text;\n  }\n  if (this.aceEditor) {\n    // prevent emitting onChange events while setting new text\n    this.onChangeDisabled = true;\n\n    this.aceEditor.setValue(text, -1);\n\n    this.onChangeDisabled = false;\n  }\n  // validate JSON schema\n  this._debouncedValidate();\n};\n\n/**\n * Update the text contents\n * @param {string} jsonText\n */\ntextmode.updateText = function(jsonText) {\n  // don't update if there are no changes\n  if (this.getText() === jsonText) {\n    return;\n  }\n\n  this.onChangeDisabled = true; // don't fire an onChange event\n  this.setText(jsonText);\n  this.onChangeDisabled = false;\n};\n\n/**\n * Validate current JSON object against the configured JSON schema\n * Throws an exception when no JSON schema is configured\n */\ntextmode.validate = function () {\n  var doValidate = false;\n  var schemaErrors = [];\n  var parseErrors = [];\n  var json;\n  try {\n    json = this.get(); // this can fail when there is no valid json\n    if (this.parseErrorIndication) {\n      this.parseErrorIndication.style.display = 'none';\n    }\n    doValidate = true;\n  }\n  catch (err) {\n    if (this.getText()) {\n      if (this.parseErrorIndication) {\n        this.parseErrorIndication.style.display = 'block';\n      }\n      // try to extract the line number from the jsonlint error message\n      var match = /\\w*line\\s*(\\d+)\\w*/g.exec(err.message);\n      var line;\n      if (match) {\n        line = +match[1];\n      }\n      if (this.parseErrorIndication) {\n        this.parseErrorIndication.title = !isNaN(line) ? ('parse error on line ' + line) : 'parse error - check that the json is valid';\n      }\n      parseErrors.push({\n        type: 'error',\n        message: err.message.replace(/\\n/g, '<br>'),\n        line: line\n      });\n    }\n  }\n\n  // only validate the JSON when parsing the JSON succeeded\n  if (doValidate) {\n    // execute JSON schema validation (ajv)\n    if (this.validateSchema) {\n      var valid = this.validateSchema(json);\n      if (!valid) {\n        schemaErrors = this.validateSchema.errors.map(function (error) {\n          error.type = \"validation\";\n          return util.improveSchemaError(error);\n        });\n      }\n    }\n\n    // execute custom validation and after than merge and render all errors\n    try {\n      this.validationSequence++;\n      var me = this;\n      var seq = this.validationSequence;\n      this._validateCustom(json)\n          .then(function (customValidationErrors) {\n            // only apply when there was no other validation started whilst resolving async results\n            if (seq === me.validationSequence) {\n              var errors = schemaErrors.concat(parseErrors || []).concat(customValidationErrors || []);\n              me._renderErrors(errors);\n            }\n          })\n          .catch(function (err) {\n            console.error(err);\n          });\n    }\n    catch(err) {\n      console.error(err);\n    }\n  }\n  else {\n    this._renderErrors(parseErrors || [], true);\n  }\n};\n\n/**\n * Execute custom validation if configured.\n *\n * Returns a promise resolving with the custom errors (or nothing).\n */\ntextmode._validateCustom = function (json) {\n  if (this.options.onValidate) {\n    try {\n      var customValidateResults = this.options.onValidate(json);\n\n      var resultPromise = util.isPromise(customValidateResults)\n          ? customValidateResults\n          : Promise.resolve(customValidateResults);\n\n      return resultPromise.then(function (customValidationPathErrors) {\n        if (Array.isArray(customValidationPathErrors)) {\n          return customValidationPathErrors\n              .filter(function (error) {\n                var valid = util.isValidValidationError(error);\n\n                if (!valid) {\n                  console.warn('Ignoring a custom validation error with invalid structure. ' +\n                      'Expected structure: {path: [...], message: \"...\"}. ' +\n                      'Actual error:', error);\n                }\n\n                return valid;\n              })\n              .map(function (error) {\n                // change data structure into the structure matching the JSON schema errors\n                return {\n                  dataPath: util.stringifyPath(error.path),\n                  message: error.message\n                }\n              });\n        }\n        else {\n          return null;\n        }\n      });\n    }\n    catch (err) {\n      return Promise.reject(err);\n    }\n  }\n\n  return Promise.resolve(null);\n};\n\ntextmode._renderErrors = function(errors, noValidation) {\n  // clear all current errors\n  var me = this;\n  var validationErrorsCount = 0;\n\n  this.errorTableVisible = (typeof this.errorTableVisible === 'undefined') ? !this.aceEditor : this.errorTableVisible;\n\n  if (this.dom.validationErrors) {\n    this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors);\n    this.dom.validationErrors = null;\n    this.dom.additionalErrorsIndication.style.display = 'none';\n\n    this.content.style.marginBottom = '';\n    this.content.style.paddingBottom = '';\n  }\n\n  var jsonText = this.getText();\n  var errorPaths = [];\n  errors.reduce(function(acc, curr) {\n    if(acc.indexOf(curr.dataPath) === -1) {\n      acc.push(curr.dataPath);\n    }\n    return acc;\n  }, errorPaths);\n  var errorLocations = util.getPositionForPath(jsonText, errorPaths);\n\n  // render the new errors\n  if (errors.length > 0) {\n    if (this.aceEditor) {\n      this.annotations = errorLocations.map(function (errLoc) {\n        var validationErrors = errors.filter(function(err){ return err.dataPath === errLoc.path; });\n        var message = validationErrors.map(function(err) { return err.message }).join('\\n');\n        if (message) {\n          return {\n            row: errLoc.line,\n            column: errLoc.column,\n            text: 'Schema validation error' + (validationErrors.length !== 1 ? 's' : '') + ': \\n' + message,\n            type: 'warning',\n            source: 'jsoneditor',\n          }\n        }\n\n        return {};\n      });\n      this._refreshAnnotations();\n\n    }\n\n    // keep default behavior for parse errors\n    if (noValidation ? !this.aceEditor : this.errorTableVisible) {\n       var validationErrors = document.createElement('div');\n      validationErrors.innerHTML = '<table class=\"jsoneditor-text-errors\"><tbody></tbody></table>';\n      var tbody = validationErrors.getElementsByTagName('tbody')[0];\n\n      errors.forEach(function (error) {\n        var message;\n        if (typeof error === 'string') {\n          message = '<td colspan=\"2\"><pre>' + error + '</pre></td>';\n        }\n        else {\n          message = \n              '<td>' + (error.dataPath || '') + '</td>' +\n              '<td>' + error.message + '</td>';\n        }\n\n        var line;\n\n        if (!isNaN(error.line)) {\n          line = error.line;\n        } else if (error.dataPath) {\n          var errLoc = errorLocations.find(function(loc) { return loc.path === error.dataPath; });\n          if (errLoc) {\n            line = errLoc.line + 1;\n          }\n        }\n\n        var trEl = document.createElement('tr');\n        trEl.className = !isNaN(line) ? 'jump-to-line' : '';\n        if (error.type === 'error') {\n          trEl.className += ' parse-error';\n        } else {\n          trEl.className += ' validation-error';\n          ++validationErrorsCount;\n        }\n        \n        trEl.innerHTML =  ('<td><button class=\"jsoneditor-schema-error\"></button></td><td style=\"white-space:nowrap;\">'+ (!isNaN(line) ? ('Ln ' + line) : '') +'</td>' + message);\n        trEl.onclick = function() {\n          me.isFocused = true;\n          if (!isNaN(line)) {\n            me.setTextSelection({row: line, column: 1}, {row: line, column: 1000});\n          }\n        };\n\n        tbody.appendChild(trEl);\n      });\n\n      this.dom.validationErrors = validationErrors;\n      this.dom.validationErrorsContainer.appendChild(validationErrors);\n      this.dom.additionalErrorsIndication.title = errors.length + \" errors total\";\n\n      if (this.dom.validationErrorsContainer.clientHeight < this.dom.validationErrorsContainer.scrollHeight) {\n        this.dom.additionalErrorsIndication.style.display = 'block';\n        this.dom.validationErrorsContainer.onscroll = function () {\n          me.dom.additionalErrorsIndication.style.display =\n            (me.dom.validationErrorsContainer.clientHeight > 0 && me.dom.validationErrorsContainer.scrollTop === 0) ? 'block' : 'none';\n        }\n      } else {\n        this.dom.validationErrorsContainer.onscroll = undefined;\n      }\n\n      var height = this.dom.validationErrorsContainer.clientHeight + (this.dom.statusBar ? this.dom.statusBar.clientHeight : 0);\n      this.content.style.marginBottom = (-height) + 'px';\n      this.content.style.paddingBottom = height + 'px';\n    } else {\n      validationErrorsCount = errors.reduce(function (acc, curr) {return (curr.type === 'validation' ? ++acc: acc)}, 0);\n    }\n    \n  } else {\n    if (this.aceEditor) {\n      this.annotations = [];\n      this._refreshAnnotations();\n    }\n  }\n\n  if (this.options.statusBar) {\n    validationErrorsCount = validationErrorsCount || this.annotations.length;\n    var showIndication = !!validationErrorsCount;\n    this.validationErrorIndication.validationErrorIcon.style.display = showIndication ? 'inline' : 'none';\n    this.validationErrorIndication.validationErrorCount.style.display = showIndication ? 'inline' : 'none';\n    if (showIndication) {\n      this.validationErrorIndication.validationErrorCount.innerText = validationErrorsCount;\n      this.validationErrorIndication.validationErrorIcon.title = validationErrorsCount + ' schema validation error(s) found';\n      this.validationErrorIndication.validationErrorCount.onclick = this.validationErrorIndication.validationErrorIcon.onclick = this._toggleErrorTableVisibility.bind(this);\n    }\n  }\n\n  // update the height of the ace editor\n  if (this.aceEditor) {\n    var force = false;\n    this.aceEditor.resize(force);\n  }\n};\n\ntextmode._toggleErrorTableVisibility = function () {\n  this.errorTableVisible = !this.errorTableVisible;\n  this.validate();\n};\n\n/**\n * Get the selection details\n * @returns {{start:{row:Number, column:Number},end:{row:Number, column:Number},text:String}}\n */\ntextmode.getTextSelection = function () {\n  var selection = {};\n  if (this.textarea) {\n    var selectionRange = util.getInputSelection(this.textarea);\n\n    if (this.cursorInfo && this.cursorInfo.line === selectionRange.end.row && this.cursorInfo.column === selectionRange.end.column) {\n      //selection direction is bottom => up\n      selection.start = selectionRange.end;\n      selection.end = selectionRange.start;\n    } else {\n      selection = selectionRange;\n    }\n\n    return {\n      start: selection.start,\n      end: selection.end,\n      text: this.textarea.value.substring(selectionRange.startIndex, selectionRange.endIndex)\n    }\n  }\n\n  if (this.aceEditor) {\n    var aceSelection = this.aceEditor.getSelection();\n    var selectedText = this.aceEditor.getSelectedText();\n    var range = aceSelection.getRange();\n    var lead = aceSelection.getSelectionLead();\n\n    if (lead.row === range.end.row && lead.column === range.end.column) {\n      selection = range;\n    } else {\n      //selection direction is bottom => up\n      selection.start = range.end;\n      selection.end = range.start;\n    }\n    \n    return {\n      start: {\n        row: selection.start.row + 1,\n        column: selection.start.column + 1\n      },\n      end: {\n        row: selection.end.row + 1,\n        column: selection.end.column + 1\n      },\n      text: selectedText\n    };\n  }\n};\n\n/**\n * Callback registration for selection change\n * @param {selectionCallback} callback\n * \n * @callback selectionCallback\n */\ntextmode.onTextSelectionChange = function (callback) {\n  if (typeof callback === 'function') {\n    this._selectionChangedHandler = util.debounce(callback, this.DEBOUNCE_INTERVAL);\n  }\n};\n\n/**\n * Set selection on editor's text\n * @param {{row:Number, column:Number}} startPos selection start position\n * @param {{row:Number, column:Number}} endPos selected end position\n */\ntextmode.setTextSelection = function (startPos, endPos) {\n\n  if (!startPos || !endPos) return;\n\n  if (this.textarea) {\n    var startIndex = util.getIndexForPosition(this.textarea, startPos.row, startPos.column);\n    var endIndex = util.getIndexForPosition(this.textarea, endPos.row, endPos.column);\n    if (startIndex > -1 && endIndex  > -1) {\n      if (this.textarea.setSelectionRange) {\n        this.textarea.focus();\n        this.textarea.setSelectionRange(startIndex, endIndex);\n      } else if (this.textarea.createTextRange) { // IE < 9\n        var range = this.textarea.createTextRange();\n        range.collapse(true);\n        range.moveEnd('character', endIndex);\n        range.moveStart('character', startIndex);\n        range.select();\n      }\n      var rows = (this.textarea.value.match(/\\n/g) || []).length + 1;\n      var lineHeight =  this.textarea.scrollHeight / rows;\n      var selectionScrollPos = (startPos.row * lineHeight);\n      this.textarea.scrollTop = selectionScrollPos > this.textarea.clientHeight ? (selectionScrollPos - (this.textarea.clientHeight / 2)) : 0;\n    }\n  } else if (this.aceEditor) {\n    var range = {\n      start:{\n        row: startPos.row - 1,\n        column: startPos.column - 1\n      },\n      end:{\n        row: endPos.row - 1,\n        column: endPos.column - 1\n      }\n    };\n    this.aceEditor.selection.setRange(range);\n    this.aceEditor.scrollToLine(startPos.row - 1, true);\n  }\n};\n\nfunction load () {\n  try {\n    this.format()\n  }\n  catch (err) {\n    // in case of an error, just move on, failing formatting is not a big deal\n  }\n}\n\n// define modes\nmodule.exports = [\n  {\n    mode: 'text',\n    mixin: textmode,\n    data: 'text',\n    load: load\n  },\n  {\n    mode: 'code',\n    mixin: textmode,\n    data: 'text',\n    load: load\n  }\n];\n","'use strict';\n\nvar resolve = require('./resolve');\n\nmodule.exports = {\n  Validation: errorSubclass(ValidationError),\n  MissingRef: errorSubclass(MissingRefError)\n};\n\n\nfunction ValidationError(errors) {\n  this.message = 'validation failed';\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\n\n\nMissingRefError.message = function (baseId, ref) {\n  return 'can\\'t resolve reference ' + ref + ' from id ' + baseId;\n};\n\n\nfunction MissingRefError(baseId, ref, message) {\n  this.message = message || MissingRefError.message(baseId, ref);\n  this.missingRef = resolve.url(baseId, ref);\n  this.missingSchema = resolve.normalizeId(resolve.fullPath(this.missingRef));\n}\n\n\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n  _traverse(opts, cb, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, cb, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    cb(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, cb, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, cb, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, cb, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\",attrs:{\"id\":\"jsoneditor\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"jsoneditor\" class=\"box\"></div>\n  \n</template>\n\n\n<script>\nimport jsoneditor from \"jsoneditor\";\nexport default {\n  data() {\n    return {\n    };\n  },\n  // mounted(){\n  //   let box = document.getElementById('box');\n  //   let divs = box.getElementsByTagName('div');\n  //   for(let i=0;i<divs.length;i++){\n  //     divs[i].setAttribute(\"id\", 'id-'+i);\n  //   }\n  // }\n  mounted() {\n    let container = document.getElementById(\"jsoneditor\");\n    let json = {\n      Array: [1, 2, 3],\n      Boolean: true,\n      Null: null,\n      Number: 123,\n      Object: { a: \"b\", c: \"d\" },\n      String: \"Hello World\"\n    };\n    let options = {\n      mode: \"text\",\n      indentation: 2,\n    };\n    let editor = new jsoneditor(container, options);\n    editor.set(json);\n  }\n  // beforeCreate(){\n  //   console.log('beforeCreate');\n  //   debugger\n  // },\n  // created(){\n  //   console.log('created')\n  //   debugger\n  // },\n  // beforeMount(){\n  //   console.log('beforeMount')\n  //   debugger\n  // },\n  // mounted(){\n  //   console.log('mounted')\n  //   debugger\n  // },\n  // beforeUpdate(){\n  //   console.log('beforeUpdate')\n  //   debugger\n  // },\n  // updated(){\n  //   console.log('updated')\n  //   debugger\n  // },\n  // beforeDestroy(){\n  //   console.log('beforeDestroy')\n  //   debugger\n  // },\n  // destroyed(){\n  //   console.log('destroyed')\n  //   debugger\n  // },\n};\n</script>\n\n<style scoped>\n\n.box{\n  width: 50%;\n  height: calc(100vh - 100px);\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6cc42d1e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6cc42d1e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cc42d1e\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , errorClasses = require('./error_classes')\n  , stableStringify = require('fast-json-stable-stringify');\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar co = require('co');\nvar ucs2length = util.ucs2length;\nvar equal = require('fast-deep-equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = errorClasses.Validation;\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = [];\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode) cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  function callValidate() {\n    var validate = compilation.validate;\n    var result = validate.apply(null, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      MissingRefError: errorClasses.MissingRef,\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      logger: self.logger,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.processCode) sourceCode = opts.processCode(sourceCode);\n    // console.log('\\n\\n\\n *** \\n', JSON.stringify(sourceCode));\n    var validate;\n    try {\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'co',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        sourceCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        co,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      self.logger.error('Error compiling schema, function code:', sourceCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        code: sourceCode,\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (v === undefined) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v === undefined) {\n      removeLocalRef(ref);\n    } else {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function removeLocalRef(ref) {\n    delete refs[ref];\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' || typeof refVal == 'boolean'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    var validateSchema = rule.definition.validateSchema;\n    if (validateSchema && self._opts.validateSchema !== false) {\n      var valid = validateSchema(schema);\n      if (!valid) {\n        var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n        if (self._opts.validateSchema == 'log') self.logger.error(message);\n        else throw new Error(message);\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n      if (!validate) return;\n    }\n\n    if (validate === undefined)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] === undefined ? '' : 'var refVal' + i + ' = refVal[' + i + '];';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n","'use strict';\n\n/**\n * @constructor SearchBox\n * Create a search box in given HTML container\n * @param {JSONEditor} editor    The JSON Editor to attach to\n * @param {Element} container               HTML container element of where to\n *                                          create the search box\n */\nfunction SearchBox (editor, container) {\n  var searchBox = this;\n\n  this.editor = editor;\n  this.timeout = undefined;\n  this.delay = 200; // ms\n  this.lastText = undefined;\n\n  this.dom = {};\n  this.dom.container = container;\n\n  var table = document.createElement('table');\n  this.dom.table = table;\n  table.className = 'jsoneditor-search';\n  container.appendChild(table);\n  var tbody = document.createElement('tbody');\n  this.dom.tbody = tbody;\n  table.appendChild(tbody);\n  var tr = document.createElement('tr');\n  tbody.appendChild(tr);\n\n  var td = document.createElement('td');\n  tr.appendChild(td);\n  var results = document.createElement('div');\n  this.dom.results = results;\n  results.className = 'jsoneditor-results';\n  td.appendChild(results);\n\n  td = document.createElement('td');\n  tr.appendChild(td);\n  var divInput = document.createElement('div');\n  this.dom.input = divInput;\n  divInput.className = 'jsoneditor-frame';\n  divInput.title = 'Search fields and values';\n  td.appendChild(divInput);\n\n  // table to contain the text input and search button\n  var tableInput = document.createElement('table');\n  divInput.appendChild(tableInput);\n  var tbodySearch = document.createElement('tbody');\n  tableInput.appendChild(tbodySearch);\n  tr = document.createElement('tr');\n  tbodySearch.appendChild(tr);\n\n  var refreshSearch = document.createElement('button');\n  refreshSearch.type = 'button';\n  refreshSearch.className = 'jsoneditor-refresh';\n  td = document.createElement('td');\n  td.appendChild(refreshSearch);\n  tr.appendChild(td);\n\n  var search = document.createElement('input');\n  // search.type = 'button';\n  this.dom.search = search;\n  search.oninput = function (event) {\n    searchBox._onDelayedSearch(event);\n  };\n  search.onchange = function (event) { // For IE 9\n    searchBox._onSearch();\n  };\n  search.onkeydown = function (event) {\n    searchBox._onKeyDown(event);\n  };\n  search.onkeyup = function (event) {\n    searchBox._onKeyUp(event);\n  };\n  refreshSearch.onclick = function (event) {\n    search.select();\n  };\n\n  // TODO: ESC in FF restores the last input, is a FF bug, https://bugzilla.mozilla.org/show_bug.cgi?id=598819\n  td = document.createElement('td');\n  td.appendChild(search);\n  tr.appendChild(td);\n\n  var searchNext = document.createElement('button');\n  searchNext.type = 'button';\n  searchNext.title = 'Next result (Enter)';\n  searchNext.className = 'jsoneditor-next';\n  searchNext.onclick = function () {\n    searchBox.next();\n  };\n  td = document.createElement('td');\n  td.appendChild(searchNext);\n  tr.appendChild(td);\n\n  var searchPrevious = document.createElement('button');\n  searchPrevious.type = 'button';\n  searchPrevious.title = 'Previous result (Shift+Enter)';\n  searchPrevious.className = 'jsoneditor-previous';\n  searchPrevious.onclick = function () {\n    searchBox.previous();\n  };\n  td = document.createElement('td');\n  td.appendChild(searchPrevious);\n  tr.appendChild(td);\n}\n\n/**\n * Go to the next search result\n * @param {boolean} [focus]   If true, focus will be set to the next result\n *                            focus is false by default.\n */\nSearchBox.prototype.next = function(focus) {\n  if (this.results != undefined) {\n    var index = (this.resultIndex != undefined) ? this.resultIndex + 1 : 0;\n    if (index > this.results.length - 1) {\n      index = 0;\n    }\n    this._setActiveResult(index, focus);\n  }\n};\n\n/**\n * Go to the prevous search result\n * @param {boolean} [focus]   If true, focus will be set to the next result\n *                            focus is false by default.\n */\nSearchBox.prototype.previous = function(focus) {\n  if (this.results != undefined) {\n    var max = this.results.length - 1;\n    var index = (this.resultIndex != undefined) ? this.resultIndex - 1 : max;\n    if (index < 0) {\n      index = max;\n    }\n    this._setActiveResult(index, focus);\n  }\n};\n\n/**\n * Set new value for the current active result\n * @param {Number} index\n * @param {boolean} [focus]   If true, focus will be set to the next result.\n *                            focus is false by default.\n * @private\n */\nSearchBox.prototype._setActiveResult = function(index, focus) {\n  // de-activate current active result\n  if (this.activeResult) {\n    var prevNode = this.activeResult.node;\n    var prevElem = this.activeResult.elem;\n    if (prevElem == 'field') {\n      delete prevNode.searchFieldActive;\n    }\n    else {\n      delete prevNode.searchValueActive;\n    }\n    prevNode.updateDom();\n  }\n\n  if (!this.results || !this.results[index]) {\n    // out of range, set to undefined\n    this.resultIndex = undefined;\n    this.activeResult = undefined;\n    return;\n  }\n\n  this.resultIndex = index;\n\n  // set new node active\n  var node = this.results[this.resultIndex].node;\n  var elem = this.results[this.resultIndex].elem;\n  if (elem == 'field') {\n    node.searchFieldActive = true;\n  }\n  else {\n    node.searchValueActive = true;\n  }\n  this.activeResult = this.results[this.resultIndex];\n  node.updateDom();\n\n  // TODO: not so nice that the focus is only set after the animation is finished\n  node.scrollTo(function () {\n    if (focus) {\n      node.focus(elem);\n    }\n  });\n};\n\n/**\n * Cancel any running onDelayedSearch.\n * @private\n */\nSearchBox.prototype._clearDelay = function() {\n  if (this.timeout != undefined) {\n    clearTimeout(this.timeout);\n    delete this.timeout;\n  }\n};\n\n/**\n * Start a timer to execute a search after a short delay.\n * Used for reducing the number of searches while typing.\n * @param {Event} event\n * @private\n */\nSearchBox.prototype._onDelayedSearch = function (event) {\n  // execute the search after a short delay (reduces the number of\n  // search actions while typing in the search text box)\n  this._clearDelay();\n  var searchBox = this;\n  this.timeout = setTimeout(function (event) {\n    searchBox._onSearch();\n  },\n  this.delay);\n};\n\n/**\n * Handle onSearch event\n * @param {boolean} [forceSearch]  If true, search will be executed again even\n *                                 when the search text is not changed.\n *                                 Default is false.\n * @private\n */\nSearchBox.prototype._onSearch = function (forceSearch) {\n  this._clearDelay();\n\n  var value = this.dom.search.value;\n  var text = (value.length > 0) ? value : undefined;\n  if (text !== this.lastText || forceSearch) {\n    // only search again when changed\n    this.lastText = text;\n    this.results = this.editor.search(text);\n    var MAX_SEARCH_RESULTS = this.results[0]\n        ? this.results[0].node.MAX_SEARCH_RESULTS\n        : Infinity;\n\n    // try to maintain the current active result if this is still part of the new search results\n    var activeResultIndex = 0;\n    if (this.activeResult) {\n      for (var i = 0; i < this.results.length; i++) {\n        if (this.results[i].node === this.activeResult.node) {\n          activeResultIndex = i;\n          break;\n        }\n      }\n    }\n\n    this._setActiveResult(activeResultIndex, false);\n\n    // display search results\n    if (text !== undefined) {\n      var resultCount = this.results.length;\n      if (resultCount === 0) {\n        this.dom.results.innerHTML = 'no&nbsp;results';\n      }\n      else if (resultCount === 1) {\n        this.dom.results.innerHTML = '1&nbsp;result';\n      }\n      else if (resultCount > MAX_SEARCH_RESULTS) {\n        this.dom.results.innerHTML = MAX_SEARCH_RESULTS + '+&nbsp;results';\n      }\n      else {\n        this.dom.results.innerHTML = resultCount + '&nbsp;results';\n      }\n    }\n    else {\n      this.dom.results.innerHTML = '';\n    }\n  }\n};\n\n/**\n * Handle onKeyDown event in the input box\n * @param {Event} event\n * @private\n */\nSearchBox.prototype._onKeyDown = function (event) {\n  var keynum = event.which;\n  if (keynum == 27) { // ESC\n    this.dom.search.value = '';  // clear search\n    this._onSearch();\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  else if (keynum == 13) { // Enter\n    if (event.ctrlKey) {\n      // force to search again\n      this._onSearch(true);\n    }\n    else if (event.shiftKey) {\n      // move to the previous search result\n      this.previous();\n    }\n    else {\n      // move to the next search result\n      this.next();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\n/**\n * Handle onKeyUp event in the input box\n * @param {Event} event\n * @private\n */\nSearchBox.prototype._onKeyUp = function (event) {\n  var keynum = event.keyCode;\n  if (keynum != 27 && keynum != 13) { // !show and !Enter\n    this._onDelayedSearch(event);   // For IE 9\n  }\n};\n\n/**\n * Clear the search results\n */\nSearchBox.prototype.clear = function () {\n  this.dom.search.value = '';\n  this._onSearch();\n};\n\n/**\n * Refresh searchResults if there is a search value\n */\nSearchBox.prototype.forceSearch = function () {\n  this._onSearch(true);\n};\n\n/**\n * Test whether the search box value is empty\n * @returns {boolean} Returns true when empty.\n */\nSearchBox.prototype.isEmpty = function () {\n  return this.dom.search.value === '';\n};\n\n/**\n * Destroy the search box\n */\nSearchBox.prototype.destroy = function () {\n  this.editor = null;\n  this.dom.container.removeChild(this.dom.table);\n  this.dom = null;\n\n  this.results = null;\n  this.activeResult = null;\n\n  this._clearDelay();\n\n};\n\nmodule.exports = SearchBox;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\n\nvar ContextMenu = require('./ContextMenu');\nvar translate = require('./i18n').translate;\n\n/**\n * Create a select box to be used in the editor menu's, which allows to switch mode\n * @param {HTMLElement} container\n * @param {String[]} modes  Available modes: 'code', 'form', 'text', 'tree', 'view'\n * @param {String} current  Available modes: 'code', 'form', 'text', 'tree', 'view'\n * @param {function(mode: string)} onSwitch  Callback invoked on switch\n * @constructor\n */\nfunction ModeSwitcher(container, modes, current, onSwitch) {\n  // available modes\n  var availableModes = {\n    code: {\n      'text': translate('modeCodeText'),\n      'title': translate('modeCodeTitle'),\n      'click': function () {\n        onSwitch('code')\n      }\n    },\n    form: {\n      'text': translate('modeFormText'),\n      'title': translate('modeFormTitle'),\n      'click': function () {\n        onSwitch('form');\n      }\n    },\n    text: {\n      'text': translate('modeTextText'),\n      'title': translate('modeTextTitle'),\n      'click': function () {\n        onSwitch('text');\n      }\n    },\n    tree: {\n      'text': translate('modeTreeText'),\n      'title': translate('modeTreeTitle'),\n      'click': function () {\n        onSwitch('tree');\n      }\n    },\n    view: {\n      'text': translate('modeViewText'),\n      'title': translate('modeViewTitle'),\n      'click': function () {\n        onSwitch('view');\n      }\n    }\n  };\n\n  // list the selected modes\n  var items = [];\n  for (var i = 0; i < modes.length; i++) {\n    var mode = modes[i];\n    var item = availableModes[mode];\n    if (!item) {\n      throw new Error('Unknown mode \"' + mode + '\"');\n    }\n\n    item.className = 'jsoneditor-type-modes' + ((current == mode) ? ' jsoneditor-selected' : '');\n    items.push(item);\n  }\n\n  // retrieve the title of current mode\n  var currentMode = availableModes[current];\n  if (!currentMode) {\n    throw new Error('Unknown mode \"' + current + '\"');\n  }\n  var currentTitle = currentMode.text;\n\n  // create the html element\n  var box = document.createElement('button');\n  box.type = 'button';\n  box.className = 'jsoneditor-modes jsoneditor-separator';\n  box.innerHTML = currentTitle + ' &#x25BE;';\n  box.title = 'Switch editor mode';\n  box.onclick = function () {\n    var menu = new ContextMenu(items);\n    menu.show(box, container);\n  };\n\n  var frame = document.createElement('div');\n  frame.className = 'jsoneditor-modes';\n  frame.style.position = 'relative';\n  frame.appendChild(box);\n\n  container.appendChild(frame);\n\n  this.dom = {\n    container: container,\n    box: box,\n    frame: frame\n  };\n}\n\n/**\n * Set focus to switcher\n */\nModeSwitcher.prototype.focus = function () {\n  this.dom.box.focus();\n};\n\n/**\n * Destroy the ModeSwitcher, remove from DOM\n */\nModeSwitcher.prototype.destroy = function () {\n  if (this.dom && this.dom.frame && this.dom.frame.parentNode) {\n    this.dom.frame.parentNode.removeChild(this.dom.frame);\n  }\n  this.dom = null;\n};\n\nmodule.exports = ModeSwitcher;","'use strict';\nmodule.exports = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $op = $keyword == 'maxLength' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  if (it.opts.unicode === false) {\n    out += ' ' + ($data) + '.length ';\n  } else {\n    out += ' ucs2length(' + ($data) + ') ';\n  }\n  out += ' ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitLength') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT be ';\n      if ($keyword == 'maxLength') {\n        out += 'longer';\n      } else {\n        out += 'shorter';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' characters\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\n\nvar util = require('./util');\n\nvar DATE = /^\\d\\d\\d\\d-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0,31,29,31,30,31,30,31,31,30,31,30,31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d:\\d\\d)?$/i;\nvar HOSTNAME = /^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\n// @todo Delete current URL in favour of the commented out URL rule when this issue is fixed https://github.com/eslint/eslint/issues/7983.\n// var URL = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-?)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-?)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$|^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n\n\nmodule.exports = formats;\n\nfunction formats(mode) {\n  mode = mode == 'full' ? 'full' : 'fast';\n  return util.copy(formats[mode]);\n}\n\n\nformats.fast = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: /^[0-2]\\d:[0-5]\\d:[0-5]\\d(?:\\.\\d+)?(?:z|[+-]\\d\\d:\\d\\d)?$/i,\n  'date-time': /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s][0-2]\\d:[0-5]\\d:[0-5]\\d(?:\\.\\d+)?(?:z|[+-]\\d\\d:\\d\\d)$/i,\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+-.]*)(?::|\\/)\\/?[^\\s]*$/i,\n  'uri-reference': /^(?:(?:[a-z][a-z0-9+-.]*:)?\\/\\/)?[^\\s]*$/i,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: UUID,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  'json-pointer': JSON_POINTER,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nformats.full = {\n  date: date,\n  time: time,\n  'date-time': date_time,\n  uri: uri,\n  'uri-reference': URIREF,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&''*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: hostname,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  uuid: UUID,\n  'json-pointer': JSON_POINTER,\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nfunction date(str) {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  var matches = str.match(DATE);\n  if (!matches) return false;\n\n  var month = +matches[1];\n  var day = +matches[2];\n  return month >= 1 && month <= 12 && day >= 1 && day <= DAYS[month];\n}\n\n\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches) return false;\n\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return hour <= 23 && minute <= 59 && second <= 59 && (!full || timeZone);\n}\n\n\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\n\n\nfunction hostname(str) {\n  // https://tools.ietf.org/html/rfc1034#section-3.5\n  // https://tools.ietf.org/html/rfc1123#section-2\n  return str.length <= 255 && HOSTNAME.test(str);\n}\n\n\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\n\n\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str)) return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n","var util = require('./util');\n\n/**\n * Create an anchor element absolutely positioned in the `parent`\n * element.\n * @param {HTMLElement} anchor\n * @param {HTMLElement} parent\n * @param [onDestroy(function(anchor)]  Callback when the anchor is destroyed\n * @returns {HTMLElement}\n */\nexports.createAbsoluteAnchor = function (anchor, parent, onDestroy) {\n  var root = getRootNode(anchor);\n  var eventListeners = {};\n\n  var anchorRect = anchor.getBoundingClientRect();\n  var frameRect = parent.getBoundingClientRect();\n\n  var absoluteAnchor = document.createElement('div');\n  absoluteAnchor.className = 'jsoneditor-anchor';\n  absoluteAnchor.style.position = 'absolute';\n  absoluteAnchor.style.left = (anchorRect.left - frameRect.left) + 'px';\n  absoluteAnchor.style.top = (anchorRect.top - frameRect.top) + 'px';\n  absoluteAnchor.style.width = (anchorRect.width - 2) + 'px';\n  absoluteAnchor.style.height = (anchorRect.height - 2) + 'px';\n  absoluteAnchor.style.boxSizing = 'border-box';\n  parent.appendChild(absoluteAnchor);\n\n  function destroy () {\n    // remove temporary absolutely positioned anchor\n    if (absoluteAnchor && absoluteAnchor.parentNode) {\n      absoluteAnchor.parentNode.removeChild(absoluteAnchor);\n\n      // remove all event listeners\n      // all event listeners are supposed to be attached to document.\n      for (var name in eventListeners) {\n        if (eventListeners.hasOwnProperty(name)) {\n          var fn = eventListeners[name];\n          if (fn) {\n            util.removeEventListener(root, name, fn);\n          }\n          delete eventListeners[name];\n        }\n      }\n\n      if (typeof onDestroy === 'function') {\n        onDestroy(anchor);\n      }\n    }\n  }\n\n  // create and attach event listeners\n  var destroyIfOutside = function (event) {\n    var target = event.target;\n    if ((target !== absoluteAnchor) && !util.isChildOf(target, absoluteAnchor)) {\n      destroy();\n    }\n  }\n\n  eventListeners.mousedown = util.addEventListener(root, 'mousedown', destroyIfOutside);\n  eventListeners.mousewheel = util.addEventListener(root, 'mousewheel', destroyIfOutside);\n  // eventListeners.scroll = util.addEventListener(root, 'scroll', destroyIfOutside);\n\n  absoluteAnchor.destroy = destroy;\n\n  return absoluteAnchor\n}\n\n/**\n * Node.getRootNode shim\n * @param  {HTMLElement} node node to check\n * @return {HTMLElement}      node's rootNode or `window` if there is ShadowDOM is not supported.\n */\nfunction getRootNode(node){\n  return (typeof node.getRootNode === 'function')\n      ? node.getRootNode()\n      : window;\n}\n","'use strict';\nmodule.exports = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  out += 'var division' + ($lvl) + ';if (';\n  if ($isData) {\n    out += ' ' + ($schemaValue) + ' !== undefined && ( typeof ' + ($schemaValue) + ' != \\'number\\' || ';\n  }\n  out += ' (division' + ($lvl) + ' = ' + ($data) + ' / ' + ($schemaValue) + ', ';\n  if (it.opts.multipleOfPrecision) {\n    out += ' Math.abs(Math.round(division' + ($lvl) + ') - division' + ($lvl) + ') > 1e-' + (it.opts.multipleOfPrecision) + ' ';\n  } else {\n    out += ' division' + ($lvl) + ' !== parseInt(division' + ($lvl) + ') ';\n  }\n  out += ' ) ';\n  if ($isData) {\n    out += '  )  ';\n  }\n  out += ' ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('multipleOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { multipleOf: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be multiple of ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\n\nvar url = require('url')\n  , equal = require('fast-deep-equal')\n  , util = require('./util')\n  , SchemaObject = require('./schema_obj')\n  , traverse = require('json-schema-traverse');\n\nmodule.exports = resolve;\n\nresolve.normalizeId = normalizeId;\nresolve.fullPath = getFullPath;\nresolve.url = resolveUrl;\nresolve.ids = resolveIds;\nresolve.inlineRef = inlineRef;\nresolve.schema = resolveSchema;\n\n/**\n * [resolve and compile the references ($ref)]\n * @this   Ajv\n * @param  {Function} compile reference to schema compilation funciton (localCompile)\n * @param  {Object} root object with information about the root schema for the current schema\n * @param  {String} ref reference to resolve\n * @return {Object|Function} schema object (if the schema can be inlined) or validation function\n */\nfunction resolve(compile, root, ref) {\n  /* jshint validthis: true */\n  var refVal = this._refs[ref];\n  if (typeof refVal == 'string') {\n    if (this._refs[refVal]) refVal = this._refs[refVal];\n    else return resolve.call(this, compile, root, refVal);\n  }\n\n  refVal = refVal || this._schemas[ref];\n  if (refVal instanceof SchemaObject) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs)\n            ? refVal.schema\n            : refVal.validate || this._compile(refVal);\n  }\n\n  var res = resolveSchema.call(this, root, ref);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n\n  if (schema instanceof SchemaObject) {\n    v = schema.validate || compile.call(this, schema.schema, root, undefined, baseId);\n  } else if (schema !== undefined) {\n    v = inlineRef(schema, this._opts.inlineRefs)\n        ? schema\n        : compile.call(this, schema, root, undefined, baseId);\n  }\n\n  return v;\n}\n\n\n/**\n * Resolve schema, its root and baseId\n * @this Ajv\n * @param  {Object} root root object with properties schema, refVal, refs\n * @param  {String} ref  reference to resolve\n * @return {Object} object with properties schema, root, baseId\n */\nfunction resolveSchema(root, ref) {\n  /* jshint validthis: true */\n  var p = url.parse(ref, false, true)\n    , refPath = _getFullPath(p)\n    , baseId = getFullPath(this._getId(root.schema));\n  if (refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == 'string') {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject) {\n      if (!refVal.validate) this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject) {\n        if (!refVal.validate) this._compile(refVal);\n        if (id == normalizeId(ref))\n          return { schema: refVal, root: root, baseId: baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema) return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\n\n\n/* @this Ajv */\nfunction resolveRecursive(root, ref, parsedRef) {\n  /* jshint validthis: true */\n  var res = resolveSchema.call(this, root, ref);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id) baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\n\n\nvar PREVENT_SCOPE_CHANGE = util.toHash(['properties', 'patternProperties', 'enum', 'dependencies', 'definitions']);\n/* @this Ajv */\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  /* jshint validthis: true */\n  parsedRef.hash = parsedRef.hash || '';\n  if (parsedRef.hash.slice(0,2) != '#/') return;\n  var parts = parsedRef.hash.split('/');\n\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === undefined) break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id) baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== undefined && schema !== root.schema)\n    return { schema: schema, root: root, baseId: baseId };\n}\n\n\nvar SIMPLE_INLINED = util.toHash([\n  'type', 'format', 'pattern',\n  'maxLength', 'minLength',\n  'maxProperties', 'minProperties',\n  'maxItems', 'minItems',\n  'maximum', 'minimum',\n  'uniqueItems', 'multipleOf',\n  'required', 'enum'\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false) return false;\n  if (limit === undefined || limit === true) return checkNoRef(schema);\n  else if (limit) return countKeys(schema) <= limit;\n}\n\n\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return false;\n      item = schema[key];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  }\n  return true;\n}\n\n\nfunction countKeys(schema) {\n  var count = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object') count += countKeys(item);\n      if (count == Infinity) return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count++;\n      } else {\n        item = schema[key];\n        if (typeof item == 'object') count += countKeys(item) + 1;\n        if (count == Infinity) return Infinity;\n      }\n    }\n  }\n  return count;\n}\n\n\nfunction getFullPath(id, normalize) {\n  if (normalize !== false) id = normalizeId(id);\n  var p = url.parse(id, false, true);\n  return _getFullPath(p);\n}\n\n\nfunction _getFullPath(p) {\n  var protocolSeparator = p.protocol || p.href.slice(0,2) == '//' ? '//' : '';\n  return (p.protocol||'') + protocolSeparator + (p.host||'') + (p.path||'')  + '#';\n}\n\n\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, '') : '';\n}\n\n\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return url.resolve(baseId, id);\n}\n\n\n/* @this Ajv */\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = {'': schemaId};\n  var fullPaths = {'': getFullPath(schemaId, false)};\n  var localRefs = {};\n  var self = this;\n\n  traverse(schema, {allKeys: true}, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === '') return;\n    var id = self._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + '/' + parentKeyword;\n    if (keyIndex !== undefined)\n      fullPath += '/' + (typeof keyIndex == 'number' ? keyIndex : util.escapeFragment(keyIndex));\n\n    if (typeof id == 'string') {\n      id = baseId = normalizeId(baseId ? url.resolve(baseId, id) : id);\n\n      var refVal = self._refs[id];\n      if (typeof refVal == 'string') refVal = self._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == '#') {\n          if (localRefs[id] && !equal(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n\n  return localRefs;\n}\n","'use strict';\n\nvar KEYWORDS = [\n  'multipleOf',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'additionalItems',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'maxProperties',\n  'minProperties',\n  'required',\n  'additionalProperties',\n  'enum',\n  'format',\n  'const'\n];\n\nmodule.exports = function (metaSchema, keywordsJsonPointers) {\n  for (var i=0; i<keywordsJsonPointers.length; i++) {\n    metaSchema = JSON.parse(JSON.stringify(metaSchema));\n    var segments = keywordsJsonPointers[i].split('/');\n    var keywords = metaSchema;\n    var j;\n    for (j=1; j<segments.length; j++)\n      keywords = keywords[segments[j]];\n\n    for (j=0; j<KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: 'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#' }\n          ]\n        };\n      }\n    }\n  }\n\n  return metaSchema;\n};\n","'use strict';\n\nrequire('./polyfills');\nvar jsonlint = require('./assets/jsonlint/jsonlint');\nvar jsonMap = require('json-source-map');\nvar translate = require('./i18n').translate;\n\n/**\n * Parse JSON using the parser built-in in the browser.\n * On exception, the jsonString is validated and a detailed error is thrown.\n * @param {String} jsonString\n * @return {JSON} json\n */\nexports.parse = function parse(jsonString) {\n  try {\n    return JSON.parse(jsonString);\n  }\n  catch (err) {\n    // try to throw a more detailed error message using validate\n    exports.validate(jsonString);\n\n    // rethrow the original error\n    throw err;\n  }\n};\n\n/**\n * Sanitize a JSON-like string containing. For example changes JavaScript\n * notation into JSON notation.\n * This function for example changes a string like \"{a: 2, 'b': {c: 'd'}\"\n * into '{\"a\": 2, \"b\": {\"c\": \"d\"}'\n * @param {string} jsString\n * @returns {string} json\n */\nexports.sanitize = function (jsString) {\n  // escape all single and double quotes inside strings\n  var chars = [];\n  var i = 0;\n\n  //If JSON starts with a function (characters/digits/\"_-\"), remove this function.\n  //This is useful for \"stripping\" JSONP objects to become JSON\n  //For example: /* some comment */ function_12321321 ( [{\"a\":\"b\"}] ); => [{\"a\":\"b\"}]\n  var match = jsString.match(/^\\s*(\\/\\*(.|[\\r\\n])*?\\*\\/)?\\s*[\\da-zA-Z_$]+\\s*\\(([\\s\\S]*)\\)\\s*;?\\s*$/);\n  if (match) {\n    jsString = match[3];\n  }\n\n  var controlChars = {\n    '\\b': '\\\\b',\n    '\\f': '\\\\f',\n    '\\n': '\\\\n',\n    '\\r': '\\\\r',\n    '\\t': '\\\\t'\n  };\n\n  var quote = '\\'';\n  var quoteDbl = '\"';\n  var quoteLeft = '\\u2018';\n  var quoteRight = '\\u2019';\n  var quoteDblLeft = '\\u201C';\n  var quoteDblRight = '\\u201D';\n  var graveAccent = '\\u0060';\n  var acuteAccent = '\\u00B4';\n\n  // helper functions to get the current/prev/next character\n  function curr () { return jsString.charAt(i);     }\n  function next()  { return jsString.charAt(i + 1); }\n  function prev()  { return jsString.charAt(i - 1); }\n\n  function isWhiteSpace(c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t';\n  }\n\n  // get the last parsed non-whitespace character\n  function lastNonWhitespace () {\n    var p = chars.length - 1;\n\n    while (p >= 0) {\n      var pp = chars[p];\n      if (!isWhiteSpace(pp)) {\n        return pp;\n      }\n      p--;\n    }\n\n    return '';\n  }\n\n  // get at the first next non-white space character\n  function nextNonWhiteSpace() {\n    var iNext = i + 1;\n    while (iNext < jsString.length && isWhiteSpace(jsString[iNext])) {\n      iNext++;\n    }\n\n    return jsString[iNext];\n  }\n\n  // skip a block comment '/* ... */'\n  function skipBlockComment () {\n    i += 2;\n    while (i < jsString.length && (curr() !== '*' || next() !== '/')) {\n      i++;\n    }\n    i += 2;\n  }\n\n  // skip a comment '// ...'\n  function skipComment () {\n    i += 2;\n    while (i < jsString.length && (curr() !== '\\n')) {\n      i++;\n    }\n  }\n\n  // parse single or double quoted string\n  function parseString(endQuote) {\n    chars.push('\"');\n    i++;\n    var c = curr();\n    while (i < jsString.length && c !== endQuote) {\n      if (c === '\"' && prev() !== '\\\\') {\n        // unescaped double quote, escape it\n        chars.push('\\\\\"');\n      }\n      else if (controlChars.hasOwnProperty(c)) {\n        // replace unescaped control characters with escaped ones\n        chars.push(controlChars[c])\n      }\n      else if (c === '\\\\') {\n        // remove the escape character when followed by a single quote ', not needed\n        i++;\n        c = curr();\n        if (c !== '\\'') {\n          chars.push('\\\\');\n        }\n        chars.push(c);\n      }\n      else {\n        // regular character\n        chars.push(c);\n      }\n\n      i++;\n      c = curr();\n    }\n    if (c === endQuote) {\n      chars.push('\"');\n      i++;\n    }\n  }\n\n  // parse an unquoted key\n  function parseKey() {\n    var specialValues = ['null', 'true', 'false'];\n    var key = '';\n    var c = curr();\n\n    var regexp = /[a-zA-Z_$\\d]/; // letter, number, underscore, dollar character\n    while (regexp.test(c)) {\n      key += c;\n      i++;\n      c = curr();\n    }\n\n    if (specialValues.indexOf(key) === -1) {\n      chars.push('\"' + key + '\"');\n    }\n    else {\n      chars.push(key);\n    }\n  }\n\n  while(i < jsString.length) {\n    var c = curr();\n\n    if (c === '/' && next() === '*') {\n      skipBlockComment();\n    }\n    else if (c === '/' && next() === '/') {\n      skipComment();\n    }\n    else if (c === '\\u00A0' || (c >= '\\u2000' && c <= '\\u200A') || c === '\\u202F' || c === '\\u205F' || c === '\\u3000') {\n      // special white spaces (like non breaking space)\n      chars.push(' ');\n      i++\n    }\n    else if (c === quote) {\n      parseString(quote);\n    }\n    else if (c === quoteDbl) {\n      parseString(quoteDbl);\n    }\n    else if (c === graveAccent) {\n      parseString(acuteAccent);\n    }\n    else if (c === quoteLeft) {\n      parseString(quoteRight);\n    }\n    else if (c === quoteDblLeft) {\n      parseString(quoteDblRight);\n    }\n    else if (c === ',' && [']', '}'].indexOf(nextNonWhiteSpace()) !== -1) {\n      // skip trailing commas\n      i++;\n    }\n    else if (/[a-zA-Z_$]/.test(c) && ['{', ','].indexOf(lastNonWhitespace()) !== -1) {\n      // an unquoted object key (like a in '{a:2}')\n      parseKey();\n    }\n    else {\n      chars.push(c);\n      i++;\n    }\n  }\n\n  return chars.join('');\n};\n\n/**\n * Escape unicode characters.\n * For example input '\\u2661' (length 1) will output '\\\\u2661' (length 5).\n * @param {string} text\n * @return {string}\n */\nexports.escapeUnicodeChars = function (text) {\n  // see https://www.wikiwand.com/en/UTF-16\n  // note: we leave surrogate pairs as two individual chars,\n  // as JSON doesn't interpret them as a single unicode char.\n  return text.replace(/[\\u007F-\\uFFFF]/g, function(c) {\n    return '\\\\u'+('0000' + c.charCodeAt(0).toString(16)).slice(-4);\n  })\n};\n\n/**\n * Validate a string containing a JSON object\n * This method uses JSONLint to validate the String. If JSONLint is not\n * available, the built-in JSON parser of the browser is used.\n * @param {String} jsonString   String with an (invalid) JSON object\n * @throws Error\n */\nexports.validate = function validate(jsonString) {\n  if (typeof(jsonlint) != 'undefined') {\n    jsonlint.parse(jsonString);\n  }\n  else {\n    JSON.parse(jsonString);\n  }\n};\n\n/**\n * Extend object a with the properties of object b\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n */\nexports.extend = function extend(a, b) {\n  for (var prop in b) {\n    if (b.hasOwnProperty(prop)) {\n      a[prop] = b[prop];\n    }\n  }\n  return a;\n};\n\n/**\n * Remove all properties from object a\n * @param {Object} a\n * @return {Object} a\n */\nexports.clear = function clear (a) {\n  for (var prop in a) {\n    if (a.hasOwnProperty(prop)) {\n      delete a[prop];\n    }\n  }\n  return a;\n};\n\n/**\n * Get the type of an object\n * @param {*} object\n * @return {String} type\n */\nexports.type = function type (object) {\n  if (object === null) {\n    return 'null';\n  }\n  if (object === undefined) {\n    return 'undefined';\n  }\n  if ((object instanceof Number) || (typeof object === 'number')) {\n    return 'number';\n  }\n  if ((object instanceof String) || (typeof object === 'string')) {\n    return 'string';\n  }\n  if ((object instanceof Boolean) || (typeof object === 'boolean')) {\n    return 'boolean';\n  }\n  if ((object instanceof RegExp) || (typeof object === 'regexp')) {\n    return 'regexp';\n  }\n  if (exports.isArray(object)) {\n    return 'array';\n  }\n\n  return 'object';\n};\n\n/**\n * Test whether a text contains a url (matches when a string starts\n * with 'http://*' or 'https://*' and has no whitespace characters)\n * @param {String} text\n */\nvar isUrlRegex = /^https?:\\/\\/\\S+$/;\nexports.isUrl = function isUrl (text) {\n  return (typeof text == 'string' || text instanceof String) &&\n      isUrlRegex.test(text);\n};\n\n/**\n * Tes whether given object is an Array\n * @param {*} obj\n * @returns {boolean} returns true when obj is an array\n */\nexports.isArray = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\n/**\n * Retrieve the absolute left value of a DOM element\n * @param {Element} elem    A dom element, for example a div\n * @return {Number} left    The absolute left position of this element\n *                          in the browser page.\n */\nexports.getAbsoluteLeft = function getAbsoluteLeft(elem) {\n  var rect = elem.getBoundingClientRect();\n  return rect.left + window.pageXOffset || document.scrollLeft || 0;\n};\n\n/**\n * Retrieve the absolute top value of a DOM element\n * @param {Element} elem    A dom element, for example a div\n * @return {Number} top     The absolute top position of this element\n *                          in the browser page.\n */\nexports.getAbsoluteTop = function getAbsoluteTop(elem) {\n  var rect = elem.getBoundingClientRect();\n  return rect.top + window.pageYOffset || document.scrollTop || 0;\n};\n\n/**\n * add a className to the given elements style\n * @param {Element} elem\n * @param {String} className\n */\nexports.addClassName = function addClassName(elem, className) {\n  var classes = elem.className.split(' ');\n  if (classes.indexOf(className) == -1) {\n    classes.push(className); // add the class to the array\n    elem.className = classes.join(' ');\n  }\n};\n\n/**\n * remove all classes from the given elements style\n * @param {Element} elem \n */\nexports.removeAllClassNames = function removeAllClassNames(elem) {\n    elem.className = \"\";\n};\n\n/**\n * add a className to the given elements style\n * @param {Element} elem\n * @param {String} className\n */\nexports.removeClassName = function removeClassName(elem, className) {\n  var classes = elem.className.split(' ');\n  var index = classes.indexOf(className);\n  if (index != -1) {\n    classes.splice(index, 1); // remove the class from the array\n    elem.className = classes.join(' ');\n  }\n};\n\n/**\n * Strip the formatting from the contents of a div\n * the formatting from the div itself is not stripped, only from its childs.\n * @param {Element} divElement\n */\nexports.stripFormatting = function stripFormatting(divElement) {\n  var childs = divElement.childNodes;\n  for (var i = 0, iMax = childs.length; i < iMax; i++) {\n    var child = childs[i];\n\n    // remove the style\n    if (child.style) {\n      // TODO: test if child.attributes does contain style\n      child.removeAttribute('style');\n    }\n\n    // remove all attributes\n    var attributes = child.attributes;\n    if (attributes) {\n      for (var j = attributes.length - 1; j >= 0; j--) {\n        var attribute = attributes[j];\n        if (attribute.specified === true) {\n          child.removeAttribute(attribute.name);\n        }\n      }\n    }\n\n    // recursively strip childs\n    exports.stripFormatting(child);\n  }\n};\n\n/**\n * Set focus to the end of an editable div\n * code from Nico Burns\n * http://stackoverflow.com/users/140293/nico-burns\n * http://stackoverflow.com/questions/1125292/how-to-move-cursor-to-end-of-contenteditable-entity\n * @param {Element} contentEditableElement   A content editable div\n */\nexports.setEndOfContentEditable = function setEndOfContentEditable(contentEditableElement) {\n  var range, selection;\n  if(document.createRange) {\n    range = document.createRange();//Create a range (a range is a like the selection but invisible)\n    range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range\n    range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start\n    selection = window.getSelection();//get the selection object (allows you to change selection)\n    selection.removeAllRanges();//remove any selections already made\n    selection.addRange(range);//make the range you have just created the visible selection\n  }\n};\n\n/**\n * Select all text of a content editable div.\n * http://stackoverflow.com/a/3806004/1262753\n * @param {Element} contentEditableElement   A content editable div\n */\nexports.selectContentEditable = function selectContentEditable(contentEditableElement) {\n  if (!contentEditableElement || contentEditableElement.nodeName != 'DIV') {\n    return;\n  }\n\n  var sel, range;\n  if (window.getSelection && document.createRange) {\n    range = document.createRange();\n    range.selectNodeContents(contentEditableElement);\n    sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n};\n\n/**\n * Get text selection\n * http://stackoverflow.com/questions/4687808/contenteditable-selected-text-save-and-restore\n * @return {Range | TextRange | null} range\n */\nexports.getSelection = function getSelection() {\n  if (window.getSelection) {\n    var sel = window.getSelection();\n    if (sel.getRangeAt && sel.rangeCount) {\n      return sel.getRangeAt(0);\n    }\n  }\n  return null;\n};\n\n/**\n * Set text selection\n * http://stackoverflow.com/questions/4687808/contenteditable-selected-text-save-and-restore\n * @param {Range | TextRange | null} range\n */\nexports.setSelection = function setSelection(range) {\n  if (range) {\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }\n};\n\n/**\n * Get selected text range\n * @return {Object} params  object containing parameters:\n *                              {Number}  startOffset\n *                              {Number}  endOffset\n *                              {Element} container  HTML element holding the\n *                                                   selected text element\n *                          Returns null if no text selection is found\n */\nexports.getSelectionOffset = function getSelectionOffset() {\n  var range = exports.getSelection();\n\n  if (range && 'startOffset' in range && 'endOffset' in range &&\n      range.startContainer && (range.startContainer == range.endContainer)) {\n    return {\n      startOffset: range.startOffset,\n      endOffset: range.endOffset,\n      container: range.startContainer.parentNode\n    };\n  }\n\n  return null;\n};\n\n/**\n * Set selected text range in given element\n * @param {Object} params   An object containing:\n *                              {Element} container\n *                              {Number} startOffset\n *                              {Number} endOffset\n */\nexports.setSelectionOffset = function setSelectionOffset(params) {\n  if (document.createRange && window.getSelection) {\n    var selection = window.getSelection();\n    if(selection) {\n      var range = document.createRange();\n\n      if (!params.container.firstChild) {\n        params.container.appendChild(document.createTextNode(''));\n      }\n\n      // TODO: do not suppose that the first child of the container is a textnode,\n      //       but recursively find the textnodes\n      range.setStart(params.container.firstChild, params.startOffset);\n      range.setEnd(params.container.firstChild, params.endOffset);\n\n      exports.setSelection(range);\n    }\n  }\n};\n\n/**\n * Get the inner text of an HTML element (for example a div element)\n * @param {Element} element\n * @param {Object} [buffer]\n * @return {String} innerText\n */\nexports.getInnerText = function getInnerText(element, buffer) {\n  var first = (buffer == undefined);\n  if (first) {\n    buffer = {\n      'text': '',\n      'flush': function () {\n        var text = this.text;\n        this.text = '';\n        return text;\n      },\n      'set': function (text) {\n        this.text = text;\n      }\n    };\n  }\n\n  // text node\n  if (element.nodeValue) {\n    return buffer.flush() + element.nodeValue;\n  }\n\n  // divs or other HTML elements\n  if (element.hasChildNodes()) {\n    var childNodes = element.childNodes;\n    var innerText = '';\n\n    for (var i = 0, iMax = childNodes.length; i < iMax; i++) {\n      var child = childNodes[i];\n\n      if (child.nodeName == 'DIV' || child.nodeName == 'P') {\n        var prevChild = childNodes[i - 1];\n        var prevName = prevChild ? prevChild.nodeName : undefined;\n        if (prevName && prevName != 'DIV' && prevName != 'P' && prevName != 'BR') {\n          innerText += '\\n';\n          buffer.flush();\n        }\n        innerText += exports.getInnerText(child, buffer);\n        buffer.set('\\n');\n      }\n      else if (child.nodeName == 'BR') {\n        innerText += buffer.flush();\n        buffer.set('\\n');\n      }\n      else {\n        innerText += exports.getInnerText(child, buffer);\n      }\n    }\n\n    return innerText;\n  }\n  else {\n    if (element.nodeName == 'P' && exports.getInternetExplorerVersion() != -1) {\n      // On Internet Explorer, a <p> with hasChildNodes()==false is\n      // rendered with a new line. Note that a <p> with\n      // hasChildNodes()==true is rendered without a new line\n      // Other browsers always ensure there is a <br> inside the <p>,\n      // and if not, the <p> does not render a new line\n      return buffer.flush();\n    }\n  }\n\n  // br or unknown\n  return '';\n};\n\n/**\n * Test whether an element has the provided parent node somewhere up the node tree.\n * @param {Element} elem\n * @param {Element} parent\n * @return {boolean}\n */\nexports.hasParentNode = function (elem, parent) {\n  var e = elem ? elem.parentNode : undefined;\n\n  while (e) {\n    if (e === parent) {\n      return true;\n    }\n    e = e.parentNode;\n  }\n\n  return false;\n}\n\n/**\n * Returns the version of Internet Explorer or a -1\n * (indicating the use of another browser).\n * Source: http://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx\n * @return {Number} Internet Explorer version, or -1 in case of an other browser\n */\nexports.getInternetExplorerVersion = function getInternetExplorerVersion() {\n  if (_ieVersion == -1) {\n    var rv = -1; // Return value assumes failure.\n    if (typeof navigator !== 'undefined' && navigator.appName == 'Microsoft Internet Explorer') {\n      var ua = navigator.userAgent;\n      var re  = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n      if (re.exec(ua) != null) {\n        rv = parseFloat( RegExp.$1 );\n      }\n    }\n\n    _ieVersion = rv;\n  }\n\n  return _ieVersion;\n};\n\n/**\n * Test whether the current browser is Firefox\n * @returns {boolean} isFirefox\n */\nexports.isFirefox = function isFirefox () {\n  return (typeof navigator !== 'undefined' && navigator.userAgent.indexOf(\"Firefox\") !== -1);\n};\n\n/**\n * cached internet explorer version\n * @type {Number}\n * @private\n */\nvar _ieVersion = -1;\n\n/**\n * Add and event listener. Works for all browsers\n * @param {Element}     element    An html element\n * @param {string}      action     The action, for example \"click\",\n *                                 without the prefix \"on\"\n * @param {function}    listener   The callback function to be executed\n * @param {boolean}     [useCapture] false by default\n * @return {function}   the created event listener\n */\nexports.addEventListener = function addEventListener(element, action, listener, useCapture) {\n  if (element.addEventListener) {\n    if (useCapture === undefined)\n      useCapture = false;\n\n    if (action === \"mousewheel\" && exports.isFirefox()) {\n      action = \"DOMMouseScroll\";  // For Firefox\n    }\n\n    element.addEventListener(action, listener, useCapture);\n    return listener;\n  } else if (element.attachEvent) {\n    // Old IE browsers\n    var f = function () {\n      return listener.call(element, window.event);\n    };\n    element.attachEvent(\"on\" + action, f);\n    return f;\n  }\n};\n\n/**\n * Remove an event listener from an element\n * @param {Element}  element   An html dom element\n * @param {string}   action    The name of the event, for example \"mousedown\"\n * @param {function} listener  The listener function\n * @param {boolean}  [useCapture]   false by default\n */\nexports.removeEventListener = function removeEventListener(element, action, listener, useCapture) {\n  if (element.removeEventListener) {\n    if (useCapture === undefined)\n      useCapture = false;\n\n    if (action === \"mousewheel\" && exports.isFirefox()) {\n      action = \"DOMMouseScroll\";  // For Firefox\n    }\n\n    element.removeEventListener(action, listener, useCapture);\n  } else if (element.detachEvent) {\n    // Old IE browsers\n    element.detachEvent(\"on\" + action, listener);\n  }\n};\n\n/**\n * Test if an element is a child of a parent element.\n * @param {Element} elem\n * @param {Element} parent\n * @return {boolean} returns true if elem is a child of the parent\n */\nexports.isChildOf = function (elem, parent) {\n  var e = elem.parentNode;\n  while (e) {\n    if (e === parent) {\n      return true;\n    }\n    e = e.parentNode;\n  }\n\n  return false;\n};\n\n/**\n * Parse a JSON path like '.items[3].name' into an array\n * @param {string} jsonPath\n * @return {Array}\n */\nexports.parsePath = function parsePath(jsonPath) {\n  var path = [];\n  var i = 0;\n\n  function parseProperty () {\n    var prop = ''\n    while (jsonPath[i] !== undefined && /[\\w$]/.test(jsonPath[i])) {\n      prop += jsonPath[i];\n      i++;\n    }\n\n    if (prop === '') {\n      throw new Error('Invalid JSON path: property name expected at index ' + i);\n    }\n\n    return prop;\n  }\n\n  function parseIndex (end) {\n    var name = ''\n    while (jsonPath[i] !== undefined && jsonPath[i] !== end) {\n      name += jsonPath[i];\n      i++;\n    }\n\n    if (jsonPath[i] !== end) {\n      throw new Error('Invalid JSON path: unexpected end, character ' + end + ' expected')\n    }\n\n    return name;\n  }\n\n  while (jsonPath[i] !== undefined) {\n    if (jsonPath[i] === '.') {\n      i++;\n      path.push(parseProperty());\n    }\n    else if (jsonPath[i] === '[') {\n      i++;\n\n      if (jsonPath[i] === '\\'' || jsonPath[i] === '\"') {\n        var end = jsonPath[i]\n        i++;\n\n        path.push(parseIndex(end));\n\n        if (jsonPath[i] !== end) {\n          throw new Error('Invalid JSON path: closing quote \\' expected at index ' + i)\n        }\n        i++;\n      }\n      else {\n        var index = parseIndex(']').trim()\n        if (index.length === 0) {\n          throw new Error('Invalid JSON path: array value expected at index ' + i)\n        }\n        // Coerce numeric indices to numbers, but ignore star\n        index = index === '*' ? index : JSON.parse(index);\n        path.push(index);\n      }\n\n      if (jsonPath[i] !== ']') {\n        throw new Error('Invalid JSON path: closing bracket ] expected at index ' + i)\n      }\n      i++;\n    }\n    else {\n      throw new Error('Invalid JSON path: unexpected character \"' + jsonPath[i] + '\" at index ' + i);\n    }\n  }\n\n  return path;\n};\n\n/**\n * Stringify an array with a path in a JSON path like '.items[3].name'\n * @param {Array.<string | number>} path\n * @returns {string}\n */\nexports.stringifyPath = function stringifyPath(path) {\n  return path\n      .map(function (p) {\n        if (typeof p === 'number'){\n          return ('[' + p + ']');\n        } else if(typeof p === 'string' && p.match(/^[A-Za-z0-9_$]+$/)) {\n          return '.' + p;\n        } else {\n          return '[\"' + p + '\"]';\n        }\n      })\n      .join('');\n};\n\n/**\n * Improve the error message of a JSON schema error\n * @param {Object} error\n * @return {Object} The error\n */\nexports.improveSchemaError = function (error) {\n  if (error.keyword === 'enum' && Array.isArray(error.schema)) {\n    var enums = error.schema;\n    if (enums) {\n      enums = enums.map(function (value) {\n        return JSON.stringify(value);\n      });\n\n      if (enums.length > 5) {\n        var more = ['(' + (enums.length - 5) + ' more...)'];\n        enums = enums.slice(0, 5);\n        enums.push(more);\n      }\n      error.message = 'should be equal to one of: ' + enums.join(', ');\n    }\n  }\n\n  if (error.keyword === 'additionalProperties') {\n    error.message = 'should NOT have additional property: ' + error.params.additionalProperty;\n  }\n\n  return error;\n};\n\n/**\n * Test whether something is a Promise\n * @param {*} object\n * @returns {boolean} Returns true when object is a promise, false otherwise\n */\nexports.isPromise = function (object) {\n  return object && typeof object.then === 'function' && typeof object.catch === 'function';\n};\n\n/**\n * Test whether a custom validation error has the correct structure\n * @param {*} validationError The error to be checked.\n * @returns {boolean} Returns true if the structure is ok, false otherwise\n */\nexports.isValidValidationError = function (validationError) {\n  return typeof validationError === 'object' &&\n      Array.isArray(validationError.path) &&\n      typeof validationError.message === 'string';\n};\n\n/**\n * Test whether the child rect fits completely inside the parent rect.\n * @param {ClientRect} parent\n * @param {ClientRect} child\n * @param {number} margin\n */\nexports.insideRect = function (parent, child, margin) {\n  var _margin = margin !== undefined ? margin : 0;\n  return child.left   - _margin >= parent.left\n      && child.right  + _margin <= parent.right\n      && child.top    - _margin >= parent.top\n      && child.bottom + _margin <= parent.bottom;\n};\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds.\n *\n * Source: https://davidwalsh.name/javascript-debounce-function\n *\n * @param {function} func\n * @param {number} wait                 Number in milliseconds\n * @param {boolean} [immediate=false]   If `immediate` is passed, trigger the\n *                                      function on the leading edge, instead\n *                                      of the trailing.\n * @return {function} Return the debounced function\n */\nexports.debounce = function debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n\n/**\n * Determines the difference between two texts.\n * Can only detect one removed or inserted block of characters.\n * @param {string} oldText\n * @param {string} newText\n * @return {{start: number, end: number}} Returns the start and end\n *                                        of the changed part in newText.\n */\nexports.textDiff = function textDiff(oldText, newText) {\n  var len = newText.length;\n  var start = 0;\n  var oldEnd = oldText.length;\n  var newEnd = newText.length;\n\n  while (newText.charAt(start) === oldText.charAt(start)\n  && start < len) {\n    start++;\n  }\n\n  while (newText.charAt(newEnd - 1) === oldText.charAt(oldEnd - 1)\n  && newEnd > start && oldEnd > 0) {\n    newEnd--;\n    oldEnd--;\n  }\n\n  return {start: start, end: newEnd};\n};\n\n\n/**\n * Return an object with the selection range or cursor position (if both have the same value)\n * Support also old browsers (IE8-)\n * Source: http://ourcodeworld.com/articles/read/282/how-to-get-the-current-cursor-position-and-selection-within-a-text-input-or-textarea-in-javascript\n * @param {DOMElement} el A dom element of a textarea or input text.\n * @return {Object} reference Object with 2 properties (start and end) with the identifier of the location of the cursor and selected text.\n **/\nexports.getInputSelection = function(el) {\n  var startIndex = 0, endIndex = 0, normalizedValue, range, textInputRange, len, endRange;\n\n  if (typeof el.selectionStart == \"number\" && typeof el.selectionEnd == \"number\") {\n      startIndex = el.selectionStart;\n      endIndex = el.selectionEnd;\n  } else {\n      range = document.selection.createRange();\n\n      if (range && range.parentElement() == el) {\n          len = el.value.length;\n          normalizedValue = el.value.replace(/\\r\\n/g, \"\\n\");\n\n          // Create a working TextRange that lives only in the input\n          textInputRange = el.createTextRange();\n          textInputRange.moveToBookmark(range.getBookmark());\n\n          // Check if the startIndex and endIndex of the selection are at the very end\n          // of the input, since moveStart/moveEnd doesn't return what we want\n          // in those cases\n          endRange = el.createTextRange();\n          endRange.collapse(false);\n\n          if (textInputRange.compareEndPoints(\"StartToEnd\", endRange) > -1) {\n              startIndex = endIndex = len;\n          } else {\n              startIndex = -textInputRange.moveStart(\"character\", -len);\n              startIndex += normalizedValue.slice(0, startIndex).split(\"\\n\").length - 1;\n\n              if (textInputRange.compareEndPoints(\"EndToEnd\", endRange) > -1) {\n                  endIndex = len;\n              } else {\n                  endIndex = -textInputRange.moveEnd(\"character\", -len);\n                  endIndex += normalizedValue.slice(0, endIndex).split(\"\\n\").length - 1;\n              }\n          }\n      }\n  }\n\n  return {\n      startIndex: startIndex,\n      endIndex: endIndex,\n      start: _positionForIndex(startIndex),\n      end: _positionForIndex(endIndex)\n  };\n\n  /**\n   * Returns textarea row and column position for certain index\n   * @param {Number} index text index\n   * @returns {{row: Number, col: Number}}\n   */\n  function _positionForIndex(index) {\n    var textTillIndex = el.value.substring(0,index);\n    var row = (textTillIndex.match(/\\n/g) || []).length + 1;\n    var col = textTillIndex.length - textTillIndex.lastIndexOf(\"\\n\");\n\n    return {\n      row: row,\n      column: col\n    }\n  }\n}\n\n/**\n * Returns the index for certaion position in text element\n * @param {DOMElement} el A dom element of a textarea or input text.\n * @param {Number} row row value, > 0, if exceeds rows number - last row will be returned\n * @param {Number} column column value, > 0, if exceeds column length - end of column will be returned\n * @returns {Number} index of position in text, -1 if not found\n */\nexports.getIndexForPosition = function(el, row, column) {\n  var text = el.value || '';\n  if (row > 0 && column > 0) {\n    var rows = text.split('\\n', row);\n    row = Math.min(rows.length, row);\n    column = Math.min(rows[row - 1].length, column - 1);\n    var columnCount = (row == 1 ? column : column + 1); // count new line on multiple rows\n    return rows.slice(0, row - 1).join('\\n').length + columnCount;\n  }\n  return -1;\n}\n\n/**\n * Returns location of json paths in certain json string\n * @param {String} text json string\n * @param {Array<String>} paths array of json paths\n * @returns {Array<{path: String, line: Number, row: Number}>}\n */\nexports.getPositionForPath = function(text, paths) {\n  var me = this;\n  var result = [];\n  var jsmap;\n  if (!paths || !paths.length) {\n    return result;\n  }\n  \n  try {\n    jsmap = jsonMap.parse(text);    \n  } catch (err) {\n    return result;\n  }\n\n  paths.forEach(function (path) {\n    var pathArr = me.parsePath(path);\n    var pointerName = pathArr.length ? \"/\" + pathArr.join(\"/\") : \"\";\n    var pointer = jsmap.pointers[pointerName];\n    if (pointer) {\n      result.push({\n        path: path,\n        line: pointer.key ? pointer.key.line : (pointer.value ? pointer.value.line : 0),\n        column: pointer.key ? pointer.key.column : (pointer.value ? pointer.value.column : 0)\n      });\n    }\n  });\n\n  return result;\n  \n}\n\n/**\n * Get the applied color given a color name or code\n * Source: https://stackoverflow.com/questions/6386090/validating-css-color-names/33184805\n * @param {string} color\n * @returns {string | null} returns the color if the input is a valid\n *                   color, and returns null otherwise. Example output:\n *                   'rgba(255,0,0,0.7)' or 'rgb(255,0,0)'\n */\nexports.getColorCSS = function (color) {\n  var ele = document.createElement('div');\n  ele.style.color = color;\n  return ele.style.color.split(/\\s+/).join('').toLowerCase() || null;\n}\n\n/**\n * Test if a string contains a valid color name or code.\n * @param {string} color\n * @returns {boolean} returns true if a valid color, false otherwise\n */\nexports.isValidColor = function (color) {\n  return !!exports.getColorCSS(color);\n}\n\n/**\n * Make a tooltip for a field based on the field's schema.\n * @param {object} schema JSON schema\n * @param {string} [locale] Locale code (for example, zh-CN)\n * @returns {string} Field tooltip, may be empty string if all relevant schema properties are missing\n */\nexports.makeFieldTooltip = function (schema, locale) {\n  if (!schema) {\n    return '';\n  }\n  \n  var tooltip = '';\n  if (schema.title) {\n    tooltip += schema.title;\n  }\n  \n  if (schema.description) {\n    if (tooltip.length > 0) {\n      tooltip += '\\n';\n    }\n    tooltip += schema.description;\n  }\n\n  if (schema.default) {\n    if (tooltip.length > 0) {\n      tooltip += '\\n\\n';\n    }\n    tooltip += translate('default', undefined, locale) + '\\n';\n    tooltip += JSON.stringify(schema.default, null, 2);\n  }\n\n  if (Array.isArray(schema.examples) && schema.examples.length > 0) {\n    if (tooltip.length > 0) {\n      tooltip += '\\n\\n';\n    }\n    tooltip += translate('examples', undefined, locale) + '\\n';\n    schema.examples.forEach(function (example, index) {\n      tooltip += JSON.stringify(example, null, 2);\n      if (index !== schema.examples.length - 1) {\n        tooltip += '\\n';\n      }\n    });\n  }\n\n  return tooltip;\n}\n\n/**\n * Get a nested property from an object.\n * Returns undefined when the property does not exist.\n * @param {Object} object\n * @param {string[]} path\n * @return {*}\n */\nexports.get = function (object, path) {\n  var value = object\n\n  for (var i = 0; i < path.length && value !== undefined && value !== null; i++) {\n    value = value[path[i]]\n  }\n\n  return value;\n}\n\n/**\n * Find a unique name. Suffix the name with ' (copy)', '(copy 2)', etc\n * until a unique name is found\n * @param {string} name\n * @param {Array} existingPropNames    Array with existing prop names\n */\nexports.findUniqueName = function(name, existingPropNames) {\n  var strippedName = name.replace(/ \\(copy( \\d+)?\\)$/, '')\n  var validName = strippedName\n  var i = 1\n\n  while (existingPropNames.indexOf(validName) !== -1) {\n    var copy = 'copy' + (i > 1 ? (' ' + i) : '')\n    validName = strippedName + ' (' + copy + ')'\n    i++\n  }\n\n  return validName\n}\n","'use strict';\n\nvar MissingRefError = require('./error_classes').MissingRef;\n\nmodule.exports = compileAsync;\n\n\n/**\n * Creates validating function for passed schema with asynchronous loading of missing schemas.\n * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n * @this  Ajv\n * @param {Object}   schema schema object\n * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped\n * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.\n * @return {Promise} promise that resolves with a validating function.\n */\nfunction compileAsync(schema, meta, callback) {\n  /* eslint no-shadow: 0 */\n  /* global Promise */\n  /* jshint validthis: true */\n  var self = this;\n  if (typeof this._opts.loadSchema != 'function')\n    throw new Error('options.loadSchema should be a function');\n\n  if (typeof meta == 'function') {\n    callback = meta;\n    meta = undefined;\n  }\n\n  var p = loadMetaSchemaOf(schema).then(function () {\n    var schemaObj = self._addSchema(schema, undefined, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n\n  if (callback) {\n    p.then(\n      function(v) { callback(null, v); },\n      callback\n    );\n  }\n\n  return p;\n\n\n  function loadMetaSchemaOf(sch) {\n    var $schema = sch.$schema;\n    return $schema && !self.getSchema($schema)\n            ? compileAsync.call(self, { $ref: $schema }, true)\n            : Promise.resolve();\n  }\n\n\n  function _compileAsync(schemaObj) {\n    try { return self._compile(schemaObj); }\n    catch(e) {\n      if (e instanceof MissingRefError) return loadMissingSchema(e);\n      throw e;\n    }\n\n\n    function loadMissingSchema(e) {\n      var ref = e.missingSchema;\n      if (added(ref)) throw new Error('Schema ' + ref + ' is loaded but ' + e.missingRef + ' cannot be resolved');\n\n      var schemaPromise = self._loadingSchemas[ref];\n      if (!schemaPromise) {\n        schemaPromise = self._loadingSchemas[ref] = self._opts.loadSchema(ref);\n        schemaPromise.then(removePromise, removePromise);\n      }\n\n      return schemaPromise.then(function (sch) {\n        if (!added(ref)) {\n          return loadMetaSchemaOf(sch).then(function () {\n            if (!added(ref)) self.addSchema(sch, ref, undefined, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n\n      function removePromise() {\n        delete self._loadingSchemas[ref];\n      }\n\n      function added(ref) {\n        return self._refs[ref] || self._schemas[ref];\n      }\n    }\n  }\n}\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","'use strict';\nmodule.exports = function generate_required(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    if ($schema.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema;\n      if (arr1) {\n        var $property, i1 = -1,\n          l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && it.util.schemaHasRules($propertySch, it.RULES.all))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath,\n      $loopRequired = $isData || $required.length >= it.opts.loopRequired,\n      $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += ' var missing' + ($lvl) + '; ';\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += ' var ' + ($valid) + ' = true; ';\n        if ($isData) {\n          out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { ' + ($valid) + ' = ' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] !== undefined ';\n        if ($ownProperties) {\n          out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += '; if (!' + ($valid) + ') break; } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n        out += '  if (!' + ($valid) + ') {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      } else {\n        out += ' if ( ';\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ') {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += ' if (' + ($vSchema) + ' && !Array.isArray(' + ($vSchema) + ')) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is a required property';\n              } else {\n                out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (' + ($vSchema) + ' !== undefined) { ';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { if (' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] === undefined ';\n        if ($ownProperties) {\n          out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += ') {  var err =   '; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1,\n            l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'';\n                if (it.opts._errorDataPathProperty) {\n                  out += 'is a required property';\n                } else {\n                  out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                }\n                out += '\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += ' if (true) {';\n  }\n  return out;\n}\n","'use strict';\n\nvar jmespath = require('jmespath');\nvar naturalSort = require('javascript-natural-sort');\nvar createAbsoluteAnchor = require('./createAbsoluteAnchor').createAbsoluteAnchor;\nvar ContextMenu = require('./ContextMenu');\nvar appendNodeFactory = require('./appendNodeFactory');\nvar showMoreNodeFactory = require('./showMoreNodeFactory');\nvar showSortModal = require('./showSortModal');\nvar showTransformModal = require('./showTransformModal');\nvar util = require('./util');\nvar translate = require('./i18n').translate;\n\nvar DEFAULT_MODAL_ANCHOR = document.body; // TODO: this constant is defined twice\n\nvar YEAR_2000 = 946684800000;\n\n/**\n * @constructor Node\n * Create a new Node\n * @param {./treemode} editor\n * @param {Object} [params] Can contain parameters:\n *                          {string}  field\n *                          {boolean} fieldEditable\n *                          {*}       value\n *                          {String}  type  Can have values 'auto', 'array',\n *                                          'object', or 'string'.\n */\nfunction Node (editor, params) {\n  /** @type {./treemode} */\n  this.editor = editor;\n  this.dom = {};\n  this.expanded = false;\n\n  if(params && (params instanceof Object)) {\n    this.setField(params.field, params.fieldEditable);\n    if ('value' in params) {\n      this.setValue(params.value, params.type);\n    }\n    if ('internalValue' in params) {\n      this.setInternalValue(params.internalValue);\n    }\n  }\n  else {\n    this.setField('');\n    this.setValue(null);\n  }\n\n  this._debouncedOnChangeValue = util.debounce(this._onChangeValue.bind(this), Node.prototype.DEBOUNCE_INTERVAL);\n  this._debouncedOnChangeField = util.debounce(this._onChangeField.bind(this), Node.prototype.DEBOUNCE_INTERVAL);\n\n  // starting value for visible children\n  this.visibleChilds = this.getMaxVisibleChilds();\n}\n\n// debounce interval for keyboard input in milliseconds\nNode.prototype.DEBOUNCE_INTERVAL = 150;\n\n// search will stop iterating as soon as the max is reached\nNode.prototype.MAX_SEARCH_RESULTS = 999;\n\n// default number of child nodes to display \nvar DEFAULT_MAX_VISIBLE_CHILDS = 100;\n\nNode.prototype.getMaxVisibleChilds = function() {\n  return (this.editor && this.editor.options && this.editor.options.maxVisibleChilds)\n      ? this.editor.options.maxVisibleChilds\n      : DEFAULT_MAX_VISIBLE_CHILDS;\n}\n\n/**\n * Determine whether the field and/or value of this node are editable\n * @private\n */\nNode.prototype._updateEditability = function () {\n  this.editable = {\n    field: true,\n    value: true\n  };\n\n  if (this.editor) {\n    this.editable.field = this.editor.options.mode === 'tree';\n    this.editable.value = this.editor.options.mode !== 'view';\n\n    if ((this.editor.options.mode === 'tree' || this.editor.options.mode === 'form') &&\n        (typeof this.editor.options.onEditable === 'function')) {\n      var editable = this.editor.options.onEditable({\n        field: this.field,\n        value: this.value,\n        path: this.getPath()\n      });\n\n      if (typeof editable === 'boolean') {\n        this.editable.field = editable;\n        this.editable.value = editable;\n      }\n      else {\n        if (typeof editable.field === 'boolean') this.editable.field = editable.field;\n        if (typeof editable.value === 'boolean') this.editable.value = editable.value;\n      }\n    }\n  }\n};\n\n/**\n * Get the path of this node\n * @return {{string|number}[]} Array containing the path to this node.\n * Element is a number if is the index of an array, a string otherwise.\n */\nNode.prototype.getPath = function () {\n  var node = this;\n  var path = [];\n  while (node) {\n    var field = node.getName();\n    if (field !== undefined) {\n      path.unshift(field);\n    }\n    node = node.parent;\n  }\n  return path;\n};\n\n/**\n * Get the internal path of this node, a list with the child indexes.\n * @return {String[]} Array containing the internal path to this node\n */\nNode.prototype.getInternalPath = function () {\n  var node = this;\n  var internalPath = [];\n  while (node) {\n    if (node.parent) {\n      internalPath.unshift(node.getIndex());\n    }\n    node = node.parent;\n  }\n  return internalPath;\n};\n\n/**\n * Get node serializable name\n * @returns {String|Number}\n */\nNode.prototype.getName = function () {\n return !this.parent\n ? undefined  // do not add an (optional) field name of the root node\n :  (this.parent.type != 'array')\n     ? this.field\n     : this.index;\n};\n\n/**\n * Find child node by serializable path\n * @param {Array<String>} path\n */\nNode.prototype.findNodeByPath = function (path) {\n  if (!path) {\n    return;\n  }\n\n  if (path.length == 0) {\n    return this;\n  }\n\n  if (path.length && this.childs && this.childs.length) {\n    for (var i=0; i < this.childs.length; ++i) {\n      if (('' + path[0]) === ('' + this.childs[i].getName())) {\n        return this.childs[i].findNodeByPath(path.slice(1));\n      }\n    }\n  }\n};\n\n/**\n * Find child node by an internal path: the indexes of the childs nodes\n * @param {Array<String>} internalPath\n * @return {Node | undefined} Returns the node if the path exists.\n *                            Returns undefined otherwise.\n */\nNode.prototype.findNodeByInternalPath = function (internalPath) {\n  if (!internalPath) {\n    return undefined;\n  }\n\n  var node = this;\n  for (var i = 0; i < internalPath.length && node; i++) {\n    var childIndex = internalPath[i];\n    node = node.childs[childIndex];\n  }\n\n  return node;\n};\n\n/**\n * @typedef {{value: String|Object|Number|Boolean, path: Array.<String|Number>}} SerializableNode\n *\n * Returns serializable representation for the node\n * @return {SerializableNode}\n */\nNode.prototype.serialize = function () {\n  return {\n    value: this.getValue(),\n    path: this.getPath()\n  };\n};\n\n/**\n * Find a Node from a JSON path like '.items[3].name'\n * @param {string} jsonPath\n * @return {Node | null} Returns the Node when found, returns null if not found\n */\nNode.prototype.findNode = function (jsonPath) {\n  var path = util.parsePath(jsonPath);\n  var node = this;\n  while (node && path.length > 0) {\n    var prop = path.shift();\n    if (typeof prop === 'number') {\n      if (node.type !== 'array') {\n        throw new Error('Cannot get child node at index ' + prop + ': node is no array');\n      }\n      node = node.childs[prop];\n    }\n    else { // string\n      if (node.type !== 'object') {\n        throw new Error('Cannot get child node ' + prop + ': node is no object');\n      }\n      node = node.childs.filter(function (child) {\n        return child.field === prop;\n      })[0];\n    }\n  }\n\n  return node;\n};\n\n/**\n * Find all parents of this node. The parents are ordered from root node towards\n * the original node.\n * @return {Array.<Node>}\n */\nNode.prototype.findParents = function () {\n  var parents = [];\n  var parent = this.parent;\n  while (parent) {\n    parents.unshift(parent);\n    parent = parent.parent;\n  }\n  return parents;\n};\n\n/**\n *\n * @param {{dataPath: string, keyword: string, message: string, params: Object, schemaPath: string} | null} error\n * @param {Node} [child]  When this is the error of a parent node, pointing\n *                        to an invalid child node, the child node itself\n *                        can be provided. If provided, clicking the error\n *                        icon will set focus to the invalid child node.\n */\nNode.prototype.setError = function (error, child) {\n  this.error = error;\n  this.errorChild = child;\n\n  if (this.dom && this.dom.tr) {\n    this.updateError();\n  }\n};\n\n/**\n * Render the error\n */\nNode.prototype.updateError = function() {\n  var error = this.fieldError || this.valueError || this.error;\n  var tdError = this.dom.tdError;\n  if (error && this.dom && this.dom.tr) {\n    util.addClassName(this.dom.tr, 'jsoneditor-validation-error');\n\n    if (!tdError) {\n      tdError = document.createElement('td');\n      this.dom.tdError = tdError;\n      this.dom.tdValue.parentNode.appendChild(tdError);\n    }\n\n    var popover = document.createElement('div');\n    popover.className = 'jsoneditor-popover jsoneditor-right';\n    popover.appendChild(document.createTextNode(error.message));\n\n    var button = document.createElement('button');\n    button.type = 'button';\n    button.className = 'jsoneditor-button jsoneditor-schema-error';\n    button.appendChild(popover);\n\n    // update the direction of the popover\n    button.onmouseover = button.onfocus = function updateDirection() {\n      var directions = ['right', 'above', 'below', 'left'];\n      for (var i = 0; i < directions.length; i++) {\n        var direction = directions[i];\n        popover.className = 'jsoneditor-popover jsoneditor-' + direction;\n\n        var contentRect = this.editor.content.getBoundingClientRect();\n        var popoverRect = popover.getBoundingClientRect();\n        var margin = 20; // account for a scroll bar\n        var fit = util.insideRect(contentRect, popoverRect, margin);\n\n        if (fit) {\n          break;\n        }\n      }\n    }.bind(this);\n\n    // when clicking the error icon, expand all nodes towards the invalid\n    // child node, and set focus to the child node\n    var child = this.errorChild;\n    if (child) {\n      button.onclick = function showInvalidNode() {\n        child.findParents().forEach(function (parent) {\n          parent.expand(false);\n        });\n\n        child.scrollTo(function () {\n          child.focus();\n        });\n      };\n    }\n\n    // apply the error message to the node\n    while (tdError.firstChild) {\n      tdError.removeChild(tdError.firstChild);\n    }\n    tdError.appendChild(button);\n  }\n  else {\n    if (this.dom.tr) {\n      util.removeClassName(this.dom.tr, 'jsoneditor-validation-error');\n    }\n\n    if (tdError) {\n      this.dom.tdError.parentNode.removeChild(this.dom.tdError);\n      delete this.dom.tdError;\n    }\n  }\n};\n\n/**\n * Get the index of this node: the index in the list of childs where this\n * node is part of\n * @return {number | null} Returns the index, or null if this is the root node\n */\nNode.prototype.getIndex = function () {\n  if (this.parent) {\n    var index = this.parent.childs.indexOf(this);\n    return index !== -1 ? index : null;\n  }\n  else {\n    return -1;\n  }\n};\n\n/**\n * Set parent node\n * @param {Node} parent\n */\nNode.prototype.setParent = function(parent) {\n  this.parent = parent;\n};\n\n/**\n * Set field\n * @param {String}  field\n * @param {boolean} [fieldEditable]\n */\nNode.prototype.setField = function(field, fieldEditable) {\n  this.field = field;\n  this.previousField = field;\n  this.fieldEditable = (fieldEditable === true);\n};\n\n/**\n * Get field\n * @return {String}\n */\nNode.prototype.getField = function() {\n  if (this.field === undefined) {\n    this._getDomField();\n  }\n\n  return this.field;\n};\n\n/**\n * Set value. Value is a JSON structure or an element String, Boolean, etc.\n * @param {*} value\n * @param {String} [type]  Specify the type of the value. Can be 'auto',\n *                         'array', 'object', or 'string'\n */\nNode.prototype.setValue = function(value, type) {\n  var childValue, child, visible;\n  var i, j;\n  var notUpdateDom = false;\n  var previousChilds = this.childs;\n\n  this.type = this._getType(value);\n\n  // check if type corresponds with the provided type\n  if (type && type !== this.type) {\n    if (type === 'string' && this.type === 'auto') {\n      this.type = type;\n    }\n    else {\n      throw new Error('Type mismatch: ' +\n          'cannot cast value of type \"' + this.type +\n          ' to the specified type \"' + type + '\"');\n    }\n  }\n\n  if (this.type === 'array') {\n    // array\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    for (i = 0; i < value.length; i++) {\n      childValue = value[i];\n      if (childValue !== undefined && !(childValue instanceof Function)) {\n        if (i < this.childs.length) {\n          // reuse existing child, keep its state\n          child = this.childs[i];\n\n          child.fieldEditable = false;\n          child.index = i;\n          child.setValue(childValue);\n        }\n        else {\n          // create a new child\n          child = new Node(this.editor, {\n            value: childValue\n          });\n          visible = i < this.getMaxVisibleChilds();\n          this.appendChild(child, visible, notUpdateDom);\n        }\n      }\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length; j >= value.length; j--) {\n      this.removeChild(this.childs[j], notUpdateDom);\n    }\n  }\n  else if (this.type === 'object') {\n    // object\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length - 1; j >= 0; j--) {\n      if (!value.hasOwnProperty(this.childs[j].field)) {\n        this.removeChild(this.childs[j], notUpdateDom);\n      }\n    }\n\n    i = 0;\n    for (var childField in value) {\n      if (value.hasOwnProperty(childField)) {\n        childValue = value[childField];\n        if (childValue !== undefined && !(childValue instanceof Function)) {\n          child = this.findChildByProperty(childField);\n\n          if (child) {\n            // reuse existing child, keep its state\n            child.setField(childField, true);\n            child.setValue(childValue);\n          }\n          else {\n            // create a new child\n            child = new Node(this.editor, {\n              field: childField,\n              value: childValue\n            });\n            visible = i < this.getMaxVisibleChilds();\n            this.appendChild(child, visible, notUpdateDom);\n          }\n        }\n        i++;\n      }\n\n    }\n    this.value = '';\n\n    // sort object keys\n    if (this.editor.options.sortObjectKeys === true) {\n      this.sort([], 'asc');\n    }\n  }\n  else {\n    // value\n    this.hideChilds();\n\n    delete this.append;\n    delete this.showMore;\n    delete this.expanded;\n    delete this.childs;\n\n    this.value = value;\n  }\n\n  // recreate the DOM if switching from an object/array to auto/string or vice versa\n  // needed to recreated the expand button for example\n  if (Array.isArray(previousChilds) !== Array.isArray(this.childs)) {\n    this.recreateDom();\n  }\n\n  this.updateDom({'updateIndexes': true});\n\n  this.previousValue = this.value; // used only to check for changes in DOM vs JS model\n};\n\n/**\n * Set internal value\n * @param {*} internalValue  Internal value structure keeping type,\n *                           order and duplicates in objects\n */\nNode.prototype.setInternalValue = function(internalValue) {\n  var childValue, child, visible;\n  var i, j;\n  var notUpdateDom = false;\n  var previousChilds = this.childs;\n\n  this.type = internalValue.type;\n\n  if (internalValue.type === 'array') {\n    // array\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    for (i = 0; i < internalValue.childs.length; i++) {\n      childValue = internalValue.childs[i];\n      if (childValue !== undefined && !(childValue instanceof Function)) {\n        if (i < this.childs.length) {\n          // reuse existing child, keep its state\n          child = this.childs[i];\n\n          child.fieldEditable = false;\n          child.index = i;\n          child.setInternalValue(childValue);\n        }\n        else {\n          // create a new child\n          child = new Node(this.editor, {\n            internalValue: childValue\n          });\n          visible = i < this.getMaxVisibleChilds();\n          this.appendChild(child, visible, notUpdateDom);\n        }\n      }\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length; j >= internalValue.childs.length; j--) {\n      this.removeChild(this.childs[j], notUpdateDom);\n    }\n  }\n  else if (internalValue.type === 'object') {\n    // object\n    if (!this.childs) {\n      this.childs = [];\n    }\n\n    for (i = 0; i < internalValue.childs.length; i++) {\n      childValue = internalValue.childs[i];\n      if (childValue !== undefined && !(childValue instanceof Function)) {\n        if (i < this.childs.length) {\n          // reuse existing child, keep its state\n          child = this.childs[i];\n\n          delete child.index;\n          child.setField(childValue.field, true);\n          child.setInternalValue(childValue.value);\n        }\n        else {\n          // create a new child\n          child = new Node(this.editor, {\n            field: childValue.field,\n            internalValue: childValue.value\n          });\n          visible = i < this.getMaxVisibleChilds();\n          this.appendChild(child, visible, notUpdateDom);\n        }\n      }\n    }\n\n    // cleanup redundant childs\n    // we loop backward to prevent issues with shifting index numbers\n    for (j = this.childs.length; j >= internalValue.childs.length; j--) {\n      this.removeChild(this.childs[j], notUpdateDom);\n    }\n  }\n  else {\n    // value\n    this.hideChilds();\n\n    delete this.append;\n    delete this.showMore;\n    delete this.expanded;\n    delete this.childs;\n\n    this.value = internalValue.value;\n  }\n\n  // recreate the DOM if switching from an object/array to auto/string or vice versa\n  // needed to recreated the expand button for example\n  if (Array.isArray(previousChilds) !== Array.isArray(this.childs)) {\n    this.recreateDom();\n  }\n\n  this.updateDom({'updateIndexes': true});\n\n  this.previousValue = this.value; // used only to check for changes in DOM vs JS model\n};\n\n/**\n * Remove the DOM of this node and it's childs and recreate it again\n */\nNode.prototype.recreateDom = function() {\n  if (this.dom && this.dom.tr && this.dom.tr.parentNode) {\n    var domAnchor = this._detachFromDom();\n\n    this.clearDom();\n\n    this._attachToDom(domAnchor);\n  }\n  else {\n    this.clearDom();\n  }\n};\n\n/**\n * Get value. Value is a JSON structure\n * @return {*} value\n */\nNode.prototype.getValue = function() {\n  if (this.type == 'array') {\n    var arr = [];\n    this.childs.forEach (function (child) {\n      arr.push(child.getValue());\n    });\n    return arr;\n  }\n  else if (this.type == 'object') {\n    var obj = {};\n    this.childs.forEach (function (child) {\n      obj[child.getField()] = child.getValue();\n    });\n    return obj;\n  }\n  else {\n    if (this.value === undefined) {\n      this._getDomValue();\n    }\n\n    return this.value;\n  }\n};\n\n/**\n * Get internal value, a structure which maintains ordering and duplicates in objects\n * @return {*} value\n */\nNode.prototype.getInternalValue = function() {\n  if (this.type === 'array') {\n    return {\n      type: this.type,\n      childs: this.childs.map (function (child) {\n        return child.getInternalValue();\n      })\n    };\n  }\n  else if (this.type === 'object') {\n    return {\n      type: this.type,\n      childs: this.childs.map(function (child) {\n        return {\n          field: child.getField(),\n          value: child.getInternalValue()\n        }\n      })\n    };\n  }\n  else {\n    if (this.value === undefined) {\n      this._getDomValue();\n    }\n\n    return {\n      type: this.type,\n      value: this.value\n    };\n  }\n};\n\n/**\n * Get the nesting level of this node\n * @return {Number} level\n */\nNode.prototype.getLevel = function() {\n  return (this.parent ? this.parent.getLevel() + 1 : 0);\n};\n\n/**\n * Get jsonpath of the current node\n * @return {Node[]} Returns an array with nodes\n */\nNode.prototype.getNodePath = function () {\n  var path = this.parent ? this.parent.getNodePath() : [];\n  path.push(this);\n  return path;\n};\n\n/**\n * Create a clone of a node\n * The complete state of a clone is copied, including whether it is expanded or\n * not. The DOM elements are not cloned.\n * @return {Node} clone\n */\nNode.prototype.clone = function() {\n  var clone = new Node(this.editor);\n  clone.type = this.type;\n  clone.field = this.field;\n  clone.fieldInnerText = this.fieldInnerText;\n  clone.fieldEditable = this.fieldEditable;\n  clone.previousField = this.previousField;\n  clone.value = this.value;\n  clone.valueInnerText = this.valueInnerText;\n  clone.previousValue = this.previousValue;\n  clone.expanded = this.expanded;\n  clone.visibleChilds = this.visibleChilds;\n\n  if (this.childs) {\n    // an object or array\n    var cloneChilds = [];\n    this.childs.forEach(function (child) {\n      var childClone = child.clone();\n      childClone.setParent(clone);\n      cloneChilds.push(childClone);\n    });\n    clone.childs = cloneChilds;\n  }\n  else {\n    // a value\n    clone.childs = undefined;\n  }\n\n  return clone;\n};\n\n/**\n * Expand this node and optionally its childs.\n * @param {boolean} [recurse] Optional recursion, true by default. When\n *                            true, all childs will be expanded recursively\n */\nNode.prototype.expand = function(recurse) {\n  if (!this.childs) {\n    return;\n  }\n\n  // set this node expanded\n  this.expanded = true;\n  if (this.dom.expand) {\n    this.dom.expand.className = 'jsoneditor-button jsoneditor-expanded';\n  }\n\n  this.showChilds();\n\n  if (recurse !== false) {\n    this.childs.forEach(function (child) {\n      child.expand(recurse);\n    });\n  }\n};\n\n/**\n * Collapse this node and optionally its childs.\n * @param {boolean} [recurse] Optional recursion, true by default. When\n *                            true, all childs will be collapsed recursively\n */\nNode.prototype.collapse = function(recurse) {\n  if (!this.childs) {\n    return;\n  }\n\n  this.hideChilds();\n\n  // collapse childs in case of recurse\n  if (recurse !== false) {\n    this.childs.forEach(function (child) {\n      child.collapse(recurse);\n    });\n\n  }\n\n  // make this node collapsed\n  if (this.dom.expand) {\n    this.dom.expand.className = 'jsoneditor-button jsoneditor-collapsed';\n  }\n  this.expanded = false;\n};\n\n/**\n * Recursively show all childs when they are expanded\n */\nNode.prototype.showChilds = function() {\n  var childs = this.childs;\n  if (!childs) {\n    return;\n  }\n  if (!this.expanded) {\n    return;\n  }\n\n  var tr = this.dom.tr;\n  var table = tr ? tr.parentNode : undefined;\n  if (table) {\n    // show row with append button\n    var append = this.getAppendDom();\n    if (!append.parentNode) {\n      var nextTr = tr.nextSibling;\n      if (nextTr) {\n        table.insertBefore(append, nextTr);\n      }\n      else {\n        table.appendChild(append);\n      }\n    }\n\n    // show childs\n    var iMax = Math.min(this.childs.length, this.visibleChilds);\n    var nextTr = this._getNextTr();\n    for (var i = 0; i < iMax; i++) {\n      var child = this.childs[i];\n      if (!child.getDom().parentNode) {\n        table.insertBefore(child.getDom(), nextTr);\n      }\n      child.showChilds();\n    }\n\n    // show \"show more childs\" if limited\n    var showMore = this.getShowMoreDom();\n    var nextTr = this._getNextTr();\n    if (!showMore.parentNode) {\n      table.insertBefore(showMore, nextTr);\n    }\n    this.showMore.updateDom(); // to update the counter\n  }\n};\n\nNode.prototype._getNextTr = function() {\n  if (this.showMore && this.showMore.getDom().parentNode) {\n    return this.showMore.getDom();\n  }\n\n  if (this.append && this.append.getDom().parentNode) {\n    return this.append.getDom();\n  }\n};\n\n/**\n * Hide the node with all its childs\n * @param {{resetVisibleChilds: boolean}} [options]\n */\nNode.prototype.hide = function(options) {\n  var tr = this.dom.tr;\n  var table = tr ? tr.parentNode : undefined;\n  if (table) {\n    table.removeChild(tr);\n  }\n  this.hideChilds(options);\n};\n\n\n/**\n * Recursively hide all childs\n * @param {{resetVisibleChilds: boolean}} [options]\n */\nNode.prototype.hideChilds = function(options) {\n  var childs = this.childs;\n  if (!childs) {\n    return;\n  }\n  if (!this.expanded) {\n    return;\n  }\n\n  // hide append row\n  var append = this.getAppendDom();\n  if (append.parentNode) {\n    append.parentNode.removeChild(append);\n  }\n\n  // hide childs\n  this.childs.forEach(function (child) {\n    child.hide();\n  });\n\n  // hide \"show more\" row\n  var showMore = this.getShowMoreDom();\n  if (showMore.parentNode) {\n    showMore.parentNode.removeChild(showMore);\n  }\n\n  // reset max visible childs\n  if (!options || options.resetVisibleChilds) {\n    this.visibleChilds = this.getMaxVisibleChilds();\n  }\n};\n\n/**\n * set custom css classes on a node\n */\nNode.prototype._updateCssClassName = function () {\n  if(this.dom.field\n    && this.editor\n    && this.editor.options\n    && typeof this.editor.options.onClassName ==='function'\n    && this.dom.tree){\n      util.removeAllClassNames(this.dom.tree);\n      var addClasses = this.editor.options.onClassName({ path: this.getPath(), field: this.field, value: this.value }) || \"\";\n      util.addClassName(this.dom.tree, \"jsoneditor-values \" + addClasses);\n  }\n};\n\nNode.prototype.recursivelyUpdateCssClassesOnNodes = function () {\n  this._updateCssClassName();\n  if (Array.isArray(this.childs)) {\n    for (var i = 0; i < this.childs.length; i++) {\n      this.childs[i].recursivelyUpdateCssClassesOnNodes();\n    }\n  }\n}\n\n/**\n * Goes through the path from the node to the root and ensures that it is expanded\n */\nNode.prototype.expandTo = function() {\n  var currentNode = this.parent;\n  while (currentNode) {\n    if (!currentNode.expanded) {\n      currentNode.expand();\n    }\n    currentNode = currentNode.parent;\n  }\n};\n\n\n/**\n * Add a new child to the node.\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {boolean} [visible] If true (default), the child will be rendered\n * @param {boolean} [updateDom]  If true (default), the DOM of both parent\n *                               node and appended node will be updated\n *                               (child count, indexes)\n */\nNode.prototype.appendChild = function(node, visible, updateDom) {\n  if (this._hasChilds()) {\n    // adjust the link to the parent\n    node.setParent(this);\n    node.fieldEditable = (this.type == 'object');\n    if (this.type == 'array') {\n      node.index = this.childs.length;\n    }\n    if (this.type === 'object' && node.field == undefined) {\n      // initialize field value if needed\n      node.setField('');\n    }\n    this.childs.push(node);\n\n    if (this.expanded && visible !== false) {\n      // insert into the DOM, before the appendRow\n      var newTr = node.getDom();\n      var nextTr = this._getNextTr();\n      var table = nextTr ? nextTr.parentNode : undefined;\n      if (nextTr && table) {\n        table.insertBefore(newTr, nextTr);\n      }\n\n      node.showChilds();\n\n      this.visibleChilds++;\n    }\n\n    if (updateDom !== false) {\n      this.updateDom({'updateIndexes': true});\n      node.updateDom({'recurse': true});\n    }\n  }\n};\n\n\n/**\n * Move a node from its current parent to this node\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {Node} beforeNode\n */\nNode.prototype.moveBefore = function(node, beforeNode) {\n  if (this._hasChilds()) {\n    // create a temporary row, to prevent the scroll position from jumping\n    // when removing the node\n    var tbody = (this.dom.tr) ? this.dom.tr.parentNode : undefined;\n    if (tbody) {\n      var trTemp = document.createElement('tr');\n      trTemp.style.height = tbody.clientHeight + 'px';\n      tbody.appendChild(trTemp);\n    }\n\n    if (node.parent) {\n      node.parent.removeChild(node);\n    }\n\n    if (beforeNode instanceof AppendNode || !beforeNode) {\n      // the this.childs.length + 1 is to reckon with the node that we're about to add\n      if (this.childs.length + 1 > this.visibleChilds) {\n        var lastVisibleNode = this.childs[this.visibleChilds - 1];\n        this.insertBefore(node, lastVisibleNode);\n      }\n      else {\n        this.appendChild(node);\n      }\n    }\n    else {\n      this.insertBefore(node, beforeNode);\n    }\n\n    if (tbody) {\n      tbody.removeChild(trTemp);\n    }\n  }\n};\n\n/**\n * Insert a new child before a given node\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {Node} beforeNode\n */\nNode.prototype.insertBefore = function(node, beforeNode) {\n  if (this._hasChilds()) {\n    this.visibleChilds++;\n\n    // initialize field value if needed\n    if (this.type === 'object' && node.field == undefined) {\n      node.setField('');\n    }\n\n    if (beforeNode === this.append) {\n      // append to the child nodes\n\n      // adjust the link to the parent\n      node.setParent(this);\n      node.fieldEditable = (this.type == 'object');\n      this.childs.push(node);\n    }\n    else {\n      // insert before a child node\n      var index = this.childs.indexOf(beforeNode);\n      if (index == -1) {\n        throw new Error('Node not found');\n      }\n\n      // adjust the link to the parent\n      node.setParent(this);\n      node.fieldEditable = (this.type == 'object');\n      this.childs.splice(index, 0, node);\n    }\n\n    if (this.expanded) {\n      // insert into the DOM\n      var newTr = node.getDom();\n      var nextTr = beforeNode.getDom();\n      var table = nextTr ? nextTr.parentNode : undefined;\n      if (nextTr && table) {\n        table.insertBefore(newTr, nextTr);\n      }\n\n      node.showChilds();\n      this.showChilds();\n    }\n\n    this.updateDom({'updateIndexes': true});\n    node.updateDom({'recurse': true});\n  }\n};\n\n/**\n * Insert a new child before a given node\n * Only applicable when Node value is of type array or object\n * @param {Node} node\n * @param {Node} afterNode\n */\nNode.prototype.insertAfter = function(node, afterNode) {\n  if (this._hasChilds()) {\n    var index = this.childs.indexOf(afterNode);\n    var beforeNode = this.childs[index + 1];\n    if (beforeNode) {\n      this.insertBefore(node, beforeNode);\n    }\n    else {\n      this.appendChild(node);\n    }\n  }\n};\n\n/**\n * Search in this node\n * Searches are case insensitive.\n * @param {String} text\n * @param {Node[]} [results] Array where search results will be added\n *                           used to count and limit the results whilst iterating\n * @return {Node[]} results  Array with nodes containing the search text\n */\nNode.prototype.search = function(text, results) {\n  if (!Array.isArray(results)) {\n    results = [];\n  }\n  var index;\n  var search = text ? text.toLowerCase() : undefined;\n\n  // delete old search data\n  delete this.searchField;\n  delete this.searchValue;\n\n  // search in field\n  if (this.field !== undefined && results.length <= this.MAX_SEARCH_RESULTS) {\n    var field = String(this.field).toLowerCase();\n    index = field.indexOf(search);\n    if (index !== -1) {\n      this.searchField = true;\n      results.push({\n        'node': this,\n        'elem': 'field'\n      });\n    }\n\n    // update dom\n    this._updateDomField();\n  }\n\n  // search in value\n  if (this._hasChilds()) {\n    // array, object\n\n    // search the nodes childs\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.search(text, results);\n      });\n    }\n  }\n  else {\n    // string, auto\n    if (this.value !== undefined  && results.length <= this.MAX_SEARCH_RESULTS) {\n      var value = String(this.value).toLowerCase();\n      index = value.indexOf(search);\n      if (index !== -1) {\n        this.searchValue = true;\n        results.push({\n          'node': this,\n          'elem': 'value'\n        });\n      }\n\n      // update dom\n      this._updateDomValue();\n    }\n  }\n\n  return results;\n};\n\n/**\n * Move the scroll position such that this node is in the visible area.\n * The node will not get the focus\n * @param {function(boolean)} [callback]\n */\nNode.prototype.scrollTo = function(callback) {\n  this.expandPathToNode();\n\n  if (this.dom.tr && this.dom.tr.parentNode) {\n    this.editor.scrollTo(this.dom.tr.offsetTop, callback);\n  }\n};\n\n/**\n * if the node is not visible, expand its parents\n */\nNode.prototype.expandPathToNode = function () {\n  var node = this;\n  var recurse = false;\n  while (node && node.parent) {\n    // expand visible childs of the parent if needed\n    var index = node.parent.type === 'array'\n        ? node.index\n        : node.parent.childs.indexOf(node);\n    while (node.parent.visibleChilds < index + 1) {\n      node.parent.visibleChilds += this.getMaxVisibleChilds();\n    }\n\n    // expand the parent itself\n    node.parent.expand(recurse);\n    node = node.parent;\n  }\n};\n\n\n// stores the element name currently having the focus\nNode.focusElement = undefined;\n\n/**\n * Set focus to this node\n * @param {String} [elementName]  The field name of the element to get the\n *                                focus available values: 'drag', 'menu',\n *                                'expand', 'field', 'value' (default)\n */\nNode.prototype.focus = function(elementName) {\n  Node.focusElement = elementName;\n\n  if (this.dom.tr && this.dom.tr.parentNode) {\n    var dom = this.dom;\n\n    switch (elementName) {\n      case 'drag':\n        if (dom.drag) {\n          dom.drag.focus();\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n\n      case 'menu':\n        dom.menu.focus();\n        break;\n\n      case 'expand':\n        if (this._hasChilds()) {\n          dom.expand.focus();\n        }\n        else if (dom.field && this.fieldEditable) {\n          dom.field.focus();\n          util.selectContentEditable(dom.field);\n        }\n        else if (dom.value && !this._hasChilds()) {\n          dom.value.focus();\n          util.selectContentEditable(dom.value);\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n\n      case 'field':\n        if (dom.field && this.fieldEditable) {\n          dom.field.focus();\n          util.selectContentEditable(dom.field);\n        }\n        else if (dom.value && !this._hasChilds()) {\n          dom.value.focus();\n          util.selectContentEditable(dom.value);\n        }\n        else if (this._hasChilds()) {\n          dom.expand.focus();\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n\n      case 'value':\n      default:\n        if (dom.select) {\n          // enum select box\n          dom.select.focus();\n        }\n        else if (dom.value && !this._hasChilds()) {\n          dom.value.focus();\n          util.selectContentEditable(dom.value);\n        }\n        else if (dom.field && this.fieldEditable) {\n          dom.field.focus();\n          util.selectContentEditable(dom.field);\n        }\n        else if (this._hasChilds()) {\n          dom.expand.focus();\n        }\n        else {\n          dom.menu.focus();\n        }\n        break;\n    }\n  }\n};\n\n/**\n * Select all text in an editable div after a delay of 0 ms\n * @param {Element} editableDiv\n */\nNode.select = function(editableDiv) {\n  setTimeout(function () {\n    util.selectContentEditable(editableDiv);\n  }, 0);\n};\n\n/**\n * Check if given node is a child. The method will check recursively to find\n * this node.\n * @param {Node} node\n * @return {boolean} containsNode\n */\nNode.prototype.containsNode = function(node) {\n  if (this == node) {\n    return true;\n  }\n\n  var childs = this.childs;\n  if (childs) {\n    // TODO: use the js5 Array.some() here?\n    for (var i = 0, iMax = childs.length; i < iMax; i++) {\n      if (childs[i].containsNode(node)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\n/**\n * Remove a child from the node.\n * Only applicable when Node value is of type array or object\n * @param {Node} node   The child node to be removed;\n * @param {boolean} [updateDom]  If true (default), the DOM of the parent\n *                               node will be updated (like child count)\n * @return {Node | undefined} node  The removed node on success,\n *                                             else undefined\n */\nNode.prototype.removeChild = function(node, updateDom) {\n  if (this.childs) {\n    var index = this.childs.indexOf(node);\n\n    if (index !== -1) {\n      if (index < this.visibleChilds && this.expanded) {\n        this.visibleChilds--;\n      }\n\n      node.hide();\n\n      // delete old search results\n      delete node.searchField;\n      delete node.searchValue;\n\n      var removedNode = this.childs.splice(index, 1)[0];\n      removedNode.parent = null;\n\n      if (updateDom !== false) {\n        this.updateDom({'updateIndexes': true});\n      }\n\n      return removedNode;\n    }\n  }\n\n  return undefined;\n};\n\n/**\n * Remove a child node node from this node\n * This method is equal to Node.removeChild, except that _remove fire an\n * onChange event.\n * @param {Node} node\n * @private\n */\nNode.prototype._remove = function (node) {\n  this.removeChild(node);\n};\n\n/**\n * Change the type of the value of this Node\n * @param {String} newType\n */\nNode.prototype.changeType = function (newType) {\n  var oldType = this.type;\n\n  if (oldType == newType) {\n    // type is not changed\n    return;\n  }\n\n  if ((newType == 'string' || newType == 'auto') &&\n      (oldType == 'string' || oldType == 'auto')) {\n    // this is an easy change\n    this.type = newType;\n  }\n  else {\n    // change from array to object, or from string/auto to object/array\n    var domAnchor = this._detachFromDom();\n\n    // delete the old DOM\n    this.clearDom();\n\n    // adjust the field and the value\n    this.type = newType;\n\n    // adjust childs\n    if (newType == 'object') {\n      if (!this.childs) {\n        this.childs = [];\n      }\n\n      this.childs.forEach(function (child) {\n        child.clearDom();\n        delete child.index;\n        child.fieldEditable = true;\n        if (child.field == undefined) {\n          child.field = '';\n        }\n      });\n\n      if (oldType == 'string' || oldType == 'auto') {\n        this.expanded = true;\n      }\n    }\n    else if (newType == 'array') {\n      if (!this.childs) {\n        this.childs = [];\n      }\n\n      this.childs.forEach(function (child, index) {\n        child.clearDom();\n        child.fieldEditable = false;\n        child.index = index;\n      });\n\n      if (oldType == 'string' || oldType == 'auto') {\n        this.expanded = true;\n      }\n    }\n    else {\n      this.expanded = false;\n    }\n\n    this._attachToDom(domAnchor);\n  }\n\n  if (newType == 'auto' || newType == 'string') {\n    // cast value to the correct type\n    if (newType == 'string') {\n      this.value = String(this.value);\n    }\n    else {\n      this.value = this._stringCast(String(this.value));\n    }\n\n    this.focus();\n  }\n\n  this.updateDom({'updateIndexes': true});\n};\n\n/**\n * Test whether the JSON contents of this node are deep equal to provided JSON object.\n * @param {*} json\n */\nNode.prototype.deepEqual = function (json) {\n  var i;\n\n  if (this.type === 'array') {\n    if (!Array.isArray(json)) {\n      return false;\n    }\n\n    if (this.childs.length !== json.length) {\n      return false;\n    }\n\n    for (i = 0; i < this.childs.length; i++) {\n      if (!this.childs[i].deepEqual(json[i])) {\n        return false;\n      }\n    }\n  }\n  else if (this.type === 'object') {\n    if (typeof json !== 'object' || !json) {\n      return false;\n    }\n\n    // TODO: for better efficiency, we could create a property `isDuplicate` on all of the childs\n    // and keep that up to date. This should make deepEqual about 20% faster.\n    var props = {};\n    var propCount = 0;\n    for (i = 0; i < this.childs.length; i++) {\n      var child = this.childs[i];\n      if (!props[child.field]) {\n        // We can have childs with duplicate field names.\n        // We take the first, and ignore the others.\n        props[child.field] = true;\n        propCount++;\n\n        if (!(child.field in json)) {\n          return false;\n        }\n\n        if (!child.deepEqual(json[child.field])) {\n          return false;\n        }\n      }\n    }\n\n    if (propCount !== Object.keys(json).length) {\n      return false;\n    }\n  }\n  else {\n    if (this.value !== json) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * Retrieve value from DOM\n * @private\n */\nNode.prototype._getDomValue = function() {\n  this._clearValueError();\n\n  if (this.dom.value && this.type != 'array' && this.type != 'object') {\n    this.valueInnerText = util.getInnerText(this.dom.value);\n  }\n\n  if (this.valueInnerText != undefined) {\n    try {\n      // retrieve the value\n      var value;\n      if (this.type == 'string') {\n        value = this._unescapeHTML(this.valueInnerText);\n      }\n      else {\n        var str = this._unescapeHTML(this.valueInnerText);\n        value = this._stringCast(str);\n      }\n      if (value !== this.value) {\n        this.value = value;\n        this._debouncedOnChangeValue();\n      }\n    }\n    catch (err) {\n      // keep the previous value\n      this._setValueError(translate('cannotParseValueError'));\n    }\n  }\n};\n\n/**\n * Show a local error in case of invalid value\n * @param {string} message\n * @private\n */\nNode.prototype._setValueError = function (message) {\n  this.valueError = {\n    message: message\n  };\n  this.updateError();\n}\n\nNode.prototype._clearValueError = function () {\n  if (this.valueError) {\n    this.valueError = null;\n    this.updateError();\n  }\n}\n\n/**\n * Show a local error in case of invalid or duplicate field\n * @param {string} message\n * @private\n */\nNode.prototype._setFieldError = function (message) {\n  this.fieldError = {\n    message: message\n  };\n  this.updateError();\n}\n\nNode.prototype._clearFieldError = function () {\n  if (this.fieldError) {\n    this.fieldError = null;\n    this.updateError();\n  }\n}\n\n/**\n * Handle a changed value\n * @private\n */\nNode.prototype._onChangeValue = function () {\n  // get current selection, then override the range such that we can select\n  // the added/removed text on undo/redo\n  var oldSelection = this.editor.getDomSelection();\n  if (oldSelection.range) {\n    var undoDiff = util.textDiff(String(this.value), String(this.previousValue));\n    oldSelection.range.startOffset = undoDiff.start;\n    oldSelection.range.endOffset = undoDiff.end;\n  }\n  var newSelection = this.editor.getDomSelection();\n  if (newSelection.range) {\n    var redoDiff = util.textDiff(String(this.previousValue), String(this.value));\n    newSelection.range.startOffset = redoDiff.start;\n    newSelection.range.endOffset = redoDiff.end;\n  }\n\n  this.editor._onAction('editValue', {\n    path: this.getInternalPath(),\n    oldValue: this.previousValue,\n    newValue: this.value,\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n\n  this.previousValue = this.value;\n};\n\n/**\n * Handle a changed field\n * @private\n */\nNode.prototype._onChangeField = function () {\n  // get current selection, then override the range such that we can select\n  // the added/removed text on undo/redo\n  var oldSelection = this.editor.getDomSelection();\n  var previous = this.previousField || '';\n  if (oldSelection.range) {\n    var undoDiff = util.textDiff(this.field, previous);\n    oldSelection.range.startOffset = undoDiff.start;\n    oldSelection.range.endOffset = undoDiff.end;\n  }\n  var newSelection = this.editor.getDomSelection();\n  if (newSelection.range) {\n    var redoDiff = util.textDiff(previous, this.field);\n    newSelection.range.startOffset = redoDiff.start;\n    newSelection.range.endOffset = redoDiff.end;\n  }\n\n  this.editor._onAction('editField', {\n    parentPath: this.parent.getInternalPath(),\n    index: this.getIndex(),\n    oldValue: this.previousField,\n    newValue: this.field,\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n\n  this.previousField = this.field;\n};\n\n/**\n * Update dom value:\n * - the text color of the value, depending on the type of the value\n * - the height of the field, depending on the width\n * - background color in case it is empty\n * @private\n */\nNode.prototype._updateDomValue = function () {\n  var domValue = this.dom.value;\n  if (domValue) {\n    var classNames = ['jsoneditor-value'];\n\n    // set text color depending on value type\n    var value = this.value;\n    var type = (this.type == 'auto') ? util.type(value) : this.type;\n    var isUrl = type == 'string' && util.isUrl(value);\n    classNames.push('jsoneditor-' + type);\n    if (isUrl) {\n      classNames.push('jsoneditor-url');\n    }\n\n    // visual styling when empty\n    var isEmpty = (String(this.value) == '' && this.type != 'array' && this.type != 'object');\n    if (isEmpty) {\n      classNames.push('jsoneditor-empty');\n    }\n\n    // highlight when there is a search result\n    if (this.searchValueActive) {\n      classNames.push('jsoneditor-highlight-active');\n    }\n    if (this.searchValue) {\n      classNames.push('jsoneditor-highlight');\n    }\n\n    domValue.className = classNames.join(' ');\n\n    // update title\n    if (type == 'array' || type == 'object') {\n      var count = this.childs ? this.childs.length : 0;\n      domValue.title = this.type + ' containing ' + count + ' items';\n    }\n    else if (isUrl && this.editable.value) {\n      domValue.title = translate('openUrl');\n    }\n    else {\n      domValue.title = '';\n    }\n\n    // show checkbox when the value is a boolean\n    if (type === 'boolean' && this.editable.value) {\n      if (!this.dom.checkbox) {\n        this.dom.checkbox = document.createElement('input');\n        this.dom.checkbox.type = 'checkbox';\n        this.dom.tdCheckbox = document.createElement('td');\n        this.dom.tdCheckbox.className = 'jsoneditor-tree';\n        this.dom.tdCheckbox.appendChild(this.dom.checkbox);\n\n        this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox, this.dom.tdValue);\n      }\n\n      this.dom.checkbox.checked = this.value;\n    }\n    else {\n      // cleanup checkbox when displayed\n      if (this.dom.tdCheckbox) {\n        this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox);\n        delete this.dom.tdCheckbox;\n        delete this.dom.checkbox;\n      }\n    }\n\n    // create select box when this node has an enum object\n    if (this.enum && this.editable.value) {\n      if (!this.dom.select) {\n        this.dom.select = document.createElement('select');\n        this.id = this.field + \"_\" + new Date().getUTCMilliseconds();\n        this.dom.select.id = this.id;\n        this.dom.select.name = this.dom.select.id;\n\n        //Create the default empty option\n        this.dom.select.option = document.createElement('option');\n        this.dom.select.option.value = '';\n        this.dom.select.option.innerHTML = '--';\n        this.dom.select.appendChild(this.dom.select.option);\n\n        //Iterate all enum values and add them as options\n        for(var i = 0; i < this.enum.length; i++) {\n          this.dom.select.option = document.createElement('option');\n          this.dom.select.option.value = this.enum[i];\n          this.dom.select.option.innerHTML = this.enum[i];\n          if(this.dom.select.option.value == this.value){\n            this.dom.select.option.selected = true;\n          }\n          this.dom.select.appendChild(this.dom.select.option);\n        }\n\n        this.dom.tdSelect = document.createElement('td');\n        this.dom.tdSelect.className = 'jsoneditor-tree';\n        this.dom.tdSelect.appendChild(this.dom.select);\n        this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect, this.dom.tdValue);\n      }\n\n      // If the enum is inside a composite type display\n      // both the simple input and the dropdown field\n      if(this.schema && (\n          !this.schema.hasOwnProperty(\"oneOf\") &&\n          !this.schema.hasOwnProperty(\"anyOf\") &&\n          !this.schema.hasOwnProperty(\"allOf\"))\n      ) {\n        this.valueFieldHTML = this.dom.tdValue.innerHTML;\n        this.dom.tdValue.style.visibility = 'hidden';\n        this.dom.tdValue.innerHTML = '';\n      } else {\n        delete this.valueFieldHTML;\n      }\n    }\n    else {\n      // cleanup select box when displayed\n      if (this.dom.tdSelect) {\n        this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect);\n        delete this.dom.tdSelect;\n        delete this.dom.select;\n        this.dom.tdValue.innerHTML = this.valueFieldHTML;\n        this.dom.tdValue.style.visibility = '';\n        delete this.valueFieldHTML;\n      }\n    }\n\n    // show color picker when value is a color\n    if (this.editable.value &&\n        this.editor.options.colorPicker &&\n        typeof value === 'string' &&\n        util.isValidColor(value)) {\n\n      if (!this.dom.color) {\n        this.dom.color = document.createElement('div');\n        this.dom.color.className = 'jsoneditor-color';\n\n        this.dom.tdColor = document.createElement('td');\n        this.dom.tdColor.className = 'jsoneditor-tree';\n        this.dom.tdColor.appendChild(this.dom.color);\n\n        this.dom.tdValue.parentNode.insertBefore(this.dom.tdColor, this.dom.tdValue);\n\n        // this is a bit hacky, overriding the text color like this. find a nicer solution\n        this.dom.value.style.color = '#1A1A1A';\n      }\n\n      // update the color background\n      this.dom.color.style.backgroundColor = value;\n    }\n    else {\n      // cleanup color picker when displayed\n      this._deleteDomColor();\n    }\n\n    // show date tag when value is a timestamp in milliseconds\n    if (this.editor.options.timestampTag &&\n        typeof value === 'number' &&\n        value > YEAR_2000 &&\n        !isNaN(new Date(value).valueOf())) {\n\n      if (!this.dom.date) {\n        this.dom.date = document.createElement('div');\n        this.dom.date.className = 'jsoneditor-date'\n        this.dom.value.parentNode.appendChild(this.dom.date);\n      }\n\n      this.dom.date.innerHTML = new Date(value).toISOString();\n      this.dom.date.title = new Date(value).toString();\n    }\n    else {\n      // cleanup date tag\n      if (this.dom.date) {\n        this.dom.date.parentNode.removeChild(this.dom.date);\n        delete this.dom.date;\n      }\n    }\n\n    // strip formatting from the contents of the editable div\n    util.stripFormatting(domValue);\n\n    this._updateDomDefault();\n  }\n};\n\nNode.prototype._deleteDomColor = function () {\n  if (this.dom.color) {\n    this.dom.tdColor.parentNode.removeChild(this.dom.tdColor);\n    delete this.dom.tdColor;\n    delete this.dom.color;\n\n    this.dom.value.style.color = '';\n  }\n}\n\n/**\n * Update dom field:\n * - the text color of the field, depending on the text\n * - the height of the field, depending on the width\n * - background color in case it is empty\n * @private\n */\nNode.prototype._updateDomField = function () {\n  var domField = this.dom.field;\n  if (domField) {\n    var tooltip = util.makeFieldTooltip(this.schema, this.editor.options.language);\n    if (tooltip) {\n      domField.title = tooltip;\n    }\n\n    // make backgound color lightgray when empty\n    var isEmpty = (String(this.field) == '' && this.parent.type != 'array');\n    if (isEmpty) {\n      util.addClassName(domField, 'jsoneditor-empty');\n    }\n    else {\n      util.removeClassName(domField, 'jsoneditor-empty');\n    }\n\n    // highlight when there is a search result\n    if (this.searchFieldActive) {\n      util.addClassName(domField, 'jsoneditor-highlight-active');\n    }\n    else {\n      util.removeClassName(domField, 'jsoneditor-highlight-active');\n    }\n    if (this.searchField) {\n      util.addClassName(domField, 'jsoneditor-highlight');\n    }\n    else {\n      util.removeClassName(domField, 'jsoneditor-highlight');\n    }\n\n    // strip formatting from the contents of the editable div\n    util.stripFormatting(domField);\n  }\n};\n\n/**\n * Retrieve field from DOM\n * @param {boolean} [forceUnique]  If true, the field name will be changed\n *                                 into a unique name in case it is a duplicate.\n * @private\n */\nNode.prototype._getDomField = function(forceUnique) {\n  this._clearFieldError();\n\n  if (this.dom.field && this.fieldEditable) {\n    this.fieldInnerText = util.getInnerText(this.dom.field);\n  }\n\n  if (this.fieldInnerText !== undefined) {\n    try {\n      var field = this._unescapeHTML(this.fieldInnerText);\n\n      var existingFieldNames = this.parent.getFieldNames(this);\n      var isDuplicate = existingFieldNames.indexOf(field) !== -1;\n\n      if (!isDuplicate) {\n        if (field !== this.field) {\n          this.field = field;\n          this._debouncedOnChangeField();\n        }\n      }\n      else {\n        if (forceUnique) {\n          // fix duplicate field: change it into a unique name\n          field = util.findUniqueName(field, existingFieldNames);\n          if (field !== this.field) {\n            this.field = field;\n\n            // TODO: don't debounce but resolve right away, and cancel current debounce\n            this._debouncedOnChangeField();\n          }\n        }\n        else {\n          this._setFieldError(translate('duplicateFieldError'));\n        }\n      }\n    }\n    catch (err) {\n      // keep the previous field value\n      this._setFieldError(translate('cannotParseFieldError'));\n    }\n  }\n};\n\n/**\n * Update the value of the schema default element in the DOM.\n * @private\n * @returns {undefined}\n */\nNode.prototype._updateDomDefault = function () {\n  // Short-circuit if schema is missing, has no default, or if Node has children\n  if (!this.schema || this.schema.default === undefined || this._hasChilds()) {\n    return;\n  }\n\n  // select either enum dropdown (select) or input value\n  var inputElement = this.dom.select\n      ? this.dom.select\n      : this.dom.value;\n\n  if (!inputElement) {\n    return;\n  }\n\n  if (this.value === this.schema.default) {\n    inputElement.title = translate('default');\n    util.addClassName(inputElement, 'jsoneditor-is-default');\n    util.removeClassName(inputElement, 'jsoneditor-is-not-default');\n  } else {\n    inputElement.removeAttribute('title');\n    util.removeClassName(inputElement, 'jsoneditor-is-default');\n    util.addClassName(inputElement, 'jsoneditor-is-not-default');\n  }\n};\n\n/**\n * Clear the dom of the node\n */\nNode.prototype.clearDom = function() {\n  // TODO: hide the node first?\n  //this.hide();\n  // TODO: recursively clear dom?\n\n  this.dom = {};\n};\n\n/**\n * Get the HTML DOM TR element of the node.\n * The dom will be generated when not yet created\n * @return {Element} tr    HTML DOM TR Element\n */\nNode.prototype.getDom = function() {\n  var dom = this.dom;\n  if (dom.tr) {\n    return dom.tr;\n  }\n\n  this._updateEditability();\n\n  // create row\n  dom.tr = document.createElement('tr');\n  dom.tr.node = this;\n\n  if (this.editor.options.mode === 'tree') { // note: we take here the global setting\n    var tdDrag = document.createElement('td');\n    if (this.editable.field) {\n      // create draggable area\n      if (this.parent) {\n        var domDrag = document.createElement('button');\n        domDrag.type = 'button';\n        dom.drag = domDrag;\n        domDrag.className = 'jsoneditor-button jsoneditor-dragarea';\n        domDrag.title = translate('drag');\n        tdDrag.appendChild(domDrag);\n      }\n    }\n    dom.tr.appendChild(tdDrag);\n\n    // create context menu\n    var tdMenu = document.createElement('td');\n    var menu = document.createElement('button');\n    menu.type = 'button';\n    dom.menu = menu;\n    menu.className = 'jsoneditor-button jsoneditor-contextmenu';\n    menu.title = translate('actionsMenu');\n    tdMenu.appendChild(dom.menu);\n    dom.tr.appendChild(tdMenu);\n  }\n\n  // create tree and field\n  var tdField = document.createElement('td');\n  dom.tr.appendChild(tdField);\n  dom.tree = this._createDomTree();\n  tdField.appendChild(dom.tree);\n\n  this.updateDom({'updateIndexes': true});\n\n  return dom.tr;\n};\n\n/**\n * Test whether a Node is rendered and visible\n * @returns {boolean}\n */\nNode.prototype.isVisible = function () {\n  return this.dom && this.dom.tr && this.dom.tr.parentNode || false\n};\n\n/**\n * DragStart event, fired on mousedown on the dragarea at the left side of a Node\n * @param {Node[] | Node} nodes\n * @param {Event} event\n */\nNode.onDragStart = function (nodes, event) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDragStart([nodes], event);\n  }\n  if (nodes.length === 0) {\n    return;\n  }\n\n  var firstNode = nodes[0];\n  var lastNode = nodes[nodes.length - 1];\n  var parent = firstNode.parent;\n  var draggedNode = Node.getNodeFromTarget(event.target);\n  var editor = firstNode.editor;\n\n  // in case of multiple selected nodes, offsetY prevents the selection from\n  // jumping when you start dragging one of the lower down nodes in the selection\n  var offsetY = util.getAbsoluteTop(draggedNode.dom.tr) - util.getAbsoluteTop(firstNode.dom.tr);\n\n  if (!editor.mousemove) {\n    editor.mousemove = util.addEventListener(window, 'mousemove', function (event) {\n      Node.onDrag(nodes, event);\n    });\n  }\n\n  if (!editor.mouseup) {\n    editor.mouseup = util.addEventListener(window, 'mouseup',function (event ) {\n      Node.onDragEnd(nodes, event);\n    });\n  }\n\n  editor.highlighter.lock();\n  editor.drag = {\n    oldCursor: document.body.style.cursor,\n    oldSelection: editor.getDomSelection(),\n    oldPaths: nodes.map(getInternalPath),\n    oldParent: parent,\n    oldNextNode: parent.childs[lastNode.getIndex() + 1] || parent.append,\n    oldParentPathRedo: parent.getInternalPath(),\n    oldIndexRedo: firstNode.getIndex(),\n    mouseX: event.pageX,\n    offsetY: offsetY,\n    level: firstNode.getLevel()\n  };\n  document.body.style.cursor = 'move';\n\n  event.preventDefault();\n};\n\n/**\n * Drag event, fired when moving the mouse while dragging a Node\n * @param {Node[] | Node} nodes\n * @param {Event} event\n */\nNode.onDrag = function (nodes, event) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDrag([nodes], event);\n  }\n  if (nodes.length === 0) {\n    return;\n  }\n\n  // TODO: this method has grown too large. Split it in a number of methods\n  var editor = nodes[0].editor;\n  var mouseY = event.pageY - editor.drag.offsetY;\n  var mouseX = event.pageX;\n  var trThis, trPrev, trNext, trFirst, trLast, trRoot;\n  var nodePrev, nodeNext;\n  var topThis, topPrev, topFirst, heightThis, bottomNext, heightNext;\n  var moved = false;\n\n  // TODO: add an ESC option, which resets to the original position\n\n  // move up/down\n  var firstNode = nodes[0];\n  trThis = firstNode.dom.tr;\n  topThis = util.getAbsoluteTop(trThis);\n  heightThis = trThis.offsetHeight;\n  if (mouseY < topThis) {\n    // move up\n    trPrev = trThis;\n    do {\n      trPrev = trPrev.previousSibling;\n      nodePrev = Node.getNodeFromTarget(trPrev);\n      topPrev = trPrev ? util.getAbsoluteTop(trPrev) : 0;\n    }\n    while (trPrev && mouseY < topPrev);\n\n    if (nodePrev && !nodePrev.parent) {\n      nodePrev = undefined;\n    }\n\n    if (!nodePrev) {\n      // move to the first node\n      trRoot = trThis.parentNode.firstChild;\n      trPrev = trRoot ? trRoot.nextSibling : undefined;\n      nodePrev = Node.getNodeFromTarget(trPrev);\n      if (nodePrev == firstNode) {\n        nodePrev = undefined;\n      }\n    }\n\n    if (nodePrev && nodePrev.isVisible()) {\n      // check if mouseY is really inside the found node\n      trPrev = nodePrev.dom.tr;\n      topPrev = trPrev ? util.getAbsoluteTop(trPrev) : 0;\n      if (mouseY > topPrev + heightThis) {\n        nodePrev = undefined;\n      }\n    }\n\n    if (nodePrev) {\n      nodes.forEach(function (node) {\n        nodePrev.parent.moveBefore(node, nodePrev);\n      });\n      moved = true;\n    }\n  }\n  else {\n    // move down\n    var lastNode = nodes[nodes.length - 1];\n    trLast = (lastNode.expanded && lastNode.append) ? lastNode.append.getDom() : lastNode.dom.tr;\n    trFirst = trLast ? trLast.nextSibling : undefined;\n    if (trFirst) {\n      topFirst = util.getAbsoluteTop(trFirst);\n      trNext = trFirst;\n      do {\n        nodeNext = Node.getNodeFromTarget(trNext);\n        if (trNext) {\n          bottomNext = trNext.nextSibling ?\n              util.getAbsoluteTop(trNext.nextSibling) : 0;\n          heightNext = trNext ? (bottomNext - topFirst) : 0;\n\n          if (nodeNext &&\n              nodeNext.parent.childs.length == nodes.length &&\n              nodeNext.parent.childs[nodes.length - 1] == lastNode) {\n            // We are about to remove the last child of this parent,\n            // which will make the parents appendNode visible.\n            topThis += 27;\n            // TODO: dangerous to suppose the height of the appendNode a constant of 27 px.\n          }\n\n          trNext = trNext.nextSibling;\n        }\n      }\n      while (trNext && mouseY > topThis + heightNext);\n\n      if (nodeNext && nodeNext.parent) {\n        // calculate the desired level\n        var diffX = (mouseX - editor.drag.mouseX);\n        var diffLevel = Math.round(diffX / 24 / 2);\n        var level = editor.drag.level + diffLevel; // desired level\n        var levelNext = nodeNext.getLevel();     // level to be\n\n        // find the best fitting level (move upwards over the append nodes)\n        trPrev = nodeNext.dom.tr && nodeNext.dom.tr.previousSibling;\n        while (levelNext < level && trPrev) {\n          nodePrev = Node.getNodeFromTarget(trPrev);\n\n          var isDraggedNode = nodes.some(function (node) {\n            return node === nodePrev || nodePrev.isDescendantOf(node);\n          });\n\n          if (isDraggedNode) {\n            // neglect the dragged nodes themselves and their childs\n          }\n          else if (nodePrev instanceof AppendNode) {\n            var childs = nodePrev.parent.childs;\n            if (childs.length != nodes.length || childs[nodes.length - 1] != lastNode) {\n              // non-visible append node of a list of childs\n              // consisting of not only this node (else the\n              // append node will change into a visible \"empty\"\n              // text when removing this node).\n              nodeNext = Node.getNodeFromTarget(trPrev);\n              levelNext = nodeNext.getLevel();\n            }\n            else {\n              break;\n            }\n          }\n          else {\n            break;\n          }\n\n          trPrev = trPrev.previousSibling;\n        }\n\n        if (nodeNext instanceof AppendNode && !nodeNext.isVisible() &&\n            nodeNext.parent.showMore.isVisible()) {\n          nodeNext = nodeNext._nextNode();\n        }\n\n        // move the node when its position is changed\n        if (nodeNext && nodeNext.dom.tr && trLast.nextSibling != nodeNext.dom.tr) {\n          nodes.forEach(function (node) {\n            nodeNext.parent.moveBefore(node, nodeNext);\n          });\n          moved = true;\n        }\n      }\n    }\n  }\n\n  if (moved) {\n    // update the dragging parameters when moved\n    editor.drag.mouseX = mouseX;\n    editor.drag.level = firstNode.getLevel();\n  }\n\n  // auto scroll when hovering around the top of the editor\n  editor.startAutoScroll(mouseY);\n\n  event.preventDefault();\n};\n\n/**\n * Drag event, fired on mouseup after having dragged a node\n * @param {Node[] | Node} nodes\n * @param {Event} event\n */\nNode.onDragEnd = function (nodes, event) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDrag([nodes], event);\n  }\n  if (nodes.length === 0) {\n    return;\n  }\n\n  var firstNode = nodes[0];\n  var editor = firstNode.editor;\n\n  // set focus to the context menu button of the first node\n  if (nodes[0]) {\n    nodes[0].dom.menu.focus();\n  }\n\n  var oldParentPath = editor.drag.oldParent.getInternalPath();\n  var newParentPath = firstNode.parent.getInternalPath();\n  var sameParent = editor.drag.oldParent === firstNode.parent;\n  var oldIndex = editor.drag.oldNextNode.getIndex();\n  var newIndex = firstNode.getIndex();\n  var oldParentPathRedo = editor.drag.oldParentPathRedo;\n\n  var oldIndexRedo = editor.drag.oldIndexRedo;\n  var newIndexRedo = (sameParent && oldIndexRedo < newIndex)\n      ? (newIndex + nodes.length)\n      : newIndex;\n\n  if (!sameParent || oldIndexRedo !== newIndex) {\n    // only register this action if the node is actually moved to another place\n    editor._onAction('moveNodes', {\n      count: nodes.length,\n      fieldNames: nodes.map(getField),\n\n      oldParentPath: oldParentPath,\n      newParentPath: newParentPath,\n      oldIndex: oldIndex,\n      newIndex: newIndex,\n\n      oldIndexRedo: oldIndexRedo,\n      newIndexRedo: newIndexRedo,\n      oldParentPathRedo: oldParentPathRedo,\n      newParentPathRedo: null, // This is a hack, value will be filled in during undo\n\n      oldSelection: editor.drag.oldSelection,\n      newSelection: editor.getDomSelection()\n    });\n  }\n\n  document.body.style.cursor = editor.drag.oldCursor;\n  editor.highlighter.unlock();\n  nodes.forEach(function (node) {\n    node.updateDom();\n\n    if (event.target !== node.dom.drag && event.target !== node.dom.menu) {\n      editor.highlighter.unhighlight();\n    }\n  });\n  delete editor.drag;\n\n  if (editor.mousemove) {\n    util.removeEventListener(window, 'mousemove', editor.mousemove);\n    delete editor.mousemove;\n  }\n  if (editor.mouseup) {\n    util.removeEventListener(window, 'mouseup', editor.mouseup);\n    delete editor.mouseup;\n  }\n\n  // Stop any running auto scroll\n  editor.stopAutoScroll();\n\n  event.preventDefault();\n};\n\n/**\n * Test if this node is a sescendant of an other node\n * @param {Node} node\n * @return {boolean} isDescendant\n * @private\n */\nNode.prototype.isDescendantOf = function (node) {\n  var n = this.parent;\n  while (n) {\n    if (n == node) {\n      return true;\n    }\n    n = n.parent;\n  }\n\n  return false;\n};\n\n/**\n * Create an editable field\n * @return {Element} domField\n * @private\n */\nNode.prototype._createDomField = function () {\n  return document.createElement('div');\n};\n\n/**\n * Set highlighting for this node and all its childs.\n * Only applied to the currently visible (expanded childs)\n * @param {boolean} highlight\n */\nNode.prototype.setHighlight = function (highlight) {\n  if (this.dom.tr) {\n    if (highlight) {\n      util.addClassName(this.dom.tr, 'jsoneditor-highlight');\n    }\n    else {\n      util.removeClassName(this.dom.tr, 'jsoneditor-highlight');\n    }\n\n    if (this.append) {\n      this.append.setHighlight(highlight);\n    }\n\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.setHighlight(highlight);\n      });\n    }\n  }\n};\n\n/**\n * Select or deselect a node\n * @param {boolean} selected\n * @param {boolean} [isFirst]\n */\nNode.prototype.setSelected = function (selected, isFirst) {\n  this.selected = selected;\n\n  if (this.dom.tr) {\n    if (selected) {\n      util.addClassName(this.dom.tr, 'jsoneditor-selected');\n    }\n    else {\n      util.removeClassName(this.dom.tr, 'jsoneditor-selected');\n    }\n\n    if (isFirst) {\n      util.addClassName(this.dom.tr, 'jsoneditor-first');\n    }\n    else {\n      util.removeClassName(this.dom.tr, 'jsoneditor-first');\n    }\n\n    if (this.append) {\n      this.append.setSelected(selected);\n    }\n\n    if (this.showMore) {\n      this.showMore.setSelected(selected);\n    }\n\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.setSelected(selected);\n      });\n    }\n  }\n};\n\n/**\n * Update the value of the node. Only primitive types are allowed, no Object\n * or Array is allowed.\n * @param {String | Number | Boolean | null} value\n */\nNode.prototype.updateValue = function (value) {\n  this.value = value;\n  this.previousValue = value;\n  this.valueError = undefined;\n  this.updateDom();\n};\n\n/**\n * Update the field of the node.\n * @param {String} field\n */\nNode.prototype.updateField = function (field) {\n  this.field = field;\n  this.previousField = field;\n  this.fieldError = undefined;\n  this.updateDom();\n};\n\n/**\n * Update the HTML DOM, optionally recursing through the childs\n * @param {Object} [options] Available parameters:\n *                          {boolean} [recurse]         If true, the\n *                          DOM of the childs will be updated recursively.\n *                          False by default.\n *                          {boolean} [updateIndexes]   If true, the childs\n *                          indexes of the node will be updated too. False by\n *                          default.\n */\nNode.prototype.updateDom = function (options) {\n  // update level indentation\n  var domTree = this.dom.tree;\n  if (domTree) {\n    domTree.style.marginLeft = this.getLevel() * 24 + 'px';\n  }\n\n  // apply field to DOM\n  var domField = this.dom.field;\n  if (domField) {\n    if (this.fieldEditable) {\n      // parent is an object\n      domField.contentEditable = this.editable.field;\n      domField.spellcheck = false;\n      domField.className = 'jsoneditor-field';\n    }\n    else {\n      // parent is an array this is the root node\n      domField.contentEditable = false;\n      domField.className = 'jsoneditor-readonly';\n    }\n\n    var fieldText;\n    if (this.index != undefined) {\n      fieldText = this.index;\n    }\n    else if (this.field != undefined) {\n      fieldText = this.field;\n    }\n    else if (this._hasChilds()) {\n      fieldText = this.type;\n    }\n    else {\n      fieldText = '';\n    }\n    domField.innerHTML = this._escapeHTML(fieldText);\n\n    this._updateSchema();\n  }\n\n  // apply value to DOM\n  var domValue = this.dom.value;\n  if (domValue) {\n    if (this.type == 'array') {\n      this.updateNodeName();\n      util.addClassName(this.dom.tr, 'jsoneditor-expandable');\n    }\n    else if (this.type == 'object') {\n      this.updateNodeName();\n      util.addClassName(this.dom.tr, 'jsoneditor-expandable');\n    }\n    else {\n      domValue.innerHTML = this._escapeHTML(this.value);\n      util.removeClassName(this.dom.tr, 'jsoneditor-expandable');\n    }\n  }\n\n  // update field and value\n  this._updateDomField();\n  this._updateDomValue();\n\n  this._updateCssClassName();\n\n  // update childs indexes\n  if (options && options.updateIndexes === true) {\n    // updateIndexes is true or undefined\n    this._updateDomIndexes();\n  }\n\n  // update childs recursively\n  if (options && options.recurse === true) {\n    if (this.childs) {\n      this.childs.forEach(function (child) {\n        child.updateDom(options);\n      });\n    }\n  }\n\n  // update rendering of error\n  if (this.error) {\n    this.updateError()\n  }\n\n  // update row with append button\n  if (this.append) {\n    this.append.updateDom();\n  }\n\n  // update \"show more\" text at the bottom of large arrays\n  if (this.showMore) {\n    this.showMore.updateDom();\n  }\n};\n\n/**\n * Locate the JSON schema of the node and check for any enum type\n * @private\n */\nNode.prototype._updateSchema = function () {\n  //Locating the schema of the node and checking for any enum type\n  if(this.editor && this.editor.options) {\n    // find the part of the json schema matching this nodes path\n    this.schema = this.editor.options.schema\n        // fix childSchema with $ref, and not display the select element on the child schema because of not found enum\n        ? Node._findSchema(this.editor.options.schema, this.editor.options.schemaRefs || {}, this.getPath())\n        : null;\n    if (this.schema) {\n      this.enum = Node._findEnum(this.schema);\n    }\n    else {\n      delete this.enum;\n    }\n  }\n};\n\n/**\n * find an enum definition in a JSON schema, as property `enum` or inside\n * one of the schemas composites (`oneOf`, `anyOf`, `allOf`)\n * @param  {Object} schema\n * @return {Array | null} Returns the enum when found, null otherwise.\n * @private\n */\nNode._findEnum = function (schema) {\n  if (schema.enum) {\n    return schema.enum;\n  }\n\n  var composite = schema.oneOf || schema.anyOf || schema.allOf;\n  if (composite) {\n    var match = composite.filter(function (entry) {return entry.enum});\n    if (match.length > 0) {\n      return match[0].enum;\n    }\n  }\n\n  return null\n};\n\n/**\n * Return the part of a JSON schema matching given path.\n * @param {Object} schema\n * @param {Object} schemaRefs\n * @param {Array.<string | number>} path\n * @return {Object | null}\n * @private\n */\nNode._findSchema = function (schema, schemaRefs, path) {\n  var childSchema = schema;\n  var foundSchema = childSchema;\n\n  var allSchemas = schema.oneOf || schema.anyOf || schema.allOf;\n  if (!allSchemas) {\n    allSchemas = [schema];\n  }\n\n  for (var j = 0; j < allSchemas.length; j++) {\n    childSchema = allSchemas[j];\n\n    if ('$ref' in childSchema && typeof childSchema['$ref'] === 'string') {\n      childSchema = schemaRefs[childSchema['$ref']];\n      if (childSchema) {\n        foundSchema = Node._findSchema(childSchema, schemaRefs, path);\n      }\n    }\n\n    for (var i = 0; i < path.length && childSchema; i++) {\n      var nextPath = path.slice(i + 1, path.length);\n      var key = path[i];\n\n      if (typeof key === 'string' && childSchema.patternProperties && !(childSchema.properties && key in childSchema.properties)) {\n        for (var prop in childSchema.patternProperties) {\n          if (key.match(prop)) {\n            foundSchema = Node._findSchema(childSchema.patternProperties[prop], schemaRefs, nextPath);\n          }\n        }\n      }\n      else if (typeof key === 'string' && childSchema.properties) {\n        if (!(key in childSchema.properties)) {\n          foundSchema = null;\n        } else {\n          childSchema = childSchema.properties[key];\n          if (childSchema) {\n            foundSchema = Node._findSchema(childSchema, schemaRefs, nextPath);\n          }\n        }\n      }\n      else if (typeof key === 'number' && childSchema.items) {\n        childSchema = childSchema.items;\n        if (childSchema) {\n          foundSchema = Node._findSchema(childSchema, schemaRefs, nextPath);\n        }\n      }\n    }\n\n  }\n\n  // If the found schema is the input schema, the schema does not have the given path\n  if (foundSchema === schema && path.length > 0) {\n    return null;\n  }\n\n  return foundSchema\n};\n\n/**\n * Update the DOM of the childs of a node: update indexes and undefined field\n * names.\n * Only applicable when structure is an array or object\n * @private\n */\nNode.prototype._updateDomIndexes = function () {\n  var domValue = this.dom.value;\n  var childs = this.childs;\n  if (domValue && childs) {\n    if (this.type == 'array') {\n      childs.forEach(function (child, index) {\n        child.index = index;\n        var childField = child.dom.field;\n        if (childField) {\n          childField.innerHTML = index;\n        }\n      });\n    }\n    else if (this.type == 'object') {\n      childs.forEach(function (child) {\n        if (child.index != undefined) {\n          delete child.index;\n\n          if (child.field == undefined) {\n            child.field = '';\n          }\n        }\n      });\n    }\n  }\n};\n\n/**\n * Create an editable value\n * @private\n */\nNode.prototype._createDomValue = function () {\n  var domValue;\n\n  if (this.type == 'array') {\n    domValue = document.createElement('div');\n    domValue.innerHTML = '[...]';\n  }\n  else if (this.type == 'object') {\n    domValue = document.createElement('div');\n    domValue.innerHTML = '{...}';\n  }\n  else {\n    if (!this.editable.value && util.isUrl(this.value)) {\n      // create a link in case of read-only editor and value containing an url\n      domValue = document.createElement('a');\n      domValue.href = this.value;\n      domValue.innerHTML = this._escapeHTML(this.value);\n    }\n    else {\n      // create an editable or read-only div\n      domValue = document.createElement('div');\n      domValue.contentEditable = this.editable.value;\n      domValue.spellcheck = false;\n      domValue.innerHTML = this._escapeHTML(this.value);\n    }\n  }\n\n  return domValue;\n};\n\n/**\n * Create an expand/collapse button\n * @return {Element} expand\n * @private\n */\nNode.prototype._createDomExpandButton = function () {\n  // create expand button\n  var expand = document.createElement('button');\n  expand.type = 'button';\n  if (this._hasChilds()) {\n    expand.className = this.expanded\n        ? 'jsoneditor-button jsoneditor-expanded'\n        : 'jsoneditor-button jsoneditor-collapsed';\n    expand.title = translate('expandTitle');\n  }\n  else {\n    expand.className = 'jsoneditor-button jsoneditor-invisible';\n    expand.title = '';\n  }\n\n  return expand;\n};\n\n\n/**\n * Create a DOM tree element, containing the expand/collapse button\n * @return {Element} domTree\n * @private\n */\nNode.prototype._createDomTree = function () {\n  var dom = this.dom;\n  var domTree = document.createElement('table');\n  var tbody = document.createElement('tbody');\n  domTree.style.borderCollapse = 'collapse'; // TODO: put in css\n  domTree.className = 'jsoneditor-values';\n  domTree.appendChild(tbody);\n  var tr = document.createElement('tr');\n  tbody.appendChild(tr);\n\n  // create expand button\n  var tdExpand = document.createElement('td');\n  tdExpand.className = 'jsoneditor-tree';\n  tr.appendChild(tdExpand);\n  dom.expand = this._createDomExpandButton();\n  tdExpand.appendChild(dom.expand);\n  dom.tdExpand = tdExpand;\n\n  // create the field\n  var tdField = document.createElement('td');\n  tdField.className = 'jsoneditor-tree';\n  tr.appendChild(tdField);\n  dom.field = this._createDomField();\n  tdField.appendChild(dom.field);\n  dom.tdField = tdField;\n\n  // create a separator\n  var tdSeparator = document.createElement('td');\n  tdSeparator.className = 'jsoneditor-tree';\n  tr.appendChild(tdSeparator);\n  if (this.type != 'object' && this.type != 'array') {\n    tdSeparator.appendChild(document.createTextNode(':'));\n    tdSeparator.className = 'jsoneditor-separator';\n  }\n  dom.tdSeparator = tdSeparator;\n\n  // create the value\n  var tdValue = document.createElement('td');\n  tdValue.className = 'jsoneditor-tree';\n  tr.appendChild(tdValue);\n  dom.value = this._createDomValue();\n  tdValue.appendChild(dom.value);\n  dom.tdValue = tdValue;\n\n  return domTree;\n};\n\n/**\n * Handle an event. The event is caught centrally by the editor\n * @param {Event} event\n */\nNode.prototype.onEvent = function (event) {\n  var type = event.type,\n      target = event.target || event.srcElement,\n      dom = this.dom,\n      node = this,\n      expandable = this._hasChilds();\n\n\n  if (typeof this.editor.options.onEvent === 'function') {\n    this._onEvent(event);\n  }\n\n  // check if mouse is on menu or on dragarea.\n  // If so, highlight current row and its childs\n  if (target == dom.drag || target == dom.menu) {\n    if (type == 'mouseover') {\n      this.editor.highlighter.highlight(this);\n    }\n    else if (type == 'mouseout') {\n      this.editor.highlighter.unhighlight();\n    }\n  }\n\n  // context menu events\n  if (type == 'click' && target == dom.menu) {\n    var highlighter = node.editor.highlighter;\n    highlighter.highlight(node);\n    highlighter.lock();\n    util.addClassName(dom.menu, 'jsoneditor-selected');\n    this.showContextMenu(dom.menu, function () {\n      util.removeClassName(dom.menu, 'jsoneditor-selected');\n      highlighter.unlock();\n      highlighter.unhighlight();\n    });\n  }\n\n  // expand events\n  if (type == 'click') {\n    if (target == dom.expand ||\n        ((node.editor.options.mode === 'view' || node.editor.options.mode === 'form') && target.nodeName === 'DIV')) {\n      if (expandable) {\n        var recurse = event.ctrlKey; // with ctrl-key, expand/collapse all\n        this._onExpand(recurse);\n      }\n    }\n  }\n\n  if (type === 'click' && (event.target === node.dom.tdColor || event.target === node.dom.color)) {\n    this._showColorPicker();\n  }\n\n  // swap the value of a boolean when the checkbox displayed left is clicked\n  if (type == 'change' && target == dom.checkbox) {\n    this.dom.value.innerHTML = !this.value;\n    this._getDomValue();\n    this._updateDomDefault();\n  }\n\n  // update the value of the node based on the selected option\n  if (type == 'change' && target == dom.select) {\n    this.dom.value.innerHTML = dom.select.value;\n    this._getDomValue();\n    this._updateDomValue();\n  }\n\n  // value events\n  var domValue = dom.value;\n  if (target == domValue) {\n    //noinspection FallthroughInSwitchStatementJS\n    switch (type) {\n      case 'blur':\n      case 'change':\n        this._getDomValue();\n        this._clearValueError();\n        this._updateDomValue();\n        if (this.value) {\n          domValue.innerHTML = this._escapeHTML(this.value);\n        }\n        break;\n\n      case 'input':\n        //this._debouncedGetDomValue(true); // TODO\n        this._getDomValue();\n        this._updateDomValue();\n        break;\n\n      case 'keydown':\n      case 'mousedown':\n          // TODO: cleanup\n        this.editor.selection = this.editor.getDomSelection();\n        break;\n\n      case 'click':\n        if (event.ctrlKey && this.editable.value) {\n          // if read-only, we use the regular click behavior of an anchor\n          if (util.isUrl(this.value)) {\n            event.preventDefault();\n            window.open(this.value, '_blank');\n          }\n        }\n        break;\n\n      case 'keyup':\n        //this._debouncedGetDomValue(true); // TODO\n        this._getDomValue();\n        this._updateDomValue();\n        break;\n\n      case 'cut':\n      case 'paste':\n        setTimeout(function () {\n          node._getDomValue();\n          node._updateDomValue();\n        }, 1);\n        break;\n    }\n  }\n\n  // field events\n  var domField = dom.field;\n  if (target == domField) {\n    switch (type) {\n      case 'blur':\n        this._getDomField(true);\n        this._updateDomField();\n        if (this.field) {\n          domField.innerHTML = this._escapeHTML(this.field);\n        }\n        break;\n\n      case 'input':\n        this._getDomField();\n        this._updateSchema();\n        this._updateDomField();\n        this._updateDomValue();\n        break;\n\n      case 'keydown':\n      case 'mousedown':\n        this.editor.selection = this.editor.getDomSelection();\n        break;\n\n      case 'keyup':\n        this._getDomField();\n        this._updateDomField();\n        break;\n\n      case 'cut':\n      case 'paste':\n        setTimeout(function () {\n          node._getDomField();\n          node._updateDomField();\n        }, 1);\n        break;\n    }\n  }\n\n  // focus\n  // when clicked in whitespace left or right from the field or value, set focus\n  var domTree = dom.tree;\n  if (domTree && target == domTree.parentNode && type == 'click' && !event.hasMoved) {\n    var left = (event.offsetX != undefined) ?\n        (event.offsetX < (this.getLevel() + 1) * 24) :\n        (event.pageX < util.getAbsoluteLeft(dom.tdSeparator));// for FF\n    if (left || expandable) {\n      // node is expandable when it is an object or array\n      if (domField) {\n        util.setEndOfContentEditable(domField);\n        domField.focus();\n      }\n    }\n    else {\n      if (domValue && !this.enum) {\n        util.setEndOfContentEditable(domValue);\n        domValue.focus();\n      }\n    }\n  }\n  if (((target == dom.tdExpand && !expandable) || target == dom.tdField || target == dom.tdSeparator) &&\n      (type == 'click' && !event.hasMoved)) {\n    if (domField) {\n      util.setEndOfContentEditable(domField);\n      domField.focus();\n    }\n  }\n\n  if (type == 'keydown') {\n    this.onKeyDown(event);\n  }\n};\n\n/**\n * Trigger external onEvent provided in options if node is a JSON field or\n * value.\n * Information provided depends on the element, value is only included if\n * event occurs in a JSON value:\n * {field: string, path: {string|number}[] [, value: string]}\n * @param {Event} event\n * @private\n */\nNode.prototype._onEvent = function (event) {\n  var element = event.target;\n  if (element === this.dom.field || element === this.dom.value) {\n    var info = {\n      field: this.getField(),\n      path: this.getPath()\n    };\n    // For leaf values, include value\n    if (!this._hasChilds() &&element === this.dom.value) {\n      info.value = this.getValue();\n    }\n    this.editor.options.onEvent(info, event);\n  }\n};\n\n/**\n * Key down event handler\n * @param {Event} event\n */\nNode.prototype.onKeyDown = function (event) {\n  var keynum = event.which || event.keyCode;\n  var target = event.target || event.srcElement;\n  var ctrlKey = event.ctrlKey;\n  var shiftKey = event.shiftKey;\n  var altKey = event.altKey;\n  var handled = false;\n  var prevNode, nextNode, nextDom, nextDom2;\n  var editable = this.editor.options.mode === 'tree';\n  var oldSelection;\n  var oldNextNode;\n  var oldParent;\n  var oldIndexRedo;\n  var newIndexRedo;\n  var oldParentPathRedo;\n  var newParentPathRedo;\n  var nodes;\n  var multiselection;\n  var selectedNodes = this.editor.multiselection.nodes.length > 0\n      ? this.editor.multiselection.nodes\n      : [this];\n  var firstNode = selectedNodes[0];\n  var lastNode = selectedNodes[selectedNodes.length - 1];\n\n  // console.log(ctrlKey, keynum, event.charCode); // TODO: cleanup\n  if (keynum == 13) { // Enter\n    if (target == this.dom.value) {\n      if (!this.editable.value || event.ctrlKey) {\n        if (util.isUrl(this.value)) {\n          window.open(this.value, '_blank');\n          handled = true;\n        }\n      }\n    }\n    else if (target == this.dom.expand) {\n      var expandable = this._hasChilds();\n      if (expandable) {\n        var recurse = event.ctrlKey; // with ctrl-key, expand/collapse all\n        this._onExpand(recurse);\n        target.focus();\n        handled = true;\n      }\n    }\n  }\n  else if (keynum == 68) {  // D\n    if (ctrlKey && editable) {   // Ctrl+D\n      Node.onDuplicate(selectedNodes);\n      handled = true;\n    }\n  }\n  else if (keynum == 69) { // E\n    if (ctrlKey) {       // Ctrl+E and Ctrl+Shift+E\n      this._onExpand(shiftKey);  // recurse = shiftKey\n      target.focus(); // TODO: should restore focus in case of recursing expand (which takes DOM offline)\n      handled = true;\n    }\n  }\n  else if (keynum == 77 && editable) { // M\n    if (ctrlKey) { // Ctrl+M\n      this.showContextMenu(target);\n      handled = true;\n    }\n  }\n  else if (keynum == 46 && editable) { // Del\n    if (ctrlKey) {       // Ctrl+Del\n      Node.onRemove(selectedNodes);\n      handled = true;\n    }\n  }\n  else if (keynum == 45 && editable) { // Ins\n    if (ctrlKey && !shiftKey) {       // Ctrl+Ins\n      this._onInsertBefore();\n      handled = true;\n    }\n    else if (ctrlKey && shiftKey) {   // Ctrl+Shift+Ins\n      this._onInsertAfter();\n      handled = true;\n    }\n  }\n  else if (keynum == 35) { // End\n    if (altKey) { // Alt+End\n      // find the last node\n      var endNode = this._lastNode();\n      if (endNode) {\n        endNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n  }\n  else if (keynum == 36) { // Home\n    if (altKey) { // Alt+Home\n      // find the first node\n      var homeNode = this._firstNode();\n      if (homeNode) {\n        homeNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n  }\n  else if (keynum == 37) {        // Arrow Left\n    if (altKey && !shiftKey) {  // Alt + Arrow Left\n      // move to left element\n      var prevElement = this._previousElement(target);\n      if (prevElement) {\n        this.focus(this._getElementName(prevElement));\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow left\n      if (lastNode.expanded) {\n        var appendDom = lastNode.getAppendDom();\n        nextDom = appendDom ? appendDom.nextSibling : undefined;\n      }\n      else {\n        var dom = lastNode.getDom();\n        nextDom = dom.nextSibling;\n      }\n      if (nextDom) {\n        nextNode = Node.getNodeFromTarget(nextDom);\n        nextDom2 = nextDom.nextSibling;\n        nextNode2 = Node.getNodeFromTarget(nextDom2);\n        if (nextNode && nextNode instanceof AppendNode &&\n            !(lastNode.parent.childs.length == 1) &&\n            nextNode2 && nextNode2.parent) {\n          oldSelection = this.editor.getDomSelection();\n          oldParent = firstNode.parent;\n          oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n          oldIndexRedo = firstNode.getIndex();\n          newIndexRedo = nextNode2.getIndex();\n          oldParentPathRedo = oldParent.getInternalPath();\n          newParentPathRedo = nextNode2.parent.getInternalPath();\n\n          selectedNodes.forEach(function (node) {\n            nextNode2.parent.moveBefore(node, nextNode2);\n          });\n          this.focus(Node.focusElement || this._getElementName(target));\n\n\n          this.editor._onAction('moveNodes', {\n            count: selectedNodes.length,\n            fieldNames: selectedNodes.map(getField),\n\n            oldParentPath: oldParent.getInternalPath(),\n            newParentPath: firstNode.parent.getInternalPath(),\n            oldIndex: oldNextNode.getIndex(),\n            newIndex: firstNode.getIndex(),\n\n            oldIndexRedo: oldIndexRedo,\n            newIndexRedo: newIndexRedo,\n            oldParentPathRedo: oldParentPathRedo,\n            newParentPathRedo: newParentPathRedo,\n\n            oldSelection: oldSelection,\n            newSelection: this.editor.getDomSelection()\n          });\n        }\n      }\n    }\n  }\n  else if (keynum == 38) {        // Arrow Up\n    if (altKey && !shiftKey) {  // Alt + Arrow Up\n      // find the previous node\n      prevNode = this._previousNode();\n      if (prevNode) {\n        this.editor.deselect(true);\n        prevNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n    else if (!altKey && ctrlKey && shiftKey && editable) { // Ctrl + Shift + Arrow Up\n      // select multiple nodes\n      prevNode = this._previousNode();\n      if (prevNode) {\n        multiselection = this.editor.multiselection;\n        multiselection.start = multiselection.start || this;\n        multiselection.end = prevNode;\n        nodes = this.editor._findTopLevelNodes(multiselection.start, multiselection.end);\n\n        this.editor.select(nodes);\n        prevNode.focus('field'); // select field as we know this always exists\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Up\n      // find the previous node\n      prevNode = firstNode._previousNode();\n      if (prevNode && prevNode.parent) {\n        oldSelection = this.editor.getDomSelection();\n        oldParent = firstNode.parent;\n        oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n        oldIndexRedo = firstNode.getIndex();\n        newIndexRedo = prevNode.getIndex();\n        oldParentPathRedo = oldParent.getInternalPath();\n        newParentPathRedo = prevNode.parent.getInternalPath();\n\n        selectedNodes.forEach(function (node) {\n          prevNode.parent.moveBefore(node, prevNode);\n        });\n        this.focus(Node.focusElement || this._getElementName(target));\n\n        this.editor._onAction('moveNodes', {\n          count: selectedNodes.length,\n          fieldNames: selectedNodes.map(getField),\n\n          oldParentPath: oldParent.getInternalPath(),\n          newParentPath: firstNode.parent.getInternalPath(),\n          oldIndex: oldNextNode.getIndex(),\n          newIndex: firstNode.getIndex(),\n\n          oldIndexRedo: oldIndexRedo,\n          newIndexRedo: newIndexRedo,\n          oldParentPathRedo: oldParentPathRedo,\n          newParentPathRedo: newParentPathRedo,\n\n          oldSelection: oldSelection,\n          newSelection: this.editor.getDomSelection()\n        });\n      }\n      handled = true;\n    }\n  }\n  else if (keynum == 39) {        // Arrow Right\n    if (altKey && !shiftKey) {  // Alt + Arrow Right\n      // move to right element\n      var nextElement = this._nextElement(target);\n      if (nextElement) {\n        this.focus(this._getElementName(nextElement));\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Right\n      dom = firstNode.getDom();\n      var prevDom = dom.previousSibling;\n      if (prevDom) {\n        prevNode = Node.getNodeFromTarget(prevDom);\n        if (prevNode && prevNode.parent && !prevNode.isVisible()) {\n          oldSelection = this.editor.getDomSelection();\n          oldParent = firstNode.parent;\n          oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n          oldIndexRedo = firstNode.getIndex();\n          newIndexRedo = prevNode.getIndex();\n          oldParentPathRedo = oldParent.getInternalPath();\n          newParentPathRedo = prevNode.parent.getInternalPath();\n\n          selectedNodes.forEach(function (node) {\n            prevNode.parent.moveBefore(node, prevNode);\n          });\n          this.focus(Node.focusElement || this._getElementName(target));\n\n          this.editor._onAction('moveNodes', {\n            count: selectedNodes.length,\n            fieldNames: selectedNodes.map(getField),\n\n            oldParentPath: oldParent.getInternalPath(),\n            newParentPath: firstNode.parent.getInternalPath(),\n            oldIndex: oldNextNode.getIndex(),\n            newIndex: firstNode.getIndex(),\n\n            oldIndexRedo: oldIndexRedo,\n            newIndexRedo: newIndexRedo,\n            oldParentPathRedo: oldParentPathRedo,\n            newParentPathRedo: newParentPathRedo,\n\n            oldSelection: oldSelection,\n            newSelection: this.editor.getDomSelection()\n          });\n        }\n      }\n    }\n  }\n  else if (keynum == 40) {        // Arrow Down\n    if (altKey && !shiftKey) {  // Alt + Arrow Down\n      // find the next node\n      nextNode = this._nextNode();\n      if (nextNode) {\n        this.editor.deselect(true);\n        nextNode.focus(Node.focusElement || this._getElementName(target));\n      }\n      handled = true;\n    }\n    else if (!altKey && ctrlKey && shiftKey && editable) { // Ctrl + Shift + Arrow Down\n      // select multiple nodes\n      nextNode = this._nextNode();\n      if (nextNode) {\n        multiselection = this.editor.multiselection;\n        multiselection.start = multiselection.start || this;\n        multiselection.end = nextNode;\n        nodes = this.editor._findTopLevelNodes(multiselection.start, multiselection.end);\n\n        this.editor.select(nodes);\n        nextNode.focus('field'); // select field as we know this always exists\n      }\n      handled = true;\n    }\n    else if (altKey && shiftKey && editable) { // Alt + Shift + Arrow Down\n      // find the 2nd next node and move before that one\n      if (lastNode.expanded) {\n        nextNode = lastNode.append ? lastNode.append._nextNode() : undefined;\n      }\n      else {\n        nextNode = lastNode._nextNode();\n      }\n\n      // when the next node is not visible, we've reached the \"showMore\" buttons\n      if (nextNode && !nextNode.isVisible()) {\n        nextNode = nextNode.parent.showMore;\n      }\n\n      if (nextNode && nextNode instanceof AppendNode) {\n        nextNode = lastNode;\n      }\n\n      var nextNode2 = nextNode && (nextNode._nextNode() || nextNode.parent.append);\n      if (nextNode2 && nextNode2.parent) {\n        oldSelection = this.editor.getDomSelection();\n        oldParent = firstNode.parent;\n        oldNextNode = oldParent.childs[lastNode.getIndex() + 1] || oldParent.append;\n        oldIndexRedo = firstNode.getIndex();\n        newIndexRedo = nextNode2.getIndex();\n        oldParentPathRedo = oldParent.getInternalPath();\n        newParentPathRedo = nextNode2.parent.getInternalPath();\n\n        selectedNodes.forEach(function (node) {\n          nextNode2.parent.moveBefore(node, nextNode2);\n        });\n        this.focus(Node.focusElement || this._getElementName(target));\n\n        this.editor._onAction('moveNodes', {\n          count: selectedNodes.length,\n          fieldNames: selectedNodes.map(getField),\n          oldParentPath: oldParent.getInternalPath(),\n          newParentPath: firstNode.parent.getInternalPath(),\n          oldParentPathRedo: oldParentPathRedo,\n          newParentPathRedo: newParentPathRedo,\n          oldIndexRedo: oldIndexRedo,\n          newIndexRedo: newIndexRedo,\n          oldIndex: oldNextNode.getIndex(),\n          newIndex: firstNode.getIndex(),\n          oldSelection: oldSelection,\n          newSelection: this.editor.getDomSelection()\n        });\n      }\n      handled = true;\n    }\n  }\n\n  if (handled) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n};\n\n/**\n * Handle the expand event, when clicked on the expand button\n * @param {boolean} recurse   If true, child nodes will be expanded too\n * @private\n */\nNode.prototype._onExpand = function (recurse) {\n  if (recurse) {\n    // Take the table offline\n    var table = this.dom.tr.parentNode; // TODO: not nice to access the main table like this\n    var frame = table.parentNode;\n    var scrollTop = frame.scrollTop;\n    frame.removeChild(table);\n  }\n\n  if (this.expanded) {\n    this.collapse(recurse);\n  }\n  else {\n    this.expand(recurse);\n  }\n\n  if (recurse) {\n    // Put the table online again\n    frame.appendChild(table);\n    frame.scrollTop = scrollTop;\n  }\n};\n\n/**\n * Open a color picker to select a new color\n * @private\n */\nNode.prototype._showColorPicker = function () {\n  if (typeof this.editor.options.onColorPicker === 'function' && this.dom.color) {\n    var node = this;\n\n    // force deleting current color picker (if any)\n    node._deleteDomColor();\n    node.updateDom();\n\n    var colorAnchor = createAbsoluteAnchor(this.dom.color, this.editor.frame);\n\n    this.editor.options.onColorPicker(colorAnchor, this.value, function onChange(value) {\n      if (typeof value === 'string' && value !== node.value) {\n        // force recreating the color block, to cleanup any attached color picker\n        node._deleteDomColor();\n\n        node.value = value;\n        node.updateDom();\n        node._debouncedOnChangeValue();\n      }\n    });\n  }\n};\n\n/**\n * Get all field names of an object\n * @param {Node} [excludeNode] Optional node to be excluded from the returned field names\n * @return {string[]}\n */\nNode.prototype.getFieldNames = function (excludeNode) {\n  if (this.type === 'object') {\n    return this.childs\n        .filter(function (child) {\n          return child !== excludeNode;\n        })\n        .map(function (child) {\n          return child.field;\n        });\n  }\n\n  return [];\n}\n\n/**\n * Remove nodes\n * @param {Node[] | Node} nodes\n */\nNode.onRemove = function(nodes) {\n  if (!Array.isArray(nodes)) {\n    return Node.onRemove([nodes]);\n  }\n\n  if (nodes && nodes.length > 0) {\n    var firstNode = nodes[0];\n    var parent = firstNode.parent;\n    var editor = firstNode.editor;\n    var firstIndex = firstNode.getIndex();\n    editor.highlighter.unhighlight();\n\n    // adjust the focus\n    var oldSelection = editor.getDomSelection();\n    Node.blurNodes(nodes);\n    var newSelection = editor.getDomSelection();\n\n    // store the paths before removing them (needed for history)\n    var paths = nodes.map(getInternalPath);\n\n    // remove the nodes\n    nodes.forEach(function (node) {\n      node.parent._remove(node);\n    });\n\n    // store history action\n    editor._onAction('removeNodes', {\n      nodes: nodes,\n      paths: paths,\n      parentPath: parent.getInternalPath(),\n      index: firstIndex,\n      oldSelection: oldSelection,\n      newSelection: newSelection\n    });\n  }\n};\n\n\n/**\n * Duplicate nodes\n * duplicated nodes will be added right after the original nodes\n * @param {Node[] | Node} nodes\n */\nNode.onDuplicate = function(nodes) {\n  if (!Array.isArray(nodes)) {\n    return Node.onDuplicate([nodes]);\n  }\n\n  if (nodes && nodes.length > 0) {\n    var lastNode = nodes[nodes.length - 1];\n    var parent = lastNode.parent;\n    var editor = lastNode.editor;\n\n    editor.deselect(editor.multiselection.nodes);\n\n    // duplicate the nodes\n    var oldSelection = editor.getDomSelection();\n    var afterNode = lastNode;\n    var clones = nodes.map(function (node) {\n      var clone = node.clone();\n      if (node.parent.type === 'object') {\n        var existingFieldNames = node.parent.getFieldNames();\n        clone.field = util.findUniqueName(node.field, existingFieldNames);\n      }\n      parent.insertAfter(clone, afterNode);\n      afterNode = clone;\n      return clone;\n    });\n\n    // set selection to the duplicated nodes\n    if (nodes.length === 1) {\n      clones[0].focus();\n    }\n    else {\n      editor.select(clones);\n    }\n    var newSelection = editor.getDomSelection();\n\n    editor._onAction('duplicateNodes', {\n      paths: nodes.map(getInternalPath),\n      clonePaths: clones.map(getInternalPath),\n      afterPath: lastNode.getInternalPath(),\n      parentPath: parent.getInternalPath(),\n      oldSelection: oldSelection,\n      newSelection: newSelection\n    });\n  }\n};\n\n/**\n * Handle insert before event\n * @param {String} [field]\n * @param {*} [value]\n * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n * @private\n */\nNode.prototype._onInsertBefore = function (field, value, type) {\n  var oldSelection = this.editor.getDomSelection();\n\n  var newNode = new Node(this.editor, {\n    field: (field != undefined) ? field : '',\n    value: (value != undefined) ? value : '',\n    type: type\n  });\n  newNode.expand(true);\n\n  var beforePath = this.getInternalPath();\n\n  this.parent.insertBefore(newNode, this);\n  this.editor.highlighter.unhighlight();\n  newNode.focus('field');\n  var newSelection = this.editor.getDomSelection();\n\n  this.editor._onAction('insertBeforeNodes', {\n    nodes: [newNode],\n    paths: [newNode.getInternalPath()],\n    beforePath: beforePath,\n    parentPath: this.parent.getInternalPath(),\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n};\n\n/**\n * Handle insert after event\n * @param {String} [field]\n * @param {*} [value]\n * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n * @private\n */\nNode.prototype._onInsertAfter = function (field, value, type) {\n  var oldSelection = this.editor.getDomSelection();\n\n  var newNode = new Node(this.editor, {\n    field: (field != undefined) ? field : '',\n    value: (value != undefined) ? value : '',\n    type: type\n  });\n  newNode.expand(true);\n  this.parent.insertAfter(newNode, this);\n  this.editor.highlighter.unhighlight();\n  newNode.focus('field');\n  var newSelection = this.editor.getDomSelection();\n\n  this.editor._onAction('insertAfterNodes', {\n    nodes: [newNode],\n    paths: [newNode.getInternalPath()],\n    afterPath: this.getInternalPath(),\n    parentPath: this.parent.getInternalPath(),\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n};\n\n/**\n * Handle append event\n * @param {String} [field]\n * @param {*} [value]\n * @param {String} [type]   Can be 'auto', 'array', 'object', or 'string'\n * @private\n */\nNode.prototype._onAppend = function (field, value, type) {\n  var oldSelection = this.editor.getDomSelection();\n\n  var newNode = new Node(this.editor, {\n    field: (field != undefined) ? field : '',\n    value: (value != undefined) ? value : '',\n    type: type\n  });\n  newNode.expand(true);\n  this.parent.appendChild(newNode);\n  this.editor.highlighter.unhighlight();\n  newNode.focus('field');\n  var newSelection = this.editor.getDomSelection();\n\n  this.editor._onAction('appendNodes', {\n    nodes: [newNode],\n    paths: [newNode.getInternalPath()],\n    parentPath: this.parent.getInternalPath(),\n    oldSelection: oldSelection,\n    newSelection: newSelection\n  });\n};\n\n/**\n * Change the type of the node's value\n * @param {String} newType\n * @private\n */\nNode.prototype._onChangeType = function (newType) {\n  var oldType = this.type;\n  if (newType != oldType) {\n    var oldSelection = this.editor.getDomSelection();\n    this.changeType(newType);\n    var newSelection = this.editor.getDomSelection();\n\n    this.editor._onAction('changeType', {\n      path: this.getInternalPath(),\n      oldType: oldType,\n      newType: newType,\n      oldSelection: oldSelection,\n      newSelection: newSelection\n    });\n  }\n};\n\n/**\n * Sort the child's of the node. Only applicable when the node has type 'object'\n * or 'array'.\n * @param {String[]} path      Path of the child value to be compared\n * @param {String} direction   Sorting direction. Available values: \"asc\", \"desc\"\n * @private\n */\nNode.prototype.sort = function (path, direction) {\n  if (!this._hasChilds()) {\n    return;\n  }\n\n  this.hideChilds(); // sorting is faster when the childs are not attached to the dom\n\n  // copy the childs array (the old one will be kept for an undo action\n  var oldChilds = this.childs;\n  this.childs = this.childs.concat();\n\n  // sort the childs array\n  var order = (direction === 'desc') ? -1 : 1;\n\n  if (this.type === 'object') {\n    this.childs.sort(function (a, b) {\n      return order * naturalSort(a.field, b.field);\n    });\n  }\n  else { // this.type === 'array'\n    this.childs.sort(function (a, b) {\n      var nodeA = a.getNestedChild(path);\n      var nodeB = b.getNestedChild(path);\n\n      if (!nodeA) {\n        return order;\n      }\n      if (!nodeB) {\n        return -order;\n      }\n\n      var valueA = nodeA.value;\n      var valueB = nodeB.value;\n\n      if (typeof valueA !== 'string' && typeof valueB !== 'string') {\n        // both values are a number, boolean, or null -> use simple, fast sorting\n        return valueA > valueB ? order : valueA < valueB ? -order : 0;\n      }\n\n      return order * naturalSort(valueA, valueB);\n    });\n  }\n\n  // update the index numbering\n  this._updateDomIndexes();\n\n  this.editor._onAction('sort', {\n    path: this.getInternalPath(),\n    oldChilds: oldChilds,\n    newChilds: this.childs\n  });\n\n  this.showChilds();\n};\n\n/**\n * Replace the value of the node, keep it's state\n * @param {*} newValue\n */\nNode.prototype.update = function (newValue) {\n  var oldValue = this.getInternalValue();\n\n  this.setValue(newValue);\n\n  this.editor._onAction('transform', {\n    path: this.getInternalPath(),\n    oldValue: oldValue,\n    newValue: this.getInternalValue()\n  });\n};\n\n/**\n * Remove this node from the DOM\n * @returns {{table: Element, nextTr?: Element}}\n *            Returns the DOM elements that which be used to attach the node\n *            to the DOM again, see _attachToDom.\n * @private\n */\nNode.prototype._detachFromDom = function () {\n  var table = this.dom.tr ? this.dom.tr.parentNode : undefined;\n  var lastTr;\n  if (this.expanded) {\n    lastTr = this.getAppendDom();\n  }\n  else {\n    lastTr = this.getDom();\n  }\n  var nextTr = (lastTr && lastTr.parentNode) ? lastTr.nextSibling : undefined;\n\n  this.hide({ resetVisibleChilds: false });\n\n  return {\n    table: table,\n    nextTr: nextTr\n  }\n};\n\n/**\n * Attach this node to the DOM again\n * @param {{table: Element, nextTr?: Element}} domAnchor\n *            The DOM elements returned by _detachFromDom.\n * @private\n */\nNode.prototype._attachToDom = function (domAnchor) {\n  if (domAnchor.table) {\n    if (domAnchor.nextTr) {\n      domAnchor.table.insertBefore(this.getDom(), domAnchor.nextTr);\n    }\n    else {\n      domAnchor.table.appendChild(this.getDom());\n    }\n  }\n\n  if (this.expanded) {\n    this.showChilds();\n  }\n};\n\n/**\n * Transform the node given a JMESPath query.\n * @param {String} query    JMESPath query to apply\n * @private\n */\nNode.prototype.transform = function (query) {\n  if (!this._hasChilds()) {\n    return;\n  }\n\n  this.hideChilds(); // sorting is faster when the childs are not attached to the dom\n\n  try {\n    // apply the JMESPath query\n    var oldInternalValue = this.getInternalValue();\n\n    var oldValue = this.getValue();\n    var newValue = jmespath.search(oldValue, query);\n    this.setValue(newValue);\n\n    var newInternalValue = this.getInternalValue();\n\n    this.editor._onAction('transform', {\n      path: this.getInternalPath(),\n      oldValue: oldInternalValue,\n      newValue: newInternalValue\n    });\n\n    this.showChilds();\n  }\n  catch (err) {\n    this.showChilds();\n\n    this.editor._onError(err);\n  }\n};\n\n/**\n * Get a nested child given a path with properties\n * @param {String[]} path\n * @returns {Node}\n */\nNode.prototype.getNestedChild = function (path) {\n  var i = 0;\n  var child = this;\n\n  while (child && i < path.length) {\n    child = child.findChildByProperty(path[i]);\n    i++;\n  }\n\n  return child;\n};\n\n/**\n * Find a child by property name\n * @param {string} prop\n * @return {Node | undefined} Returns the child node when found, or undefined otherwise\n */\nNode.prototype.findChildByProperty = function(prop) {\n  if (this.type !== 'object') {\n    return undefined;\n  }\n\n  return this.childs.find(function (child) {\n    return child.field === prop;\n  });\n};\n\n/**\n * Get the child paths of this node\n * @param {boolean} [includeObjects=false] If true, object and array paths are returned as well\n * @return {string[]}\n */\nNode.prototype.getChildPaths = function (includeObjects) {\n  var pathsMap = {};\n\n  this._getChildPaths(pathsMap, '', includeObjects);\n\n  if (this.type === 'array') {\n    this.childs.forEach(function (child) {\n      child._getChildPaths(pathsMap, '', includeObjects);\n    });\n  }\n\n  return Object.keys(pathsMap).sort();\n};\n\n/**\n * Get the child paths of this node\n * @param {Object<String, boolean>} pathsMap\n * @param {boolean} [includeObjects=false]  If true, object and array paths are returned as well\n * @param {string} rootPath\n */\nNode.prototype._getChildPaths = function (pathsMap, rootPath, includeObjects) {\n  if (this.type === 'auto' || this.type === 'string' || includeObjects) {\n    pathsMap[rootPath || '.'] = true;\n  }\n\n  if (this.type === 'object') {\n    this.childs.forEach(function (child) {\n      child._getChildPaths(pathsMap, rootPath + '.' + child.field, includeObjects);\n    });\n  }\n};\n\n/**\n * Create a table row with an append button.\n * @return {HTMLElement | undefined} tr with the AppendNode contents\n */\nNode.prototype.getAppendDom = function () {\n  if (!this.append) {\n    this.append = new AppendNode(this.editor);\n    this.append.setParent(this);\n  }\n  return this.append.getDom();\n};\n\n/**\n * Create a table row with an showMore button and text\n * @return {HTMLElement | undefined} tr with the AppendNode contents\n */\nNode.prototype.getShowMoreDom = function () {\n  if (!this.showMore) {\n    this.showMore = new ShowMoreNode(this.editor, this);\n  }\n  return this.showMore.getDom();\n};\n\n/**\n * Find the node from an event target\n * @param {HTMLElement} target\n * @return {Node | undefined} node  or undefined when not found\n * @static\n */\nNode.getNodeFromTarget = function (target) {\n  while (target) {\n    if (target.node) {\n      return target.node;\n    }\n    target = target.parentNode;\n  }\n\n  return undefined;\n};\n\n/**\n * Test whether target is a child of the color DOM of a node\n * @param {HTMLElement} target\n * @returns {boolean}\n */\nNode.targetIsColorPicker = function (target) {\n  var node = Node.getNodeFromTarget(target);\n\n  if (node) {\n    var parent = target && target.parentNode;\n    while (parent) {\n      if (parent === node.dom.color) {\n        return true;\n      }\n      parent = parent.parentNode;\n    }\n  }\n\n  return false;\n};\n\n/**\n * Remove the focus of given nodes, and move the focus to the (a) node before,\n * (b) the node after, or (c) the parent node.\n * @param {Array.<Node> | Node} nodes\n */\nNode.blurNodes = function (nodes) {\n  if (!Array.isArray(nodes)) {\n    Node.blurNodes([nodes]);\n    return;\n  }\n\n  var firstNode = nodes[0];\n  var parent = firstNode.parent;\n  var firstIndex = firstNode.getIndex();\n\n  if (parent.childs[firstIndex + nodes.length]) {\n    parent.childs[firstIndex + nodes.length].focus();\n  }\n  else if (parent.childs[firstIndex - 1]) {\n    parent.childs[firstIndex - 1].focus();\n  }\n  else {\n    parent.focus();\n  }\n};\n\n/**\n * Get the next sibling of current node\n * @return {Node} nextSibling\n */\nNode.prototype.nextSibling = function () {\n  var index = this.parent.childs.indexOf(this);\n  return this.parent.childs[index + 1] || this.parent.append;\n};\n\n/**\n * Get the previously rendered node\n * @return {Node | null} previousNode\n */\nNode.prototype._previousNode = function () {\n  var prevNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    // find the previous field\n    var prevDom = dom;\n    do {\n      prevDom = prevDom.previousSibling;\n      prevNode = Node.getNodeFromTarget(prevDom);\n    }\n    while (prevDom && prevNode && (prevNode instanceof AppendNode && !prevNode.isVisible()));\n  }\n  return prevNode;\n};\n\n/**\n * Get the next rendered node\n * @return {Node | null} nextNode\n * @private\n */\nNode.prototype._nextNode = function () {\n  var nextNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    // find the previous field\n    var nextDom = dom;\n    do {\n      nextDom = nextDom.nextSibling;\n      nextNode = Node.getNodeFromTarget(nextDom);\n    }\n    while (nextDom && nextNode && (nextNode instanceof AppendNode && !nextNode.isVisible()));\n  }\n\n  return nextNode;\n};\n\n/**\n * Get the first rendered node\n * @return {Node | null} firstNode\n * @private\n */\nNode.prototype._firstNode = function () {\n  var firstNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    var firstDom = dom.parentNode.firstChild;\n    firstNode = Node.getNodeFromTarget(firstDom);\n  }\n\n  return firstNode;\n};\n\n/**\n * Get the last rendered node\n * @return {Node | null} lastNode\n * @private\n */\nNode.prototype._lastNode = function () {\n  var lastNode = null;\n  var dom = this.getDom();\n  if (dom && dom.parentNode) {\n    var lastDom = dom.parentNode.lastChild;\n    lastNode =  Node.getNodeFromTarget(lastDom);\n    while (lastDom && lastNode && !lastNode.isVisible()) {\n      lastDom = lastDom.previousSibling;\n      lastNode =  Node.getNodeFromTarget(lastDom);\n    }\n  }\n  return lastNode;\n};\n\n/**\n * Get the next element which can have focus.\n * @param {Element} elem\n * @return {Element | null} nextElem\n * @private\n */\nNode.prototype._previousElement = function (elem) {\n  var dom = this.dom;\n  // noinspection FallthroughInSwitchStatementJS\n  switch (elem) {\n    case dom.value:\n      if (this.fieldEditable) {\n        return dom.field;\n      }\n    // intentional fall through\n    case dom.field:\n      if (this._hasChilds()) {\n        return dom.expand;\n      }\n    // intentional fall through\n    case dom.expand:\n      return dom.menu;\n    case dom.menu:\n      if (dom.drag) {\n        return dom.drag;\n      }\n    // intentional fall through\n    default:\n      return null;\n  }\n};\n\n/**\n * Get the next element which can have focus.\n * @param {Element} elem\n * @return {Element | null} nextElem\n * @private\n */\nNode.prototype._nextElement = function (elem) {\n  var dom = this.dom;\n  // noinspection FallthroughInSwitchStatementJS\n  switch (elem) {\n    case dom.drag:\n      return dom.menu;\n    case dom.menu:\n      if (this._hasChilds()) {\n        return dom.expand;\n      }\n    // intentional fall through\n    case dom.expand:\n      if (this.fieldEditable) {\n        return dom.field;\n      }\n    // intentional fall through\n    case dom.field:\n      if (!this._hasChilds()) {\n        return dom.value;\n      }\n    default:\n      return null;\n  }\n};\n\n/**\n * Get the dom name of given element. returns null if not found.\n * For example when element == dom.field, \"field\" is returned.\n * @param {Element} element\n * @return {String | null} elementName  Available elements with name: 'drag',\n *                                      'menu', 'expand', 'field', 'value'\n * @private\n */\nNode.prototype._getElementName = function (element) {\n  var dom = this.dom;\n  for (var name in dom) {\n    if (dom.hasOwnProperty(name)) {\n      if (dom[name] == element) {\n        return name;\n      }\n    }\n  }\n  return null;\n};\n\n/**\n * Test if this node has childs. This is the case when the node is an object\n * or array.\n * @return {boolean} hasChilds\n * @private\n */\nNode.prototype._hasChilds = function () {\n  return this.type == 'array' || this.type == 'object';\n};\n\n// titles with explanation for the different types\nNode.TYPE_TITLES = {\n  'auto': translate('autoType'),\n  'object': translate('objectType'),\n  'array': translate('arrayType'),\n  'string': translate('stringType')\n};\n\nNode.prototype.addTemplates = function (menu, append) {\n    var node = this;\n    var templates = node.editor.options.templates;\n    if (templates == null) return;\n    if (templates.length) {\n        // create a separator\n        menu.push({\n            'type': 'separator'\n        });\n    }\n    var appendData = function (name, data) {\n        node._onAppend(name, data);\n    };\n    var insertData = function (name, data) {\n        node._onInsertBefore(name, data);\n    };\n    templates.forEach(function (template) {\n        menu.push({\n            text: template.text,\n            className: (template.className || 'jsoneditor-type-object'),\n            title: template.title,\n            click: (append ? appendData.bind(this, template.field, template.value) : insertData.bind(this, template.field, template.value))\n        });\n    });\n};\n\n/**\n * Show a contextmenu for this node\n * @param {HTMLElement} anchor   Anchor element to attach the context menu to\n *                               as sibling.\n * @param {function} [onClose]   Callback method called when the context menu\n *                               is being closed.\n */\nNode.prototype.showContextMenu = function (anchor, onClose) {\n  var node = this;\n  var titles = Node.TYPE_TITLES;\n  var items = [];\n\n  if (this.editable.value) {\n    items.push({\n      text: translate('type'),\n      title: translate('typeTitle'),\n      className: 'jsoneditor-type-' + this.type,\n      submenu: [\n        {\n          text: translate('auto'),\n          className: 'jsoneditor-type-auto' +\n              (this.type == 'auto' ? ' jsoneditor-selected' : ''),\n          title: titles.auto,\n          click: function () {\n            node._onChangeType('auto');\n          }\n        },\n        {\n          text: translate('array'),\n          className: 'jsoneditor-type-array' +\n              (this.type == 'array' ? ' jsoneditor-selected' : ''),\n          title: titles.array,\n          click: function () {\n            node._onChangeType('array');\n          }\n        },\n        {\n          text: translate('object'),\n          className: 'jsoneditor-type-object' +\n              (this.type == 'object' ? ' jsoneditor-selected' : ''),\n          title: titles.object,\n          click: function () {\n            node._onChangeType('object');\n          }\n        },\n        {\n          text: translate('string'),\n          className: 'jsoneditor-type-string' +\n              (this.type == 'string' ? ' jsoneditor-selected' : ''),\n          title: titles.string,\n          click: function () {\n            node._onChangeType('string');\n          }\n        }\n      ]\n    });\n  }\n\n  if (this._hasChilds()) {\n    if (this.editor.options.enableSort) {\n      items.push({\n        text: translate('sort'),\n        title: translate('sortTitle', {type: this.type}),\n        className: 'jsoneditor-sort-asc',\n        click: function () {\n          var anchor = node.editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n          showSortModal(node, anchor)\n        }\n      });\n    }\n\n    if (this.editor.options.enableTransform) {\n      items.push({\n        text: translate('transform'),\n        title: translate('transformTitle', {type: this.type}),\n        className: 'jsoneditor-transform',\n        click: function () {\n          var anchor = node.editor.options.modalAnchor || DEFAULT_MODAL_ANCHOR;\n          showTransformModal(node, anchor)\n        }\n      });\n    }\n  }\n\n  if (this.parent && this.parent._hasChilds()) {\n    if (items.length) {\n      // create a separator\n      items.push({\n        'type': 'separator'\n      });\n    }\n\n    // create append button (for last child node only)\n    var childs = node.parent.childs;\n    if (node == childs[childs.length - 1]) {\n        var appendSubmenu = [\n            {\n                text: translate('auto'),\n                className: 'jsoneditor-type-auto',\n                title: titles.auto,\n                click: function () {\n                    node._onAppend('', '', 'auto');\n                }\n            },\n            {\n                text: translate('array'),\n                className: 'jsoneditor-type-array',\n                title: titles.array,\n                click: function () {\n                    node._onAppend('', []);\n                }\n            },\n            {\n                text: translate('object'),\n                className: 'jsoneditor-type-object',\n                title: titles.object,\n                click: function () {\n                    node._onAppend('', {});\n                }\n            },\n            {\n                text: translate('string'),\n                className: 'jsoneditor-type-string',\n                title: titles.string,\n                click: function () {\n                    node._onAppend('', '', 'string');\n                }\n            }\n        ];\n        node.addTemplates(appendSubmenu, true);\n        items.push({\n            text: translate('appendText'),\n            title: translate('appendTitle'),\n            submenuTitle: translate('appendSubmenuTitle'),\n            className: 'jsoneditor-append',\n            click: function () {\n                node._onAppend('', '', 'auto');\n            },\n            submenu: appendSubmenu\n        });\n    }\n\n\n\n    // create insert button\n    var insertSubmenu = [\n        {\n            text: translate('auto'),\n            className: 'jsoneditor-type-auto',\n            title: titles.auto,\n            click: function () {\n                node._onInsertBefore('', '', 'auto');\n            }\n        },\n        {\n            text: translate('array'),\n            className: 'jsoneditor-type-array',\n            title: titles.array,\n            click: function () {\n                node._onInsertBefore('', []);\n            }\n        },\n        {\n            text: translate('object'),\n            className: 'jsoneditor-type-object',\n            title: titles.object,\n            click: function () {\n                node._onInsertBefore('', {});\n            }\n        },\n        {\n            text: translate('string'),\n            className: 'jsoneditor-type-string',\n            title: titles.string,\n            click: function () {\n                node._onInsertBefore('', '', 'string');\n            }\n        }\n    ];\n    node.addTemplates(insertSubmenu, false);\n    items.push({\n      text: translate('insert'),\n      title: translate('insertTitle'),\n      submenuTitle: translate('insertSub'),\n      className: 'jsoneditor-insert',\n      click: function () {\n        node._onInsertBefore('', '', 'auto');\n      },\n      submenu: insertSubmenu\n    });\n\n    if (this.editable.field) {\n      // create duplicate button\n      items.push({\n        text: translate('duplicateText'),\n        title: translate('duplicateField'),\n        className: 'jsoneditor-duplicate',\n        click: function () {\n          Node.onDuplicate(node);\n        }\n      });\n\n      // create remove button\n      items.push({\n        text: translate('removeText'),\n        title: translate('removeField'),\n        className: 'jsoneditor-remove',\n        click: function () {\n          Node.onRemove(node);\n        }\n      });\n    }\n  }\n\n  if (this.editor.options.onCreateMenu) {\n    var path = node.getPath();\n\n\t\titems = this.editor.options.onCreateMenu(items, {\n      type: 'single',\n      path: path,\n      paths: [path]\n\t\t});\n\t}\n  \n  var menu = new ContextMenu(items, {close: onClose});\n  menu.show(anchor, this.editor.frame);\n};\n\n/**\n * get the type of a value\n * @param {*} value\n * @return {String} type   Can be 'object', 'array', 'string', 'auto'\n * @private\n */\nNode.prototype._getType = function(value) {\n  if (value instanceof Array) {\n    return 'array';\n  }\n  if (value instanceof Object) {\n    return 'object';\n  }\n  if (typeof(value) == 'string' && typeof(this._stringCast(value)) != 'string') {\n    return 'string';\n  }\n\n  return 'auto';\n};\n\n/**\n * cast contents of a string to the correct type. This can be a string,\n * a number, a boolean, etc\n * @param {String} str\n * @return {*} castedStr\n * @private\n */\nNode.prototype._stringCast = function(str) {\n  var lower = str.toLowerCase(),\n      num = Number(str),          // will nicely fail with '123ab'\n      numFloat = parseFloat(str); // will nicely fail with '  '\n\n  if (str == '') {\n    return '';\n  }\n  else if (lower == 'null') {\n    return null;\n  }\n  else if (lower == 'true') {\n    return true;\n  }\n  else if (lower == 'false') {\n    return false;\n  }\n  else if (!isNaN(num) && !isNaN(numFloat)) {\n    return num;\n  }\n  else {\n    return str;\n  }\n};\n\n/**\n * escape a text, such that it can be displayed safely in an HTML element\n * @param {String} text\n * @return {String} escapedText\n * @private\n */\nNode.prototype._escapeHTML = function (text) {\n  if (typeof text !== 'string') {\n    return String(text);\n  }\n  else {\n    var htmlEscaped = String(text)\n        .replace(/&/g, '&amp;')    // must be replaced first!\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/  /g, ' &nbsp;') // replace double space with an nbsp and space\n        .replace(/^ /, '&nbsp;')   // space at start\n        .replace(/ $/, '&nbsp;');  // space at end\n\n    var json = JSON.stringify(htmlEscaped);\n    var html = json.substring(1, json.length - 1);\n    if (this.editor.options.escapeUnicode === true) {\n      html = util.escapeUnicodeChars(html);\n    }\n    return html;\n  }\n};\n\n/**\n * unescape a string.\n * @param {String} escapedText\n * @return {String} text\n * @private\n */\nNode.prototype._unescapeHTML = function (escapedText) {\n  var json = '\"' + this._escapeJSON(escapedText) + '\"';\n  var htmlEscaped = util.parse(json);\n\n  return htmlEscaped\n      .replace(/&lt;/g, '<')\n      .replace(/&gt;/g, '>')\n      .replace(/&nbsp;|\\u00A0/g, ' ')\n      .replace(/&amp;/g, '&');   // must be replaced last\n};\n\n/**\n * escape a text to make it a valid JSON string. The method will:\n *   - replace unescaped double quotes with '\\\"'\n *   - replace unescaped backslash with '\\\\'\n *   - replace returns with '\\n'\n * @param {String} text\n * @return {String} escapedText\n * @private\n */\nNode.prototype._escapeJSON = function (text) {\n  // TODO: replace with some smart regex (only when a new solution is faster!)\n  var escaped = '';\n  var i = 0;\n  while (i < text.length) {\n    var c = text.charAt(i);\n    if (c == '\\n') {\n      escaped += '\\\\n';\n    }\n    else if (c == '\\\\') {\n      escaped += c;\n      i++;\n\n      c = text.charAt(i);\n      if (c === '' || '\"\\\\/bfnrtu'.indexOf(c) == -1) {\n        escaped += '\\\\';  // no valid escape character\n      }\n      escaped += c;\n    }\n    else if (c == '\"') {\n      escaped += '\\\\\"';\n    }\n    else {\n      escaped += c;\n    }\n    i++;\n  }\n\n  return escaped;\n};\n\n/**\n * update the object name according to the callback onNodeName\n * @private\n */\nNode.prototype.updateNodeName = function () {\n  var count = this.childs ? this.childs.length : 0;\n  var nodeName;\n  if (this.type === 'object' || this.type === 'array') {\n    if (this.editor.options.onNodeName) {\n      try {\n        nodeName = this.editor.options.onNodeName({\n          path: this.getPath(),\n          size: count,\n          type: this.type\n        });\n      }\n      catch (err) {\n        console.error('Error in onNodeName callback: ', err);\n      }\n    }\n\n    this.dom.value.innerHTML = (this.type === 'object')\n      ? ('{' + (nodeName || count) + '}')\n      : ('[' + (nodeName || count) + ']');\n  }\n}\n\n/**\n * update recursively the object's and its children's name.\n * @private\n */\nNode.prototype.recursivelyUpdateNodeName = function () {\n  if (this.expanded) {\n    this.updateNodeName();\n    if (this.childs !== 'undefined') {\n      var i;\n      for (i in this.childs) {\n        this.childs[i].recursivelyUpdateNodeName();\n      }\n    }\n  }\n}\n\n// helper function to get the internal path of a node\nfunction getInternalPath (node) {\n  return node.getInternalPath();\n}\n\n// helper function to get the field of a node\nfunction getField (node) {\n  return node.getField();\n}\n\n// TODO: find a nicer solution to resolve this circular dependency between Node and AppendNode\n//       idea: introduce properties .isAppendNode and .isNode and use that instead of instanceof AppendNode checks\nvar AppendNode = appendNodeFactory(Node);\nvar ShowMoreNode = showMoreNodeFactory(Node);\n\nmodule.exports = Node;\n","'use strict';\nmodule.exports = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {},\n    $ownProperties = it.opts.ownProperties;\n  for ($property in $schema) {\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      if ($breakOnError) {\n        out += ' && ( ';\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ')) {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should have ';\n            if ($deps.length == 1) {\n              out += 'property ' + (it.util.escapeQuotes($deps[0]));\n            } else {\n              out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n            }\n            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      } else {\n        out += ' ) { ';\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1,\n            l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'should have ';\n                if ($deps.length == 1) {\n                  out += 'property ' + (it.util.escapeQuotes($deps[0]));\n                } else {\n                  out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n                }\n                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n      out += ' }   ';\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if (it.util.schemaHasRules($sch, it.RULES.all)) {\n      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      out += ') { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\n\nvar util = require('./util');\n\nmodule.exports = SchemaObject;\n\nfunction SchemaObject(obj) {\n  util.copy(obj, this);\n}\n","'use strict';\nmodule.exports = function generate_properties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $key = 'key' + $lvl,\n    $idx = 'idx' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $dataProperties = 'dataProperties' + $lvl;\n  var $schemaKeys = Object.keys($schema || {}),\n    $pProperties = it.schema.patternProperties || {},\n    $pPropertyKeys = Object.keys($pProperties),\n    $aProperties = it.schema.additionalProperties,\n    $someProperties = $schemaKeys.length || $pPropertyKeys.length,\n    $noAdditional = $aProperties === false,\n    $additionalIsSchema = typeof $aProperties == 'object' && Object.keys($aProperties).length,\n    $removeAdditional = it.opts.removeAdditional,\n    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,\n    $ownProperties = it.opts.ownProperties,\n    $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.v5 && $required.$data) && $required.length < it.opts.loopRequired) var $requiredHash = it.util.toHash($required);\n  if (it.opts.patternGroups) {\n    var $pgProperties = it.schema.patternGroups || {},\n      $pgPropertyKeys = Object.keys($pgProperties);\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($nextValid) + ' = true;';\n  if ($ownProperties) {\n    out += ' var ' + ($dataProperties) + ' = undefined;';\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    if ($someProperties) {\n      out += ' var isAdditional' + ($lvl) + ' = !(false ';\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 5) {\n          out += ' || validate.schema' + ($schemaPath) + '[' + ($key) + '] ';\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1,\n              l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += ' || ' + ($key) + ' == ' + (it.util.toQuotedString($propertyKey)) + ' ';\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += ' || ' + (it.usePattern($pProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      if (it.opts.patternGroups && $pgPropertyKeys.length) {\n        var arr3 = $pgPropertyKeys;\n        if (arr3) {\n          var $pgProperty, $i = -1,\n            l3 = arr3.length - 1;\n          while ($i < l3) {\n            $pgProperty = arr3[$i += 1];\n            out += ' || ' + (it.usePattern($pgProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      out += ' ); if (isAdditional' + ($lvl) + ') { ';\n    }\n    if ($removeAdditional == 'all') {\n      out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = '\\' + ' + $key + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n        } else {\n          out += ' ' + ($nextValid) + ' = false; ';\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = ''; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('additionalProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { additionalProperty: \\'' + ($additionalProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'should NOT have additional properties\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n            if (it.async) {\n              out += ' throw new ValidationError([' + (__err) + ']); ';\n            } else {\n              out += ' validate.errors = [' + (__err) + ']; return false; ';\n            }\n          } else {\n            out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += ' break; ';\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == 'failing') {\n          out += ' var ' + ($errs) + ' = errors;  ';\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' if (!' + ($nextValid) + ') { errors = ' + ($errs) + '; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete ' + ($data) + '[' + ($key) + ']; }  ';\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += ' } ';\n    }\n    out += ' }  ';\n    if ($breakOnError) {\n      out += ' if (' + ($nextValid) + ') { ';\n      $closingBraces += '}';\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr4 = $schemaKeys;\n    if (arr4) {\n      var $propertyKey, i4 = -1,\n        l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $propertyKey = arr4[i4 += 1];\n        var $sch = $schema[$propertyKey];\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          var $prop = it.util.getProperty($propertyKey),\n            $passData = $data + $prop,\n            $hasDefault = $useDefaults && $sch.default !== undefined;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ';\n          }\n          if ($hasDefault) {\n            out += ' ' + ($code) + ' ';\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += ' if ( ' + ($useData) + ' === undefined ';\n              if ($ownProperties) {\n                out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n              }\n              out += ') { ' + ($nextValid) + ' = false; ';\n              var $currentErrorPath = it.errorPath,\n                $currErrSchemaPath = $errSchemaPath,\n                $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + '/required';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'';\n                  if (it.opts._errorDataPathProperty) {\n                    out += 'is a required property';\n                  } else {\n                    out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += ' } else { ';\n            } else {\n              if ($breakOnError) {\n                out += ' if ( ' + ($useData) + ' === undefined ';\n                if ($ownProperties) {\n                  out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ') { ' + ($nextValid) + ' = true; } else { ';\n              } else {\n                out += ' if (' + ($useData) + ' !== undefined ';\n                if ($ownProperties) {\n                  out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ' ) { ';\n              }\n            }\n            out += ' ' + ($code) + ' } ';\n          }\n        }\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr5 = $pPropertyKeys;\n    if (arr5) {\n      var $pProperty, i5 = -1,\n        l5 = arr5.length - 1;\n      while (i5 < l5) {\n        $pProperty = arr5[i5 += 1];\n        var $sch = $pProperties[$pProperty];\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternProperties' + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + '/patternProperties/' + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pProperty)) + '.test(' + ($key) + ')) { ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n  }\n  if (it.opts.patternGroups && $pgPropertyKeys.length) {\n    var arr6 = $pgPropertyKeys;\n    if (arr6) {\n      var $pgProperty, i6 = -1,\n        l6 = arr6.length - 1;\n      while (i6 < l6) {\n        $pgProperty = arr6[i6 += 1];\n        var $pgSchema = $pgProperties[$pgProperty],\n          $sch = $pgSchema.schema;\n        if (it.util.schemaHasRules($sch, it.RULES.all)) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternGroups' + it.util.getProperty($pgProperty) + '.schema';\n          $it.errSchemaPath = it.errSchemaPath + '/patternGroups/' + it.util.escapeFragment($pgProperty) + '/schema';\n          out += ' var pgPropCount' + ($lvl) + ' = 0;  ';\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pgProperty)) + '.test(' + ($key) + ')) { pgPropCount' + ($lvl) + '++; ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n          var $pgMin = $pgSchema.minimum,\n            $pgMax = $pgSchema.maximum;\n          if ($pgMin !== undefined || $pgMax !== undefined) {\n            out += ' var ' + ($valid) + ' = true; ';\n            var $currErrSchemaPath = $errSchemaPath;\n            if ($pgMin !== undefined) {\n              var $limit = $pgMin,\n                $reason = 'minimum',\n                $moreOrLess = 'less';\n              out += ' ' + ($valid) + ' = pgPropCount' + ($lvl) + ' >= ' + ($pgMin) + '; ';\n              $errSchemaPath = it.errSchemaPath + '/patternGroups/minimum';\n              out += '  if (!' + ($valid) + ') {   ';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('patternGroups') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { reason: \\'' + ($reason) + '\\', limit: ' + ($limit) + ', pattern: \\'' + (it.util.escapeQuotes($pgProperty)) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should NOT have ' + ($moreOrLess) + ' than ' + ($limit) + ' properties matching pattern \"' + (it.util.escapeQuotes($pgProperty)) + '\"\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n              if ($pgMax !== undefined) {\n                out += ' else ';\n              }\n            }\n            if ($pgMax !== undefined) {\n              var $limit = $pgMax,\n                $reason = 'maximum',\n                $moreOrLess = 'more';\n              out += ' ' + ($valid) + ' = pgPropCount' + ($lvl) + ' <= ' + ($pgMax) + '; ';\n              $errSchemaPath = it.errSchemaPath + '/patternGroups/maximum';\n              out += '  if (!' + ($valid) + ') {   ';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('patternGroups') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { reason: \\'' + ($reason) + '\\', limit: ' + ($limit) + ', pattern: \\'' + (it.util.escapeQuotes($pgProperty)) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should NOT have ' + ($moreOrLess) + ' than ' + ($limit) + ' properties matching pattern \"' + (it.util.escapeQuotes($pgProperty)) + '\"\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n            $errSchemaPath = $currErrSchemaPath;\n            if ($breakOnError) {\n              out += ' if (' + ($valid) + ') { ';\n              $closingBraces += '}';\n            }\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limit(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $isMax = $keyword == 'maximum',\n    $exclusiveKeyword = $isMax ? 'exclusiveMaximum' : 'exclusiveMinimum',\n    $schemaExcl = it.schema[$exclusiveKeyword],\n    $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data,\n    $op = $isMax ? '<' : '>',\n    $notOp = $isMax ? '>' : '<',\n    $errorKeyword = undefined;\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),\n      $exclusive = 'exclusive' + $lvl,\n      $exclType = 'exclType' + $lvl,\n      $exclIsNumber = 'exclIsNumber' + $lvl,\n      $opExpr = 'op' + $lvl,\n      $opStr = '\\' + ' + $opExpr + ' + \\'';\n    out += ' var schemaExcl' + ($lvl) + ' = ' + ($schemaValueExcl) + '; ';\n    $schemaValueExcl = 'schemaExcl' + $lvl;\n    out += ' var ' + ($exclusive) + '; var ' + ($exclType) + ' = typeof ' + ($schemaValueExcl) + '; if (' + ($exclType) + ' != \\'boolean\\' && ' + ($exclType) + ' != \\'undefined\\' && ' + ($exclType) + ' != \\'number\\') { ';\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || '_exclusiveLimit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'' + ($exclusiveKeyword) + ' should be boolean\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else if ( ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n    }\n    out += ' ' + ($exclType) + ' == \\'number\\' ? ( (' + ($exclusive) + ' = ' + ($schemaValue) + ' === undefined || ' + ($schemaValueExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ') ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValueExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) : ( (' + ($exclusive) + ' = ' + ($schemaValueExcl) + ' === true) ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValue) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { var op' + ($lvl) + ' = ' + ($exclusive) + ' ? \\'' + ($op) + '\\' : \\'' + ($op) + '=\\';';\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == 'number',\n      $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ( ' + ($schemaValue) + ' === undefined || ' + ($schemaExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ' ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { ';\n    } else {\n      if ($exclIsNumber && $schema === undefined) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += '=';\n      } else {\n        if ($exclIsNumber) $schemaValue = Math[$isMax ? 'min' : 'max']($schemaExcl, $schema);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n          $notOp += '=';\n        } else {\n          $exclusive = false;\n          $opStr += '=';\n        }\n      }\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' || ' + ($data) + ' !== ' + ($data) + ') { ';\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { comparison: ' + ($opExpr) + ', limit: ' + ($schemaValue) + ', exclusive: ' + ($exclusive) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be ' + ($opStr) + ' ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\n\nvar ruleModules = require('./_rules')\n  , toHash = require('./util').toHash;\n\nmodule.exports = function rules() {\n  var RULES = [\n    { type: 'number',\n      rules: [ { 'maximum': ['exclusiveMaximum'] },\n               { 'minimum': ['exclusiveMinimum'] }, 'multipleOf', 'format'] },\n    { type: 'string',\n      rules: [ 'maxLength', 'minLength', 'pattern', 'format' ] },\n    { type: 'array',\n      rules: [ 'maxItems', 'minItems', 'uniqueItems', 'contains', 'items' ] },\n    { type: 'object',\n      rules: [ 'maxProperties', 'minProperties', 'required', 'dependencies', 'propertyNames',\n               { 'properties': ['additionalProperties', 'patternProperties'] } ] },\n    { rules: [ '$ref', 'const', 'enum', 'not', 'anyOf', 'oneOf', 'allOf' ] }\n  ];\n\n  var ALL = [ 'type' ];\n  var KEYWORDS = [\n    'additionalItems', '$schema', '$id', 'id', 'title',\n    'description', 'default', 'definitions'\n  ];\n  var TYPES = [ 'number', 'integer', 'string', 'array', 'object', 'boolean', 'null' ];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n\n  RULES.forEach(function (group) {\n    group.rules = group.rules.map(function (keyword) {\n      var implKeywords;\n      if (typeof keyword == 'object') {\n        var key = Object.keys(keyword)[0];\n        implKeywords = keyword[key];\n        keyword = key;\n        implKeywords.forEach(function (k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword);\n      var rule = RULES.all[keyword] = {\n        keyword: keyword,\n        code: ruleModules[keyword],\n        implements: implKeywords\n      };\n      return rule;\n    });\n\n    if (group.type) RULES.types[group.type] = group;\n  });\n\n  RULES.keywords = toHash(ALL.concat(KEYWORDS));\n  RULES.custom = {};\n\n  return RULES;\n};\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6cc42d1e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6cc42d1e&scoped=true&lang=css&\"","'use strict';\nmodule.exports = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (($schema || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += ' var ' + ($valid) + '; if (' + ($schemaValue) + ' === false || ' + ($schemaValue) + ' === undefined) ' + ($valid) + ' = true; else if (typeof ' + ($schemaValue) + ' != \\'boolean\\') ' + ($valid) + ' = false; else { ';\n    }\n    out += ' var ' + ($valid) + ' = true; if (' + ($data) + '.length > 1) { var i = ' + ($data) + '.length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal(' + ($data) + '[i], ' + ($data) + '[j])) { ' + ($valid) + ' = false; break outer; } } } } ';\n    if ($isData) {\n      out += '  }  ';\n    }\n    out += ' if (!' + ($valid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('uniqueItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { i: i, j: j } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT have duplicate items (items ## \\' + j + \\' and \\' + i + \\' are identical)\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema:  ';\n        if ($isData) {\n          out += 'validate.schema' + ($schemaPath);\n        } else {\n          out += '' + ($schema);\n        }\n        out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_validate(it, $keyword, $ruleType) {\n  var out = '';\n  var $async = it.schema.$async === true,\n    $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, '$ref'),\n    $id = it.self._getId(it.schema);\n  if (it.isTop) {\n    if ($async) {\n      it.async = true;\n      var $es7 = it.opts.async == 'es7';\n      it.yieldAwait = $es7 ? 'await' : 'yield';\n    }\n    out += ' var validate = ';\n    if ($async) {\n      if ($es7) {\n        out += ' (async function ';\n      } else {\n        if (it.opts.async != '*') {\n          out += 'co.wrap';\n        }\n        out += '(function* ';\n      }\n    } else {\n      out += ' (function ';\n    }\n    out += ' (data, dataPath, parentData, parentDataProperty, rootData) { \\'use strict\\'; ';\n    if ($id && (it.opts.sourceCode || it.opts.processCode)) {\n      out += ' ' + ('/\\*# sourceURL=' + $id + ' */') + ' ';\n    }\n  }\n  if (typeof it.schema == 'boolean' || !($refKeywords || it.schema.$ref)) {\n    var $keyword = 'false schema';\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = 'data' + ($dataLvl || '');\n    var $valid = 'valid' + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += ' var ' + ($valid) + ' = false; ';\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'false schema') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'boolean schema is false\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += ' return data; ';\n        } else {\n          out += ' validate.errors = null; return true; ';\n        }\n      } else {\n        out += ' var ' + ($valid) + ' = true; ';\n      }\n    }\n    if (it.isTop) {\n      out += ' }); return validate; ';\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop,\n      $lvl = it.level = 0,\n      $dataLvl = it.dataLevel = 0,\n      $data = 'data';\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [undefined];\n    out += ' var vErrors = null; ';\n    out += ' var errors = 0;     ';\n    out += ' if (rootData === undefined) rootData = data; ';\n  } else {\n    var $lvl = it.level,\n      $dataLvl = it.dataLevel,\n      $data = 'data' + ($dataLvl || '');\n    if ($id) it.baseId = it.resolve.url(it.baseId, $id);\n    if ($async && !it.async) throw new Error('async schema in sync schema');\n    out += ' var errs_' + ($lvl) + ' = errors;';\n  }\n  var $valid = 'valid' + $lvl,\n    $breakOnError = !it.opts.allErrors,\n    $closingBraces1 = '',\n    $closingBraces2 = '';\n  var $errorKeyword;\n  var $typeSchema = it.schema.type,\n    $typeIsArray = Array.isArray($typeSchema);\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == 'fail') {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      it.logger.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || ($rulesGroup && !$shouldUseGroup($rulesGroup))) {\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type';\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type',\n        $method = $typeIsArray ? 'checkDataTypes' : 'checkDataType';\n      out += ' if (' + (it.util[$method]($typeSchema, $data, true)) + ') { ';\n      if ($coerceToTypes) {\n        var $dataType = 'dataType' + $lvl,\n          $coerced = 'coerced' + $lvl;\n        out += ' var ' + ($dataType) + ' = typeof ' + ($data) + '; ';\n        if (it.opts.coerceTypes == 'array') {\n          out += ' if (' + ($dataType) + ' == \\'object\\' && Array.isArray(' + ($data) + ')) ' + ($dataType) + ' = \\'array\\'; ';\n        }\n        out += ' var ' + ($coerced) + ' = undefined; ';\n        var $bracesCoercion = '';\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($i) {\n              out += ' if (' + ($coerced) + ' === undefined) { ';\n              $bracesCoercion += '}';\n            }\n            if (it.opts.coerceTypes == 'array' && $type != 'array') {\n              out += ' if (' + ($dataType) + ' == \\'array\\' && ' + ($data) + '.length == 1) { ' + ($coerced) + ' = ' + ($data) + ' = ' + ($data) + '[0]; ' + ($dataType) + ' = typeof ' + ($data) + ';  } ';\n            }\n            if ($type == 'string') {\n              out += ' if (' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\') ' + ($coerced) + ' = \\'\\' + ' + ($data) + '; else if (' + ($data) + ' === null) ' + ($coerced) + ' = \\'\\'; ';\n            } else if ($type == 'number' || $type == 'integer') {\n              out += ' if (' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' === null || (' + ($dataType) + ' == \\'string\\' && ' + ($data) + ' && ' + ($data) + ' == +' + ($data) + ' ';\n              if ($type == 'integer') {\n                out += ' && !(' + ($data) + ' % 1)';\n              }\n              out += ')) ' + ($coerced) + ' = +' + ($data) + '; ';\n            } else if ($type == 'boolean') {\n              out += ' if (' + ($data) + ' === \\'false\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === null) ' + ($coerced) + ' = false; else if (' + ($data) + ' === \\'true\\' || ' + ($data) + ' === 1) ' + ($coerced) + ' = true; ';\n            } else if ($type == 'null') {\n              out += ' if (' + ($data) + ' === \\'\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === false) ' + ($coerced) + ' = null; ';\n            } else if (it.opts.coerceTypes == 'array' && $type == 'array') {\n              out += ' if (' + ($dataType) + ' == \\'string\\' || ' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' == null) ' + ($coerced) + ' = [' + ($data) + ']; ';\n            }\n          }\n        }\n        out += ' ' + ($bracesCoercion) + ' if (' + ($coerced) + ' === undefined) {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else {  ';\n        var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n          $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n        out += ' ' + ($data) + ' = ' + ($coerced) + '; ';\n        if (!$dataLvl) {\n          out += 'if (' + ($parentData) + ' !== undefined)';\n        }\n        out += ' ' + ($parentData) + '[' + ($parentDataProperty) + '] = ' + ($coerced) + '; } ';\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      }\n      out += ' } ';\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += ' ' + (it.RULES.all.$ref.code(it, '$ref')) + ' ';\n    if ($breakOnError) {\n      out += ' } if (errors === ';\n      if ($top) {\n        out += '0';\n      } else {\n        out += 'errs_' + ($lvl);\n      }\n      out += ') { ';\n      $closingBraces2 += '}';\n    }\n  } else {\n    if (it.opts.v5 && it.schema.patternGroups) {\n      it.logger.warn('keyword \"patternGroups\" is deprecated and disabled. Use option patternGroups: true to enable.');\n    }\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1,\n        l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += ' if (' + (it.util.checkDataType($rulesGroup.type, $data)) + ') { ';\n          }\n          if (it.opts.useDefaults && !it.compositeRule) {\n            if ($rulesGroup.type == 'object' && it.schema.properties) {\n              var $schema = it.schema.properties,\n                $schemaKeys = Object.keys($schema);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1,\n                  l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema[$propertyKey];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    out += '  if (' + ($passData) + ' === undefined) ' + ($passData) + ' = ';\n                    if (it.opts.useDefaults == 'shared') {\n                      out += ' ' + (it.useDefault($sch.default)) + ' ';\n                    } else {\n                      out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                    }\n                    out += '; ';\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == 'array' && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1,\n                  l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + '[' + $i + ']';\n                    out += '  if (' + ($passData) + ' === undefined) ' + ($passData) + ' = ';\n                    if (it.opts.useDefaults == 'shared') {\n                      out += ' ' + (it.useDefault($sch.default)) + ' ';\n                    } else {\n                      out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                    }\n                    out += '; ';\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1,\n              l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += ' ' + ($code) + ' ';\n                  if ($breakOnError) {\n                    $closingBraces1 += '}';\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += ' ' + ($closingBraces1) + ' ';\n            $closingBraces1 = '';\n          }\n          if ($rulesGroup.type) {\n            out += ' } ';\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += ' else { ';\n              var $schemaPath = it.schemaPath + '.type',\n                $errSchemaPath = it.errSchemaPath + '/type';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n                if ($typeIsArray) {\n                  out += '' + ($typeSchema.join(\",\"));\n                } else {\n                  out += '' + ($typeSchema);\n                }\n                out += '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should be ';\n                  if ($typeIsArray) {\n                    out += '' + ($typeSchema.join(\",\"));\n                  } else {\n                    out += '' + ($typeSchema);\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n          }\n          if ($breakOnError) {\n            out += ' if (errors === ';\n            if ($top) {\n              out += '0';\n            } else {\n              out += 'errs_' + ($lvl);\n            }\n            out += ') { ';\n            $closingBraces2 += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces2) + ' ';\n  }\n  if ($top) {\n    if ($async) {\n      out += ' if (errors === 0) return data;           ';\n      out += ' else throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; ';\n      out += ' return errors === 0;       ';\n    }\n    out += ' }); return validate;';\n  } else {\n    out += ' var ' + ($valid) + ' = errors === errs_' + ($lvl) + ';';\n  }\n  out = it.util.cleanUpCode(out);\n  if ($top) {\n    out = it.util.finalCleanUpCode(out, $async);\n  }\n\n  function $shouldUseGroup($rulesGroup) {\n    var rules = $rulesGroup.rules;\n    for (var i = 0; i < rules.length; i++)\n      if ($shouldUseRule(rules[i])) return true;\n  }\n\n  function $shouldUseRule($rule) {\n    return it.schema[$rule.keyword] !== undefined || ($rule.implements && $ruleImplementsSomeKeyword($rule));\n  }\n\n  function $ruleImplementsSomeKeyword($rule) {\n    var impl = $rule.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== undefined) return true;\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $op = $keyword == 'maxItems' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' ' + ($data) + '.length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxItems') {\n        out += 'more';\n      } else {\n        out += 'less';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' items\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-06/schema';\n\nmodule.exports = function (ajv) {\n  var defaultMeta = ajv._opts.defaultMeta;\n  var metaSchemaRef = typeof defaultMeta == 'string'\n                      ? { $ref: defaultMeta }\n                      : ajv.getSchema(META_SCHEMA_ID)\n                        ? { $ref: META_SCHEMA_ID }\n                        : {};\n\n  ajv.addKeyword('patternGroups', {\n    // implemented in properties.jst\n    metaSchema: {\n      type: 'object',\n      additionalProperties: {\n        type: 'object',\n        required: [ 'schema' ],\n        properties: {\n          maximum: {\n            type: 'integer',\n            minimum: 0\n          },\n          minimum: {\n            type: 'integer',\n            minimum: 0\n          },\n          schema: metaSchemaRef\n        },\n        additionalProperties: false\n      }\n    }\n  });\n  ajv.RULES.all.properties.implements.push('patternGroups');\n};\n","module.exports = require('./src/js/JSONEditor');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nvar escapedChars = {\n  'b': '\\b',\n  'f': '\\f',\n  'n': '\\n',\n  'r': '\\r',\n  't': '\\t',\n  '\"': '\"',\n  '/': '/',\n  '\\\\': '\\\\'\n};\n\nvar A_CODE = 'a'.charCodeAt();\n\n\nexports.parse = function (source) {\n  var pointers = {};\n  var line = 0;\n  var column = 0;\n  var pos = 0;\n  return {\n    data: _parse('', true),\n    pointers: pointers\n  };\n\n  function _parse(ptr, topLevel) {\n    whitespace();\n    var data;\n    map(ptr, 'value');\n    var char = getChar();\n    switch (char) {\n      case 't': read('rue'); data = true; break;\n      case 'f': read('alse'); data = false; break;\n      case 'n': read('ull'); data = null; break;\n      case '\"': data = parseString(); break;\n      case '[': data = parseArray(ptr); break;\n      case '{': data = parseObject(ptr); break;\n      default:\n        backChar();\n        if ('-0123456789'.indexOf(char) >= 0)\n          data = parseNumber();\n        else\n          unexpectedToken();\n    }\n    map(ptr, 'valueEnd');\n    whitespace();\n    if (topLevel && pos < source.length) unexpectedToken();\n    return data;\n  }\n\n  function whitespace() {\n    loop:\n      while (pos < source.length) {\n        switch (source[pos]) {\n          case ' ': column++; break;\n          case '\\t': column += 4; break;\n          case '\\r': column = 0; break;\n          case '\\n': column = 0; line++; break;\n          default: break loop;\n        }\n        pos++;\n      }\n  }\n\n  function parseString() {\n    var str = '';\n    var char;\n    while (true) {\n      char = getChar();\n      if (char == '\"') {\n        break;\n      } else if (char == '\\\\') {\n        char = getChar();\n        if (char in escapedChars)\n          str += escapedChars[char];\n        else if (char == 'u')\n          str += getCharCode();\n        else\n          wasUnexpectedToken();\n      } else {\n        str += char;\n      }\n    }\n    return str;\n  }\n\n  function parseNumber() {\n    var numStr = '';\n    if (source[pos] == '-') numStr += getChar();\n\n    numStr += source[pos] == '0'\n              ? getChar()\n              : getDigits();\n\n    if (source[pos] == '.')\n      numStr += getChar() + getDigits();\n\n    if (source[pos] == 'e' || source[pos] == 'E') {\n      numStr += getChar();\n      if (source[pos] == '+' || source[pos] == '-') numStr += getChar();\n      numStr += getDigits();\n    }\n\n    return +numStr;\n  }\n\n  function parseArray(ptr) {\n    whitespace();\n    var arr = [];\n    var i = 0;\n    if (getChar() == ']') return arr;\n    backChar();\n\n    while (true) {\n      var itemPtr = ptr + '/' + i;\n      arr.push(_parse(itemPtr));\n      whitespace();\n      var char = getChar();\n      if (char == ']') break;\n      if (char != ',') wasUnexpectedToken();\n      whitespace();\n      i++;\n    }\n    return arr;\n  }\n\n  function parseObject(ptr) {\n    whitespace();\n    var obj = {};\n    if (getChar() == '}') return obj;\n    backChar();\n\n    while (true) {\n      var loc = getLoc();\n      if (getChar() != '\"') wasUnexpectedToken();\n      var key = parseString();\n      var propPtr = ptr + '/' + escapeJsonPointer(key);\n      mapLoc(propPtr, 'key', loc);\n      map(propPtr, 'keyEnd');\n      whitespace();\n      if (getChar() != ':') wasUnexpectedToken();\n      whitespace();\n      obj[key] = _parse(propPtr);\n      whitespace();\n      var char = getChar();\n      if (char == '}') break;\n      if (char != ',') wasUnexpectedToken();\n      whitespace();\n    }\n    return obj;\n  }\n\n  function read(str) {\n    for (var i=0; i<str.length; i++)\n      if (getChar() !== str[i]) wasUnexpectedToken();\n  }\n\n  function getChar() {\n    checkUnexpectedEnd();\n    var char = source[pos];\n    pos++;\n    column++; // new line?\n    return char;\n  }\n\n  function backChar() {\n    pos--;\n    column--;\n  }\n\n  function getCharCode() {\n    var count = 4;\n    var code = 0;\n    while (count--) {\n      code <<= 4;\n      var char = getChar().toLowerCase();\n      if (char >= 'a' && char <= 'f')\n        code += char.charCodeAt() - A_CODE + 10;\n      else if (char >= '0' && char <= '9')\n        code += +char;\n      else\n        wasUnexpectedToken();\n    }\n    return String.fromCharCode(code);\n  }\n\n  function getDigits() {\n    var digits = '';\n    while (source[pos] >= '0' && source[pos] <= '9')\n      digits += getChar();\n\n    if (digits.length) return digits;\n    checkUnexpectedEnd();\n    unexpectedToken();\n  }\n\n  function map(ptr, prop) {\n    mapLoc(ptr, prop, getLoc());\n  }\n\n  function mapLoc(ptr, prop, loc) {\n    pointers[ptr] = pointers[ptr] || {};\n    pointers[ptr][prop] = loc;\n  }\n\n  function getLoc() {\n    return {\n      line: line,\n      column: column,\n      pos: pos\n    };\n  }\n\n  function unexpectedToken() {\n    throw new SyntaxError('Unexpected token ' + source[pos] + ' in JSON at position ' + pos);\n  }\n\n  function wasUnexpectedToken() {\n    backChar();\n    unexpectedToken();\n  }\n\n  function checkUnexpectedEnd() {\n    if (pos >= source.length)\n      throw new SyntaxError('Unexpected end of JSON input');\n  }\n};\n\n\nexports.stringify = function (data, _, whitespace) {\n  if (!validType(data)) return;\n  var wsLine = 0;\n  var wsPos, wsColumn;\n  switch (typeof whitespace) {\n    case 'number':\n      var len = whitespace > 10\n                  ? 10\n                  : whitespace < 0\n                    ? 0\n                    : Math.floor(whitespace);\n      whitespace = len && repeat(len, ' ');\n      wsPos = len;\n      wsColumn = len;\n      break;\n    case 'string':\n      whitespace = whitespace.slice(0, 10);\n      wsPos = 0;\n      wsColumn = 0;\n      for (var j=0; j<whitespace.length; j++) {\n        var char = whitespace[j];\n        switch (char) {\n          case ' ': wsColumn++; break;\n          case '\\t': wsColumn += 4; break;\n          case '\\r': wsColumn = 0; break;\n          case '\\n': wsColumn = 0; wsLine++; break;\n          default: throw new Error('whitespace characters not allowed in JSON');\n        }\n        wsPos++;\n      }\n      break;\n    default:\n      whitespace = undefined;\n  }\n\n  var json = '';\n  var pointers = {};\n  var line = 0;\n  var column = 0;\n  var pos = 0;\n  _stringify(data, 0, '');\n  return {\n    json: json,\n    pointers: pointers\n  };\n\n  function _stringify(_data, lvl, ptr) {\n    map(ptr, 'value');\n    switch (typeof _data) {\n      case 'number':\n      case 'boolean':\n        out('' + _data); break;\n      case 'string':\n        out(quoted(_data)); break;\n      case 'object':\n        if (_data === null)\n          out('null');\n        else if (typeof _data.toJSON == 'function')\n          out(quoted(_data.toJSON()));\n        else if (Array.isArray(_data))\n          stringifyArray();\n        else\n          stringifyObject();\n    }\n    map(ptr, 'valueEnd');\n\n    function stringifyArray() {\n      if (_data.length) {\n        out('[');\n        var itemLvl = lvl + 1;\n        for (var i=0; i<_data.length; i++) {\n          if (i) out(',');\n          indent(itemLvl);\n          var item = validType(_data[i]) ? _data[i] : null;\n          var itemPtr = ptr + '/' + i;\n          _stringify(item, itemLvl, itemPtr);\n        }\n        indent(lvl);\n        out(']');\n      } else {\n        out('[]');\n      }\n    }\n\n    function stringifyObject() {\n      var keys = Object.keys(_data);\n      if (keys.length) {\n        out('{');\n        var propLvl = lvl + 1;\n        for (var i=0; i<keys.length; i++) {\n          var key = keys[i];\n          var value = _data[key];\n          if (validType(value)) {\n            if (i) out(',');\n            var propPtr = ptr + '/' + escapeJsonPointer(key);\n            indent(propLvl);\n            map(propPtr, 'key');\n            out(quoted(key));\n            map(propPtr, 'keyEnd');\n            out(':');\n            if (whitespace) out(' ');\n            _stringify(value, propLvl, propPtr);\n          }\n        }\n        indent(lvl);\n        out('}');\n      } else {\n        out('{}');\n      }\n    }\n  }\n\n  function out(str) {\n    column += str.length;\n    pos += str.length;\n    json += str;\n  }\n\n  function indent(lvl) {\n    if (whitespace) {\n      json += '\\n' + repeat(lvl, whitespace);\n      line++;\n      column = 0;\n      while (lvl--) {\n        if (wsLine) {\n          line += wsLine;\n          column = wsColumn;\n        } else {\n          column += wsColumn;\n        }\n        pos += wsPos;\n      }\n      pos += 1; // \\n character\n    }\n  }\n\n  function map(ptr, prop) {\n    pointers[ptr] = pointers[ptr] || {};\n    pointers[ptr][prop] = {\n      line: line,\n      column: column,\n      pos: pos\n    };\n  }\n\n  function repeat(n, str) {\n    return Array(n + 1).join(str);\n  }\n};\n\n\nvar VALID_TYPES = ['number', 'boolean', 'string', 'object'];\nfunction validType(data) {\n  return VALID_TYPES.indexOf(typeof data) >= 0;\n}\n\n\nvar ESC_QUOTE = /\"|\\\\/g;\nvar ESC_B = /[\\b]/g;\nvar ESC_F = /\\f/g;\nvar ESC_N = /\\n/g;\nvar ESC_R = /\\r/g;\nvar ESC_T = /\\t/g;\nfunction quoted(str) {\n  str = str.replace(ESC_QUOTE, '\\\\$&')\n           .replace(ESC_F, '\\\\f')\n           .replace(ESC_B, '\\\\b')\n           .replace(ESC_N, '\\\\n')\n           .replace(ESC_R, '\\\\r')\n           .replace(ESC_T, '\\\\t');\n  return '\"' + str + '\"';\n}\n\n\nvar ESC_0 = /~/g;\nvar ESC_1 = /\\//g;\nfunction escapeJsonPointer(str) {\n  return str.replace(ESC_0, '~0')\n            .replace(ESC_1, '~1');\n}\n","'use strict';\nmodule.exports = function generate_enum(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $i = 'i' + $lvl,\n    $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ';';\n  if ($isData) {\n    out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n  }\n  out += '' + ($valid) + ' = false;for (var ' + ($i) + '=0; ' + ($i) + '<' + ($vSchema) + '.length; ' + ($i) + '++) if (equal(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + '])) { ' + ($valid) + ' = true; break; }';\n  if ($isData) {\n    out += '  }  ';\n  }\n  out += ' if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('enum') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValues: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to one of the allowed values\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","module.exports.id = 'ace/mode/json_worker';\nmodule.exports.src = \"\\\"no use strict\\\";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail=\\\"\\\";testPath;){var alias=paths[testPath];if(\\\"string\\\"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\\\/*$/,\\\"/\\\")+(tail||alias.main||alias.name);if(alias===!1)return\\\"\\\";var i=testPath.lastIndexOf(\\\"/\\\");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:\\\"log\\\",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:\\\"error\\\",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf(\\\"!\\\")){var chunks=moduleName.split(\\\"!\\\");return window.normalizeModule(parentId,chunks[0])+\\\"!\\\"+window.normalizeModule(parentId,chunks[1])}if(\\\".\\\"==moduleName.charAt(0)){var base=parentId.split(\\\"/\\\").slice(0,-1).join(\\\"/\\\");for(moduleName=(base?base+\\\"/\\\":\\\"\\\")+moduleName;-1!==moduleName.indexOf(\\\".\\\")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\\\.\\\\//,\\\"\\\").replace(/\\\\/\\\\.\\\\//,\\\"/\\\").replace(/[^\\\\/]+\\\\/\\\\.\\\\.\\\\//,\\\"\\\")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error(\\\"worker.js acequire() accepts only (parentId, id) as arguments\\\");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log(\\\"unable to load \\\"+id);var path=resolveModuleId(id,window.acequire.tlns);return\\\".js\\\"!=path.slice(-3)&&(path+=\\\".js\\\"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,\\\"string\\\"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),\\\"function\\\"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=[\\\"require\\\",\\\"exports\\\",\\\"module\\\"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case\\\"require\\\":return req;case\\\"exports\\\":return module.exports;case\\\"module\\\":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire(\\\"ace/lib/event_emitter\\\").EventEmitter,oop=window.acequire(\\\"ace/lib/oop\\\"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:\\\"call\\\",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:\\\"event\\\",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error(\\\"Unknown command:\\\"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire(\\\"ace/lib/es5-shim\\\"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define(\\\"ace/lib/oop\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define(\\\"ace/range\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return\\\"Range: [\\\"+this.start.row+\\\"/\\\"+this.start.column+\\\"] -> [\\\"+this.end.row+\\\"/\\\"+this.end.column+\\\"]\\\"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){\\\"object\\\"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){\\\"object\\\"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define(\\\"ace/apply_delta\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||\\\"\\\";switch(delta.action){case\\\"insert\\\":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case\\\"remove\\\":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define(\\\"ace/lib/event_emitter\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){\\\"object\\\"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?\\\"unshift\\\":\\\"push\\\"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define(\\\"ace/anchor\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/lib/event_emitter\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"./lib/oop\\\"),EventEmitter=acequire(\\\"./lib/event_emitter\\\").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert=\\\"insert\\\"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal(\\\"change\\\",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener(\\\"change\\\",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on(\\\"change\\\",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define(\\\"ace/document\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/apply_delta\\\",\\\"ace/lib/event_emitter\\\",\\\"ace/range\\\",\\\"ace/anchor\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"./lib/oop\\\"),applyDelta=acequire(\\\"./apply_delta\\\").applyDelta,EventEmitter=acequire(\\\"./lib/event_emitter\\\").EventEmitter,Range=acequire(\\\"./range\\\").Range,Anchor=acequire(\\\"./anchor\\\").Anchor,Document=function(textOrLines){this.$lines=[\\\"\\\"],0===textOrLines.length?this.$lines=[\\\"\\\"]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0===\\\"aaa\\\".split(/a/).length?function(text){return text.replace(/\\\\r\\\\n|\\\\r/g,\\\"\\\\n\\\").split(\\\"\\\\n\\\")}:function(text){return text.split(/\\\\r\\\\n|\\\\r|\\\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\\\r\\\\n|\\\\r|\\\\n)/m);this.$autoNewLine=match?match[1]:\\\"\\\\n\\\",this._signal(\\\"changeNewLineMode\\\")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case\\\"windows\\\":return\\\"\\\\r\\\\n\\\";case\\\"unix\\\":return\\\"\\\\n\\\";default:return this.$autoNewLine||\\\"\\\\n\\\"}},this.$autoNewLine=\\\"\\\",this.$newLineMode=\\\"auto\\\",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal(\\\"changeNewLineMode\\\"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return\\\"\\\\r\\\\n\\\"==text||\\\"\\\\r\\\"==text||\\\"\\\\n\\\"==text},this.getLine=function(row){return this.$lines[row]||\\\"\\\"},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||\\\"\\\").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn(\\\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\\\"),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn(\\\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\\\"),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn(\\\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\\\"),this.insertMergedLines(position,[\\\"\\\",\\\"\\\"])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:\\\"insert\\\",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([\\\"\\\"]),column=0):(lines=[\\\"\\\"].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:\\\"insert\\\",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:\\\"remove\\\",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:\\\"remove\\\",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:\\\"remove\\\",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:\\\"remove\\\",lines:[\\\"\\\",\\\"\\\"]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert=\\\"insert\\\"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal(\\\"change\\\",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(\\\"\\\"),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:\\\"insert\\\"==delta.action?\\\"remove\\\":\\\"insert\\\",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define(\\\"ace/lib/lang\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(acequire,exports){\\\"use strict\\\";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split(\\\"\\\").reverse().join(\\\"\\\")},exports.stringRepeat=function(string,count){for(var result=\\\"\\\";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\\\s\\\\s*/,trimEndRegexp=/\\\\s\\\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,\\\"\\\")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,\\\"\\\")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&\\\"object\\\"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if(\\\"object\\\"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if(\\\"[object Object]\\\"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\\\]\\\\/\\\\\\\\])/g,\\\"\\\\\\\\$1\\\")},exports.escapeHTML=function(str){return str.replace(/&/g,\\\"&#38;\\\").replace(/\\\"/g,\\\"&#34;\\\").replace(/'/g,\\\"&#39;\\\").replace(/</g,\\\"&#60;\\\")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define(\\\"ace/worker/mirror\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/range\\\",\\\"ace/document\\\",\\\"ace/lib/lang\\\"],function(acequire,exports){\\\"use strict\\\";acequire(\\\"../range\\\").Range;var Document=acequire(\\\"../document\\\").Document,lang=acequire(\\\"../lib/lang\\\"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(\\\"\\\"),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on(\\\"change\\\",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:\\\"insert\\\",start:data[i],lines:data[i+1]};else var d={action:\\\"remove\\\",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define(\\\"ace/mode/json/json_parse\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(){\\\"use strict\\\";var at,ch,text,value,escapee={'\\\"':'\\\"',\\\"\\\\\\\\\\\":\\\"\\\\\\\\\\\",\\\"/\\\":\\\"/\\\",b:\\\"\\\\b\\\",f:\\\"\\\\f\\\",n:\\\"\\\\n\\\",r:\\\"\\\\r\\\",t:\\\"\\t\\\"},error=function(m){throw{name:\\\"SyntaxError\\\",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error(\\\"Expected '\\\"+c+\\\"' instead of '\\\"+ch+\\\"'\\\"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string=\\\"\\\";for(\\\"-\\\"===ch&&(string=\\\"-\\\",next(\\\"-\\\"));ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch,next();if(\\\".\\\"===ch)for(string+=\\\".\\\";next()&&ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch;if(\\\"e\\\"===ch||\\\"E\\\"===ch)for(string+=ch,next(),(\\\"-\\\"===ch||\\\"+\\\"===ch)&&(string+=ch,next());ch>=\\\"0\\\"&&\\\"9\\\">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error(\\\"Bad number\\\"),void 0):number},string=function(){var hex,i,uffff,string=\\\"\\\";if('\\\"'===ch)for(;next();){if('\\\"'===ch)return next(),string;if(\\\"\\\\\\\\\\\"===ch)if(next(),\\\"u\\\"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if(\\\"string\\\"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error(\\\"Bad string\\\")},white=function(){for(;ch&&\\\" \\\">=ch;)next()},word=function(){switch(ch){case\\\"t\\\":return next(\\\"t\\\"),next(\\\"r\\\"),next(\\\"u\\\"),next(\\\"e\\\"),!0;case\\\"f\\\":return next(\\\"f\\\"),next(\\\"a\\\"),next(\\\"l\\\"),next(\\\"s\\\"),next(\\\"e\\\"),!1;case\\\"n\\\":return next(\\\"n\\\"),next(\\\"u\\\"),next(\\\"l\\\"),next(\\\"l\\\"),null}error(\\\"Unexpected '\\\"+ch+\\\"'\\\")},array=function(){var array=[];if(\\\"[\\\"===ch){if(next(\\\"[\\\"),white(),\\\"]\\\"===ch)return next(\\\"]\\\"),array;for(;ch;){if(array.push(value()),white(),\\\"]\\\"===ch)return next(\\\"]\\\"),array;next(\\\",\\\"),white()}}error(\\\"Bad array\\\")},object=function(){var key,object={};if(\\\"{\\\"===ch){if(next(\\\"{\\\"),white(),\\\"}\\\"===ch)return next(\\\"}\\\"),object;for(;ch;){if(key=string(),white(),next(\\\":\\\"),Object.hasOwnProperty.call(object,key)&&error('Duplicate key \\\"'+key+'\\\"'),object[key]=value(),white(),\\\"}\\\"===ch)return next(\\\"}\\\"),object;next(\\\",\\\"),white()}}error(\\\"Bad object\\\")};return value=function(){switch(white(),ch){case\\\"{\\\":return object();case\\\"[\\\":return array();case'\\\"':return string();case\\\"-\\\":return number();default:return ch>=\\\"0\\\"&&\\\"9\\\">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=\\\" \\\",result=value(),white(),ch&&error(\\\"Syntax error\\\"),\\\"function\\\"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&\\\"object\\\"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({\\\"\\\":result},\\\"\\\"):result}}),ace.define(\\\"ace/mode/json_worker\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\",\\\"ace/lib/oop\\\",\\\"ace/worker/mirror\\\",\\\"ace/mode/json/json_parse\\\"],function(acequire,exports){\\\"use strict\\\";var oop=acequire(\\\"../lib/oop\\\"),Mirror=acequire(\\\"../worker/mirror\\\").Mirror,parse=acequire(\\\"./json/json_parse\\\"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:\\\"error\\\"})}this.sender.emit(\\\"annotate\\\",errors)}}.call(JsonWorker.prototype)}),ace.define(\\\"ace/lib/es5-shim\\\",[\\\"require\\\",\\\"exports\\\",\\\"module\\\"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,\\\"sentinel\\\",{}),\\\"sentinel\\\"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if(\\\"function\\\"!=typeof target)throw new TypeError(\\\"Function.prototype.bind called on incompatible \\\"+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,\\\"__defineGetter__\\\"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,\\\"XXX\\\"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return\\\"[object Array]\\\"==_toString(obj)});var boxedString=Object(\\\"a\\\"),splitString=\\\"a\\\"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,result=[],thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0,thisp=arguments[1];if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");if(!length&&1==arguments.length)throw new TypeError(\\\"reduce of empty array with no initial value\\\");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError(\\\"reduce of empty array with no initial value\\\")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):object,length=self.length>>>0;if(\\\"[object Function]\\\"!=_toString(fun))throw new TypeError(fun+\\\" is not a function\\\");if(!length&&1==arguments.length)throw new TypeError(\\\"reduceRight of empty array with no initial value\\\");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError(\\\"reduceRight of empty array with no initial value\\\")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&\\\"[object String]\\\"==_toString(this)?this.split(\\\"\\\"):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT=\\\"Object.getOwnPropertyDescriptor called on a non-object: \\\";Object.getOwnPropertyDescriptor=function(object,property){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if(\\\"object\\\"!=typeof prototype)throw new TypeError(\\\"typeof prototype[\\\"+typeof prototype+\\\"] != 'object'\\\");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom=\\\"undefined\\\"==typeof document||doesDefinePropertyWork(document.createElement(\\\"div\\\"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR=\\\"Property description must be an object: \\\",ERR_NON_OBJECT_TARGET=\\\"Object.defineProperty called on non-object: \\\",ERR_ACCESSORS_NOT_SUPPORTED=\\\"getters & setters can not be defined on this javascript engine\\\";Object.defineProperty=function(object,property,descriptor){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(\\\"object\\\"!=typeof descriptor&&\\\"function\\\"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,\\\"value\\\"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,\\\"get\\\")&&defineGetter(object,property,descriptor.get),owns(descriptor,\\\"set\\\")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return\\\"function\\\"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name=\\\"\\\";owns(object,name);)name+=\\\"?\\\";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=[\\\"toString\\\",\\\"toLocaleString\\\",\\\"valueOf\\\",\\\"hasOwnProperty\\\",\\\"isPrototypeOf\\\",\\\"propertyIsEnumerable\\\",\\\"constructor\\\"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if(\\\"object\\\"!=typeof object&&\\\"function\\\"!=typeof object||null===object)throw new TypeError(\\\"Object.keys called on a non-object\\\");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws=\\\"\\t\\\\n\\u000b\\\\f\\\\r   ᠎             　\\\\u2028\\\\u2029﻿\\\";if(!String.prototype.trim||ws.trim()){ws=\\\"[\\\"+ws+\\\"]\\\";var trimBeginRegexp=RegExp(\\\"^\\\"+ws+ws+\\\"*\\\"),trimEndRegexp=RegExp(ws+ws+\\\"*$\\\");String.prototype.trim=function(){return(this+\\\"\\\").replace(trimBeginRegexp,\\\"\\\").replace(trimEndRegexp,\\\"\\\")}}var toObject=function(o){if(null==o)throw new TypeError(\\\"can't convert \\\"+o+\\\" to object\\\");return Object(o)}});\";","/*\r\n * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license\r\n * Author: Jim Palmer (based on chunking idea from Dave Koelle)\r\n */\r\n/*jshint unused:false */\r\nmodule.exports = function naturalSort (a, b) {\r\n\t\"use strict\";\r\n\tvar re = /(^([+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?$|^0x[0-9a-f]+$|\\d+)/gi,\r\n\t\tsre = /(^[ ]*|[ ]*$)/g,\r\n\t\tdre = /(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,\r\n\t\thre = /^0x[0-9a-f]+$/i,\r\n\t\tore = /^0/,\r\n\t\ti = function(s) { return naturalSort.insensitive && ('' + s).toLowerCase() || '' + s; },\r\n\t\t// convert all to strings strip whitespace\r\n\t\tx = i(a).replace(sre, '') || '',\r\n\t\ty = i(b).replace(sre, '') || '',\r\n\t\t// chunk/tokenize\r\n\t\txN = x.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\r\n\t\tyN = y.replace(re, '\\0$1\\0').replace(/\\0$/,'').replace(/^\\0/,'').split('\\0'),\r\n\t\t// numeric, hex or date detection\r\n\t\txD = parseInt(x.match(hre), 16) || (xN.length !== 1 && x.match(dre) && Date.parse(x)),\r\n\t\tyD = parseInt(y.match(hre), 16) || xD && y.match(dre) && Date.parse(y) || null,\r\n\t\toFxNcL, oFyNcL;\r\n\t// first try and sort Hex codes or Dates\r\n\tif (yD) {\r\n\t\tif ( xD < yD ) { return -1; }\r\n\t\telse if ( xD > yD ) { return 1; }\r\n\t}\r\n\t// natural sorting through split numeric strings and default strings\r\n\tfor(var cLoc=0, numS=Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {\r\n\t\t// find floats not starting with '0', string or 0 if not defined (Clint Priest)\r\n\t\toFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc]) || xN[cLoc] || 0;\r\n\t\toFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc]) || yN[cLoc] || 0;\r\n\t\t// handle numeric vs string comparison - number < string - (Kyle Adams)\r\n\t\tif (isNaN(oFxNcL) !== isNaN(oFyNcL)) { return (isNaN(oFxNcL)) ? 1 : -1; }\r\n\t\t// rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'\r\n\t\telse if (typeof oFxNcL !== typeof oFyNcL) {\r\n\t\t\toFxNcL += '';\r\n\t\t\toFyNcL += '';\r\n\t\t}\r\n\t\tif (oFxNcL < oFyNcL) { return -1; }\r\n\t\tif (oFxNcL > oFyNcL) { return 1; }\r\n\t}\r\n\treturn 0;\r\n};\r\n","'use strict';\nmodule.exports = function generate_allOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $allSchemasEmpty = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if (it.util.schemaHasRules($sch, it.RULES.all)) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += ' if (true) { ';\n    } else {\n      out += ' ' + ($closingBraces.slice(0, -1)) + ' ';\n    }\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n","'use strict';\n\n\nvar Cache = module.exports = function Cache() {\n  this._cache = {};\n};\n\n\nCache.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\n\n\nCache.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\n\n\nCache.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\n\n\nCache.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\n","'use strict';\n\n//all requires must be explicit because browserify won't work with dynamic requires\nmodule.exports = {\n  '$ref': require('../dotjs/ref'),\n  allOf: require('../dotjs/allOf'),\n  anyOf: require('../dotjs/anyOf'),\n  const: require('../dotjs/const'),\n  contains: require('../dotjs/contains'),\n  dependencies: require('../dotjs/dependencies'),\n  'enum': require('../dotjs/enum'),\n  format: require('../dotjs/format'),\n  items: require('../dotjs/items'),\n  maximum: require('../dotjs/_limit'),\n  minimum: require('../dotjs/_limit'),\n  maxItems: require('../dotjs/_limitItems'),\n  minItems: require('../dotjs/_limitItems'),\n  maxLength: require('../dotjs/_limitLength'),\n  minLength: require('../dotjs/_limitLength'),\n  maxProperties: require('../dotjs/_limitProperties'),\n  minProperties: require('../dotjs/_limitProperties'),\n  multipleOf: require('../dotjs/multipleOf'),\n  not: require('../dotjs/not'),\n  oneOf: require('../dotjs/oneOf'),\n  pattern: require('../dotjs/pattern'),\n  properties: require('../dotjs/properties'),\n  propertyNames: require('../dotjs/propertyNames'),\n  required: require('../dotjs/required'),\n  uniqueItems: require('../dotjs/uniqueItems'),\n  validate: require('../dotjs/validate')\n};\n","'use strict';\n\nvar ContextMenu = require('./ContextMenu');\nvar translate = require('./i18n').translate;\nvar util = require('./util');\n\n/**\n * Creates a component that visualize path selection in tree based editors\n * @param {HTMLElement} container \n * @param {HTMLElement} root\n * @constructor\n */\nfunction TreePath(container, root) {\n  if (container) {\n    this.root = root;\n    this.path = document.createElement('div');\n    this.path.className = 'jsoneditor-treepath';\n    this.path.setAttribute('tabindex',0);\n    this.contentMenuClicked;\n    container.appendChild(this.path);\n    this.reset();\n  }\n}\n\n/**\n * Reset component to initial status\n */\nTreePath.prototype.reset = function () {\n  this.path.innerHTML = translate('selectNode');\n};\n\n/**\n * Renders the component UI according to a given path objects\n * @param {Array<{name: String, childs: Array}>} pathObjs a list of path objects\n * \n */\nTreePath.prototype.setPath = function (pathObjs) {\n  var me = this;\n\n  this.path.innerHTML = '';\n\n  if (pathObjs && pathObjs.length) {\n    pathObjs.forEach(function (pathObj, idx) {\n      var pathEl = document.createElement('span');\n      var sepEl;\n      pathEl.className = 'jsoneditor-treepath-element';\n      pathEl.innerText = pathObj.name;\n      pathEl.onclick = _onSegmentClick.bind(me, pathObj);\n  \n      me.path.appendChild(pathEl);\n\n      if (pathObj.children.length) {\n        sepEl = document.createElement('span');\n        sepEl.className = 'jsoneditor-treepath-seperator';\n        sepEl.innerHTML = '&#9658;';\n\n        sepEl.onclick = function () {\n          me.contentMenuClicked = true;\n          var items = [];\n          pathObj.children.forEach(function (child) {\n            items.push({\n              'text': child.name,\n              'className': 'jsoneditor-type-modes' + (pathObjs[idx + 1] + 1 && pathObjs[idx + 1].name === child.name ? ' jsoneditor-selected' : ''),\n              'click': _onContextMenuItemClick.bind(me, pathObj, child.name)\n            });\n          });\n          var menu = new ContextMenu(items);\n          menu.show(sepEl, me.root, true);\n        };\n\n        me.path.appendChild(sepEl);\n      }\n\n      if(idx === pathObjs.length - 1) {\n        var leftRectPos = (sepEl || pathEl).getBoundingClientRect().right;\n        if(me.path.offsetWidth < leftRectPos) {\n          me.path.scrollLeft = leftRectPos;\n        }\n\n        if (me.path.scrollLeft) {\n          var showAllBtn = document.createElement('span');\n          showAllBtn.className = 'jsoneditor-treepath-show-all-btn';\n          showAllBtn.title = 'show all path';\n          showAllBtn.innerHTML = '...';\n          showAllBtn.onclick = _onShowAllClick.bind(me, pathObjs);\n          me.path.insertBefore(showAllBtn, me.path.firstChild);\n        }\n      }\n    });\n  }\n\n  function _onShowAllClick(pathObjs) {\n    me.contentMenuClicked = false;\n    util.addClassName(me.path, 'show-all');\n    me.path.style.width = me.path.parentNode.getBoundingClientRect().width - 10 + 'px';\n    me.path.onblur = function() {\n      if (me.contentMenuClicked) {\n        me.contentMenuClicked = false;\n        me.path.focus();\n        return;\n      }\n      util.removeClassName(me.path, 'show-all');\n      me.path.onblur = undefined;\n      me.path.style.width = '';\n      me.setPath(pathObjs);\n    };\n  }\n\n  function _onSegmentClick(pathObj) {\n    if (this.selectionCallback) {\n      this.selectionCallback(pathObj);\n    }\n  }\n\n  function _onContextMenuItemClick(pathObj, selection) {\n    if (this.contextMenuCallback) {\n      this.contextMenuCallback(pathObj, selection);\n    }\n  }\n};\n\n/**\n * set a callback function for selection of path section\n * @param {Function} callback function to invoke when section is selected\n */\nTreePath.prototype.onSectionSelected = function (callback) {\n  if (typeof callback === 'function') {\n    this.selectionCallback = callback;      \n  }\n};\n\n/**\n * set a callback function for selection of path section\n * @param {Function} callback function to invoke when section is selected\n */\nTreePath.prototype.onContextMenuItemSelected = function (callback) {\n  if (typeof callback === 'function') {\n    this.contextMenuCallback = callback;\n  }\n};\n\nmodule.exports = TreePath;","'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n","'use strict';\n\n\nmodule.exports = {\n  copy: copy,\n  checkDataType: checkDataType,\n  checkDataTypes: checkDataTypes,\n  coerceToTypes: coerceToTypes,\n  toHash: toHash,\n  getProperty: getProperty,\n  escapeQuotes: escapeQuotes,\n  equal: require('fast-deep-equal'),\n  ucs2length: require('./ucs2length'),\n  varOccurences: varOccurences,\n  varReplace: varReplace,\n  cleanUpCode: cleanUpCode,\n  finalCleanUpCode: finalCleanUpCode,\n  schemaHasRules: schemaHasRules,\n  schemaHasRulesExcept: schemaHasRulesExcept,\n  toQuotedString: toQuotedString,\n  getPathExpr: getPathExpr,\n  getPath: getPath,\n  getData: getData,\n  unescapeFragment: unescapeFragment,\n  unescapeJsonPointer: unescapeJsonPointer,\n  escapeFragment: escapeFragment,\n  escapeJsonPointer: escapeJsonPointer\n};\n\n\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o) to[key] = o[key];\n  return to;\n}\n\n\nfunction checkDataType(dataType, data, negate) {\n  var EQUAL = negate ? ' !== ' : ' === '\n    , AND = negate ? ' || ' : ' && '\n    , OK = negate ? '!' : ''\n    , NOT = negate ? '' : '!';\n  switch (dataType) {\n    case 'null': return data + EQUAL + 'null';\n    case 'array': return OK + 'Array.isArray(' + data + ')';\n    case 'object': return '(' + OK + data + AND +\n                          'typeof ' + data + EQUAL + '\"object\"' + AND +\n                          NOT + 'Array.isArray(' + data + '))';\n    case 'integer': return '(typeof ' + data + EQUAL + '\"number\"' + AND +\n                           NOT + '(' + data + ' % 1)' +\n                           AND + data + EQUAL + data + ')';\n    default: return 'typeof ' + data + EQUAL + '\"' + dataType + '\"';\n  }\n}\n\n\nfunction checkDataTypes(dataTypes, data) {\n  switch (dataTypes.length) {\n    case 1: return checkDataType(dataTypes[0], data, true);\n    default:\n      var code = '';\n      var types = toHash(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? '(': '(!' + data + ' || ';\n        code += 'typeof ' + data + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number) delete types.integer;\n      for (var t in types)\n        code += (code ? ' && ' : '' ) + checkDataType(t, data, true);\n\n      return code;\n  }\n}\n\n\nvar COERCE_TO_TYPES = toHash([ 'string', 'number', 'integer', 'boolean', 'null' ]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i=0; i<dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t]) types[types.length] = t;\n      else if (optionCoerceTypes === 'array' && t === 'array') types[types.length] = t;\n    }\n    if (types.length) return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === 'array' && dataTypes === 'array') {\n    return ['array'];\n  }\n}\n\n\nfunction toHash(arr) {\n  var hash = {};\n  for (var i=0; i<arr.length; i++) hash[arr[i]] = true;\n  return hash;\n}\n\n\nvar IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == 'number'\n          ? '[' + key + ']'\n          : IDENTIFIER.test(key)\n            ? '.' + key\n            : \"['\" + escapeQuotes(key) + \"']\";\n}\n\n\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, '\\\\$&')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\f/g, '\\\\f')\n            .replace(/\\t/g, '\\\\t');\n}\n\n\nfunction varOccurences(str, dataVar) {\n  dataVar += '[^0-9]';\n  var matches = str.match(new RegExp(dataVar, 'g'));\n  return matches ? matches.length : 0;\n}\n\n\nfunction varReplace(str, dataVar, expr) {\n  dataVar += '([^0-9])';\n  expr = expr.replace(/\\$/g, '$$$$');\n  return str.replace(new RegExp(dataVar, 'g'), expr + '$1');\n}\n\n\nvar EMPTY_ELSE = /else\\s*{\\s*}/g\n  , EMPTY_IF_NO_ELSE = /if\\s*\\([^)]+\\)\\s*\\{\\s*\\}(?!\\s*else)/g\n  , EMPTY_IF_WITH_ELSE = /if\\s*\\(([^)]+)\\)\\s*\\{\\s*\\}\\s*else(?!\\s*if)/g;\nfunction cleanUpCode(out) {\n  return out.replace(EMPTY_ELSE, '')\n            .replace(EMPTY_IF_NO_ELSE, '')\n            .replace(EMPTY_IF_WITH_ELSE, 'if (!($1))');\n}\n\n\nvar ERRORS_REGEXP = /[^v.]errors/g\n  , REMOVE_ERRORS = /var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g\n  , REMOVE_ERRORS_ASYNC = /var errors = 0;|var vErrors = null;/g\n  , RETURN_VALID = 'return errors === 0;'\n  , RETURN_TRUE = 'validate.errors = null; return true;'\n  , RETURN_ASYNC = /if \\(errors === 0\\) return data;\\s*else throw new ValidationError\\(vErrors\\);/\n  , RETURN_DATA_ASYNC = 'return data;'\n  , ROOTDATA_REGEXP = /[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g\n  , REMOVE_ROOTDATA = /if \\(rootData === undefined\\) rootData = data;/;\n\nfunction finalCleanUpCode(out, async) {\n  var matches = out.match(ERRORS_REGEXP);\n  if (matches && matches.length == 2) {\n    out = async\n          ? out.replace(REMOVE_ERRORS_ASYNC, '')\n               .replace(RETURN_ASYNC, RETURN_DATA_ASYNC)\n          : out.replace(REMOVE_ERRORS, '')\n               .replace(RETURN_VALID, RETURN_TRUE);\n  }\n\n  matches = out.match(ROOTDATA_REGEXP);\n  if (!matches || matches.length !== 3) return out;\n  return out.replace(REMOVE_ROOTDATA, '');\n}\n\n\nfunction schemaHasRules(schema, rules) {\n  if (typeof schema == 'boolean') return !schema;\n  for (var key in schema) if (rules[key]) return true;\n}\n\n\nfunction schemaHasRulesExcept(schema, rules, exceptKeyword) {\n  if (typeof schema == 'boolean') return !schema && exceptKeyword != 'not';\n  for (var key in schema) if (key != exceptKeyword && rules[key]) return true;\n}\n\n\nfunction toQuotedString(str) {\n  return '\\'' + escapeQuotes(str) + '\\'';\n}\n\n\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers // false by default\n              ? '\\'/\\' + ' + expr + (isNumber ? '' : '.replace(/~/g, \\'~0\\').replace(/\\\\//g, \\'~1\\')')\n              : (isNumber ? '\\'[\\' + ' + expr + ' + \\']\\'' : '\\'[\\\\\\'\\' + ' + expr + ' + \\'\\\\\\']\\'');\n  return joinPaths(currentPath, path);\n}\n\n\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers // false by default\n              ? toQuotedString('/' + escapeJsonPointer(prop))\n              : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\n\n\nvar JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data, matches;\n  if ($data === '') return 'rootData';\n  if ($data[0] == '/') {\n    if (!JSON_POINTER.test($data)) throw new Error('Invalid JSON-pointer: ' + $data);\n    jsonPointer = $data;\n    data = 'rootData';\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER);\n    if (!matches) throw new Error('Invalid JSON-pointer: ' + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == '#') {\n      if (up >= lvl) throw new Error('Cannot access property/index ' + up + ' levels up, current level is ' + lvl);\n      return paths[lvl - up];\n    }\n\n    if (up > lvl) throw new Error('Cannot access data ' + up + ' levels up, current level is ' + lvl);\n    data = 'data' + ((lvl - up) || '');\n    if (!jsonPointer) return data;\n  }\n\n  var expr = data;\n  var segments = jsonPointer.split('/');\n  for (var i=0; i<segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data += getProperty(unescapeJsonPointer(segment));\n      expr += ' && ' + data;\n    }\n  }\n  return expr;\n}\n\n\nfunction joinPaths (a, b) {\n  if (a == '\"\"') return b;\n  return (a + ' + ' + b).replace(/' \\+ '/g, '');\n}\n\n\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\n\n\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\n\n\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\n\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n","var picoModal = require('picomodal');\nvar translate = require('./i18n').translate;\n\n/**\n * Show advanced sorting modal\n * @param {Node} node the node to be sorted\n * @param {HTMLElement} container   The container where to center\n *                                  the modal and create an overlay\n */\nfunction showSortModal (node, container) {\n  var content = '<div class=\"pico-modal-contents\">' +\n      '<div class=\"pico-modal-header\">' + translate('sort') + '</div>' +\n      '<form>' +\n      '<table>' +\n      '<tbody>' +\n      '<tr>' +\n      '  <td>' + translate('sortFieldLabel') + ' </td>' +\n      '  <td class=\"jsoneditor-modal-input\">' +\n      '  <div class=\"jsoneditor-select-wrapper\">' +\n      '    <select id=\"field\" title=\"' + translate('sortFieldTitle') + '\">' +\n      '    </select>' +\n      '  </div>' +\n      '  </td>' +\n      '</tr>' +\n      '<tr>' +\n      '  <td>' + translate('sortDirectionLabel') + ' </td>' +\n      '  <td class=\"jsoneditor-modal-input\">' +\n      '  <div id=\"direction\" class=\"jsoneditor-button-group\">' +\n      '<input type=\"button\" ' +\n      'value=\"' + translate('sortAscending') + '\" ' +\n      'title=\"'  + translate('sortAscendingTitle') + '\" ' +\n      'data-value=\"asc\" ' +\n      'class=\"jsoneditor-button-first jsoneditor-button-asc\"/>' +\n      '<input type=\"button\" ' +\n      'value=\"' + translate('sortDescending') + '\" ' +\n      'title=\"' + translate('sortDescendingTitle') + '\" ' +\n      'data-value=\"desc\" ' +\n      'class=\"jsoneditor-button-last jsoneditor-button-desc\"/>' +\n      '  </div>' +\n      '  </td>' +\n      '</tr>' +\n      '<tr>' +\n      '<td colspan=\"2\" class=\"jsoneditor-modal-input jsoneditor-modal-actions\">' +\n      '  <input type=\"submit\" id=\"ok\" value=\"' + translate('ok') + '\" />' +\n      '</td>' +\n      '</tr>' +\n      '</tbody>' +\n      '</table>' +\n      '</form>' +\n      '</div>';\n\n  picoModal({\n    parent: container,\n    content: content,\n    overlayClass: 'jsoneditor-modal-overlay',\n    modalClass: 'jsoneditor-modal jsoneditor-modal-sort'\n  })\n      .afterCreate(function (modal) {\n        var form = modal.modalElem().querySelector('form');\n        var ok = modal.modalElem().querySelector('#ok');\n        var field = modal.modalElem().querySelector('#field');\n        var direction = modal.modalElem().querySelector('#direction');\n\n        var paths = node.type === 'array'\n            ? node.getChildPaths()\n            : ['.'];\n\n        paths.forEach(function (path) {\n          var option = document.createElement('option');\n          option.text = path;\n          option.value = path;\n          field.appendChild(option);\n        });\n\n        function setDirection(value) {\n          direction.value = value;\n          direction.className = 'jsoneditor-button-group jsoneditor-button-group-value-' + direction.value;\n        }\n\n        field.value = node.sortedBy ? node.sortedBy.path : paths[0];\n        setDirection(node.sortedBy ? node.sortedBy.direction : 'asc');\n\n        direction.onclick = function (event) {\n          setDirection(event.target.getAttribute('data-value'));\n        };\n\n        ok.onclick = function (event) {\n          event.preventDefault();\n          event.stopPropagation();\n\n          modal.close();\n\n          var path = field.value;\n          var pathArray = (path === '.') ? [] : path.split('.').slice(1);\n\n          node.sortedBy = {\n            path: path,\n            direction: direction.value\n          };\n\n          node.sort(pathArray, direction.value)\n        };\n\n        if (form) { // form is not available when JSONEditor is created inside a form\n          form.onsubmit = ok.onclick;\n        }\n      })\n      .afterClose(function (modal) {\n        modal.destroy();\n      })\n      .show();\n}\n\nmodule.exports = showSortModal;\n","/*!\n * @sphinxxxx/color-conversion v2.2.2\n * https://github.com/Sphinxxxx/color-conversion\n *\n * Copyright 2017-2019 Joudee (https://github.com/Joudee), Andreas Borgen (https://github.com/Sphinxxxx), Michael Jackson (https://github.com/mjackson)\n * Released under the ISC license.\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Color = factory());\n}(this, (function () { 'use strict';\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nString.prototype.startsWith = String.prototype.startsWith || function (needle) {\n    return this.indexOf(needle) === 0;\n};\nString.prototype.padStart = String.prototype.padStart || function (len, pad) {\n    var str = this;while (str.length < len) {\n        str = pad + str;\n    }return str;\n};\n\n\nvar colorNames = { cb: '0f8ff', tqw: 'aebd7', q: '-ffff', qmrn: '7fffd4', zr: '0ffff', bg: '5f5dc', bsq: 'e4c4', bck: '---', nch: 'ebcd', b: '--ff', bvt: '8a2be2', brwn: 'a52a2a', brw: 'deb887', ctb: '5f9ea0', hrt: '7fff-', chcT: 'd2691e', cr: '7f50', rnw: '6495ed', crns: '8dc', crms: 'dc143c', cn: '-ffff', Db: '--8b', Dcn: '-8b8b', Dgnr: 'b8860b', Dgr: 'a9a9a9', Dgrn: '-64-', Dkhk: 'bdb76b', Dmgn: '8b-8b', Dvgr: '556b2f', Drng: '8c-', Drch: '9932cc', Dr: '8b--', Dsmn: 'e9967a', Dsgr: '8fbc8f', DsTb: '483d8b', DsTg: '2f4f4f', Dtrq: '-ced1', Dvt: '94-d3', ppnk: '1493', pskb: '-bfff', mgr: '696969', grb: '1e90ff', rbrc: 'b22222', rwht: 'af0', stg: '228b22', chs: '-ff', gnsb: 'dcdcdc', st: '8f8ff', g: 'd7-', gnr: 'daa520', gr: '808080', grn: '-8-0', grnw: 'adff2f', hnw: '0fff0', htpn: '69b4', nnr: 'cd5c5c', ng: '4b-82', vr: '0', khk: '0e68c', vnr: 'e6e6fa', nrb: '0f5', wngr: '7cfc-', mnch: 'acd', Lb: 'add8e6', Lcr: '08080', Lcn: 'e0ffff', Lgnr: 'afad2', Lgr: 'd3d3d3', Lgrn: '90ee90', Lpnk: 'b6c1', Lsmn: 'a07a', Lsgr: '20b2aa', Lskb: '87cefa', LsTg: '778899', Lstb: 'b0c4de', Lw: 'e0', m: '-ff-', mgrn: '32cd32', nn: 'af0e6', mgnt: '-ff', mrn: '8--0', mqm: '66cdaa', mmb: '--cd', mmrc: 'ba55d3', mmpr: '9370db', msg: '3cb371', mmsT: '7b68ee', '': '-fa9a', mtr: '48d1cc', mmvt: 'c71585', mnLb: '191970', ntc: '5fffa', mstr: 'e4e1', mccs: 'e4b5', vjw: 'dead', nv: '--80', c: 'df5e6', v: '808-0', vrb: '6b8e23', rng: 'a5-', rngr: '45-', rch: 'da70d6', pgnr: 'eee8aa', pgrn: '98fb98', ptrq: 'afeeee', pvtr: 'db7093', ppwh: 'efd5', pchp: 'dab9', pr: 'cd853f', pnk: 'c0cb', pm: 'dda0dd', pwrb: 'b0e0e6', prp: '8-080', cc: '663399', r: '--', sbr: 'bc8f8f', rb: '4169e1', sbrw: '8b4513', smn: 'a8072', nbr: '4a460', sgrn: '2e8b57', ssh: '5ee', snn: 'a0522d', svr: 'c0c0c0', skb: '87ceeb', sTb: '6a5acd', sTgr: '708090', snw: 'afa', n: '-ff7f', stb: '4682b4', tn: 'd2b48c', t: '-8080', thst: 'd8bfd8', tmT: '6347', trqs: '40e0d0', vt: 'ee82ee', whT: '5deb3', wht: '', hts: '5f5f5', w: '-', wgrn: '9acd32' };\n\nfunction printNum(num) {\n    var decs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    var str = decs > 0 ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '') : num.toString();\n    return str || '0';\n}\n\nvar Color = function () {\n    function Color(r, g, b, a) {\n        classCallCheck(this, Color);\n\n\n        var that = this;\n        function parseString(input) {\n\n            if (input.startsWith('hsl')) {\n                var _input$match$map = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map2 = slicedToArray(_input$match$map, 4),\n                    h = _input$match$map2[0],\n                    s = _input$match$map2[1],\n                    l = _input$match$map2[2],\n                    _a = _input$match$map2[3];\n\n                if (_a === undefined) {\n                    _a = 1;\n                }\n\n                h /= 360;\n                s /= 100;\n                l /= 100;\n                that.hsla = [h, s, l, _a];\n            }\n\n            else if (input.startsWith('rgb')) {\n                    var _input$match$map3 = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                        _input$match$map4 = slicedToArray(_input$match$map3, 4),\n                        _r = _input$match$map4[0],\n                        _g = _input$match$map4[1],\n                        _b = _input$match$map4[2],\n                        _a2 = _input$match$map4[3];\n\n                    if (_a2 === undefined) {\n                        _a2 = 1;\n                    }\n\n                    that.rgba = [_r, _g, _b, _a2];\n                }\n\n                else {\n                        if (input.startsWith('#')) {\n                            that.rgba = Color.hexToRgb(input);\n                        } else {\n                            that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\n                        }\n                    }\n        }\n\n        if (r === undefined) {}\n\n\n        else if (Array.isArray(r)) {\n                this.rgba = r;\n            }\n\n            else if (b === undefined) {\n                    var color = r && '' + r;\n                    if (color) {\n                        parseString(color.toLowerCase());\n                    }\n                } else {\n                    this.rgba = [r, g, b, a === undefined ? 1 : a];\n                }\n    }\n\n\n    createClass(Color, [{\n        key: 'printRGB',\n        value: function printRGB(alpha) {\n            var rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\n                vals = rgb.map(function (x, i) {\n                return printNum(x, i === 3 ? 3 : 0);\n            });\n\n            return alpha ? 'rgba(' + vals + ')' : 'rgb(' + vals + ')';\n        }\n    }, {\n        key: 'printHSL',\n        value: function printHSL(alpha) {\n            var mults = [360, 100, 100, 1],\n                suff = ['', '%', '%', ''];\n\n            var hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\n\n            vals = hsl.map(function (x, i) {\n                return printNum(x * mults[i], i === 3 ? 3 : 1) + suff[i];\n            });\n\n            return alpha ? 'hsla(' + vals + ')' : 'hsl(' + vals + ')';\n        }\n    }, {\n        key: 'printHex',\n        value: function printHex(alpha) {\n            var hex = this.hex;\n            return alpha ? hex : hex.substring(0, 7);\n        }\n\n\n\n    }, {\n        key: 'rgba',\n        get: function get$$1() {\n            if (this._rgba) {\n                return this._rgba;\n            }\n            if (!this._hsla) {\n                throw new Error('No color is set');\n            }\n\n            return this._rgba = Color.hslToRgb(this._hsla);\n        },\n        set: function set$$1(rgb) {\n            if (rgb.length === 3) {\n                rgb[3] = 1;\n            }\n\n            this._rgba = rgb;\n            this._hsla = null;\n        }\n    }, {\n        key: 'rgbString',\n        get: function get$$1() {\n            return this.printRGB();\n        }\n    }, {\n        key: 'rgbaString',\n        get: function get$$1() {\n            return this.printRGB(true);\n        }\n\n\n    }, {\n        key: 'hsla',\n        get: function get$$1() {\n            if (this._hsla) {\n                return this._hsla;\n            }\n            if (!this._rgba) {\n                throw new Error('No color is set');\n            }\n\n            return this._hsla = Color.rgbToHsl(this._rgba);\n        },\n        set: function set$$1(hsl) {\n            if (hsl.length === 3) {\n                hsl[3] = 1;\n            }\n\n            this._hsla = hsl;\n            this._rgba = null;\n        }\n    }, {\n        key: 'hslString',\n        get: function get$$1() {\n            return this.printHSL();\n        }\n    }, {\n        key: 'hslaString',\n        get: function get$$1() {\n            return this.printHSL(true);\n        }\n\n\n    }, {\n        key: 'hex',\n        get: function get$$1() {\n            var rgb = this.rgba,\n                hex = rgb.map(function (x, i) {\n                return i < 3 ? x.toString(16) : Math.round(x * 255).toString(16);\n            });\n\n            return '#' + hex.map(function (x) {\n                return x.padStart(2, '0');\n            }).join('');\n        },\n        set: function set$$1(hex) {\n            this.rgba = Color.hexToRgb(hex);\n        }\n    }], [{\n        key: 'hexToRgb',\n        value: function hexToRgb(input) {\n            var hex = (input.startsWith('#') ? input.slice(1) : input).replace(/^(\\w{3})$/, '$1F') \n            .replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4') \n            .replace(/^(\\w{6})$/, '$1FF'); \n\n            if (!hex.match(/^([0-9a-fA-F]{8})$/)) {\n                throw new Error('Unknown hex color; ' + input);\n            }\n\n            var rgba = hex.match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1) \n            .map(function (x) {\n                return parseInt(x, 16);\n            }); \n\n            rgba[3] = rgba[3] / 255;\n            return rgba;\n        }\n\n\n    }, {\n        key: 'nameToRgb',\n        value: function nameToRgb(input) {\n\n\n            var hash = input.toLowerCase().replace('at', 'T').replace(/[aeiouyldf]/g, '').replace('ght', 'L').replace('rk', 'D').slice(-5, 4),\n                hex = colorNames[hash];\n            return hex === undefined ? hex : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\n        }\n\n\n    }, {\n        key: 'rgbToHsl',\n        value: function rgbToHsl(_ref) {\n            var _ref2 = slicedToArray(_ref, 4),\n                r = _ref2[0],\n                g = _ref2[1],\n                b = _ref2[2],\n                a = _ref2[3];\n\n            r /= 255;\n            g /= 255;\n            b /= 255;\n\n            var max = Math.max(r, g, b),\n                min = Math.min(r, g, b);\n            var h = void 0,\n                s = void 0,\n                l = (max + min) / 2;\n\n            if (max === min) {\n                h = s = 0; \n            } else {\n                var d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch (max) {\n                    case r:\n                        h = (g - b) / d + (g < b ? 6 : 0);break;\n                    case g:\n                        h = (b - r) / d + 2;break;\n                    case b:\n                        h = (r - g) / d + 4;break;\n                }\n\n                h /= 6;\n            }\n\n            return [h, s, l, a];\n        }\n\n\n    }, {\n        key: 'hslToRgb',\n        value: function hslToRgb(_ref3) {\n            var _ref4 = slicedToArray(_ref3, 4),\n                h = _ref4[0],\n                s = _ref4[1],\n                l = _ref4[2],\n                a = _ref4[3];\n\n            var r = void 0,\n                g = void 0,\n                b = void 0;\n\n            if (s === 0) {\n                r = g = b = l; \n            } else {\n                var hue2rgb = function hue2rgb(p, q, t) {\n                    if (t < 0) t += 1;\n                    if (t > 1) t -= 1;\n                    if (t < 1 / 6) return p + (q - p) * 6 * t;\n                    if (t < 1 / 2) return q;\n                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                    return p;\n                };\n\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s,\n                    p = 2 * l - q;\n\n                r = hue2rgb(p, q, h + 1 / 3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1 / 3);\n            }\n\n            var rgba = [r * 255, g * 255, b * 255].map(Math.round);\n            rgba[3] = a;\n\n            return rgba;\n        }\n    }]);\n    return Color;\n}();\n\nreturn Color;\n\n})));\n","'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword\n};\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    if (definition.macro && definition.valid !== undefined)\n      throw new Error('\"valid\" option cannot be used with macro keywords');\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      var i, len = dataType.length;\n      for (i=0; i<len; i++) checkDataType(dataType[i]);\n      for (i=0; i<len; i++) _addRule(keyword, dataType[i], definition);\n    } else {\n      if (dataType) checkDataType(dataType);\n      _addRule(keyword, dataType, definition);\n    }\n\n    var $data = definition.$data === true && this._opts.$data;\n    if ($data && !definition.validate)\n      throw new Error('$data support: \"validate\" function is not defined');\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if ($data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n\n  function checkDataType(dataType) {\n    if (!RULES.types[dataType]) throw new Error('Unknown type ' + dataType);\n  }\n\n  return this;\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\n"],"sourceRoot":""}